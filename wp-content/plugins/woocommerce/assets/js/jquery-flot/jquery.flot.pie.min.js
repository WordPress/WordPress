!function(k){var A={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,s){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+s.color+";'>"+e+"<br/>"+Math.round(s.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};k.plot.plugins.push({init:function(p){var r,h=null,g=null,c=null,d=null,a=!1,u=null,f=[];function b(e){var s;0<A.series.pie.innerRadius&&(e.save(),s=1<A.series.pie.innerRadius?A.series.pie.innerRadius:g*A.series.pie.innerRadius,e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=A.series.pie.stroke.color,e.arc(0,0,s,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),e.save(),e.beginPath(),e.strokeStyle=A.series.pie.stroke.color,e.arc(0,0,s,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore())}function v(e,s){for(var i,t,r=p.getData(),a=p.getOptions(),l=1<a.series.pie.radius?a.series.pie.radius:g*a.series.pie.radius,o=0;o<r.length;++o){var n=r[o];if(n.pie.show){if(u.save(),u.beginPath(),u.moveTo(0,0),u.arc(0,0,l,n.startAngle,n.startAngle+n.angle/2,!1),u.arc(0,0,l,n.startAngle+n.angle/2,n.startAngle+n.angle,!1),u.closePath(),i=e-c,t=s-d,u.isPointInPath){if(u.isPointInPath(e-c,s-d))return u.restore(),{datapoint:[n.percent,n.data],dataIndex:0,series:n,seriesIndex:o}}else if(function(e,s){for(var i=!1,t=-1,r=e.length,a=r-1;++t<r;a=t)(e[t][1]<=s[1]&&s[1]<e[a][1]||e[a][1]<=s[1]&&s[1]<e[t][1])&&s[0]<(e[a][0]-e[t][0])*(s[1]-e[t][1])/(e[a][1]-e[t][1])+e[t][0]&&(i=!i);return i}([[0,0],[l*Math.cos(n.startAngle),l*Math.sin(n.startAngle)],[l*Math.cos(n.startAngle+n.angle/4),l*Math.sin(n.startAngle+n.angle/4)],[l*Math.cos(n.startAngle+n.angle/2),l*Math.sin(n.startAngle+n.angle/2)],[l*Math.cos(n.startAngle+n.angle/1.5),l*Math.sin(n.startAngle+n.angle/1.5)],[l*Math.cos(n.startAngle+n.angle),l*Math.sin(n.startAngle+n.angle)]],[i,t]))return u.restore(),{datapoint:[n.percent,n.data],dataIndex:0,series:n,seriesIndex:o};u.restore()}}return null}function i(e){s("plothover",e)}function t(e){s("plotclick",e)}function s(e,s){var i,t,r=p.offset(),a=v(parseInt(s.pageX-r.left),parseInt(s.pageY-r.top));if(A.grid.autoHighlight)for(var l=0;l<f.length;++l){var o,n=f[l];n.auto!=e||a&&n.series==a.series||(o=o=void 0,null==(o=n.series)&&(f=[],p.triggerRedrawOverlay()),-1!=(o=w(o))&&(f.splice(o,1),p.triggerRedrawOverlay()))}a&&(r=a.series,i=e,-1==(t=w(r))?(f.push({series:r,auto:i}),p.triggerRedrawOverlay()):i||(f[t].auto=!1));r={pageX:s.pageX,pageY:s.pageY};h.trigger(e,[r,a])}function w(e){for(var s=0;s<f.length;++s)if(f[s].series==e)return s;return-1}p.hooks.processOptions.push(function(e,s){s.series.pie.show&&(s.grid.show=!1,"auto"==s.series.pie.label.show&&(s.legend.show?s.series.pie.label.show=!1:s.series.pie.label.show=!0),"auto"==s.series.pie.radius&&(s.series.pie.label.show?s.series.pie.radius=.75:s.series.pie.radius=1),1<s.series.pie.tilt?s.series.pie.tilt=1:s.series.pie.tilt<0&&(s.series.pie.tilt=0))}),p.hooks.bindEvents.push(function(e,s){e=e.getOptions();e.series.pie.show&&(e.grid.hoverable&&s.off("mousemove").on("mousemove",i),e.grid.clickable&&s.off("click").on("click",t))}),p.hooks.processDatapoints.push(function(e,s,i,t){e.getOptions().series.pie.show&&(e=e,a||(a=!0,r=e.getCanvas(),h=k(r).parent(),A=e.getOptions(),e.setData(function(e){for(var s=0,i=0,t=0,r=A.series.pie.combine.color,a=[],l=0;l<e.length;++l){var o=e[l].data;Array.isArray(o)&&1==o.length&&(o=o[0]),Array.isArray(o)?!isNaN(parseFloat(o[1]))&&isFinite(o[1])?o[1]=+o[1]:o[1]=0:o=!isNaN(parseFloat(o))&&isFinite(o)?[1,+o]:[1,0],e[l].data=[o]}for(l=0;l<e.length;++l)s+=e[l].data[0][1];for(l=0;l<e.length;++l)(o=e[l].data[0][1])/s<=A.series.pie.combine.threshold&&(i+=o,t++,r=r||e[l].color);for(l=0;l<e.length;++l){o=e[l].data[0][1];(t<2||o/s>A.series.pie.combine.threshold)&&a.push({data:[[1,o]],color:e[l].color,label:e[l].label,angle:o*Math.PI*2/s,percent:o/(s/100)})}1<t&&a.push({data:[[1,i]],color:r,label:A.series.pie.combine.label,angle:i*Math.PI*2/s,percent:i/(s/100)});return a}(e.getData()))))}),p.hooks.drawOverlay.push(function(e,s){if(e.getOptions().series.pie.show){var i=s,t=e.getOptions(),r=1<t.series.pie.radius?t.series.pie.radius:g*t.series.pie.radius;i.save(),i.translate(c,d),i.scale(1,t.series.pie.tilt);for(var a=0;a<f.length;++a){l=void 0;var l=f[a].series;l.angle<=0||isNaN(l.angle)||(i.fillStyle="rgba(255, 255, 255, "+t.series.pie.highlight.opacity+")",i.beginPath(),1e-9<Math.abs(l.angle-2*Math.PI)&&i.moveTo(0,0),i.arc(0,0,r,l.startAngle,l.startAngle+l.angle/2,!1),i.arc(0,0,r,l.startAngle+l.angle/2,l.startAngle+l.angle,!1),i.closePath(),i.fill())}b(i),i.restore()}}),p.hooks.draw.push(function(e,s){if(e.getOptions().series.pie.show){if(h){for(var l=e.getPlaceholder().width(),o=e.getPlaceholder().height(),i=h.children().filter(".legend").children().width()||0,n=(u=s,a=!1,g=Math.min(l,o/A.series.pie.tilt)/2,d=o/2+A.series.pie.offset.top,c=l/2,"auto"==A.series.pie.offset.left?A.legend.position.match("w")?c+=i/2:c-=i/2:c+=A.series.pie.offset.left,c<g?c=g:l-g<c&&(c=l-g),e.getData()),t=0;0<t&&(g*=.95),t+=1,r(),A.series.pie.tilt<=.8&&function(){var e=A.series.pie.shadow.left,s=A.series.pie.shadow.top,i=A.series.pie.shadow.alpha,t=1<A.series.pie.radius?A.series.pie.radius:g*A.series.pie.radius;if(!(l/2-e<=t||t*A.series.pie.tilt>=o/2-s||t<=10)){u.save(),u.translate(e,s),u.globalAlpha=i,u.fillStyle="#000",u.translate(c,d),u.scale(1,A.series.pie.tilt);for(var r=1;r<=10;r++)u.beginPath(),u.arc(0,0,t,0,2*Math.PI,!1),u.fill(),t-=r;u.restore()}}(),!function(){for(var i=Math.PI*A.series.pie.startAngle,t=1<A.series.pie.radius?A.series.pie.radius:g*A.series.pie.radius,r=(u.save(),u.translate(c,d),u.scale(1,A.series.pie.tilt),u.save(),i),e=0;e<n.length;++e)n[e].startAngle=r,s(n[e].angle,n[e].color,!0);if(u.restore(),0<A.series.pie.stroke.width){u.save(),u.lineWidth=A.series.pie.stroke.width,r=i;for(e=0;e<n.length;++e)s(n[e].angle,A.series.pie.stroke.color,!1);u.restore()}return b(u),u.restore(),!A.series.pie.label.show||function(){for(var e=i,a=1<A.series.pie.label.radius?A.series.pie.label.radius:g*A.series.pie.label.radius,s=0;s<n.length;++s){if(n[s].percent>=100*A.series.pie.label.threshold&&!function(e,s,i){if(0!=e.data[0][1]){var t=A.legend.labelFormatter,r=A.series.pie.label.formatter,r=(t=t?t(e.label,e):e.label,r&&(t=r(t,e)),(s+e.angle+s)/2),s=c+Math.round(Math.cos(r)*a),r=d+Math.round(Math.sin(r)*a)*A.series.pie.tilt,t="<span class='pieLabel' id='pieLabel"+i+"' style='position:absolute;top:"+r+"px;left:"+s+"px;'>"+t+"</span>",t=(h.append(t),h.children("#pieLabel"+i)),i=r-t.height()/2,r=s-t.width()/2;if(t.css("top",i),t.css("left",r),0<0-i||0<0-r||o-(i+t.height())<0||l-(r+t.width())<0)return;0!=A.series.pie.label.background.opacity&&(null==(s=A.series.pie.label.background.color)&&(s=e.color),e="top:"+i+"px;left:"+r+"px;",k("<div class='pieLabelBackground' style='position:absolute;width:"+t.width()+"px;height:"+t.height()+"px;"+e+"background-color:"+s+";'></div>").css("opacity",A.series.pie.label.background.opacity).insertBefore(t))}return 1}(n[s],e,s))return;e+=n[s].angle}return 1}();function s(e,s,i){e<=0||isNaN(e)||(i?u.fillStyle=s:(u.strokeStyle=s,u.lineJoin="round"),u.beginPath(),1e-9<Math.abs(e-2*Math.PI)&&u.moveTo(0,0),u.arc(0,0,t,r,r+e/2,!1),u.arc(0,0,t,r+e/2,r+e,!1),u.closePath(),r+=e,i?u.fill():u.stroke())}}()&&t<10;);10<=t&&(r(),h.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")),e.setSeries&&e.insertLegend&&(e.setSeries(n),e.insertLegend())}function r(){u.clearRect(0,0,l,o),h.children().filter(".pieLabel, .pieLabelBackground").remove()}}})},options:A,name:"pie",version:"1.1"})}(jQuery);
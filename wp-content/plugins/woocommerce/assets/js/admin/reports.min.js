jQuery(function(a){function b(a,b,c){jQuery('<div class="chart-tooltip">'+c+"</div>").css({top:b-16,left:a+20}).appendTo("body").fadeIn(200)}var c=null,d=null;jQuery(".chart-placeholder").bind("plothover",function(a,e,f){if(f){if((c!=f.dataIndex||d!=f.seriesIndex)&&(c=f.dataIndex,d=f.seriesIndex,jQuery(".chart-tooltip").remove(),f.series.points.show||f.series.enable_tooltip)){var g=f.series.data[f.dataIndex][1];tooltip_content="",f.series.prepend_label&&(tooltip_content=tooltip_content+f.series.label+": "),f.series.prepend_tooltip&&(tooltip_content+=f.series.prepend_tooltip),tooltip_content+=g,f.series.append_tooltip&&(tooltip_content+=f.series.append_tooltip),f.series.pie.show?b(e.pageX,e.pageY,tooltip_content):b(f.pageX,f.pageY,tooltip_content)}}else jQuery(".chart-tooltip").remove(),c=null}),a(".wc_sparkline.bars").each(function(){{var b=a(this).data("sparkline"),c={grid:{show:!1}},d=[{data:b,color:a(this).data("color"),bars:{fillColor:a(this).data("color"),fill:!0,show:!0,lineWidth:1,barWidth:a(this).data("barwidth"),align:"center"},shadowSize:0}];a.plot(a(this),d,c)}}),a(".wc_sparkline.lines").each(function(){{var b=a(this).data("sparkline"),c={grid:{show:!1}},d=[{data:b,color:a(this).data("color"),lines:{fill:!1,show:!0,lineWidth:1,align:"center"},shadowSize:0}];a.plot(a(this),d,c)}});var e=jQuery(".range_datepicker").datepicker({changeMonth:!0,changeYear:!0,defaultDate:"",dateFormat:"yy-mm-dd",numberOfMonths:1,maxDate:"+0D",showButtonPanel:!0,showOn:"focus",buttonImageOnly:!0,onSelect:function(a){var b=jQuery(this).is(".from")?"minDate":"maxDate",c=jQuery(this).data("datepicker"),d=jQuery.datepicker.parseDate(c.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,a,c.settings);e.not(this).datepicker("option",b,d)}});a(".export_csv").click(function(){var b=a(this).data("exclude_series")||"";b=b.toString(),b=b.split(",");var c=a(this).data("xaxes"),d=a(this).data("groupby"),e=a(this).data("export"),f="data:application/csv;charset=utf-8,";if("table"==e)a(this).closest("div").find("thead tr,tbody tr").each(function(){a(this).find("th,td").each(function(){value=a(this).text(),value=value.replace("[?]",""),f+='"'+value+'",'}),f=f.substring(0,f.length-1),f+="\n"}),a(this).closest("div").find("tfoot tr").each(function(){a(this).find("th,td").each(function(){if(value=a(this).text(),value=value.replace("[?]",""),f+='"'+value+'",',a(this).attr("colspan")>0)for(m=1;m<a(this).attr("colspan");m++)f+='"",'}),f=f.substring(0,f.length-1),f+="\n"});else{if(!window.main_chart)return!1;var g=window.main_chart.getData(),h=[];f+=c+",",a.each(g,function(c,d){b&&-1!=a.inArray(c.toString(),b)||h.push(d)});for(var i=0;i<h.length;++i)f+=h[i].label+",";f=f.substring(0,f.length-1),f+="\n";for(var j={},i=0;i<h.length;++i)for(var k=h[i].data,l=0;l<k.length;++l){j[k[l][0]]=new Array;for(var m=0;m<h.length;++m)j[k[l][0]].push(0)}for(var i=0;i<h.length;++i)for(var k=h[i].data,l=0;l<k.length;++l)j[k[l][0]][i]=k[l][1];a.each(j,function(a,b){var c=new Date(parseInt(a));f+="day"==d?c.getFullYear()+"-"+parseInt(c.getMonth()+1)+"-"+c.getDate()+",":c.getFullYear()+"-"+parseInt(c.getMonth()+1)+",";for(var e=0;e<b.length;++e)val=b[e],Math.round(val)!=val&&(val=val.toFixed(2)),f+=val+",";f=f.substring(0,f.length-1),f+="\n"})}return a(this).attr("href",encodeURI(f)),!0})});
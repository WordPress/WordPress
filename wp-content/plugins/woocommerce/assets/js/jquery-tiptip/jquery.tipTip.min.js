!function(O){O.fn.tipTip=function(t){var g,b,M,w=O.extend({activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},exit:function(){}},t);return O("#tiptip_holder").length<=0?(g=O('<div id="tiptip_holder" style="max-width:'+w.maxWidth+';"></div>'),b=O('<div id="tiptip_content"></div>'),M=O('<div id="tiptip_arrow"></div>'),O("body").append(g.html(b).prepend(M.html('<div id="tiptip_arrow_inner"></div>')))):(g=O("#tiptip_holder"),b=O("#tiptip_content"),M=O("#tiptip_arrow")),this.each(function(){var _,m,v=O(this);function t(){var t,e,o,n,i,r,a,f,d,u,p,s,l,c,h="function"==typeof w.content?w.content():_;h&&(w.enter.call(this),b.html(h),g.hide().css("margin","0"),g.removeAttr("class"),M.removeAttr("style"),h=parseInt(v.offset().top),t=parseInt(v.offset().left),l=parseInt(v.outerWidth()),e=parseInt(v.outerHeight()),o=g.outerWidth(),n=g.outerHeight(),i=Math.round((l-o)/2),r=Math.round((e-n)/2),a=Math.round(t+i),f=Math.round(h+e+w.edgeOffset),u=d="",p=Math.round(o-12)/2,"bottom"==w.defaultPosition?d="_bottom":"top"==w.defaultPosition?d="_top":"left"==w.defaultPosition?d="_left":"right"==w.defaultPosition&&(d="_right"),s=i+t<parseInt(O(window).scrollLeft()),c=o+t>parseInt(O(window).width()),s&&i<0||"_right"==d&&!c||"_left"==d&&t<o+w.edgeOffset+5?(d="_right",u=Math.round(n-13)/2,p=-12,a=Math.round(t+l+w.edgeOffset),f=Math.round(h+r)):(c&&i<0||"_left"==d&&!s)&&(d="_left",u=Math.round(n-13)/2,p=Math.round(o),a=Math.round(t-(o+w.edgeOffset+5)),f=Math.round(h+r)),l=h+e+w.edgeOffset+n+8>parseInt(O(window).height()+O(window).scrollTop()),c=h+e-(w.edgeOffset+n+8)<0,l||"_bottom"==d&&l||"_top"==d&&!c?("_top"==d||"_bottom"==d?d="_top":d+="_top",u=n,f=Math.round(h-(n+5+w.edgeOffset))):(c|("_top"==d&&c)||"_bottom"==d&&!l)&&("_top"==d||"_bottom"==d?d="_bottom":d+="_bottom",u=-12,f=Math.round(h+e+w.edgeOffset)),"_right_top"==d||"_left_top"==d?f+=5:"_right_bottom"!=d&&"_left_bottom"!=d||(f-=5),"_left_top"!=d&&"_left_bottom"!=d||(a+=5),M.css({"margin-left":p+"px","margin-top":u+"px"}),g.css({"margin-left":a+"px","margin-top":f+"px"}).attr("class","tip"+d),m&&clearTimeout(m),m=setTimeout(function(){g.stop(!0,!0).fadeIn(w.fadeIn)},w.delay))}function e(){w.exit.call(this),m&&clearTimeout(m),g.fadeOut(w.fadeOut)}""!=(_=w.content||v.attr(w.attribute))&&(w.content||v.removeAttr(w.attribute),m=!1,"hover"==w.activation?(v.on("mouseenter",function(){t()}).on("mouseleave",function(){w.keepAlive&&g.is(":hover")||e()}),w.keepAlive&&g.on("mouseenter",function(){}).on("mouseleave",function(){e()})):"focus"==w.activation?v.on("focus",function(){t()}).on("blur",function(){e()}):"click"==w.activation&&(v.on("click",function(){return t(),!1}).on("mouseenter",function(){}).on("mouseleave",function(){w.keepAlive||e()}),w.keepAlive&&g.on("mouseenter",function(){}).on("mouseleave",function(){e()})))})}}(jQuery);
(()=>{"use strict";var t={n:s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return t.d(e,{a:e}),e},d:(s,e)=>{for(var o in e)t.o(e,o)&&!t.o(s,o)&&Object.defineProperty(s,o,{enumerable:!0,get:e[o]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s)};const s=window.wp.blockEditor,e=window.wp.blocks,o=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"version":"22.7","name":"yoast/how-to-block","title":"Yoast How-to","description":"Create a How-to guide in an SEO-friendly way. You can only use one How-to block per post.","category":"yoast-structured-data-blocks","icon":"editor-ol","keywords":["How-to","How to","Schema","SEO","Structured Data"],"supports":{"multiple":false},"textdomain":"wordpress-seo","attributes":{"hasDuration":{"type":"boolean"},"days":{"type":"string"},"hours":{"type":"string"},"minutes":{"type":"string"},"description":{"type":"string","source":"html","selector":".schema-how-to-description"},"jsonDescription":{"type":"string"},"steps":{"type":"array"},"additionalListCssClasses":{"type":"string"},"unorderedList":{"type":"boolean"},"durationText":{"type":"string"},"defaultDurationText":{"type":"string"}},"example":{"attributes":{"steps":[{"id":"how-to-step-example-1","name":[],"text":[]},{"id":"how-to-step-example-2","name":[],"text":[]}]}},"editorScript":"yoast-seo-how-to-block","editorStyle":"yoast-seo-structured-data-blocks"}'),i=window.yoast.propTypes;var n=t.n(i);const r=window.yoast.styledComponents;var a=t.n(r);const h=window.wp.i18n,p=window.wp.a11y,d=window.lodash,c=window.wp.element,u=window.ReactJSXRuntime,l=function(t){return class extends c.Component{render(){return(0,u.jsxs)(c.Fragment,{children:[(0,u.jsx)(t,{...this.props})," "]})}}},m=window.wp.isShallowEqual,w=window.wp.components,x=l(s.RichText.Content);class g extends c.Component{constructor(t){super(t),this.onSelectImage=this.onSelectImage.bind(this),this.onInsertStep=this.onInsertStep.bind(this),this.onRemoveStep=this.onRemoveStep.bind(this),this.onMoveStepUp=this.onMoveStepUp.bind(this),this.onMoveStepDown=this.onMoveStepDown.bind(this),this.onFocusText=this.onFocusText.bind(this),this.onFocusTitle=this.onFocusTitle.bind(this),this.onChangeTitle=this.onChangeTitle.bind(this),this.onChangeText=this.onChangeText.bind(this)}onInsertStep(){this.props.insertStep(this.props.index)}onRemoveStep(){this.props.removeStep(this.props.index)}onMoveStepUp(){this.props.isFirst||this.props.onMoveUp(this.props.index)}onMoveStepDown(){this.props.isLast||this.props.onMoveDown(this.props.index)}onFocusTitle(){this.props.onFocus(this.props.index,"name")}onFocusText(){this.props.onFocus(this.props.index,"text")}onChangeTitle(t){const{onChange:s,index:e,step:{text:o,name:i}}=this.props;s(t,o,i,o,e)}onChangeText(t){const{onChange:s,index:e,step:{text:o,name:i}}=this.props;s(i,t,i,o,e)}getMediaUploadButton(t){return(0,u.jsx)(w.Button,{className:"schema-how-to-step-button how-to-step-add-media",icon:"insert",onClick:t.open,children:(0,h.__)("Add image","wordpress-seo")})}getButtons(){const{step:t}=this.props;return(0,u.jsxs)("div",{className:"schema-how-to-step-button-container",children:[!g.getImageSrc(t.text)&&(0,u.jsx)(s.MediaUpload,{onSelect:this.onSelectImage,allowedTypes:["image"],value:t.id,render:this.getMediaUploadButton}),(0,u.jsx)(w.Button,{className:"schema-how-to-step-button",icon:"trash",label:(0,h.__)("Delete step","wordpress-seo"),onClick:this.onRemoveStep}),(0,u.jsx)(w.Button,{className:"schema-how-to-step-button",icon:"insert",label:(0,h.__)("Insert step","wordpress-seo"),onClick:this.onInsertStep})]})}getMover(){return(0,u.jsxs)("div",{className:"schema-how-to-step-mover",children:[(0,u.jsx)(w.Button,{className:"editor-block-mover__control",onClick:this.onMoveStepUp,icon:"arrow-up-alt2",label:(0,h.__)("Move step up","wordpress-seo"),"aria-disabled":this.props.isFirst}),(0,u.jsx)(w.Button,{className:"editor-block-mover__control",onClick:this.onMoveStepDown,icon:"arrow-down-alt2",label:(0,h.__)("Move step down","wordpress-seo"),"aria-disabled":this.props.isLast})]})}onSelectImage(t){const{index:s,step:{name:e,text:o}}=this.props;let i=o.slice();const n=(0,u.jsx)("img",{className:`wp-image-${t.id}`,alt:t.alt,src:t.url,style:"max-width:100%;"});i.push?i.push(n):i=[i,n],this.props.onChange(e,i,e,o,s)}static getImageSrc(t){if(!t||!t.filter)return!1;const s=t.filter((t=>t&&t.type&&"img"===t.type))[0];return!!s&&s.props.src}shouldComponentUpdate(t){return!(0,m.isShallowEqualObjects)(t,this.props)}static Content(t){return(0,u.jsxs)("li",{className:"schema-how-to-step",id:t.id,children:[(0,u.jsx)(x,{tagName:"strong",className:"schema-how-to-step-name",value:t.name},t.id+"-name"),(0,u.jsx)(x,{tagName:"p",className:"schema-how-to-step-text",value:t.text},t.id+"-text")]},t.id)}render(){const{index:t,step:e,isSelected:o,isUnorderedList:i}=this.props,{id:n,name:r,text:a}=e;return(0,u.jsxs)("li",{className:"schema-how-to-step",children:[(0,u.jsx)("span",{className:"schema-how-to-step-number",children:i?"•":t+1+"."}),(0,u.jsx)(s.RichText,{identifier:`${n}-name`,className:"schema-how-to-step-name",tagName:"p",value:r,onChange:this.onChangeTitle,onFocus:this.onFocusTitle,unstableOnFocus:this.onFocusTitle,placeholder:(0,h.__)("Enter a step title","wordpress-seo"),allowedFormats:["core/italic","core/strikethrough","core/link","core/annotation"]},`${n}-name`),(0,u.jsx)(s.RichText,{identifier:`${n}-text`,className:"schema-how-to-step-text",tagName:"p",value:a,onChange:this.onChangeText,onFocus:this.onFocusText,unstableOnFocus:this.onFocusText,placeholder:(0,h.__)("Enter a step description","wordpress-seo")},`${n}-text`),o&&(0,u.jsxs)("div",{className:"schema-how-to-step-controls-container",children:[this.getMover(),this.getButtons()]})]},n)}}function b(t,s=0){return parseInt(t,10)||s}g.propTypes={index:n().number.isRequired,step:n().object.isRequired,onChange:n().func.isRequired,insertStep:n().func.isRequired,removeStep:n().func.isRequired,onFocus:n().func.isRequired,onMoveUp:n().func.isRequired,onMoveDown:n().func.isRequired,isSelected:n().bool.isRequired,isFirst:n().bool.isRequired,isLast:n().bool.isRequired,isUnorderedList:n().bool},g.defaultProps={isUnorderedList:!1};const S=window.React,f=l(s.RichText.Content),C=a()(w.TextControl)`
	&&& {
		margin-bottom: 32px;
	}
`;class j extends c.Component{constructor(t){super(t),this.state={focus:""},this.changeStep=this.changeStep.bind(this),this.insertStep=this.insertStep.bind(this),this.removeStep=this.removeStep.bind(this),this.swapSteps=this.swapSteps.bind(this),this.setFocus=this.setFocus.bind(this),this.addCSSClasses=this.addCSSClasses.bind(this),this.getListTypeHelp=this.getListTypeHelp.bind(this),this.toggleListType=this.toggleListType.bind(this),this.setDurationText=this.setDurationText.bind(this),this.setFocusToStep=this.setFocusToStep.bind(this),this.moveStepUp=this.moveStepUp.bind(this),this.moveStepDown=this.moveStepDown.bind(this),this.focusDescription=this.focusDescription.bind(this),this.addDuration=this.addDuration.bind(this),this.removeDuration=this.removeDuration.bind(this),this.onChangeDescription=this.onChangeDescription.bind(this),this.onChangeDays=this.onChangeDays.bind(this),this.onChangeHours=this.onChangeHours.bind(this),this.onChangeMinutes=this.onChangeMinutes.bind(this),this.onAddStepButtonClick=this.onAddStepButtonClick.bind(this),this.daysInput=(0,c.createRef)(),this.addDurationButton=(0,c.createRef)();const s=this.getDefaultDurationText();this.setDefaultDurationText(s)}getDefaultDurationText(){const t=(0,d.get)(window,"wp.hooks.applyFilters");let s=(0,h.__)("Time needed:","wordpress-seo");return t&&(s=t("wpseo_duration_text",s)),s}setDurationText(t){this.props.setAttributes({durationText:t})}setDefaultDurationText(t){this.props.setAttributes({defaultDurationText:t})}onAddStepButtonClick(){this.insertStep(null,[],[],!1)}static generateId(t){return`${t}-${(new Date).getTime()}`}changeStep(t,s,e,o,i){const n=this.props.attributes.steps?this.props.attributes.steps.slice():[];if(i>=n.length)return;if(n[i].name!==e||n[i].text!==o)return;n[i]={id:n[i].id,name:t,text:s,jsonName:(0,c.renderToString)(t),jsonText:(0,c.renderToString)(s)};const r=g.getImageSrc(s);r&&(n[i].jsonImageSrc=r),this.props.setAttributes({steps:n})}insertStep(t=null,s=[],e=[],o=!0){const i=this.props.attributes.steps?this.props.attributes.steps.slice():[];null===t&&(t=i.length-1),i.splice(t+1,0,{id:j.generateId("how-to-step"),name:s,text:e,jsonName:"",jsonText:""}),this.props.setAttributes({steps:i}),o?setTimeout(this.setFocus.bind(this,`${t+1}:name`)):(0,p.speak)((0,h.__)("New step added","wordpress-seo"))}swapSteps(t,s){const e=this.props.attributes.steps?this.props.attributes.steps.slice():[],o=e[t];e[t]=e[s],e[s]=o,this.props.setAttributes({steps:e});const[i,n]=this.state.focus.split(":");i===`${t}`&&this.setFocus(`${s}:${n}`),i===`${s}`&&this.setFocus(`${t}:${n}`)}removeStep(t){const s=this.props.attributes.steps?this.props.attributes.steps.slice():[];s.splice(t,1),this.props.setAttributes({steps:s});let e="description";s[t]?e=`${t}:name`:s[t-1]&&(e=t-1+":text"),this.setFocus(e)}setFocus(t){t!==this.state.focus&&this.setState({focus:t})}setFocusToStep(t,s){this.setFocus(`${t}:${s}`)}moveStepUp(t){this.swapSteps(t,t-1)}moveStepDown(t){this.swapSteps(t,t+1)}getSteps(){if(!this.props.attributes.steps)return null;const[t]=this.state.focus.split(":");return this.props.attributes.steps.map(((s,e)=>(0,u.jsx)(g,{step:s,index:e,onChange:this.changeStep,insertStep:this.insertStep,removeStep:this.removeStep,onFocus:this.setFocusToStep,onMoveUp:this.moveStepUp,onMoveDown:this.moveStepDown,isFirst:0===e,isLast:e===this.props.attributes.steps.length-1,isSelected:t===`${e}`,isUnorderedList:this.props.attributes.unorderedList},s.id)))}formatDuration(t,s=null){if(""===t)return"";const e=t.replace(/^[0]+/,"");return""===e?0:null!==s?Math.min(Math.max(0,parseInt(e,10)),s):Math.max(0,parseInt(e,10))}static getStepsContent(t){return t?t.map((t=>(0,S.createElement)(g.Content,{...t,key:t.id}))):null}static Content(t){const{steps:s,hasDuration:e,days:o,hours:i,minutes:n,description:r,unorderedList:a,additionalListCssClasses:p,className:d,durationText:c,defaultDurationText:l}=t,m=["schema-how-to",d].filter((t=>t)).join(" "),w=["schema-how-to-steps",p].filter((t=>t)).join(" "),x=function(t){const s=function({days:t,hours:s,minutes:e}){const o=[];return 0!==t&&o.push((0,h.sprintf)(/* translators: %d expands to the number of days. */
(0,h._n)("%d day","%d days",t,"wordpress-seo"),t)),0!==s&&o.push((0,h.sprintf)(/* translators: %d expands to the number of hours. */
(0,h._n)("%d hour","%d hours",s,"wordpress-seo"),s)),0!==e&&o.push((0,h.sprintf)(/* translators: %d expands to the number of minutes. */
(0,h._n)("%d minute","%d minutes",e,"wordpress-seo"),e)),o}({days:b(t.days),hours:b(t.hours),minutes:b(t.minutes)});return 1===s.length?s[0]:2===s.length?(0,h.sprintf)(/* translators: %1$s and %2$s expand to units of time (e.g. 1 day). */
(0,h.__)("%1$s and %2$s","wordpress-seo"),...s):3===s.length?(0,h.sprintf)(/* translators: %1$s, %2$s and %3$s expand to units of time (e.g. 1 day). */
(0,h.__)("%1$s, %2$s and %3$s","wordpress-seo"),...s):""}({days:o,hours:i,minutes:n});return(0,u.jsxs)("div",{className:m,children:[e&&"string"==typeof x&&x.length>0&&(0,u.jsxs)("p",{className:"schema-how-to-total-time",children:[(0,u.jsxs)("span",{className:"schema-how-to-duration-time-text",children:[c||l," "]}),x+". "]}),(0,u.jsx)(f,{tagName:"p",className:"schema-how-to-description",value:r}),a?(0,u.jsx)("ul",{className:w,children:j.getStepsContent(s)}):(0,u.jsx)("ol",{className:w,children:j.getStepsContent(s)})]})}getAddStepButton(){return(0,u.jsx)(w.Button,{icon:"insert",onClick:this.onAddStepButtonClick,className:"schema-how-to-add-step",children:(0,h.__)("Add step","wordpress-seo")})}addCSSClasses(t){this.props.setAttributes({additionalListCssClasses:t})}toggleListType(t){this.props.setAttributes({unorderedList:t})}getListTypeHelp(t){return t?(0,h.__)("Showing step items as an unordered list","wordpress-seo"):(0,h.__)("Showing step items as an ordered list.","wordpress-seo")}focusDescription(){this.setFocus("description")}onChangeDescription(t){this.props.setAttributes({description:t,jsonDescription:(0,c.renderToString)(t)})}addDuration(){this.props.setAttributes({hasDuration:!0}),setTimeout((()=>this.daysInput.current.focus()))}removeDuration(){this.props.setAttributes({hasDuration:!1}),setTimeout((()=>{this.addDurationButton.current instanceof c.Component||this.addDurationButton.current.focus()}))}onChangeDays(t){const s=this.formatDuration(t.target.value);this.props.setAttributes({days:(0,d.toString)(s)})}onChangeHours(t){const s=this.formatDuration(t.target.value,23);this.props.setAttributes({hours:(0,d.toString)(s)})}onChangeMinutes(t){const s=this.formatDuration(t.target.value,59);this.props.setAttributes({minutes:(0,d.toString)(s)})}getDuration(){const{attributes:t}=this.props;return t.hasDuration?(0,u.jsx)("fieldset",{className:"schema-how-to-duration",children:(0,u.jsxs)("span",{className:"schema-how-to-duration-flex-container",role:"presentation",children:[(0,u.jsx)("legend",{className:"schema-how-to-duration-legend",children:t.durationText||this.getDefaultDurationText()}),(0,u.jsxs)("span",{className:"schema-how-to-duration-time-input",children:[(0,u.jsx)("label",{htmlFor:"schema-how-to-duration-days",className:"screen-reader-text",children:/* translators: Hidden accessibility text. */
(0,h.__)("days","wordpress-seo")}),(0,u.jsx)("input",{id:"schema-how-to-duration-days",className:"schema-how-to-duration-input",type:"number",value:t.days,onChange:this.onChangeDays,placeholder:"DD",ref:this.daysInput}),(0,u.jsx)("label",{htmlFor:"schema-how-to-duration-hours",className:"screen-reader-text",children:(0,h.__)("hours","wordpress-seo")}),(0,u.jsx)("input",{id:"schema-how-to-duration-hours",className:"schema-how-to-duration-input",type:"number",value:t.hours,onChange:this.onChangeHours,placeholder:"HH"}),(0,u.jsx)("span",{"aria-hidden":"true",children:":"}),(0,u.jsx)("label",{htmlFor:"schema-how-to-duration-minutes",className:"screen-reader-text",children:(0,h.__)("minutes","wordpress-seo")}),(0,u.jsx)("input",{id:"schema-how-to-duration-minutes",className:"schema-how-to-duration-input",type:"number",value:t.minutes,onChange:this.onChangeMinutes,placeholder:"MM"}),(0,u.jsx)(w.Button,{className:"schema-how-to-duration-delete-button",icon:"trash",label:(0,h.__)("Delete total time","wordpress-seo"),onClick:this.removeDuration})]})]})}):(0,u.jsx)(w.Button,{onClick:this.addDuration,className:"schema-how-to-duration-button",ref:this.addDurationButton,icon:"insert",children:(0,h.__)("Add total time","wordpress-seo")})}getSidebar(t,e,o){return o===this.getDefaultDurationText()&&(o=""),(0,u.jsx)(s.InspectorControls,{children:(0,u.jsxs)(w.PanelBody,{title:(0,h.__)("Settings","wordpress-seo"),className:"blocks-font-size",children:[(0,u.jsx)(C,{label:(0,h.__)("CSS class(es) to apply to the steps","wordpress-seo"),value:e,onChange:this.addCSSClasses,help:(0,h.__)("Optional. This can give you better control over the styling of the steps.","wordpress-seo")}),(0,u.jsx)(C,{label:(0,h.__)("Describe the duration of the instruction:","wordpress-seo"),value:o,onChange:this.setDurationText,help:(0,h.__)("Optional. Customize how you want to describe the duration of the instruction","wordpress-seo"),placeholder:this.getDefaultDurationText()}),(0,u.jsx)(w.ToggleControl,{label:(0,h.__)("Unordered list","wordpress-seo"),checked:t||!1,onChange:this.toggleListType,help:this.getListTypeHelp})]})})}render(){const{attributes:t,className:e}=this.props,o=["schema-how-to",e].filter((t=>t)).join(" "),i=["schema-how-to-steps",t.additionalListCssClasses].filter((t=>t)).join(" ");return(0,u.jsxs)("div",{className:o,children:[this.getDuration(),(0,u.jsx)(s.RichText,{identifier:"description",tagName:"p",className:"schema-how-to-description",value:t.description,onChange:this.onChangeDescription,onFocus:this.focusDescription,unstableOnFocus:this.focusDescription,placeholder:(0,h.__)("Enter a description","wordpress-seo")}),(0,u.jsx)("ul",{className:i,children:this.getSteps()}),(0,u.jsx)("div",{className:"schema-how-to-buttons",children:this.getAddStepButton()}),this.getSidebar(t.unorderedList,t.additionalListCssClasses,t.durationText)]})}}function y(t,s=0){return parseInt(t,10)||s}function v(t){const s=function({days:t,hours:s,minutes:e}){const o=[];return 0!==t&&o.push((0,h.sprintf)(/* translators: %d expands to the number of days. */
(0,h._n)("%d day","%d days",t,"wordpress-seo"),t)),0!==s&&o.push((0,h.sprintf)(/* translators: %d expands to the number of hours. */
(0,h._n)("%d hour","%d hours",s,"wordpress-seo"),s)),0!==e&&o.push((0,h.sprintf)(/* translators: %d expands to the number of minutes. */
(0,h._n)("%d minute","%d minutes",e,"wordpress-seo"),e)),o}({days:y(t.days),hours:y(t.hours),minutes:y(t.minutes)});return 1===s.length?s[0]:2===s.length?(0,h.sprintf)(/* translators: %1$s and %2$s expand to units of time (e.g. 1 day). */
(0,h.__)("%1$s and %2$s","wordpress-seo"),...s):3===s.length?(0,h.sprintf)(/* translators: %1$s, %2$s and %3$s expand to units of time (e.g. 1 day). */
(0,h.__)("%1$s, %2$s and %3$s","wordpress-seo"),...s):""}j.propTypes={attributes:n().object.isRequired,setAttributes:n().func.isRequired,className:n().string},j.defaultProps={className:""};const D=t=>(0,u.jsxs)("li",{className:"schema-how-to-step",children:[(0,u.jsx)("strong",{className:"schema-how-to-step-name",children:t.name},t.id+"-name")," ",(0,u.jsx)("p",{className:"schema-how-to-step-text",children:t.text},t.id+"-text")," "]},t.id);function T(t){let{steps:s}=t.attributes;const{hasDuration:e,days:o,hours:i,minutes:n,description:r,unorderedList:a,additionalListCssClasses:p,className:d}=t.attributes;s=s?s.map((t=>(0,S.createElement)(D,{...t,key:t.id}))):null;const c=["schema-how-to",d].filter((t=>t)).join(" "),l=["schema-how-to-steps",p].filter((t=>t)).join(" "),m=v({days:o,hours:i,minutes:n});return(0,u.jsxs)("div",{className:c,children:[e&&"string"==typeof m&&m.length>0&&(0,u.jsxs)("p",{className:"schema-how-to-total-time",children:[(0,h.__)("Time needed:","wordpress-seo")," ",m+". "]}),(0,u.jsx)("p",{className:"schema-how-to-description",children:r})," ",a?(0,u.jsx)("ul",{className:l,children:s}):(0,u.jsx)("ol",{className:l,children:s})]})}function _(t){return(0,u.jsxs)("li",{className:"schema-how-to-step",children:[(0,u.jsx)("strong",{className:"schema-how-to-step-name",children:t.name},t.id+"-name")," ",(0,u.jsx)("p",{className:"schema-how-to-step-text",children:t.text},t.id+"-text")," "]},t.id)}function N(t){const{steps:s,hasDuration:e,days:o,hours:i,minutes:n,description:r,unorderedList:a,additionalListCssClasses:h,className:p,durationText:d,defaultDurationText:c}=t.attributes,l=["schema-how-to",p].filter((t=>t)).join(" "),m=["schema-how-to-steps",h].filter((t=>t)).join(" "),w=v({days:o,hours:i,minutes:n});let x=[];return s&&(x=s.map((t=>(0,S.createElement)(_,{...t,key:t.id})))),(0,u.jsxs)("div",{className:l,children:[e&&"string"==typeof w&&w.length>0&&(0,u.jsxs)("p",{className:"schema-how-to-total-time",children:[(0,u.jsxs)("span",{className:"schema-how-to-duration-time-text",children:[d||c," "]}),w+". "]}),(0,u.jsx)("p",{className:"schema-how-to-description",children:r})," ",a?(0,u.jsx)("ul",{className:m,children:x}):(0,u.jsx)("ol",{className:m,children:x})]})}T.propTypes={attributes:n().object},N.propTypes={attributes:n().object.isRequired};const F={v8_2:T,v11_4:N};(0,e.registerBlockType)(o,{edit:({attributes:t,setAttributes:e,className:o})=>{const i=(0,s.useBlockProps)();return t.steps&&0!==t.steps.length||(t.steps=[{id:j.generateId("how-to-step"),name:[],text:[]}]),(0,u.jsx)("div",{...i,children:(0,u.jsx)(j,{attributes:t,setAttributes:e,className:o})})},save:({attributes:t})=>{const e=s.useBlockProps.save(t);return(0,u.jsx)(j.Content,{...e})},deprecated:[{attributes:o.attributes,save:F.v11_4},{attributes:o.attributes,save:F.v8_2}]})})();
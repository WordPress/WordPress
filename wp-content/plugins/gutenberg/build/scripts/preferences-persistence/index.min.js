var wp;(wp||={}).preferencesPersistence=(()=>{var C=Object.create;var P=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var L=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),R=(e,r)=>{for(var n in r)P(e,n,{get:r[n],enumerable:!0})},b=(e,r,n,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of O(r))!F.call(e,o)&&o!==n&&P(e,o,{get:()=>r[o],enumerable:!(t=k(r,o))||t.enumerable});return e};var B=(e,r,n)=>(n=e!=null?C(M(e)):{},b(r||!e||!e.__esModule?P(n,"default",{value:e,enumerable:!0}):n,e)),j=e=>b(P({},"__esModule",{value:!0}),e);var I=L((N,g)=>{g.exports=window.wp.apiFetch});var z={};R(z,{__unstableCreatePersistenceLayer:()=>$,create:()=>v});var h=B(I());function S(e,r){let n,t;return async function(...c){return!t&&!n?new Promise((s,p)=>{t=e(...c).then((...i)=>{s(...i)}).catch(i=>{p(i)}).finally(()=>{t=null})}):(t&&await t,n&&(clearTimeout(n),n=null),new Promise((s,p)=>{n=setTimeout(()=>{t=e(...c).then((...i)=>{s(...i)}).catch(i=>{p(i)}).finally(()=>{t=null,n=null})},r)}))}}var W={},E=window.localStorage;function v({preloadedData:e,localStorageRestoreKey:r="WP_PREFERENCES_RESTORE_DATA",requestDebounceMS:n=2500}={}){let t=e,o=S(h.default,n);async function c(){if(t)return t;let i=(await(0,h.default)({path:"/wp/v2/users/me?context=edit"}))?.meta?.persisted_preferences,l=JSON.parse(E.getItem(r)),f=Date.parse(i?._modified)||0,a=Date.parse(l?._modified)||0;return i&&f>=a?t=i:l?t=l:t=W,t}function s(p){let i={...p,_modified:new Date().toISOString()};t=i,E.setItem(r,JSON.stringify(i)),o({path:"/wp/v2/users/me",method:"PUT",keepalive:!0,data:{meta:{persisted_preferences:i}}}).catch(()=>{})}return{get:c,set:s}}function m(e,r){let n="core/preferences",t="core/interface",o=e?.[t]?.preferences?.features?.[r],c=e?.[r]?.preferences?.features,s=o||c;if(!s)return e;let p=e?.[n]?.preferences;if(p?.[r])return e;let i;if(o){let f=e?.[t],a=e?.[t]?.preferences?.features;i={[t]:{...f,preferences:{features:{...a,[r]:void 0}}}}}let l;if(c){let f=e?.[r],a=e?.[r]?.preferences;l={[r]:{...f,preferences:{...a,features:void 0}}}}return{...e,[n]:{preferences:{...p,[r]:s}},...i,...l}}function w(e){let r="core/interface",n="core/preferences",t=e?.[r]?.preferences?.features,o=t?Object.keys(t):[];return o?.length?o.reduce(function(c,s){if(s.startsWith("core"))return c;let p=t?.[s];if(!p||c?.[n]?.preferences?.[s])return c;let l=c?.[n]?.preferences,f=c?.[r],a=c?.[r]?.preferences?.features;return{...c,[n]:{preferences:{...l,[s]:p}},[r]:{...f,preferences:{features:{...a,[s]:void 0}}}}},e):e}var J=e=>e;function d(e,{from:r,to:n},t,o=J){let c="core/preferences",s=e?.[r]?.preferences?.[t];if(s===void 0||e?.[c]?.preferences?.[n]?.[t])return e;let i=e?.[c]?.preferences,l=e?.[c]?.preferences?.[n],f=e?.[r],a=e?.[r]?.preferences,u=o({[t]:s});return{...e,[c]:{preferences:{...i,[n]:{...l,...u}}},[r]:{...f,preferences:{...a,[t]:void 0}}}}function T(e){let r="core/interface",n="core/preferences",t=e?.[r]?.enableItems;if(!t)return e;let o=e?.[n]?.preferences??{},c=t?.singleEnableItems?.complementaryArea??{},s=Object.keys(c).reduce((f,a)=>{let u=c[a];return f?.[a]?.complementaryArea?f:{...f,[a]:{...f[a],complementaryArea:u}}},o),p=t?.multipleEnableItems?.pinnedItems??{},i=Object.keys(p).reduce((f,a)=>{let u=p[a];return f?.[a]?.pinnedItems?f:{...f,[a]:{...f[a],pinnedItems:u}}},s),l=e[r];return{...e,[n]:{preferences:i},[r]:{...l,enableItems:void 0}}}function D(e){let r=e?.panels??{};return Object.keys(r).reduce((n,t)=>{let o=r[t];return o?.enabled===!1&&n.inactivePanels.push(t),o?.opened===!0&&n.openPanels.push(t),n},{inactivePanels:[],openPanels:[]})}function U(e){let r=`WP_DATA_USER_${e}`,n=window.localStorage.getItem(r);return JSON.parse(n)}function V(e){if(e)return e=m(e,"core/edit-widgets"),e=m(e,"core/customize-widgets"),e=m(e,"core/edit-post"),e=m(e,"core/edit-site"),e=w(e),e=T(e),e=d(e,{from:"core/edit-post",to:"core/edit-post"},"hiddenBlockTypes"),e=d(e,{from:"core/edit-post",to:"core/edit-post"},"editorMode"),e=d(e,{from:"core/edit-post",to:"core/edit-post"},"panels",D),e=d(e,{from:"core/editor",to:"core"},"isPublishSidebarEnabled"),e=d(e,{from:"core/edit-post",to:"core"},"isPublishSidebarEnabled"),e=d(e,{from:"core/edit-site",to:"core/edit-site"},"editorMode"),e?.["core/preferences"]?.preferences}function _(e){let r=U(e);return V(r)}function x(e){return Object.keys(e).reduce((r,n)=>{let t=e[n];if(t?.complementaryArea){let o={...t};return delete o.complementaryArea,o.isComplementaryAreaVisible=!0,r[n]=o,r}return r},e)}function A(e){let r=e;return["allowRightClickOverrides","distractionFree","editorMode","fixedToolbar","focusMode","hiddenBlockTypes","inactivePanels","keepCaretInsideBlock","mostUsedBlocks","openPanels","showBlockBreadcrumbs","showIconLabels","showListViewByDefault","isPublishSidebarEnabled","isComplementaryAreaVisible","pinnedItems"].forEach(t=>{e?.["core/edit-post"]?.[t]!==void 0&&(r={...r,core:{...r?.core,[t]:e["core/edit-post"][t]}},delete r["core/edit-post"][t]),e?.["core/edit-site"]?.[t]!==void 0&&delete r["core/edit-site"][t]}),Object.keys(r?.["core/edit-post"]??{})?.length===0&&delete r["core/edit-post"],Object.keys(r?.["core/edit-site"]??{})?.length===0&&delete r["core/edit-site"],r}function y(e){let r=x(e);return r=A(r),r}function $(e,r){let n=`WP_PREFERENCES_USER_${r}`,t=JSON.parse(window.localStorage.getItem(n)),o=Date.parse(e&&e._modified)||0,c=Date.parse(t&&t._modified)||0,s;return e&&o>=c?s=y(e):t?s=y(t):s=_(r),v({preloadedData:s,localStorageRestoreKey:n})}return j(z);})();
//# sourceMappingURL=index.min.js.map

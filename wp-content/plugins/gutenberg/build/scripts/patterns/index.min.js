var wp;(wp||={}).patterns=(()=>{var Ca=Object.create;var _t=Object.defineProperty;var ka=Object.getOwnPropertyDescriptor;var xa=Object.getOwnPropertyNames;var Ta=Object.getPrototypeOf,Pa=Object.prototype.hasOwnProperty;var v=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports),Ut=(t,a)=>{for(var r in a)_t(t,r,{get:a[r],enumerable:!0})},ie=(t,a,r,f)=>{if(a&&typeof a=="object"||typeof a=="function")for(let s of xa(a))!Pa.call(t,s)&&s!==r&&_t(t,s,{get:()=>a[s],enumerable:!(f=ka(a,s))||f.enumerable});return t};var e=(t,a,r)=>(r=t!=null?Ca(Ta(t)):{},ie(a||!t||!t.__esModule?_t(r,"default",{value:t,enumerable:!0}):r,t)),Ea=t=>ie(_t({},"__esModule",{value:!0}),t);var T=v((Fa,me)=>{me.exports=window.wp.data});var yt=v((Ga,ne)=>{ne.exports=window.wp.blocks});var z=v((qa,pe)=>{pe.exports=window.wp.coreData});var G=v((Wa,ce)=>{ce.exports=window.wp.blockEditor});var be=v((Qa,Se)=>{Se.exports=window.wp.privateApis});var A=v((rr,Ce)=>{Ce.exports=window.wp.components});var I=v((or,ke)=>{ke.exports=window.wp.element});var P=v((sr,xe)=>{xe.exports=window.wp.i18n});var C=v((ir,Te)=>{Te.exports=window.ReactJSXRuntime});var ot=v((nr,Ne)=>{Ne.exports=window.wp.notices});var Oe=v((pr,De)=>{De.exports=window.wp.compose});var xt=v((cr,Ae)=>{Ae.exports=window.wp.htmlEntities});var Ze=v((Er,$e)=>{$e.exports=window.wp.primitives});var oa=v((Ur,ra)=>{ra.exports=window.wp.url});var ae=v((Gr,ua)=>{ua.exports=window.wp.a11y});var Ya={};Ut(Ya,{privateApis:()=>va,store:()=>O});var kt=e(T());var ue=e(T());function Ra(t={},a){return a?.type==="SET_EDITING_PATTERN"?{...t,[a.clientId]:a.isEditing}:t}var de=(0,ue.combineReducers)({isEditingPattern:Ra});var jt={};Ut(jt,{convertSyncedPatternToStatic:()=>Da,createPattern:()=>Ba,createPatternFromFile:()=>Na,setEditingPattern:()=>Oa});var Ct=e(yt()),_e=e(z()),wt=e(G());var Z={theme:"pattern",user:"wp_block"},St="all-patterns",ge="my-patterns",he=["core","pattern-directory/core","pattern-directory/featured"],b={full:"fully",unsynced:"unsynced"},bt={"core/paragraph":["content"],"core/heading":["content"],"core/button":["text","url","linkTarget","rel"],"core/image":["id","url","title","alt","caption"]},vt="core/pattern-overrides";var Ba=(t,a,r,f)=>async({registry:s})=>{let u=a===b.unsynced?{wp_pattern_sync_status:a}:void 0,i={title:t,content:r,status:"publish",meta:u,wp_pattern_category:f};return await s.dispatch(_e.store).saveEntityRecord("postType","wp_block",i)},Na=(t,a)=>async({dispatch:r})=>{let f=await t.text(),s;try{s=JSON.parse(f)}catch{throw new Error("Invalid JSON file")}if(s.__file!=="wp_block"||!s.title||!s.content||typeof s.title!="string"||typeof s.content!="string"||s.syncStatus&&typeof s.syncStatus!="string")throw new Error("Invalid pattern JSON file");return await r.createPattern(s.title,s.syncStatus,s.content,a)},Da=t=>({registry:a})=>{let r=a.select(wt.store).getBlock(t),f=r.attributes?.content;function s(i){return i.map(o=>{let l=o.attributes.metadata;if(l&&(l={...l},delete l.id,delete l.bindings,f?.[l.name]))for(let[m,n]of Object.entries(f[l.name]))(0,Ct.getBlockType)(o.name)?.attributes[m]&&(o.attributes[m]=n);return(0,Ct.cloneBlock)(o,{metadata:l&&Object.keys(l).length>0?l:void 0},s(o.innerBlocks))})}let u=a.select(wt.store).getBlocks(r.clientId);a.dispatch(wt.store).replaceBlocks(r.clientId,s(u))};function Oa(t,a){return{type:"SET_EDITING_PATTERN",clientId:t,isEditing:a}}var ye="core/patterns";var zt={};Ut(zt,{isEditingPattern:()=>Aa});function Aa(t,a){return t.isEditingPattern[a]}var ve=e(be()),{lock:we,unlock:D}=(0,ve.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/patterns");var La={reducer:de},O=(0,kt.createReduxStore)(ye,{...La});(0,kt.register)(O);D(O).registerPrivateActions(jt);D(O).registerPrivateSelectors(zt);var ut=e(G()),Pe=e(A()),Vt=e(T()),Ee=e(I()),Re=e(P());function mt(t){return Object.keys(bt).includes(t.name)&&!!t.attributes.metadata?.name&&!!t.attributes.metadata?.bindings&&Object.values(t.attributes.metadata.bindings).some(a=>a.source==="core/pattern-overrides")}function Yt(t){return t.some(a=>mt(a)?!0:Yt(a.innerBlocks))}var Ft=e(C()),{BlockQuickNavigation:Ma}=D(ut.privateApis);function Be(){let t=(0,Vt.useSelect)(f=>f(ut.store).getClientIdsWithDescendants(),[]),{getBlock:a}=(0,Vt.useSelect)(ut.store),r=(0,Ee.useMemo)(()=>t.filter(f=>{let s=a(f);return mt(s)}),[t,a]);return r?.length?(0,Ft.jsx)(Pe.PanelBody,{title:(0,Re.__)("Overrides"),children:(0,Ft.jsx)(Ma,{clientIds:r})}):null}var x=e(A()),q=e(P()),dt=e(I()),nt=e(T()),Ve=e(ot()),Fe=e(z());var Le=e(P()),Tt=e(I()),Me=e(A()),Ie=e(Oe()),Ue=e(xt()),je=e(C()),Ia=t=>(0,Ue.decodeEntities)(t),Pt="wp_pattern_category";function ze({categoryTerms:t,onChange:a,categoryMap:r}){let[f,s]=(0,Tt.useState)(""),u=(0,Ie.useDebounce)(s,500),i=(0,Tt.useMemo)(()=>Array.from(r.values()).map(l=>Ia(l.label)).filter(l=>f!==""?l.toLowerCase().includes(f.toLowerCase()):!0).sort((l,m)=>l.localeCompare(m)),[f,r]);function o(l){let m=l.reduce((n,p)=>(n.some(c=>c.toLowerCase()===p.toLowerCase())||n.push(p),n),[]);a(m)}return(0,je.jsx)(Me.FormTokenField,{className:"patterns-menu-items__convert-modal-categories",value:t,suggestions:i,onChange:o,onInputChange:u,label:(0,Le.__)("Categories"),tokenizeOnBlur:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}var Et=e(T()),Ht=e(z()),Ye=e(I());function Rt(){let{saveEntityRecord:t,invalidateResolution:a}=(0,Et.useDispatch)(Ht.store),{corePatternCategories:r,userPatternCategories:f}=(0,Et.useSelect)(i=>{let{getUserPatternCategories:o,getBlockPatternCategories:l}=i(Ht.store);return{corePatternCategories:l(),userPatternCategories:o()}},[]),s=(0,Ye.useMemo)(()=>{let i=new Map;return f.forEach(o=>{i.set(o.label.toLowerCase(),{label:o.label,name:o.name,id:o.id})}),r.forEach(o=>{!i.has(o.label.toLowerCase())&&o.name!=="query"&&i.set(o.label.toLowerCase(),{label:o.label,name:o.name})}),i},[f,r]);async function u(i){try{let o=s.get(i.toLowerCase());if(o?.id)return o.id;let l=o?{name:o.label,slug:o.name}:{name:i},m=await t("taxonomy",Pt,l,{throwOnError:!0});return a("getUserPatternCategories"),m.id}catch(o){if(o.code!=="term_exists")throw o;return o.data.term_id}}return{categoryMap:s,findOrCreateTerm:u}}var E=e(C());function st({className:t="patterns-menu-items__convert-modal",modalTitle:a,...r}){let f=(0,nt.useSelect)(s=>s(Fe.store).getPostType(Z.user)?.labels?.add_new_item,[]);return(0,E.jsx)(x.Modal,{title:a||f,onRequestClose:r.onClose,overlayClassName:t,focusOnMount:"firstContentElement",size:"small",children:(0,E.jsx)(Gt,{...r})})}function Gt({confirmLabel:t=(0,q.__)("Add"),defaultCategories:a=[],content:r,onClose:f,onError:s,onSuccess:u,defaultSyncType:i=b.full,defaultTitle:o=""}){let[l,m]=(0,dt.useState)(i),[n,p]=(0,dt.useState)(a),[c,g]=(0,dt.useState)(o),[d,h]=(0,dt.useState)(!1),{createPattern:B}=D((0,nt.useDispatch)(O)),{createErrorNotice:w}=(0,nt.useDispatch)(Ve.store),{categoryMap:Q,findOrCreateTerm:it}=Rt();async function N(F,$){if(!(!c||d))try{h(!0);let y=await Promise.all(n.map(H=>it(H))),le=await B(F,$,typeof r=="function"?r():r,y);u({pattern:le,categoryId:St})}catch(y){w(y.message,{type:"snackbar",id:"pattern-create"}),s?.()}finally{h(!1),p([]),g("")}}return(0,E.jsx)("form",{onSubmit:F=>{F.preventDefault(),N(c,l)},children:(0,E.jsxs)(x.__experimentalVStack,{spacing:"5",children:[(0,E.jsx)(x.TextControl,{label:(0,q.__)("Name"),value:c,onChange:g,placeholder:(0,q.__)("My pattern"),className:"patterns-create-modal__name-input",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,E.jsx)(ze,{categoryTerms:n,onChange:p,categoryMap:Q}),(0,E.jsx)(x.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,q._x)("Synced","pattern (singular)"),help:(0,q.__)("Sync this pattern across multiple locations."),checked:l===b.full,onChange:()=>{m(l===b.full?b.unsynced:b.full)}}),(0,E.jsxs)(x.__experimentalHStack,{justify:"right",children:[(0,E.jsx)(x.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{f(),g("")},children:(0,q.__)("Cancel")}),(0,E.jsx)(x.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!c||d,isBusy:d,children:t})]})]})})}var He=e(z()),Bt=e(T()),Y=e(P()),Ge=e(ot());var qe=e(C());function Ua(t,a){return t.type!==Z.user?a.core?.filter(r=>t.categories?.includes(r.name)).map(r=>r.label):a.user?.filter(r=>t.wp_pattern_category?.includes(r.id)).map(r=>r.label)}function qt({pattern:t,onSuccess:a}){let{createSuccessNotice:r}=(0,Bt.useDispatch)(Ge.store),f=(0,Bt.useSelect)(s=>{let{getUserPatternCategories:u,getBlockPatternCategories:i}=s(He.store);return{core:i(),user:u()}});return t?{content:t.content,defaultCategories:Ua(t,f),defaultSyncType:t.type!==Z.user?b.unsynced:t.wp_pattern_sync_status||b.full,defaultTitle:(0,Y.sprintf)((0,Y._x)("%s (Copy)","pattern"),typeof t.title=="string"?t.title:t.title.raw),onSuccess:({pattern:s})=>{r((0,Y.sprintf)((0,Y._x)('"%s" duplicated.',"pattern"),s.title.raw),{type:"snackbar",id:"patterns-create"}),a?.({pattern:s})}}:null}function We({pattern:t,onClose:a,onSuccess:r}){let f=qt({pattern:t,onSuccess:r});return t?(0,qe.jsx)(st,{modalTitle:(0,Y.__)("Duplicate pattern"),confirmLabel:(0,Y.__)("Duplicate"),onClose:a,onError:a,...f}):null}var L=e(A()),Je=e(z()),Wt=e(T()),Jt=e(I()),Ke=e(xt()),tt=e(P()),Xe=e(ot()),V=e(C());function Qe({onClose:t,onError:a,onSuccess:r,pattern:f,...s}){let u=(0,Ke.decodeEntities)(f.title),[i,o]=(0,Jt.useState)(u),[l,m]=(0,Jt.useState)(!1),{editEntityRecord:n,__experimentalSaveSpecifiedEntityEdits:p}=(0,Wt.useDispatch)(Je.store),{createSuccessNotice:c,createErrorNotice:g}=(0,Wt.useDispatch)(Xe.store),d=async B=>{if(B.preventDefault(),!(!i||i===f.title||l))try{await n("postType",f.type,f.id,{title:i}),m(!0),o(""),t?.();let w=await p("postType",f.type,f.id,["title"],{throwOnError:!0});r?.(w),c((0,tt.__)("Pattern renamed"),{type:"snackbar",id:"pattern-update"})}catch(w){a?.();let Q=w.message&&w.code!=="unknown_error"?w.message:(0,tt.__)("An error occurred while renaming the pattern.");g(Q,{type:"snackbar",id:"pattern-update"})}finally{m(!1),o("")}},h=()=>{t?.(),o("")};return(0,V.jsx)(L.Modal,{title:(0,tt.__)("Rename"),...s,onRequestClose:t,focusOnMount:"firstContentElement",size:"small",children:(0,V.jsx)("form",{onSubmit:d,children:(0,V.jsxs)(L.__experimentalVStack,{spacing:"5",children:[(0,V.jsx)(L.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,tt.__)("Name"),value:i,onChange:o,required:!0}),(0,V.jsxs)(L.__experimentalHStack,{justify:"right",children:[(0,V.jsx)(L.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:h,children:(0,tt.__)("Cancel")}),(0,V.jsx)(L.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,tt.__)("Save")})]})]})})})}var ia=e(G());var U=e(yt()),pt=e(G()),Dt=e(I()),ta=e(A());var Nt=e(Ze()),Kt=e(C()),Xt=(0,Kt.jsx)(Nt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Kt.jsx)(Nt.Path,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"})});var W=e(T()),Qt=e(z()),et=e(P()),ea=e(ot());var at=e(C());function aa({clientIds:t,rootClientId:a,closeBlockSettingsMenu:r}){let{createSuccessNotice:f}=(0,W.useDispatch)(ea.store),{replaceBlocks:s,updateBlockAttributes:u}=(0,W.useDispatch)(pt.store),{setEditingPattern:i}=D((0,W.useDispatch)(O)),[o,l]=(0,Dt.useState)(!1),{getBlockAttributes:m}=(0,W.useSelect)(pt.store),n=(0,W.useSelect)(d=>{let{canUser:h}=d(Qt.store),{getBlocksByClientId:B,canInsertBlockType:w,getBlockRootClientId:Q}=d(pt.store),it=a||(t.length>0?Q(t[0]):void 0),N=B(t)??[],F=H=>{let fe=(0,U.getBlockType)(H),wa=fe&&"parent"in fe;return(0,U.hasBlockSupport)(H,"reusable",!wa)},$=N.length===1&&N[0]&&(0,U.isReusableBlock)(N[0])&&!!d(Qt.store).getEntityRecord("postType","wp_block",N[0].attributes.ref);return!(window?.__experimentalContentOnlyPatternInsertion&&N.length===1&&N?.[0]?.attributes?.metadata?.patternName)&&!$&&w("core/block",it)&&N.every(H=>!!H&&H.isValid&&F(H.name))&&!!h("create",{kind:"postType",name:"wp_block"})},[t,a]),{getBlocksByClientId:p}=(0,W.useSelect)(pt.store),c=(0,Dt.useCallback)(()=>(0,U.serialize)(p(t)),[p,t]);if(!n)return null;let g=({pattern:d})=>{if(d.wp_pattern_sync_status===b.unsynced){if(t?.length===1){let h=m(t[0]);u(t[0],{metadata:{...h?.metadata?h.metadata:{},patternName:`core/block/${d.id}`,name:d.title.raw}})}}else{let h=(0,U.createBlock)("core/block",{ref:d.id});s(t,h),i(h.clientId,!0),r()}f(d.wp_pattern_sync_status===b.unsynced?(0,et.sprintf)((0,et.__)("Unsynced pattern created: %s"),d.title.raw):(0,et.sprintf)((0,et.__)("Synced pattern created: %s"),d.title.raw),{type:"snackbar",id:"convert-to-pattern-success"}),l(!1)};return(0,at.jsxs)(at.Fragment,{children:[(0,at.jsx)(ta.MenuItem,{icon:Xt,onClick:()=>l(!0),"aria-expanded":o,"aria-haspopup":"dialog",children:(0,et.__)("Create pattern")}),o&&(0,at.jsx)(st,{content:c,onSuccess:d=>{g(d)},onError:()=>{l(!1)},onClose:()=>{l(!1)}})]})}var $t=e(A()),Zt=e(P()),sa=e(yt()),ct=e(T()),te=e(G()),ee=e(oa()),la=e(z());var rt=e(C());function ja({clientId:t}){let{attributes:a,canDetach:r,isVisible:f,managePatternsUrl:s,isSyncedPattern:u,isUnsyncedPattern:i}=(0,ct.useSelect)(m=>{let{canRemoveBlock:n,getBlock:p}=m(te.store),{canUser:c}=m(la.store),g=p(t),d=window?.__experimentalContentOnlyPatternInsertion&&!!g?.attributes?.metadata?.patternName,h=!!g&&(0,sa.isReusableBlock)(g)&&!!c("update",{kind:"postType",name:"wp_block",id:g.attributes.ref});return{attributes:g.attributes,canDetach:d||h&&n(t),isUnsyncedPattern:d,isSyncedPattern:h,isVisible:d||h,managePatternsUrl:c("create",{kind:"postType",name:"wp_template"})?(0,ee.addQueryArgs)("site-editor.php",{p:"/pattern"}):(0,ee.addQueryArgs)("edit.php",{post_type:"wp_block"})}},[t]),{updateBlockAttributes:o}=(0,ct.useDispatch)(te.store),{convertSyncedPatternToStatic:l}=D((0,ct.useDispatch)(O));return f?(0,rt.jsxs)(rt.Fragment,{children:[r&&(0,rt.jsx)($t.MenuItem,{onClick:()=>{if(u&&l(t),i){let{patternName:m,...n}=a?.metadata??{};o(t,{metadata:n})}},children:(0,Zt.__)("Disconnect pattern")}),(0,rt.jsx)($t.MenuItem,{href:s,children:(0,Zt.__)("Manage patterns")})]}):null}var fa=ja;var J=e(C());function ma({rootClientId:t}){return(0,J.jsx)(ia.BlockSettingsMenuControls,{children:({selectedClientIds:a,onClose:r})=>(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(aa,{clientIds:a,rootClientId:t,closeBlockSettingsMenu:r}),a.length===1&&(0,J.jsx)(fa,{clientId:a[0]})]})})}var R=e(A()),da=e(z()),re=e(T()),X=e(I()),na=e(xt()),K=e(P()),pa=e(ot()),oe=e(ae());var M=e(C());function ca({category:t,existingCategories:a,onClose:r,onError:f,onSuccess:s,...u}){let i=(0,X.useId)(),o=(0,X.useRef)(),[l,m]=(0,X.useState)((0,na.decodeEntities)(t.name)),[n,p]=(0,X.useState)(!1),[c,g]=(0,X.useState)(!1),d=c?`patterns-rename-pattern-category-modal__validation-message-${i}`:void 0,{saveEntityRecord:h,invalidateResolution:B}=(0,re.useDispatch)(da.store),{createErrorNotice:w,createSuccessNotice:Q}=(0,re.useDispatch)(pa.store),it=$=>{c&&g(void 0),m($)},N=async $=>{if($.preventDefault(),!n){if(!l||l===t.name){let y=(0,K.__)("Please enter a new name for this category.");(0,oe.speak)(y,"assertive"),g(y),o.current?.focus();return}if(a.patternCategories.find(y=>y.id!==t.id&&y.label.toLowerCase()===l.toLowerCase())){let y=(0,K.__)("This category already exists. Please use a different name.");(0,oe.speak)(y,"assertive"),g(y),o.current?.focus();return}try{p(!0);let y=await h("taxonomy",Pt,{id:t.id,slug:t.slug,name:l});B("getUserPatternCategories"),s?.(y),r(),Q((0,K.__)("Pattern category renamed."),{type:"snackbar",id:"pattern-category-update"})}catch(y){f?.(),w(y.message,{type:"snackbar",id:"pattern-category-update"})}finally{p(!1),m("")}}},F=()=>{r(),m("")};return(0,M.jsx)(R.Modal,{title:(0,K.__)("Rename"),onRequestClose:F,...u,children:(0,M.jsx)("form",{onSubmit:N,children:(0,M.jsxs)(R.__experimentalVStack,{spacing:"5",children:[(0,M.jsxs)(R.__experimentalVStack,{spacing:"2",children:[(0,M.jsx)(R.TextControl,{ref:o,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:(0,K.__)("Name"),value:l,onChange:it,"aria-describedby":d,required:!0}),c&&(0,M.jsx)("span",{className:"patterns-rename-pattern-category-modal__validation-message",id:d,children:c})]}),(0,M.jsxs)(R.__experimentalHStack,{justify:"right",children:[(0,M.jsx)(R.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:F,children:(0,K.__)("Cancel")}),(0,M.jsx)(R.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!l||l===t.name||n,isBusy:n,children:(0,K.__)("Save")})]})]})})})}var ht=e(I()),Ot=e(G()),At=e(A()),lt=e(P());var _=e(A()),k=e(P()),gt=e(I()),ga=e(ae()),S=e(C());function ha({placeholder:t,initialName:a="",onClose:r,onSave:f}){let[s,u]=(0,gt.useState)(a),i=(0,gt.useId)(),o=!!s.trim(),l=()=>{if(s!==a){let m=(0,k.sprintf)((0,k.__)('Block name changed to: "%s".'),s);(0,ga.speak)(m,"assertive")}f(s),r()};return(0,S.jsx)(_.Modal,{title:(0,k.__)("Enable overrides"),onRequestClose:r,focusOnMount:"firstContentElement",aria:{describedby:i},size:"small",children:(0,S.jsx)("form",{onSubmit:m=>{m.preventDefault(),o&&l()},children:(0,S.jsxs)(_.__experimentalVStack,{spacing:"6",children:[(0,S.jsx)(_.__experimentalText,{id:i,children:(0,k.__)("Overrides are changes you make to a block within a synced pattern instance. Use overrides to customize a synced pattern instance to suit its new context. Name this block to specify an override.")}),(0,S.jsx)(_.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,value:s,label:(0,k.__)("Name"),help:(0,k.__)('For example, if you are creating a recipe pattern, you use "Recipe Title", "Recipe Description", etc.'),placeholder:t,onChange:u}),(0,S.jsxs)(_.__experimentalHStack,{justify:"right",children:[(0,S.jsx)(_.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:r,children:(0,k.__)("Cancel")}),(0,S.jsx)(_.Button,{__next40pxDefaultSize:!0,"aria-disabled":!o,variant:"primary",type:"submit",children:(0,k.__)("Enable")})]})]})})})}function _a({onClose:t,onSave:a}){let r=(0,gt.useId)();return(0,S.jsx)(_.Modal,{title:(0,k.__)("Disable overrides"),onRequestClose:t,aria:{describedby:r},size:"small",children:(0,S.jsx)("form",{onSubmit:f=>{f.preventDefault(),a(),t()},children:(0,S.jsxs)(_.__experimentalVStack,{spacing:"6",children:[(0,S.jsx)(_.__experimentalText,{id:r,children:(0,k.__)("Are you sure you want to disable overrides? Disabling overrides will revert all applied overrides for this block throughout instances of this pattern.")}),(0,S.jsxs)(_.__experimentalHStack,{justify:"right",children:[(0,S.jsx)(_.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:t,children:(0,k.__)("Cancel")}),(0,S.jsx)(_.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,k.__)("Disable")})]})]})})})}var j=e(C());function za({attributes:t,setAttributes:a,name:r}){let f=(0,ht.useId)(),[s,u]=(0,ht.useState)(!1),[i,o]=(0,ht.useState)(!1),l=!!t.metadata?.name,m=t.metadata?.bindings?.__default,n=l&&m?.source===vt,p=m?.source&&m.source!==vt,{updateBlockBindings:c}=(0,Ot.useBlockBindingsUtils)();function g(B,w){w&&a({metadata:{...t.metadata,name:w}}),c({__default:B?{source:vt}:void 0})}if(p)return null;let d=r==="core/image"&&!!t.href?.length,h=!n&&d?(0,lt.__)("Overrides currently don't support image links. Remove the link first before enabling overrides."):(0,lt.__)("Allow changes to this block throughout instances of this pattern.");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ot.InspectorControls,{group:"advanced",children:(0,j.jsx)(At.BaseControl,{__nextHasNoMarginBottom:!0,id:f,label:(0,lt.__)("Overrides"),help:h,children:(0,j.jsx)(At.Button,{__next40pxDefaultSize:!0,className:"pattern-overrides-control__allow-overrides-button",variant:"secondary","aria-haspopup":"dialog",onClick:()=>{n?o(!0):u(!0)},disabled:!n&&d,accessibleWhenDisabled:!0,children:n?(0,lt.__)("Disable overrides"):(0,lt.__)("Enable overrides")})})}),s&&(0,j.jsx)(ha,{initialName:t.metadata?.name,onClose:()=>u(!1),onSave:B=>{g(!0,B)}}),i&&(0,j.jsx)(_a,{onClose:()=>o(!1),onSave:()=>g(!1)})]})}var ya=za;var ft=e(G()),Mt=e(A()),It=e(T()),Sa=e(P()),Lt=e(C()),se="content";function ba(t){let a=t.attributes.metadata?.name,r=(0,It.useRegistry)(),f=(0,It.useSelect)(u=>{if(!a)return;let{getBlockAttributes:i,getBlockParentsByBlockName:o}=u(ft.store),[l]=o(t.clientId,"core/block",!0);if(!l)return;let m=i(l)[se];if(m)return m.hasOwnProperty(a)},[t.clientId,a]);function s(){let{getBlockAttributes:u,getBlockParentsByBlockName:i}=r.select(ft.store),[o]=i(t.clientId,"core/block",!0);if(!o)return;let l=u(o)[se];if(!l.hasOwnProperty(a))return;let{updateBlockAttributes:m,__unstableMarkLastChangeAsPersistent:n}=r.dispatch(ft.store);n();let p={...l};delete p[a],Object.keys(p).length||(p=void 0),m(o,{[se]:p})}return(0,Lt.jsx)(ft.__unstableBlockToolbarLastItem,{children:(0,Lt.jsx)(Mt.ToolbarGroup,{children:(0,Lt.jsx)(Mt.ToolbarButton,{onClick:s,disabled:!f,children:(0,Sa.__)("Reset")})})})}var va={};we(va,{OverridesPanel:Be,CreatePatternModal:st,CreatePatternModalContents:Gt,DuplicatePatternModal:We,isOverridableBlock:mt,hasOverridableBlocks:Yt,useDuplicatePatternProps:qt,RenamePatternModal:Qe,PatternsMenuItems:ma,RenamePatternCategoryModal:ca,PatternOverridesControls:ya,ResetOverridesControl:ba,useAddPatternCategory:Rt,PATTERN_TYPES:Z,PATTERN_DEFAULT_CATEGORY:St,PATTERN_USER_CATEGORY:ge,EXCLUDED_PATTERN_SOURCES:he,PATTERN_SYNC_TYPES:b,PARTIAL_SYNCING_SUPPORTED_BLOCKS:bt});return Ea(Ya);})();
//# sourceMappingURL=index.min.js.map

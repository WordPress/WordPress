var C=Object.create;var m=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,$=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var b=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of K(t))!$.call(e,n)&&n!==r&&m(e,n,{get:()=>t[n],enumerable:!(i=O(t,n))||i.enumerable});return e};var s=(e,t,r)=>(r=e!=null?C(R(e)):{},b(t||!e||!e.__esModule?m(r,"default",{value:e,enumerable:!0}):r,e));var c=l((H,w)=>{w.exports=window.wp.data});var f=l((N,y)=>{y.exports=window.wp.coreData});var v=l((Y,h)=>{h.exports=window.wp.i18n});var _=l((Z,V)=>{V.exports=window.wp.element});var d=l((ee,T)=>{T.exports=window.wp.preferences});var k=s(c()),E=s(f()),F=s(v());function u(e,t,r){return`dataviews-${e}-${t}-${r}`}var x=s(_()),P=s(c()),M=s(d());var S=s(c()),I=s(d());async function g(e){let{kind:t,name:r,slug:i,defaultView:n,queryParams:p}=e,o=u(t,r,i),j=(0,S.select)(I.store).get("core/views",o)??n,q=p?.page??1,z=p?.search??"";return{...j,page:q,search:z}}var A=s(c()),L=s(f()),a={type:"grid",sort:{field:"date",direction:"desc"},fields:[],titleField:"title",mediaField:"preview"};var Q=[{slug:"all",label:"All Template Parts",view:{...a}},{slug:"header",label:"Headers",view:{...a,filters:[{field:"area",operator:"is",value:"header"}]}},{slug:"footer",label:"Footers",view:{...a,filters:[{field:"area",operator:"is",value:"footer"}]}},{slug:"sidebar",label:"Sidebars",view:{...a,filters:[{field:"area",operator:"is",value:"sidebar"}]}},{slug:"overlay",label:"Overlays",view:{...a,filters:[{field:"area",operator:"is",value:"overlay"}]}},{slug:"uncategorized",label:"General",view:{...a,filters:[{field:"area",operator:"is",value:"uncategorized"}]}}];function B(e,t){return Q.find(i=>i.slug===t)?.view||a}async function D(e,t){let r=await(0,A.resolveSelect)(L.store).getPostType("wp_template_part"),i=B(r,e);return g({kind:"postType",name:"wp_template_part",slug:e??"all",defaultView:i,queryParams:t})}function U(e){let t={};e.perPage!==void 0&&(t.per_page=e.perPage),e.page!==void 0&&(t.page=e.page),[void 0,""].includes(e.search)||(t.search=e.search),e.sort?.field!==void 0&&(t.orderby=e.sort.field),e.sort?.direction!==void 0&&(t.order=e.sort.direction);let r=e.filters?.find(i=>i.field==="area");return r&&(t.area=r.value),t}var ge={title:()=>(0,F.__)("Template Parts"),async canvas(e){let{params:t,search:r}=e,i=await D(t.area,{page:r.page,search:r.search});if(i.type!=="list")return;if(r.postIds&&r.postIds.length>0){let o=r.postIds[0].toString();return{postType:"wp_template_part",postId:o,isPreview:!0,editLink:`/types/wp_template_part/edit/${encodeURIComponent(o)}`}}let n=U(i),p=await(0,k.resolveSelect)(E.store).getEntityRecords("postType","wp_template_part",{...n,per_page:1});if(p&&p.length>0){let o=p[0].id.toString();return{postType:"wp_template_part",postId:o,isPreview:!0,editLink:`/types/wp_template_part/edit/${encodeURIComponent(o)}`}}}};export{ge as route};

var O=Object.create;var g=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var z=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var $=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of j(t))!K.call(e,i)&&i!==r&&g(e,i,{get:()=>t[i],enumerable:!(s=b(t,i))||s.enumerable});return e};var o=(e,t,r)=>(r=e!=null?O(z(e)):{},$(t||!e||!e.__esModule?g(r,"default",{value:e,enumerable:!0}):r,e));var p=l((G,m)=>{m.exports=window.wp.data});var y=l((W,w)=>{w.exports=window.wp.coreData});var A=l((Y,h)=>{h.exports=window.wp.i18n});var _=l((J,V)=>{V.exports=window.wp.element});var f=l((X,T)=>{T.exports=window.wp.preferences});var D=o(p()),E=o(y()),v=o(A());var x=o(_(),1),P=o(p(),1),C=o(f(),1);function c(e,t,r){return`dataviews-${e}-${t}-${r}`}function u(e,t,r){if(!t)return e;let s=e;if(t.filters&&t.filters.length>0){let i=new Set(t.filters.map(n=>n.field)),a=(e.filters??[]).filter(n=>!i.has(n.field));s={...s,filters:[...a,...t.filters]}}return t.sort&&r&&e.sort?.field===r.sort?.field&&e.sort?.direction===r.sort?.direction&&(s={...s,sort:t.sort}),s}var S=o(p(),1),I=o(f(),1);async function d(e){let{kind:t,name:r,slug:s,defaultView:i,activeViewOverrides:a,queryParams:n}=e,R=c(t,r,s),U=(0,S.select)(I.store).get("core/views",R)??i,k=n?.page??1,q=n?.search??"";return u({...U,page:k,search:q},a,i)}var M={type:"grid",sort:{field:"date",direction:"desc"},fields:[],titleField:"title",mediaField:"preview"};function B(e){return e==="all"?{}:{filters:[{field:"area",operator:"is",value:e}]}}async function F(e,t){return d({kind:"postType",name:"wp_template_part",slug:"default-new",defaultView:M,activeViewOverrides:B(e??"all"),queryParams:t})}function L(e){let t={};e.perPage!==void 0&&(t.per_page=e.perPage),e.page!==void 0&&(t.page=e.page),[void 0,""].includes(e.search)||(t.search=e.search),e.sort?.field!==void 0&&(t.orderby=e.sort.field),e.sort?.direction!==void 0&&(t.order=e.sort.direction);let r=e.filters?.find(s=>s.field==="area");return r&&(t.area=r.value),t}var ye={title:()=>(0,v.__)("Template Parts"),async canvas(e){let{params:t,search:r}=e,s=await F(t.area,{page:r.page,search:r.search});if(s.type!=="list")return;if(r.postIds&&r.postIds.length>0){let n=r.postIds[0].toString();return{postType:"wp_template_part",postId:n,isPreview:!0,editLink:`/types/wp_template_part/edit/${encodeURIComponent(n)}`}}let i=L(s),a=await(0,D.resolveSelect)(E.store).getEntityRecords("postType","wp_template_part",{...i,per_page:1});if(a&&a.length>0){let n=a[0].id.toString();return{postType:"wp_template_part",postId:n,isPreview:!0,editLink:`/types/wp_template_part/edit/${encodeURIComponent(n)}`}}}};export{ye as route};

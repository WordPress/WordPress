{
  "version": 3,
  "sources": ["../../../../packages/block-library/src/accordion/view.js"],
  "sourcesContent": ["/**\n * WordPress dependencies\n */\nimport { store, getContext, withSyncEvent } from '@wordpress/interactivity';\n\n// Whether the hash has been handled for the current page load.\n// This is used to prevent the hash from being handled multiple times.\nlet hashHandled = false;\n\nconst { actions } = store(\n\t'core/accordion',\n\t{\n\t\tstate: {\n\t\t\tget isOpen() {\n\t\t\t\tconst { id, accordionItems } = getContext();\n\t\t\t\tconst accordionItem = accordionItems.find(\n\t\t\t\t\t( item ) => item.id === id\n\t\t\t\t);\n\t\t\t\treturn accordionItem ? accordionItem.isOpen : false;\n\t\t\t},\n\t\t},\n\t\tactions: {\n\t\t\ttoggle: () => {\n\t\t\t\tconst context = getContext();\n\t\t\t\tconst { id, autoclose, accordionItems } = context;\n\t\t\t\tconst accordionItem = accordionItems.find(\n\t\t\t\t\t( item ) => item.id === id\n\t\t\t\t);\n\n\t\t\t\tif ( autoclose ) {\n\t\t\t\t\taccordionItems.forEach( ( item ) => {\n\t\t\t\t\t\titem.isOpen =\n\t\t\t\t\t\t\titem.id === id ? ! accordionItem.isOpen : false;\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\taccordionItem.isOpen = ! accordionItem.isOpen;\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleKeyDown: withSyncEvent( ( event ) => {\n\t\t\t\tif (\n\t\t\t\t\tevent.key !== 'ArrowUp' &&\n\t\t\t\t\tevent.key !== 'ArrowDown' &&\n\t\t\t\t\tevent.key !== 'Home' &&\n\t\t\t\t\tevent.key !== 'End'\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst context = getContext();\n\t\t\t\tconst { id, accordionItems } = context;\n\t\t\t\tconst currentIndex = accordionItems.findIndex(\n\t\t\t\t\t( item ) => item.id === id\n\t\t\t\t);\n\n\t\t\t\tlet nextIndex;\n\n\t\t\t\tswitch ( event.key ) {\n\t\t\t\t\tcase 'ArrowUp':\n\t\t\t\t\t\tnextIndex = Math.max( 0, currentIndex - 1 );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'ArrowDown':\n\t\t\t\t\t\tnextIndex = Math.min(\n\t\t\t\t\t\t\tcurrentIndex + 1,\n\t\t\t\t\t\t\taccordionItems.length - 1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Home':\n\t\t\t\t\t\tnextIndex = 0;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'End':\n\t\t\t\t\t\tnextIndex = accordionItems.length - 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tconst nextId = accordionItems[ nextIndex ].id;\n\t\t\t\tconst nextButton = document.getElementById( nextId );\n\t\t\t\tif ( nextButton ) {\n\t\t\t\t\tnextButton.focus();\n\t\t\t\t}\n\t\t\t} ),\n\t\t\topenPanelByHash: () => {\n\t\t\t\tif ( hashHandled || ! window.location?.hash?.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst context = getContext();\n\t\t\t\tconst { id, accordionItems, autoclose } = context;\n\t\t\t\tconst hash = decodeURIComponent(\n\t\t\t\t\twindow.location.hash.slice( 1 )\n\t\t\t\t);\n\t\t\t\tconst targetElement = window.document.getElementById( hash );\n\n\t\t\t\tif ( ! targetElement ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst panelElement = window.document.querySelector(\n\t\t\t\t\t'.wp-block-accordion-panel[aria-labelledby=\"' + id + '\"]'\n\t\t\t\t);\n\n\t\t\t\tif (\n\t\t\t\t\t! panelElement ||\n\t\t\t\t\t! panelElement.contains( targetElement )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\thashHandled = true;\n\n\t\t\t\tif ( autoclose ) {\n\t\t\t\t\taccordionItems.forEach( ( item ) => {\n\t\t\t\t\t\titem.isOpen = item.id === id;\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tconst targetItem = accordionItems.find(\n\t\t\t\t\t\t( item ) => item.id === id\n\t\t\t\t\t);\n\n\t\t\t\t\tif ( targetItem ) {\n\t\t\t\t\t\ttargetItem.isOpen = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Wait for the panel to be opened before scrolling to it.\n\t\t\t\twindow.setTimeout( () => {\n\t\t\t\t\ttargetElement.scrollIntoView();\n\t\t\t\t}, 0 );\n\t\t\t},\n\t\t},\n\t\tcallbacks: {\n\t\t\tinitAccordionItems: () => {\n\t\t\t\tconst context = getContext();\n\t\t\t\tconst { id, openByDefault, accordionItems } = context;\n\t\t\t\taccordionItems.push( {\n\t\t\t\t\tid,\n\t\t\t\t\tisOpen: openByDefault,\n\t\t\t\t} );\n\t\t\t\tactions.openPanelByHash();\n\t\t\t},\n\t\t\thashChange: () => {\n\t\t\t\thashHandled = false;\n\t\t\t\tactions.openPanelByHash();\n\t\t\t},\n\t\t},\n\t},\n\t{ lock: true }\n);\n"],
  "mappings": "AAGA,OAAS,SAAAA,EAAO,cAAAC,EAAY,iBAAAC,MAAqB,2BAIjD,IAAIC,EAAc,GAEZ,CAAE,QAAAC,CAAQ,EAAIJ,EACnB,iBACA,CACC,MAAO,CACN,IAAI,QAAS,CACZ,GAAM,CAAE,GAAAK,EAAI,eAAAC,CAAe,EAAIL,EAAW,EACpCM,EAAgBD,EAAe,KAClCE,GAAUA,EAAK,KAAOH,CACzB,EACA,OAAOE,EAAgBA,EAAc,OAAS,EAC/C,CACD,EACA,QAAS,CACR,OAAQ,IAAM,CACb,IAAME,EAAUR,EAAW,EACrB,CAAE,GAAAI,EAAI,UAAAK,EAAW,eAAAJ,CAAe,EAAIG,EACpCF,EAAgBD,EAAe,KAClCE,GAAUA,EAAK,KAAOH,CACzB,EAEKK,EACJJ,EAAe,QAAWE,GAAU,CACnCA,EAAK,OACJA,EAAK,KAAOH,EAAK,CAAEE,EAAc,OAAS,EAC5C,CAAE,EAEFA,EAAc,OAAS,CAAEA,EAAc,MAEzC,EACA,cAAeL,EAAiBS,GAAW,CAC1C,GACCA,EAAM,MAAQ,WACdA,EAAM,MAAQ,aACdA,EAAM,MAAQ,QACdA,EAAM,MAAQ,MAEd,OAGDA,EAAM,eAAe,EACrB,IAAMF,EAAUR,EAAW,EACrB,CAAE,GAAAI,EAAI,eAAAC,CAAe,EAAIG,EACzBG,EAAeN,EAAe,UACjCE,GAAUA,EAAK,KAAOH,CACzB,EAEIQ,EAEJ,OAASF,EAAM,IAAM,CACpB,IAAK,UACJE,EAAY,KAAK,IAAK,EAAGD,EAAe,CAAE,EAC1C,MACD,IAAK,YACJC,EAAY,KAAK,IAChBD,EAAe,EACfN,EAAe,OAAS,CACzB,EACA,MACD,IAAK,OACJO,EAAY,EACZ,MACD,IAAK,MACJA,EAAYP,EAAe,OAAS,EACpC,KACF,CAEA,IAAMQ,EAASR,EAAgBO,CAAU,EAAE,GACrCE,EAAa,SAAS,eAAgBD,CAAO,EAC9CC,GACJA,EAAW,MAAM,CAEnB,CAAE,EACF,gBAAiB,IAAM,CACtB,GAAKZ,GAAe,CAAE,OAAO,UAAU,MAAM,OAC5C,OAGD,IAAMM,EAAUR,EAAW,EACrB,CAAE,GAAAI,EAAI,eAAAC,EAAgB,UAAAI,CAAU,EAAID,EACpCO,EAAO,mBACZ,OAAO,SAAS,KAAK,MAAO,CAAE,CAC/B,EACMC,EAAgB,OAAO,SAAS,eAAgBD,CAAK,EAE3D,GAAK,CAAEC,EACN,OAGD,IAAMC,EAAe,OAAO,SAAS,cACpC,8CAAgDb,EAAK,IACtD,EAEA,GACC,GAAEa,GACF,CAAEA,EAAa,SAAUD,CAAc,GAOxC,IAFAd,EAAc,GAETO,EACJJ,EAAe,QAAWE,GAAU,CACnCA,EAAK,OAASA,EAAK,KAAOH,CAC3B,CAAE,MACI,CACN,IAAMc,EAAab,EAAe,KAC/BE,GAAUA,EAAK,KAAOH,CACzB,EAEKc,IACJA,EAAW,OAAS,GAEtB,CAGA,OAAO,WAAY,IAAM,CACxBF,EAAc,eAAe,CAC9B,EAAG,CAAE,EACN,CACD,EACA,UAAW,CACV,mBAAoB,IAAM,CACzB,IAAMR,EAAUR,EAAW,EACrB,CAAE,GAAAI,EAAI,cAAAe,EAAe,eAAAd,CAAe,EAAIG,EAC9CH,EAAe,KAAM,CACpB,GAAAD,EACA,OAAQe,CACT,CAAE,EACFhB,EAAQ,gBAAgB,CACzB,EACA,WAAY,IAAM,CACjBD,EAAc,GACdC,EAAQ,gBAAgB,CACzB,CACD,CACD,EACA,CAAE,KAAM,EAAK,CACd",
  "names": ["store", "getContext", "withSyncEvent", "hashHandled", "actions", "id", "accordionItems", "accordionItem", "item", "context", "autoclose", "event", "currentIndex", "nextIndex", "nextId", "nextButton", "hash", "targetElement", "panelElement", "targetItem", "openByDefault"]
}

var wp;(wp||={}).formatLibrary=(()=>{var Ur=Object.create;var ra=Object.defineProperty;var zr=Object.getOwnPropertyDescriptor;var Dr=Object.getOwnPropertyNames;var Or=Object.getPrototypeOf,Wr=Object.prototype.hasOwnProperty;var Gr=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,a)=>(typeof require<"u"?require:e)[a]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var I=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Zr=(t,e,a,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Dr(e))!Wr.call(t,s)&&s!==a&&ra(t,s,{get:()=>e[s],enumerable:!(o=zr(e,s))||o.enumerable});return t};var r=(t,e,a)=>(a=t!=null?Ur(Or(t)):{},Zr(e||!t||!t.__esModule?ra(a,"default",{value:t,enumerable:!0}):a,t));var x=I((yo,oa)=>{oa.exports=window.wp.richText});var b=I((ko,sa)=>{sa.exports=window.wp.i18n});var y=I((vo,la)=>{la.exports=window.wp.blockEditor});var F=I((Co,fa)=>{fa.exports=window.wp.element});var L=I((So,ia)=>{ia.exports=window.wp.primitives});var n=I((To,ma)=>{ma.exports=window.ReactJSXRuntime});var J=I((fs,ca)=>{ca.exports=window.wp.components});var Ft=I((ns,ba)=>{ba.exports=window.wp.url});var ya=I((ds,wa)=>{wa.exports=window.wp.htmlEntities});var Et=I((ps,ka)=>{ka.exports=window.wp.a11y});var We=I((cs,va)=>{va.exports=window.wp.data});var La=I((gs,Ta)=>{Ta.exports=window.wp.compose});var qa=I((Bs,Ka)=>{Ka.exports=window.wp.privateApis});var Pr=r(x(),1);var ua=r(b(),1),Ee=r(x(),1),lt=r(y(),1);var bt=r(F(),1),le=(0,bt.forwardRef)(({icon:t,size:e=24,...a},o)=>(0,bt.cloneElement)(t,{width:e,height:e,...a,ref:o}));var wt=r(L(),1),fe=r(n(),1),ie=(0,fe.jsx)(wt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,fe.jsx)(wt.Path,{d:"M8 12.5h8V11H8v1.5Z M19 6.5H5a2 2 0 0 0-2 2V15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a2 2 0 0 0-2-2ZM5 8h14a.5.5 0 0 1 .5.5V15a.5.5 0 0 1-.5.5H5a.5.5 0 0 1-.5-.5V8.5A.5.5 0 0 1 5 8Z"})});var yt=r(L(),1),me=r(n(),1),ue=(0,me.jsx)(yt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,me.jsx)(yt.Path,{d:"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z"})});var kt=r(L(),1),ne=r(n(),1),de=(0,ne.jsx)(kt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ne.jsx)(kt.Path,{d:"M17.2 10.9c-.5-1-1.2-2.1-2.1-3.2-.6-.9-1.3-1.7-2.1-2.6L12 4l-1 1.1c-.6.9-1.3 1.7-2 2.6-.8 1.2-1.5 2.3-2 3.2-.6 1.2-1 2.2-1 3 0 3.4 2.7 6.1 6.1 6.1s6.1-2.7 6.1-6.1c0-.8-.3-1.8-1-3zm-5.1 7.6c-2.5 0-4.6-2.1-4.6-4.6 0-.3.1-1 .8-2.3.5-.9 1.1-1.9 2-3.1.7-.9 1.3-1.7 1.8-2.3.7.8 1.3 1.6 1.8 2.3.8 1.1 1.5 2.2 2 3.1.7 1.3.8 2 .8 2.3 0 2.5-2.1 4.6-4.6 4.6z"})});var vt=r(L(),1),pe=r(n(),1),ce=(0,pe.jsx)(vt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,pe.jsx)(vt.Path,{d:"M14.7 11.3c1-.6 1.5-1.6 1.5-3 0-2.3-1.3-3.4-4-3.4H7v14h5.8c1.4 0 2.5-.3 3.3-1 .8-.7 1.2-1.7 1.2-2.9.1-1.9-.8-3.1-2.6-3.7zm-5.1-4h2.3c.6 0 1.1.1 1.4.4.3.3.5.7.5 1.2s-.2 1-.5 1.2c-.3.3-.8.4-1.4.4H9.6V7.3zm4.6 9c-.4.3-1 .4-1.7.4H9.6v-3.9h2.9c.7 0 1.3.2 1.7.5.4.3.6.8.6 1.5s-.2 1.2-.6 1.5z"})});var Ct=r(L(),1),he=r(n(),1),ge=(0,he.jsx)(Ct.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,he.jsx)(Ct.Path,{d:"M12.5 5L10 19h1.9l2.5-14z"})});var _t=r(L(),1),xe=r(n(),1),be=(0,xe.jsx)(_t.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,xe.jsx)(_t.Path,{d:"M9.1 9v-.5c0-.6.2-1.1.7-1.4.5-.3 1.2-.5 2-.5.7 0 1.4.1 2.1.3.7.2 1.4.5 2.1.9l.2-1.9c-.6-.3-1.2-.5-1.9-.7-.8-.1-1.6-.2-2.4-.2-1.5 0-2.7.3-3.6 1-.8.7-1.2 1.5-1.2 2.6V9h2zM20 12H4v1h8.3c.3.1.6.2.8.3.5.2.9.5 1.1.8.3.3.4.7.4 1.2 0 .7-.2 1.1-.8 1.5-.5.3-1.2.5-2.1.5-.8 0-1.6-.1-2.4-.3-.8-.2-1.5-.5-2.2-.8L7 18.1c.5.2 1.2.4 2 .6.8.2 1.6.3 2.4.3 1.7 0 3-.3 3.9-1 .9-.7 1.3-1.6 1.3-2.8 0-.9-.2-1.7-.7-2.2H20v-1z"})});var St=r(L(),1),we=r(n(),1),ye=(0,we.jsx)(St.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,we.jsx)(St.Path,{d:"M12 4a8 8 0 1 1 .001 16.001A8 8 0 0 1 12 4Zm0 1.5a6.5 6.5 0 1 0-.001 13.001A6.5 6.5 0 0 0 12 5.5Zm.75 11h-1.5V15h1.5v1.5Zm-.445-9.234a3 3 0 0 1 .445 5.89V14h-1.5v-1.25c0-.57.452-.958.917-1.01A1.5 1.5 0 0 0 12 8.75a1.5 1.5 0 0 0-1.5 1.5H9a3 3 0 0 1 3.305-2.984Z"})});var Tt=r(L(),1),ke=r(n(),1),ve=(0,ke.jsx)(Tt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,ke.jsx)(Tt.Path,{d:"M17.5 10h-1.7l-3.7 10.5h1.7l.9-2.6h3.9l.9 2.6h1.7L17.5 10zm-2.2 6.3 1.4-4 1.4 4h-2.8zm-4.8-3.8c1.6-1.8 2.9-3.6 3.7-5.7H16V5.2h-5.8V3H8.8v2.2H3v1.5h9.6c-.7 1.6-1.8 3.1-3.1 4.6C8.6 10.2 7.8 9 7.2 8H5.6c.6 1.4 1.7 2.9 2.9 4.4l-2.4 2.4c-.3.4-.7.8-1.1 1.2l1 1 1.2-1.2c.8-.8 1.6-1.5 2.3-2.3.8.9 1.7 1.7 2.5 2.5l.6-1.5c-.7-.6-1.4-1.3-2.1-2z"})});var Lt=r(L(),1),Ce=r(n(),1),_e=(0,Ce.jsx)(Lt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Ce.jsx)(Lt.Path,{d:"M10 17.389H8.444A5.194 5.194 0 1 1 8.444 7H10v1.5H8.444a3.694 3.694 0 0 0 0 7.389H10v1.5ZM14 7h1.556a5.194 5.194 0 0 1 0 10.39H14v-1.5h1.556a3.694 3.694 0 0 0 0-7.39H14V7Zm-4.5 6h5v-1.5h-5V13Z"})});var It=r(L(),1),Se=r(n(),1),Te=(0,Se.jsx)(It.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Se.jsx)(It.Path,{d:"M11.2 6.8c-.7 0-1.4.5-1.6 1.1l-2.8 7.5-1.2-1.8c-.1-.2-.4-.3-.6-.3H3v1.5h1.6l1.2 1.8c.6.9 1.9.7 2.2-.3l2.9-7.9s.1-.2.2-.2h7.8V6.7h-7.8Zm5.3 3.4-1.9 1.9-1.9-1.9-1.1 1.1 1.9 1.9-1.9 1.9 1.1 1.1 1.9-1.9 1.9 1.9 1.1-1.1-1.9-1.9 1.9-1.9-1.1-1.1Z"})});var Bt=r(L(),1),Le=r(n(),1),Ie=(0,Le.jsx)(Bt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Le.jsx)(Bt.Path,{d:"M16.9 18.3l.8-1.2c.4-.6.7-1.2.9-1.6.2-.4.3-.8.3-1.2 0-.3-.1-.7-.2-1-.1-.3-.4-.5-.6-.7-.3-.2-.6-.3-1-.3s-.8.1-1.1.2c-.3.1-.7.3-1 .6l.2 1.3c.3-.3.5-.5.8-.6s.6-.2.9-.2c.3 0 .5.1.7.2.2.2.2.4.2.7 0 .3-.1.5-.2.8-.1.3-.4.7-.8 1.3L15 19.4h4.3v-1.2h-2.4zM14.1 7.2h-2L9.5 11 6.9 7.2h-2l3.6 5.3L4.7 18h2l2.7-4 2.7 4h2l-3.8-5.5 3.8-5.3z"})});var Nt=r(L(),1),Be=r(n(),1),Ne=(0,Be.jsx)(Nt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Be.jsx)(Nt.Path,{d:"M16.9 10.3l.8-1.3c.4-.6.7-1.2.9-1.6.2-.4.3-.8.3-1.2 0-.3-.1-.7-.2-1-.2-.2-.4-.4-.7-.6-.3-.2-.6-.3-1-.3s-.8.1-1.1.2c-.3.1-.7.3-1 .6l.1 1.3c.3-.3.5-.5.8-.6s.6-.2.9-.2c.3 0 .5.1.7.2.2.2.2.4.2.7 0 .3-.1.5-.2.8-.1.3-.4.7-.8 1.3l-1.8 2.8h4.3v-1.2h-2.2zm-2.8-3.1h-2L9.5 11 6.9 7.2h-2l3.6 5.3L4.7 18h2l2.7-4 2.7 4h2l-3.8-5.5 3.8-5.3z"})});var Vt=r(L(),1),Ve=r(n(),1),Re=(0,Ve.jsx)(Vt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Ve.jsx)(Vt.Path,{d:"M12.9 6h-2l-4 11h1.9l1.1-3h4.2l1.1 3h1.9L12.9 6zm-2.5 6.5l1.5-4.9 1.7 4.9h-3.2z"})});var z=r(n(),1),je="core/bold",Fe=(0,ua.__)("Bold"),na={name:je,title:Fe,tagName:"strong",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o,isVisible:s=!0}){function l(){a((0,Ee.toggleFormat)(e,{type:je,title:Fe}))}function f(){a((0,Ee.toggleFormat)(e,{type:je})),o()}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(lt.RichTextShortcut,{type:"primary",character:"b",onUse:l}),s&&(0,z.jsx)(lt.RichTextToolbarButton,{name:"bold",icon:ce,title:Fe,onClick:f,isActive:t,shortcutType:"primary",shortcutCharacter:"b"}),(0,z.jsx)(lt.__unstableRichTextInputEvent,{inputType:"formatBold",onInput:l})]})}};var da=r(b(),1),Y=r(x(),1),Rt=r(y(),1);var Q=r(n(),1),Pe="core/code",Me=(0,da.__)("Inline code"),pa={name:Pe,title:Me,tagName:"code",className:null,__unstableInputRule(t){let{start:a,text:o}=t;if(o[a-1]!=="`"||a-2<0)return t;let l=o.lastIndexOf("`",a-2);if(l===-1)return t;let f=l,i=a-2;return f===i||(t=(0,Y.remove)(t,f,f+1),t=(0,Y.remove)(t,i,i+1),t=(0,Y.applyFormat)(t,{type:Pe},f,i)),t},edit({value:t,onChange:e,onFocus:a,isActive:o}){function s(){e((0,Y.toggleFormat)(t,{type:Pe,title:Me})),a()}return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(Rt.RichTextShortcut,{type:"access",character:"x",onUse:s}),(0,Q.jsx)(Rt.RichTextToolbarButton,{icon:ue,title:Me,onClick:s,isActive:o,role:"menuitemcheckbox"})]})}};var k=r(J(),1),V=r(b(),1),He=r(F(),1),jt=r(x(),1),ft=r(y(),1),g=r(n(),1),Kr=["image"],Ae="core/image",ha=(0,V.__)("Inline image");function qr(t){if(!t?.className)return;let[,e]=t.className.match(/wp-image-(\d+)/)??[];return e?parseInt(e,10):void 0}var Ue={name:Ae,title:ha,keywords:[(0,V.__)("photo"),(0,V.__)("media")],object:!0,tagName:"img",className:null,attributes:{className:"class",style:"style",url:"src",alt:"alt"},edit:Yr};function $r({value:t,onChange:e,activeObjectAttributes:a,contentRef:o}){let{style:s,alt:l}=a,f=s?.replace(/\D/g,""),[i,m]=(0,He.useState)(f),[u,h]=(0,He.useState)(l),v=i!==f||u!==l,R=(0,jt.useAnchor)({editableContentElement:o.current,settings:Ue});return(0,g.jsx)(k.Popover,{focusOnMount:!1,anchor:R,className:"block-editor-format-toolbar__image-popover",children:(0,g.jsx)("form",{className:"block-editor-format-toolbar__image-container-content",onSubmit:_=>{let C=t.replacements.slice();C[t.start]={type:Ae,attributes:{...a,style:i?`width: ${i}px;`:"",alt:u}},e({...t,replacements:C}),_.preventDefault()},children:(0,g.jsxs)(k.__experimentalVStack,{spacing:4,children:[(0,g.jsx)(k.__experimentalNumberControl,{__next40pxDefaultSize:!0,label:(0,V.__)("Width"),value:i,min:1,onChange:_=>{m(_)}}),(0,g.jsx)(k.TextareaControl,{label:(0,V.__)("Alternative text"),value:u,onChange:_=>{h(_)},help:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.ExternalLink,{href:(0,V.__)("https://www.w3.org/WAI/tutorials/images/decision-tree/"),children:(0,V.__)("Describe the purpose of the image.")}),(0,g.jsx)("br",{}),(0,V.__)("Leave empty if decorative.")]})}),(0,g.jsx)(k.__experimentalHStack,{justify:"right",children:(0,g.jsx)(k.Button,{disabled:!v,accessibleWhenDisabled:!0,variant:"primary",type:"submit",size:"compact",children:(0,V.__)("Apply")})})]})})})}function Yr({value:t,onChange:e,onFocus:a,isObjectActive:o,activeObjectAttributes:s,contentRef:l}){return(0,g.jsxs)(ft.MediaUploadCheck,{children:[(0,g.jsx)(ft.MediaUpload,{allowedTypes:Kr,value:qr(s),onSelect:({id:f,url:i,alt:m,width:u})=>{e((0,jt.insertObject)(t,{type:Ae,attributes:{className:`wp-image-${f}`,style:`width: ${Math.min(u,150)}px;`,url:i,alt:m}})),a()},render:({open:f})=>(0,g.jsx)(ft.RichTextToolbarButton,{icon:(0,g.jsx)(k.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,g.jsx)(k.Path,{d:"M4 18.5h16V17H4v1.5zM16 13v1.5h4V13h-4zM5.1 15h7.8c.6 0 1.1-.5 1.1-1.1V6.1c0-.6-.5-1.1-1.1-1.1H5.1C4.5 5 4 5.5 4 6.1v7.8c0 .6.5 1.1 1.1 1.1zm.4-8.5h7V10l-1-1c-.3-.3-.8-.3-1 0l-1.6 1.5-1.2-.7c-.3-.2-.6-.2-.9 0l-1.3 1V6.5zm0 6.1l1.8-1.3 1.3.8c.3.2.7.2.9-.1l1.5-1.4 1.5 1.4v1.5h-7v-.9z"})}),title:o?(0,V.__)("Replace image"):ha,onClick:f,isActive:o})}),o&&(0,g.jsx)($r,{value:t,onChange:e,activeObjectAttributes:s,contentRef:l})]})}var ga=r(b(),1),Oe=r(x(),1),it=r(y(),1);var D=r(n(),1),ze="core/italic",De=(0,ga.__)("Italic"),xa={name:ze,title:De,tagName:"em",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o,isVisible:s=!0}){function l(){a((0,Oe.toggleFormat)(e,{type:ze,title:De}))}function f(){a((0,Oe.toggleFormat)(e,{type:ze})),o()}return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(it.RichTextShortcut,{type:"primary",character:"i",onUse:l}),s&&(0,D.jsx)(it.RichTextToolbarButton,{name:"italic",icon:ge,title:De,onClick:f,isActive:t,shortcutType:"primary",shortcutCharacter:"i"}),(0,D.jsx)(it.__unstableRichTextInputEvent,{inputType:"formatItalic",onInput:l})]})}};var zt=r(b(),1),X=r(F(),1),w=r(x(),1),tt=r(Ft(),1),gt=r(y(),1),Ea=r(ya(),1);var Pa=r(Et(),1);var Ht=r(F(),1),E=r(b(),1),ct=r(Et(),1),Ra=r(J(),1),ja=r(Ft(),1),p=r(x(),1),mt=r(y(),1),At=r(We(),1);var c=r(Ft(),1);function Pt(t){if(!t)return!1;let e=t.trim();if(!e)return!1;if(/^\S+:/.test(e)){let a=(0,c.getProtocol)(e);if(!(0,c.isValidProtocol)(a)||a.startsWith("http")&&!/^https?:\/\/[^\/\s]/i.test(e))return!1;let o=(0,c.getAuthority)(e);if(!(0,c.isValidAuthority)(o))return!1;let s=(0,c.getPath)(e);if(s&&!(0,c.isValidPath)(s))return!1;let l=(0,c.getQueryString)(e);if(l&&!(0,c.isValidQueryString)(l))return!1;let f=(0,c.getFragment)(e);if(f&&!(0,c.isValidFragment)(f))return!1}return!(e.startsWith("#")&&!(0,c.isValidFragment)(e))}function Ca({url:t,type:e,id:a,opensInNewWindow:o,nofollow:s,cssClasses:l}){let f={type:"core/link",attributes:{url:t}};e&&(f.attributes.type=e),a&&(f.attributes.id=a),o&&(f.attributes.target="_blank",f.attributes.rel=f.attributes.rel?f.attributes.rel+" noreferrer noopener":"noreferrer noopener"),s&&(f.attributes.rel=f.attributes.rel?f.attributes.rel+" nofollow":"nofollow");let i=l?.trim();return i?.length&&(f.attributes.class=i),f}function Mt(t,e,a=t.start,o=t.end){let s={start:void 0,end:void 0},{formats:l}=t,f,i;if(!l?.length)return s;let m=l.slice(),u=m[a]?.find(({type:C})=>C===e.type),h=m[o]?.find(({type:C})=>C===e.type),v=m[o-1]?.find(({type:C})=>C===e.type);if(u)f=u,i=a;else if(h)f=h,i=o;else if(v)f=v,i=o-1;else return s;let R=m[i].indexOf(f),_=[m,i,f,R];return a=Qr(..._),o=Jr(..._),a=a<0?0:a,{start:a,end:o+1}}function _a(t,e,a,o,s){let l=e,i={forwards:1,backwards:-1}[s]||1,m=i*-1;for(;t[l]&&t[l][o]===a;)l=l+i;return l=l+m,l}var Sa=(t,...e)=>(...a)=>t(...a,...e),Qr=Sa(_a,"backwards"),Jr=Sa(_a,"forwards");var Ia=r(F(),1),Ba=r(La(),1),Ge=r(b(),1),W=r(J(),1),O=r(n(),1),Na=({setting:t,value:e,onChange:a})=>{let o=e?e?.cssClasses?.length>0:!1,[s,l]=(0,Ia.useState)(o),i=`css-classes-setting-${(0,Ba.useInstanceId)(Na)}`,m=h=>{let v=typeof h=="string"?h.replace(/,/g," ").replace(/\s+/g," ").trim():h;a({...e,[t.id]:v})},u=()=>{s?(o&&m(""),l(!1)):l(!0)};return(0,O.jsxs)("fieldset",{children:[(0,O.jsx)(W.VisuallyHidden,{as:"legend",children:t.title}),(0,O.jsxs)(W.__experimentalVStack,{spacing:3,children:[(0,O.jsx)(W.CheckboxControl,{label:t.title,onChange:u,checked:s||o,"aria-expanded":s,"aria-controls":s?i:void 0}),s&&(0,O.jsx)("div",{id:i,children:(0,O.jsx)(W.__experimentalInputControl,{label:(0,Ge.__)("CSS classes"),value:e?.cssClasses,onChange:m,help:(0,Ge.__)("Separate multiple classes with spaces."),__unstableInputWidth:"100%",__next40pxDefaultSize:!0})})]})]})},Va=Na;var ht=r(n(),1),Xr=[...mt.LinkControl.DEFAULT_LINK_SETTINGS,{id:"nofollow",title:(0,E.__)("Mark as nofollow")},{id:"cssClasses",title:(0,E.__)("Additional CSS class(es)"),render:(t,e,a)=>(0,ht.jsx)(Va,{setting:t,value:e,onChange:a})}];function to({isActive:t,activeAttributes:e,value:a,onChange:o,onFocusOutside:s,stopAddingLink:l,contentRef:f,focusOnMount:i}){let u=eo(a,t).text,{selectionChange:h}=(0,At.useDispatch)(mt.store),{createPageEntity:v,userCanCreatePages:R,selectionStart:_}=(0,At.useSelect)(d=>{let{getSettings:q,getSelectionStart:oe}=d(mt.store),ot=q();return{createPageEntity:ot.__experimentalCreatePageEntity,userCanCreatePages:ot.__experimentalUserCanCreatePages,selectionStart:oe()}},[]),C=(0,Ht.useMemo)(()=>({url:e.url,type:e.type,id:e.id,opensInNewTab:e.target==="_blank",nofollow:e.rel?.includes("nofollow"),title:u,cssClasses:e.class}),[e.class,e.id,e.rel,e.target,e.type,e.url,u]);function ee(){let d=(0,p.removeFormat)(a,"core/link");o(d),l(),(0,ct.speak)((0,E.__)("Link removed."),"assertive")}function ae(d){let oe=!C?.url;d={...C,...d};let ot=(0,ja.prependHTTPS)(d.url),se=Ca({url:ot,type:d.type,id:d.id!==void 0&&d.id!==null?String(d.id):void 0,opensInNewWindow:d.opensInNewTab,nofollow:d.nofollow,cssClasses:d.cssClasses}),st=d.title||ot,M;if((0,p.isCollapsed)(a)&&!t){let $=(0,p.insert)(a,st);M=(0,p.applyFormat)($,se,a.start,a.start+st.length),o(M),l(),h({clientId:_.clientId,identifier:_.attributeKey,start:a.start+st.length+1});return}else if(st===u){let $=Mt(a,{type:"core/link"});M=(0,p.applyFormat)(a,se,$.start,$.end)}else{M=(0,p.create)({text:st}),M=(0,p.applyFormat)(M,se,0,st.length);let $=Mt(a,{type:"core/link"}),[Mr,Hr]=(0,p.split)(a,$.start,$.start),Ar=(0,p.replace)(Hr,u,M);M=(0,p.concat)(Mr,Ar)}o(M),oe||l(),Pt(ot)?t?(0,ct.speak)((0,E.__)("Link edited."),"assertive"):(0,ct.speak)((0,E.__)("Link inserted."),"assertive"):(0,ct.speak)((0,E.__)("Warning: the link has been inserted but may have errors. Please test it."),"assertive")}let j=(0,p.useAnchor)({editableContentElement:f.current,settings:{...Ut,isActive:t}});async function S(d){let q=await v({title:d,status:"draft"});return{id:q.id,type:q.type,title:q.title.rendered,url:q.link,kind:"post-type"}}function re(d){return(0,Ht.createInterpolateElement)((0,E.sprintf)((0,E.__)("Create page: <mark>%s</mark>"),d),{mark:(0,ht.jsx)("mark",{})})}return(0,ht.jsx)(Ra.Popover,{anchor:j,animate:!1,onClose:l,onFocusOutside:s,placement:"bottom",offset:8,shift:!0,focusOnMount:i,constrainTabbing:!0,children:(0,ht.jsx)(mt.LinkControl,{value:C,onChange:ae,onRemove:ee,hasRichPreviews:!0,createSuggestion:v&&S,withCreateSuggestion:R,createSuggestionButtonText:re,hasTextControl:!0,settings:Xr,showInitialSuggestions:!0,suggestionsQuery:{initialSuggestionsSearchOptions:{type:"post",subtype:"page",perPage:20}}})})}function eo(t,e){let a=t.start,o=t.end;if(e){let s=Mt(t,{type:"core/link"});a=s.start,o=s.end}return(0,p.slice)(t,a,o)}var Fa=to;var H=r(n(),1),ut="core/link",Ma=(0,zt.__)("Link");function ao({isActive:t,activeAttributes:e,value:a,onChange:o,onFocus:s,contentRef:l,isVisible:f=!0}){let[i,m]=(0,X.useState)(!1),[u,h]=(0,X.useState)(null);(0,X.useEffect)(()=>{t||m(!1)},[t]),(0,X.useLayoutEffect)(()=>{let j=l.current;if(!j)return;function S(re){let d=re.target.closest("[contenteditable] a");!d||!t||(m(!0),h({el:d,action:"click"}))}return j.addEventListener("click",S),()=>{j.removeEventListener("click",S)}},[l,t]);function v(j){let S=(0,w.getTextContent)((0,w.slice)(a));!t&&S&&(0,tt.isURL)(S)&&Pt(S)?o((0,w.applyFormat)(a,{type:ut,attributes:{url:S}})):!t&&S&&(0,tt.isEmail)(S)?o((0,w.applyFormat)(a,{type:ut,attributes:{url:`mailto:${S}`}})):!t&&S&&(0,tt.isPhoneNumber)(S)?o((0,w.applyFormat)(a,{type:ut,attributes:{url:`tel:${S.replace(/\D/g,"")}`}})):(j&&h({el:j,action:null}),m(!0))}function R(){m(!1),u?.el?.tagName==="BUTTON"?u.el.focus():s(),h(null)}function _(){m(!1),h(null)}function C(){o((0,w.removeFormat)(a,ut)),(0,Pa.speak)((0,zt.__)("Link removed."),"assertive")}let ee=!(u?.el?.tagName==="A"&&u?.action==="click"),ae=!(0,w.isCollapsed)(a);return(0,H.jsxs)(H.Fragment,{children:[ae&&(0,H.jsx)(gt.RichTextShortcut,{type:"primary",character:"k",onUse:v}),(0,H.jsx)(gt.RichTextShortcut,{type:"primaryShift",character:"k",onUse:C}),f&&(0,H.jsx)(gt.RichTextToolbarButton,{name:"link",icon:_e,title:t?(0,zt.__)("Link"):Ma,onClick:j=>{v(j.currentTarget)},isActive:t||i,shortcutType:"primary",shortcutCharacter:"k","aria-haspopup":"true","aria-expanded":i}),f&&i&&(0,H.jsx)(Fa,{stopAddingLink:R,onFocusOutside:_,isActive:t,activeAttributes:e,value:a,onChange:o,contentRef:l,focusOnMount:ee?"firstElement":!1})]})}var Ut={name:ut,title:Ma,tagName:"a",className:null,attributes:{url:"href",type:"data-type",id:"data-id",_id:"id",target:"target",rel:"rel",class:"class"},__unstablePasteRule(t,{html:e,plainText:a}){let o=(e||a).replace(/<[^>]+>/g,"").trim();if(!(0,tt.isURL)(o)||!/^https?:/.test(o))return t;window.console.log(`Created link:

`,o);let s={type:ut,attributes:{url:(0,Ea.decodeEntities)(o)}};return(0,w.isCollapsed)(t)?(0,w.insert)(t,(0,w.applyFormat)((0,w.create)({text:a}),s,0,a.length)):(0,w.applyFormat)(t,s)},edit:ao};var Aa=r(b(),1),Ua=r(x(),1),Dt=r(y(),1);var et=r(n(),1),Ha="core/strikethrough",Ze=(0,Aa.__)("Strikethrough"),za={name:Ha,title:Ze,tagName:"s",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o}){function s(){a((0,Ua.toggleFormat)(e,{type:Ha,title:Ze})),o()}return(0,et.jsxs)(et.Fragment,{children:[(0,et.jsx)(Dt.RichTextShortcut,{type:"access",character:"d",onUse:s}),(0,et.jsx)(Dt.RichTextToolbarButton,{icon:be,title:Ze,onClick:s,isActive:t,role:"menuitemcheckbox"})]})}};var Wa=r(b(),1),Ga=r(x(),1),Ot=r(y(),1),at=r(n(),1),Da="core/underline",Oa=(0,Wa.__)("Underline"),Za={name:Da,title:Oa,tagName:"span",className:null,attributes:{style:"style"},edit({value:t,onChange:e}){let a=()=>{e((0,Ga.toggleFormat)(t,{type:Da,attributes:{style:"text-decoration: underline;"},title:Oa}))};return(0,at.jsxs)(at.Fragment,{children:[(0,at.jsx)(Ot.RichTextShortcut,{type:"primary",character:"u",onUse:a}),(0,at.jsx)(Ot.__unstableRichTextInputEvent,{inputType:"formatUnderline",onInput:a})]})}};var tr=r(b(),1),Yt=r(F(),1),Qt=r(y(),1);var er=r(x(),1);var Qa=r(F(),1),Ja=r(We(),1),G=r(x(),1),P=r(y(),1),Zt=r(J(),1),Ke=r(b(),1);var $a=r(qa(),1),{lock:Ns,unlock:Wt}=(0,$a.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/format-library");var A=r(n(),1),{Tabs:Gt}=Wt(Zt.privateApis),Ya=[{name:"color",title:(0,Ke.__)("Text")},{name:"backgroundColor",title:(0,Ke.__)("Background")}];function ro(t=""){return t.split(";").reduce((e,a)=>{if(a){let[o,s]=a.split(":");o==="color"&&(e.color=s),o==="background-color"&&s!==xt&&(e.backgroundColor=s)}return e},{})}function oo(t="",e){return t.split(" ").reduce((a,o)=>{if(o.startsWith("has-")&&o.endsWith("-color")){let s=o.replace(/^has-/,"").replace(/-color$/,""),l=(0,P.getColorObjectByAttributeValues)(e,s);a.color=l.color}return a},{})}function Kt(t,e,a){let o=(0,G.getActiveFormat)(t,e);return o?{...ro(o.attributes.style),...oo(o.attributes.class,a)}:{}}function so(t,e,a,o){let{color:s,backgroundColor:l}={...Kt(t,e,a),...o};if(!s&&!l)return(0,G.removeFormat)(t,e);let f=[],i=[],m={};if(l?f.push(["background-color",l].join(":")):f.push(["background-color",xt].join(":")),s){let u=(0,P.getColorObjectByColorValue)(a,s);u?i.push((0,P.getColorClassName)("color",u.slug)):f.push(["color",s].join(":"))}return f.length&&(m.style=f.join(";")),i.length&&(m.class=i.join(" ")),(0,G.applyFormat)(t,{type:e,attributes:m})}function lo({name:t,property:e,value:a,onChange:o}){let s=(0,Ja.useSelect)(f=>{let{getSettings:i}=f(P.store);return i().colors??[]},[]),l=(0,Qa.useMemo)(()=>Kt(a,t,s),[t,a,s]);return(0,A.jsx)(P.ColorPalette,{value:l[e],onChange:f=>{o(so(a,t,s,{[e]:f}))},enableAlpha:!0,__experimentalIsRenderedInSidebar:!0})}function Xa({name:t,value:e,onChange:a,onClose:o,contentRef:s,isActive:l}){let f=(0,G.useAnchor)({editableContentElement:s.current,settings:{...qt,isActive:l}});return(0,A.jsx)(Zt.Popover,{onClose:o,className:"format-library__inline-color-popover",anchor:f,children:(0,A.jsxs)(Gt,{children:[(0,A.jsx)(Gt.TabList,{children:Ya.map(i=>(0,A.jsx)(Gt.Tab,{tabId:i.name,children:i.title},i.name))}),Ya.map(i=>(0,A.jsx)(Gt.TabPanel,{tabId:i.name,focusable:!1,children:(0,A.jsx)(lo,{name:t,property:i.name,value:e,onChange:a})},i.name))]})})}var Z=r(n(),1),xt="rgba(0, 0, 0, 0)",$t="core/text-color",ar=(0,tr.__)("Highlight"),fo=[];function qe(t,e){let{ownerDocument:a}=t,{defaultView:o}=a,l=o.getComputedStyle(t).getPropertyValue(e);return e==="background-color"&&l===xt&&t.parentElement?qe(t.parentElement,e):l}function io(t,{color:e,backgroundColor:a}){if(!(!e&&!a))return{color:e||qe(t,"color"),backgroundColor:a===xt?qe(t,"background-color"):a}}function mo({value:t,onChange:e,isActive:a,activeAttributes:o,contentRef:s}){let[l,f=fo]=(0,Qt.useSettings)("color.custom","color.palette"),[i,m]=(0,Yt.useState)(!1),u=(0,Yt.useMemo)(()=>io(s.current,Kt(t,$t,f)),[s,t,f]),h=!!f.length||l;return!h&&!a?null:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(Qt.RichTextToolbarButton,{className:"format-library-text-color-button",isActive:a,icon:(0,Z.jsx)(le,{icon:Object.keys(o).length?Re:de,style:u}),title:ar,onClick:h?()=>m(!0):()=>e((0,er.removeFormat)(t,$t)),role:"menuitemcheckbox"}),i&&(0,Z.jsx)(Xa,{name:$t,onClose:()=>m(!1),activeAttributes:o,value:t,onChange:e,contentRef:s,isActive:a})]})}var qt={name:$t,title:ar,tagName:"mark",className:"has-inline-color",attributes:{style:"style",class:"class"},edit:mo};var or=r(b(),1),sr=r(x(),1),lr=r(y(),1);var fr=r(n(),1),rr="core/subscript",$e=(0,or.__)("Subscript"),ir={name:rr,title:$e,tagName:"sub",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o}){function s(){a((0,sr.toggleFormat)(e,{type:rr,title:$e}))}function l(){s(),o()}return(0,fr.jsx)(lr.RichTextToolbarButton,{icon:Ie,title:$e,onClick:l,isActive:t,role:"menuitemcheckbox"})}};var ur=r(b(),1),nr=r(x(),1),dr=r(y(),1);var pr=r(n(),1),mr="core/superscript",Ye=(0,ur.__)("Superscript"),cr={name:mr,title:Ye,tagName:"sup",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o}){function s(){a((0,nr.toggleFormat)(e,{type:mr,title:Ye}))}function l(){s(),o()}return(0,pr.jsx)(dr.RichTextToolbarButton,{icon:Ne,title:Ye,onClick:l,isActive:t,role:"menuitemcheckbox"})}};var gr=r(b(),1),xr=r(x(),1),br=r(y(),1);var wr=r(n(),1),hr="core/keyboard",Qe=(0,gr.__)("Keyboard input"),yr={name:hr,title:Qe,tagName:"kbd",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o}){function s(){a((0,xr.toggleFormat)(e,{type:hr,title:Qe}))}function l(){s(),o()}return(0,wr.jsx)(br.RichTextToolbarButton,{icon:ie,title:Qe,onClick:l,isActive:t,role:"menuitemcheckbox"})}};var vr=r(b(),1),nt=r(x(),1),Cr=r(y(),1);var _r=r(n(),1),Je="core/unknown",kr=(0,vr.__)("Clear Unknown Formatting");function uo(t){return(0,nt.isCollapsed)(t)?!1:(0,nt.slice)(t).formats.some(a=>a.some(o=>o.type===Je))}var Sr={name:Je,title:kr,tagName:"*",className:null,edit({isActive:t,value:e,onChange:a,onFocus:o}){if(!t&&!uo(e))return null;function s(){a((0,nt.removeFormat)(e,Je)),o()}return(0,_r.jsx)(Cr.RichTextToolbarButton,{name:"unknown",icon:ye,title:kr,onClick:s,isActive:!0})}};var rt=r(b(),1),Tr=r(y(),1),N=r(J(),1),Jt=r(F(),1),dt=r(x(),1);var B=r(n(),1),Xe="core/language",Xt=(0,rt.__)("Language"),ta={name:Xe,title:Xt,tagName:"bdo",className:null,attributes:{lang:"lang",dir:"dir"},edit:no};function no({isActive:t,value:e,onChange:a,contentRef:o}){let[s,l]=(0,Jt.useState)(!1),f=()=>{l(i=>!i)};return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Tr.RichTextToolbarButton,{icon:ve,label:Xt,title:Xt,onClick:()=>{t?a((0,dt.removeFormat)(e,Xe)):f()},isActive:t,role:"menuitemcheckbox"}),s&&(0,B.jsx)(po,{value:e,onChange:a,onClose:f,contentRef:o})]})}function po({value:t,contentRef:e,onChange:a,onClose:o}){let s=(0,dt.useAnchor)({editableContentElement:e.current,settings:ta}),[l,f]=(0,Jt.useState)(""),[i,m]=(0,Jt.useState)("ltr");return(0,B.jsx)(N.Popover,{className:"block-editor-format-toolbar__language-popover",anchor:s,onClose:o,children:(0,B.jsxs)(N.__experimentalVStack,{as:"form",spacing:4,className:"block-editor-format-toolbar__language-container-content",onSubmit:u=>{u.preventDefault(),a((0,dt.applyFormat)(t,{type:Xe,attributes:{lang:l,dir:i}})),o()},children:[(0,B.jsx)(N.TextControl,{__next40pxDefaultSize:!0,label:Xt,value:l,onChange:u=>f(u),help:(0,rt.__)('A valid language attribute, like "en" or "fr".')}),(0,B.jsx)(N.SelectControl,{__next40pxDefaultSize:!0,label:(0,rt.__)("Text direction"),value:i,options:[{label:(0,rt.__)("Left to right"),value:"ltr"},{label:(0,rt.__)("Right to left"),value:"rtl"}],onChange:u=>m(u)}),(0,B.jsx)(N.__experimentalHStack,{alignment:"right",children:(0,B.jsx)(N.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",text:(0,rt.__)("Apply")})})]})})}var U=r(b(),1),pt=r(F(),1),te=r(x(),1),Lr=r(y(),1),K=r(J(),1);var Ir=r(Et(),1);var T=r(n(),1),{Badge:co}=Wt(K.privateApis),ea="core/math",Br=(0,U.__)("Math");function ho({value:t,onChange:e,activeAttributes:a,contentRef:o,latexToMathML:s}){let[l,f]=(0,pt.useState)(a?.["data-latex"]||""),[i,m]=(0,pt.useState)(null),u=(0,te.useAnchor)({editableContentElement:o.current,settings:aa}),h=v=>{let R="";if(f(v),v)try{R=s(v,{displayMode:!1}),m(null)}catch(C){m(C.message),(0,Ir.speak)((0,U.sprintf)((0,U.__)("Error parsing mathematical expression: %s"),C.message));return}let _=t.replacements.slice();_[t.start]={type:ea,attributes:{"data-latex":v},innerHTML:R},e({...t,replacements:_})};return(0,T.jsx)(K.Popover,{placement:"bottom-start",offset:8,focusOnMount:!1,anchor:u,className:"block-editor-format-toolbar__math-popover",children:(0,T.jsx)("div",{style:{minWidth:"300px",padding:"4px"},children:(0,T.jsxs)(K.__experimentalVStack,{spacing:1,children:[(0,T.jsx)(K.TextControl,{__next40pxDefaultSize:!0,hideLabelFromVision:!0,label:(0,U.__)("LaTeX math syntax"),value:l,onChange:h,placeholder:(0,U.__)("e.g., x^2, \\frac{a}{b}"),autoComplete:"off",className:"block-editor-format-toolbar__math-input"}),i&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(co,{intent:"error",className:"wp-block-math__error",children:(0,U.sprintf)((0,U.__)("Error: %s"),i)}),(0,T.jsx)("style",{children:".wp-block-math__error .components-badge__content{white-space:normal}"})]})]})})})}function go({value:t,onChange:e,onFocus:a,isObjectActive:o,activeObjectAttributes:s,contentRef:l}){let[f,i]=(0,pt.useState)();return(0,pt.useEffect)(()=>{import("@wordpress/latex-to-mathml").then(m=>{i(()=>m.default)})},[]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Lr.RichTextToolbarButton,{icon:Te,title:Br,onClick:()=>{let m=(0,te.insertObject)(t,{type:ea,attributes:{"data-latex":""},innerHTML:""});m.start=m.end-1,e(m),a()},isActive:o}),o&&(0,T.jsx)(ho,{value:t,onChange:e,activeAttributes:s,contentRef:l,latexToMathML:f})]})}var aa={name:ea,title:Br,tagName:"math",className:null,attributes:{"data-latex":"data-latex"},contentEditable:!1,edit:go};var Nr=r(b(),1),Vr=r(x(),1),Rr=r(y(),1),jr=r(n(),1),xo="core/non-breaking-space",bo=(0,Nr.__)("Non breaking space"),Fr={name:xo,title:bo,tagName:"nbsp",className:null,edit({value:t,onChange:e}){function a(){e((0,Vr.insert)(t,"\xA0"))}return(0,jr.jsx)(Rr.RichTextShortcut,{type:"primaryShift",character:" ",onUse:a})}};var Er=[na,pa,Ue,xa,Ut,za,Za,qt,ir,cr,yr,Sr,ta,aa,Fr];Er.forEach(({name:t,...e})=>(0,Pr.registerFormatType)(t,e));})();
var wp;(wp||={}).patterns=(()=>{var Sa=Object.create;var ht=Object.defineProperty;var wa=Object.getOwnPropertyDescriptor;var ka=Object.getOwnPropertyNames;var Ca=Object.getPrototypeOf,xa=Object.prototype.hasOwnProperty;var S=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports),It=(t,a)=>{for(var r in a)ht(t,r,{get:a[r],enumerable:!0})},le=(t,a,r,f)=>{if(a&&typeof a=="object"||typeof a=="function")for(let o of ka(a))!xa.call(t,o)&&o!==r&&ht(t,o,{get:()=>a[o],enumerable:!(f=wa(a,o))||f.enumerable});return t};var e=(t,a,r)=>(r=t!=null?Sa(Ca(t)):{},le(a||!t||!t.__esModule?ht(r,"default",{value:t,enumerable:!0}):r,t)),Ta=t=>le(ht({},"__esModule",{value:!0}),t);var T=S((Va,fe)=>{fe.exports=window.wp.data});var yt=S((Ya,ue)=>{ue.exports=window.wp.blocks});var z=S((qa,de)=>{de.exports=window.wp.coreData});var G=S((Ga,ne)=>{ne.exports=window.wp.blockEditor});var _e=S((Xa,ye)=>{ye.exports=window.wp.privateApis});var O=S((er,Se)=>{Se.exports=window.wp.components});var I=S((ar,we)=>{we.exports=window.wp.element});var P=S((rr,ke)=>{ke.exports=window.wp.i18n});var k=S((sr,Ce)=>{Ce.exports=window.ReactJSXRuntime});var st=S((mr,Re)=>{Re.exports=window.wp.notices});var De=S((ur,Be)=>{Be.exports=window.wp.compose});var Ct=S((dr,Ne)=>{Ne.exports=window.wp.htmlEntities});var $e=S((xr,Qe)=>{Qe.exports=window.wp.primitives});var aa=S((Lr,ea)=>{ea.exports=window.wp.url});var te=S((Fr,ia)=>{ia.exports=window.wp.a11y});var ja={};It(ja,{privateApis:()=>ba,store:()=>A});var wt=e(T(),1);var ie=e(T(),1);function Pa(t={},a){return a?.type==="SET_EDITING_PATTERN"?{...t,[a.clientId]:a.isEditing}:t}var me=(0,ie.combineReducers)({isEditingPattern:Pa});var Ut={};It(Ut,{convertSyncedPatternToStatic:()=>Ba,createPattern:()=>Ea,createPatternFromFile:()=>Ra,setEditingPattern:()=>Da});var St=e(yt(),1),ge=e(z(),1),vt=e(G(),1);var Z={theme:"pattern",user:"wp_block"},_t="all-patterns",pe="my-patterns",ce=["core","pattern-directory/core","pattern-directory/featured"],v={full:"fully",unsynced:"unsynced"},bt="core/pattern-overrides";var Ea=(t,a,r,f)=>async({registry:o})=>{let u=a===v.unsynced?{wp_pattern_sync_status:a}:void 0,i={title:t,content:r,status:"publish",meta:u,wp_pattern_category:f};return await o.dispatch(ge.store).saveEntityRecord("postType","wp_block",i)},Ra=(t,a)=>async({dispatch:r})=>{let f=await t.text(),o;try{o=JSON.parse(f)}catch{throw new Error("Invalid JSON file")}if(o.__file!=="wp_block"||!o.title||!o.content||typeof o.title!="string"||typeof o.content!="string"||o.syncStatus&&typeof o.syncStatus!="string")throw new Error("Invalid pattern JSON file");return await r.createPattern(o.title,o.syncStatus,o.content,a)},Ba=t=>({registry:a})=>{let r=a.select(vt.store).getBlock(t),f=r.attributes?.content;function o(i){return i.map(s=>{let l=s.attributes.metadata;if(l&&(l={...l},delete l.id,delete l.bindings,f?.[l.name]))for(let[m,n]of Object.entries(f[l.name]))(0,St.getBlockType)(s.name)?.attributes[m]&&(s.attributes[m]=n);return(0,St.cloneBlock)(s,{metadata:l&&Object.keys(l).length>0?l:void 0},o(s.innerBlocks))})}let u=a.select(vt.store).getBlocks(r.clientId);a.dispatch(vt.store).replaceBlocks(r.clientId,o(u))};function Da(t,a){return{type:"SET_EDITING_PATTERN",clientId:t,isEditing:a}}var he="core/patterns";var jt={};It(jt,{isEditingPattern:()=>Na});function Na(t,a){return t.isEditingPattern[a]}var be=e(_e(),1),{lock:ve,unlock:N}=(0,be.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/patterns");var Aa={reducer:me},A=(0,wt.createReduxStore)(he,{...Aa});(0,wt.register)(A);N(A).registerPrivateActions(Ut);N(A).registerPrivateSelectors(jt);var ot=e(G(),1),xe=e(O(),1),zt=e(T(),1),Te=e(I(),1),Pe=e(P(),1);function kt(t){return!!t.attributes.metadata?.name&&!!t.attributes.metadata?.bindings&&Object.values(t.attributes.metadata.bindings).some(a=>a.source==="core/pattern-overrides")}var Vt=e(k(),1),{BlockQuickNavigation:Oa}=N(ot.privateApis);function Ee(){let{allClientIds:t,supportedBlockTypesRaw:a}=(0,zt.useSelect)(o=>({allClientIds:o(ot.store).getClientIdsWithDescendants(),supportedBlockTypesRaw:o(ot.store).getSettings()?.__experimentalBlockBindingsSupportedAttributes}),[]),{getBlock:r}=(0,zt.useSelect)(ot.store),f=(0,Te.useMemo)(()=>{let o=Object.keys(a??{});return t.filter(u=>{let i=r(u);return o.includes(i.name)&&kt(i)})},[t,r,a]);return f?.length?(0,Vt.jsx)(xe.PanelBody,{title:(0,Pe.__)("Overrides"),children:(0,Vt.jsx)(Oa,{clientIds:f})}):null}var x=e(O(),1),H=e(P(),1),ut=e(I(),1),dt=e(T(),1),ze=e(st(),1),Ve=e(z(),1);var Ae=e(P(),1),xt=e(I(),1),Oe=e(O(),1),Le=e(De(),1),Me=e(Ct(),1),Ie=e(k(),1),La=t=>(0,Me.decodeEntities)(t),Tt="wp_pattern_category";function Ue({categoryTerms:t,onChange:a,categoryMap:r}){let[f,o]=(0,xt.useState)(""),u=(0,Le.useDebounce)(o,500),i=(0,xt.useMemo)(()=>Array.from(r.values()).map(l=>La(l.label)).filter(l=>f!==""?l.toLowerCase().includes(f.toLowerCase()):!0).sort((l,m)=>l.localeCompare(m)),[f,r]);function s(l){let m=l.reduce((n,p)=>(n.some(c=>c.toLowerCase()===p.toLowerCase())||n.push(p),n),[]);a(m)}return(0,Ie.jsx)(Oe.FormTokenField,{className:"patterns-menu-items__convert-modal-categories",value:t,suggestions:i,onChange:s,onInputChange:u,label:(0,Ae.__)("Categories"),tokenizeOnBlur:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0})}var Pt=e(T(),1),Ft=e(z(),1),je=e(I(),1);function Et(){let{saveEntityRecord:t,invalidateResolution:a}=(0,Pt.useDispatch)(Ft.store),{corePatternCategories:r,userPatternCategories:f}=(0,Pt.useSelect)(i=>{let{getUserPatternCategories:s,getBlockPatternCategories:l}=i(Ft.store);return{corePatternCategories:l(),userPatternCategories:s()}},[]),o=(0,je.useMemo)(()=>{let i=new Map;return f.forEach(s=>{i.set(s.label.toLowerCase(),{label:s.label,name:s.name,id:s.id})}),r.forEach(s=>{!i.has(s.label.toLowerCase())&&s.name!=="query"&&i.set(s.label.toLowerCase(),{label:s.label,name:s.name})}),i},[f,r]);async function u(i){try{let s=o.get(i.toLowerCase());if(s?.id)return s.id;let l=s?{name:s.label,slug:s.name}:{name:i},m=await t("taxonomy",Tt,l,{throwOnError:!0});return a("getUserPatternCategories"),m.id}catch(s){if(s.code!=="term_exists")throw s;return s.data.term_id}}return{categoryMap:o,findOrCreateTerm:u}}var E=e(k(),1);function lt({className:t="patterns-menu-items__convert-modal",modalTitle:a,...r}){let f=(0,dt.useSelect)(o=>o(Ve.store).getPostType(Z.user)?.labels?.add_new_item,[]);return(0,E.jsx)(x.Modal,{title:a||f,onRequestClose:r.onClose,overlayClassName:t,focusOnMount:"firstContentElement",size:"small",children:(0,E.jsx)(Yt,{...r})})}function Yt({confirmLabel:t=(0,H.__)("Add"),defaultCategories:a=[],content:r,onClose:f,onError:o,onSuccess:u,defaultSyncType:i=v.full,defaultTitle:s=""}){let[l,m]=(0,ut.useState)(i),[n,p]=(0,ut.useState)(a),[c,g]=(0,ut.useState)(s),[d,h]=(0,ut.useState)(!1),{createPattern:B}=N((0,dt.useDispatch)(A)),{createErrorNotice:w}=(0,dt.useDispatch)(ze.store),{categoryMap:$,findOrCreateTerm:mt}=Et();async function D(Y,K){if(!(!c||d))try{h(!0);let _=await Promise.all(n.map(q=>mt(q))),oe=await B(Y,K,typeof r=="function"?r():r,_);u({pattern:oe,categoryId:_t})}catch(_){w(_.message,{type:"snackbar",id:"pattern-create"}),o?.()}finally{h(!1),p([]),g("")}}return(0,E.jsx)("form",{onSubmit:Y=>{Y.preventDefault(),D(c,l)},children:(0,E.jsxs)(x.__experimentalVStack,{spacing:"5",children:[(0,E.jsx)(x.TextControl,{label:(0,H.__)("Name"),value:c,onChange:g,placeholder:(0,H.__)("My pattern"),className:"patterns-create-modal__name-input",__next40pxDefaultSize:!0}),(0,E.jsx)(Ue,{categoryTerms:n,onChange:p,categoryMap:$}),(0,E.jsx)(x.ToggleControl,{label:(0,H._x)("Synced","pattern (singular)"),help:(0,H.__)("Sync this pattern across multiple locations."),checked:l===v.full,onChange:()=>{m(l===v.full?v.unsynced:v.full)}}),(0,E.jsxs)(x.__experimentalHStack,{justify:"right",children:[(0,E.jsx)(x.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:()=>{f(),g("")},children:(0,H.__)("Cancel")}),(0,E.jsx)(x.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!c||d,isBusy:d,children:t})]})]})})}var Fe=e(z(),1),Rt=e(T(),1),V=e(P(),1),Ye=e(st(),1);var qe=e(k(),1);function Ma(t,a){return t.type!==Z.user?a.core?.filter(r=>t.categories?.includes(r.name)).map(r=>r.label):a.user?.filter(r=>t.wp_pattern_category?.includes(r.id)).map(r=>r.label)}function qt({pattern:t,onSuccess:a}){let{createSuccessNotice:r}=(0,Rt.useDispatch)(Ye.store),f=(0,Rt.useSelect)(o=>{let{getUserPatternCategories:u,getBlockPatternCategories:i}=o(Fe.store);return{core:i(),user:u()}});return t?{content:t.content,defaultCategories:Ma(t,f),defaultSyncType:t.type!==Z.user?v.unsynced:t.wp_pattern_sync_status||v.full,defaultTitle:(0,V.sprintf)((0,V._x)("%s (Copy)","pattern"),typeof t.title=="string"?t.title:t.title.raw),onSuccess:({pattern:o})=>{r((0,V.sprintf)((0,V._x)('"%s" duplicated.',"pattern"),o.title.raw),{type:"snackbar",id:"patterns-create"}),a?.({pattern:o})}}:null}function Ge({pattern:t,onClose:a,onSuccess:r}){let f=qt({pattern:t,onSuccess:r});return t?(0,qe.jsx)(lt,{modalTitle:(0,V.__)("Duplicate pattern"),confirmLabel:(0,V.__)("Duplicate"),onClose:a,onError:a,...f}):null}var L=e(O(),1),He=e(z(),1),Gt=e(T(),1),Ht=e(I(),1),We=e(Ct(),1),tt=e(P(),1),Je=e(st(),1),F=e(k(),1);function Xe({onClose:t,onError:a,onSuccess:r,pattern:f,...o}){let u=(0,We.decodeEntities)(f.title),[i,s]=(0,Ht.useState)(u),[l,m]=(0,Ht.useState)(!1),{editEntityRecord:n,__experimentalSaveSpecifiedEntityEdits:p}=(0,Gt.useDispatch)(He.store),{createSuccessNotice:c,createErrorNotice:g}=(0,Gt.useDispatch)(Je.store),d=async B=>{if(B.preventDefault(),!(!i||i===f.title||l))try{await n("postType",f.type,f.id,{title:i}),m(!0),s(""),t?.();let w=await p("postType",f.type,f.id,["title"],{throwOnError:!0});r?.(w),c((0,tt.__)("Pattern renamed"),{type:"snackbar",id:"pattern-update"})}catch(w){a?.();let $=w.message&&w.code!=="unknown_error"?w.message:(0,tt.__)("An error occurred while renaming the pattern.");g($,{type:"snackbar",id:"pattern-update"})}finally{m(!1),s("")}},h=()=>{t?.(),s("")};return(0,F.jsx)(L.Modal,{title:(0,tt.__)("Rename"),...o,onRequestClose:t,focusOnMount:"firstContentElement",size:"small",children:(0,F.jsx)("form",{onSubmit:d,children:(0,F.jsxs)(L.__experimentalVStack,{spacing:"5",children:[(0,F.jsx)(L.TextControl,{__next40pxDefaultSize:!0,label:(0,tt.__)("Name"),value:i,onChange:s,required:!0}),(0,F.jsxs)(L.__experimentalHStack,{justify:"right",children:[(0,F.jsx)(L.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:h,children:(0,tt.__)("Cancel")}),(0,F.jsx)(L.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,tt.__)("Save")})]})]})})})}var la=e(G(),1);var U=e(yt(),1),nt=e(G(),1),Dt=e(I(),1),Ke=e(O(),1);var Bt=e($e(),1),Wt=e(k(),1),Jt=(0,Wt.jsx)(Bt.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,Wt.jsx)(Bt.Path,{d:"M21.3 10.8l-5.6-5.6c-.7-.7-1.8-.7-2.5 0l-5.6 5.6c-.7.7-.7 1.8 0 2.5l5.6 5.6c.3.3.8.5 1.2.5s.9-.2 1.2-.5l5.6-5.6c.8-.7.8-1.9.1-2.5zm-1 1.4l-5.6 5.6c-.1.1-.3.1-.4 0l-5.6-5.6c-.1-.1-.1-.3 0-.4l5.6-5.6s.1-.1.2-.1.1 0 .2.1l5.6 5.6c.1.1.1.3 0 .4zm-16.6-.4L10 5.5l-1-1-6.3 6.3c-.7.7-.7 1.8 0 2.5L9 19.5l1.1-1.1-6.3-6.3c-.2 0-.2-.2-.1-.3z"})});var W=e(T(),1),Xt=e(z(),1),et=e(P(),1),Ze=e(st(),1);var at=e(k(),1);function ta({clientIds:t,rootClientId:a,closeBlockSettingsMenu:r}){let{createSuccessNotice:f}=(0,W.useDispatch)(Ze.store),{replaceBlocks:o,updateBlockAttributes:u}=(0,W.useDispatch)(nt.store),{setEditingPattern:i}=N((0,W.useDispatch)(A)),[s,l]=(0,Dt.useState)(!1),{getBlockAttributes:m}=(0,W.useSelect)(nt.store),n=(0,W.useSelect)(d=>{let{canUser:h}=d(Xt.store),{getBlocksByClientId:B,canInsertBlockType:w,getBlockRootClientId:$}=d(nt.store),mt=a||(t.length>0?$(t[0]):void 0),D=B(t)??[],Y=q=>{let se=(0,U.getBlockType)(q),va=se&&"parent"in se;return(0,U.hasBlockSupport)(q,"reusable",!va)},K=D.length===1&&D[0]&&(0,U.isReusableBlock)(D[0])&&!!d(Xt.store).getEntityRecord("postType","wp_block",D[0].attributes.ref);return!(D.length===1&&D?.[0]?.attributes?.metadata?.patternName)&&!K&&w("core/block",mt)&&D.every(q=>!!q&&q.isValid&&Y(q.name))&&!!h("create",{kind:"postType",name:"wp_block"})},[t,a]),{getBlocksByClientId:p}=(0,W.useSelect)(nt.store),c=(0,Dt.useCallback)(()=>(0,U.serialize)(p(t)),[p,t]);if(!n)return null;let g=({pattern:d})=>{if(d.wp_pattern_sync_status===v.unsynced){if(t?.length===1){let h=m(t[0]);u(t[0],{metadata:{...h?.metadata?h.metadata:{},patternName:`core/block/${d.id}`,name:d.title.raw}})}}else{let h=(0,U.createBlock)("core/block",{ref:d.id});o(t,h),i(h.clientId,!0),r()}f(d.wp_pattern_sync_status===v.unsynced?(0,et.sprintf)((0,et.__)("Unsynced pattern created: %s"),d.title.raw):(0,et.sprintf)((0,et.__)("Synced pattern created: %s"),d.title.raw),{type:"snackbar",id:"convert-to-pattern-success"}),l(!1)};return(0,at.jsxs)(at.Fragment,{children:[(0,at.jsx)(Ke.MenuItem,{icon:Jt,onClick:()=>l(!0),"aria-expanded":s,"aria-haspopup":"dialog",children:(0,et.__)("Create pattern")}),s&&(0,at.jsx)(lt,{content:c,onSuccess:d=>{g(d)},onError:()=>{l(!1)},onClose:()=>{l(!1)}})]})}var Qt=e(O(),1),$t=e(P(),1),ra=e(yt(),1),pt=e(T(),1),Kt=e(G(),1),Zt=e(aa(),1),oa=e(z(),1);var rt=e(k(),1);function Ia({clientId:t}){let{attributes:a,canDetach:r,isVisible:f,managePatternsUrl:o,isSyncedPattern:u,isUnsyncedPattern:i}=(0,pt.useSelect)(m=>{let{canRemoveBlock:n,getBlock:p}=m(Kt.store),{canUser:c}=m(oa.store),g=p(t),d=!!g?.attributes?.metadata?.patternName,h=!!g&&(0,ra.isReusableBlock)(g)&&!!c("update",{kind:"postType",name:"wp_block",id:g.attributes.ref});return{attributes:g.attributes,canDetach:d||h&&n(t),isUnsyncedPattern:d,isSyncedPattern:h,isVisible:d||h,managePatternsUrl:c("create",{kind:"postType",name:"wp_template"})?(0,Zt.addQueryArgs)("site-editor.php",{p:"/pattern"}):(0,Zt.addQueryArgs)("edit.php",{post_type:"wp_block"})}},[t]),{updateBlockAttributes:s}=(0,pt.useDispatch)(Kt.store),{convertSyncedPatternToStatic:l}=N((0,pt.useDispatch)(A));return f?(0,rt.jsxs)(rt.Fragment,{children:[r&&(0,rt.jsx)(Qt.MenuItem,{onClick:()=>{if(u&&l(t),i){let{patternName:m,...n}=a?.metadata??{};s(t,{metadata:n})}},children:(0,$t.__)("Disconnect pattern")}),(0,rt.jsx)(Qt.MenuItem,{href:o,children:(0,$t.__)("Manage patterns")})]}):null}var sa=Ia;var J=e(k(),1);function fa({rootClientId:t}){return(0,J.jsx)(la.BlockSettingsMenuControls,{children:({selectedClientIds:a,onClose:r})=>(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(ta,{clientIds:a,rootClientId:t,closeBlockSettingsMenu:r}),a.length===1&&(0,J.jsx)(sa,{clientId:a[0]})]})})}var R=e(O(),1),ma=e(z(),1),ee=e(T(),1),Q=e(I(),1),ua=e(Ct(),1),X=e(P(),1),da=e(st(),1),ae=e(te(),1);var M=e(k(),1);function na({category:t,existingCategories:a,onClose:r,onError:f,onSuccess:o,...u}){let i=(0,Q.useId)(),s=(0,Q.useRef)(),[l,m]=(0,Q.useState)((0,ua.decodeEntities)(t.name)),[n,p]=(0,Q.useState)(!1),[c,g]=(0,Q.useState)(!1),d=c?`patterns-rename-pattern-category-modal__validation-message-${i}`:void 0,{saveEntityRecord:h,invalidateResolution:B}=(0,ee.useDispatch)(ma.store),{createErrorNotice:w,createSuccessNotice:$}=(0,ee.useDispatch)(da.store),mt=K=>{c&&g(void 0),m(K)},D=async K=>{if(K.preventDefault(),!n){if(!l||l===t.name){let _=(0,X.__)("Please enter a new name for this category.");(0,ae.speak)(_,"assertive"),g(_),s.current?.focus();return}if(a.patternCategories.find(_=>_.id!==t.id&&_.label.toLowerCase()===l.toLowerCase())){let _=(0,X.__)("This category already exists. Please use a different name.");(0,ae.speak)(_,"assertive"),g(_),s.current?.focus();return}try{p(!0);let _=await h("taxonomy",Tt,{id:t.id,slug:t.slug,name:l});B("getUserPatternCategories"),o?.(_),r(),$((0,X.__)("Pattern category renamed."),{type:"snackbar",id:"pattern-category-update"})}catch(_){f?.(),w(_.message,{type:"snackbar",id:"pattern-category-update"})}finally{p(!1),m("")}}},Y=()=>{r(),m("")};return(0,M.jsx)(R.Modal,{title:(0,X.__)("Rename"),onRequestClose:Y,...u,children:(0,M.jsx)("form",{onSubmit:D,children:(0,M.jsxs)(R.__experimentalVStack,{spacing:"5",children:[(0,M.jsxs)(R.__experimentalVStack,{spacing:"2",children:[(0,M.jsx)(R.TextControl,{ref:s,__next40pxDefaultSize:!0,label:(0,X.__)("Name"),value:l,onChange:mt,"aria-describedby":d,required:!0}),c&&(0,M.jsx)("span",{className:"patterns-rename-pattern-category-modal__validation-message",id:d,children:c})]}),(0,M.jsxs)(R.__experimentalHStack,{justify:"right",children:[(0,M.jsx)(R.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:Y,children:(0,X.__)("Cancel")}),(0,M.jsx)(R.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit","aria-disabled":!l||l===t.name||n,isBusy:n,children:(0,X.__)("Save")})]})]})})})}var gt=e(I(),1),Nt=e(G(),1),At=e(O(),1),ft=e(P(),1);var y=e(O(),1),C=e(P(),1),ct=e(I(),1),pa=e(te(),1),b=e(k(),1);function ca({placeholder:t,initialName:a="",onClose:r,onSave:f}){let[o,u]=(0,ct.useState)(a),i=(0,ct.useId)(),s=!!o.trim(),l=()=>{if(o!==a){let m=(0,C.sprintf)((0,C.__)('Block name changed to: "%s".'),o);(0,pa.speak)(m,"assertive")}f(o),r()};return(0,b.jsx)(y.Modal,{title:(0,C.__)("Enable overrides"),onRequestClose:r,focusOnMount:"firstContentElement",aria:{describedby:i},size:"small",children:(0,b.jsx)("form",{onSubmit:m=>{m.preventDefault(),s&&l()},children:(0,b.jsxs)(y.__experimentalVStack,{spacing:"6",children:[(0,b.jsx)(y.__experimentalText,{id:i,children:(0,C.__)("Overrides are changes you make to a block within a synced pattern instance. Use overrides to customize a synced pattern instance to suit its new context. Name this block to specify an override.")}),(0,b.jsx)(y.TextControl,{__next40pxDefaultSize:!0,value:o,label:(0,C.__)("Name"),help:(0,C.__)('For example, if you are creating a recipe pattern, you use "Recipe Title", "Recipe Description", etc.'),placeholder:t,onChange:u}),(0,b.jsxs)(y.__experimentalHStack,{justify:"right",children:[(0,b.jsx)(y.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:r,children:(0,C.__)("Cancel")}),(0,b.jsx)(y.Button,{__next40pxDefaultSize:!0,"aria-disabled":!s,variant:"primary",type:"submit",children:(0,C.__)("Enable")})]})]})})})}function ga({onClose:t,onSave:a}){let r=(0,ct.useId)();return(0,b.jsx)(y.Modal,{title:(0,C.__)("Disable overrides"),onRequestClose:t,aria:{describedby:r},size:"small",children:(0,b.jsx)("form",{onSubmit:f=>{f.preventDefault(),a(),t()},children:(0,b.jsxs)(y.__experimentalVStack,{spacing:"6",children:[(0,b.jsx)(y.__experimentalText,{id:r,children:(0,C.__)("Are you sure you want to disable overrides? Disabling overrides will revert all applied overrides for this block throughout instances of this pattern.")}),(0,b.jsxs)(y.__experimentalHStack,{justify:"right",children:[(0,b.jsx)(y.Button,{__next40pxDefaultSize:!0,variant:"tertiary",onClick:t,children:(0,C.__)("Cancel")}),(0,b.jsx)(y.Button,{__next40pxDefaultSize:!0,variant:"primary",type:"submit",children:(0,C.__)("Disable")})]})]})})})}var j=e(k(),1);function Ua({attributes:t,setAttributes:a,name:r}){let f=(0,gt.useId)(),[o,u]=(0,gt.useState)(!1),[i,s]=(0,gt.useState)(!1),l=!!t.metadata?.name,m=t.metadata?.bindings?.__default,n=l&&m?.source===bt,p=m?.source&&m.source!==bt,{updateBlockBindings:c}=(0,Nt.useBlockBindingsUtils)();function g(B,w){w&&a({metadata:{...t.metadata,name:w}}),c({__default:B?{source:bt}:void 0})}if(p)return null;let d=r==="core/image"&&!!t.href?.length,h=!n&&d?(0,ft.__)("Overrides currently don't support image links. Remove the link first before enabling overrides."):(0,ft.__)("Allow changes to this block throughout instances of this pattern.");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Nt.InspectorControls,{group:"advanced",children:(0,j.jsx)(At.BaseControl,{id:f,label:(0,ft.__)("Overrides"),help:h,children:(0,j.jsx)(At.Button,{__next40pxDefaultSize:!0,className:"pattern-overrides-control__allow-overrides-button",variant:"secondary","aria-haspopup":"dialog",onClick:()=>{n?s(!0):u(!0)},disabled:!n&&d,accessibleWhenDisabled:!0,children:n?(0,ft.__)("Disable overrides"):(0,ft.__)("Enable overrides")})})}),o&&(0,j.jsx)(ca,{initialName:t.metadata?.name,onClose:()=>u(!1),onSave:B=>{g(!0,B)}}),i&&(0,j.jsx)(ga,{onClose:()=>s(!1),onSave:()=>g(!1)})]})}var ha=Ua;var it=e(G(),1),Lt=e(O(),1),Mt=e(T(),1),ya=e(P(),1),Ot=e(k(),1),re="content";function _a(t){let a=t.attributes.metadata?.name,r=(0,Mt.useRegistry)(),f=(0,Mt.useSelect)(u=>{if(!a)return;let{getBlockAttributes:i,getBlockParentsByBlockName:s}=u(it.store),[l]=s(t.clientId,"core/block",!0);if(!l)return;let m=i(l)[re];if(m)return m.hasOwnProperty(a)},[t.clientId,a]);function o(){let{getBlockAttributes:u,getBlockParentsByBlockName:i}=r.select(it.store),[s]=i(t.clientId,"core/block",!0);if(!s)return;let l=u(s)[re];if(!l.hasOwnProperty(a))return;let{updateBlockAttributes:m,__unstableMarkLastChangeAsPersistent:n}=r.dispatch(it.store);n();let p={...l};delete p[a],Object.keys(p).length||(p=void 0),m(s,{[re]:p})}return(0,Ot.jsx)(it.__unstableBlockToolbarLastItem,{children:(0,Ot.jsx)(Lt.ToolbarGroup,{children:(0,Ot.jsx)(Lt.ToolbarButton,{onClick:o,disabled:!f,children:(0,ya.__)("Reset")})})})}var ba={};ve(ba,{OverridesPanel:Ee,CreatePatternModal:lt,CreatePatternModalContents:Yt,DuplicatePatternModal:Ge,isOverridableBlock:kt,useDuplicatePatternProps:qt,RenamePatternModal:Xe,PatternsMenuItems:fa,RenamePatternCategoryModal:na,PatternOverridesControls:ha,ResetOverridesControl:_a,useAddPatternCategory:Et,PATTERN_TYPES:Z,PATTERN_DEFAULT_CATEGORY:_t,PATTERN_USER_CATEGORY:pe,EXCLUDED_PATTERN_SOURCES:ce,PATTERN_SYNC_TYPES:v});return Ta(ja);})();
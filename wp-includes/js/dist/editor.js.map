{"version":3,"sources":["webpack://wp.[name]/webpack/bootstrap","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://wp.[name]/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/alignment-toolbar/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/autocomplete/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/autocompleters/block.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/autocompleters/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/autocompleters/user.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/autosave-monitor/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-actions/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-alignment-toolbar/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-compare/block-view.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-compare/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-controls/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-draggable/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-drop-zone/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-edit/context.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-edit/edit.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-edit/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-format-controls/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-icon/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-inspector/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list-appender/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block-contextual-toolbar.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block-crash-boundary.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block-crash-warning.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block-html.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block-invalid-warning.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block-mobile-toolbar.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/block.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/breadcrumb.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/insertion-point.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/multi-controls.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-list/with-hover-areas.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-mover/drag-handle.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-mover/icons.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-mover/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-mover/mover-description.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-navigation/dropdown.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-navigation/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-preview/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-selection-clearer/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/block-convert-button.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/block-html-convert-button.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/block-mode-toggle.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/block-settings-menu-first-item.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/block-settings-menu-plugins-extension.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/block-unknown-convert-button.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/reusable-block-convert-button.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-settings-menu/reusable-block-delete-button.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-styles/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-switcher/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-switcher/multi-blocks-switcher.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-title/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-toolbar/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/block-types-list/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/color-palette/control.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/color-palette/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/color-palette/with-color-context.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/colors/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/colors/utils.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/colors/with-colors.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/contrast-checker/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/copy-handler/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/default-block-appender/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/document-outline/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/document-outline/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/document-outline/item.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/editor-global-keyboard-shortcuts/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/editor-history/redo.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/editor-history/undo.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/editor-notices/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/error-boundary/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/font-sizes/font-size-picker.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/font-sizes/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/font-sizes/utils.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/font-sizes/with-font-sizes.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/ignore-nested-events/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inner-blocks/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inserter-with-shortcuts/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inserter/child-blocks.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inserter/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inserter/menu.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inserter/results-portal.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inspector-advanced-controls/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/inspector-controls/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/media-placeholder/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/media-upload/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/multi-select-scroll-into-view/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/navigable-toolbar/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/observe-typing/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/page-attributes/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/page-attributes/order.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/page-attributes/parent.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/page-attributes/template.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/panel-color-settings/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/panel-color/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/plain-text/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-author/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-author/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-comments/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-excerpt/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-excerpt/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-featured-image/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-featured-image/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-format/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-format/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-last-revision/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-last-revision/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-locked-modal/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-pending-status/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-pending-status/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-permalink/editor.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-permalink/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-pingbacks/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-preview-button/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-button/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-button/label.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-panel/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-panel/maybe-post-format-panel.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-panel/maybe-tags-panel.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-panel/postpublish.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-panel/prepublish.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-publish-panel/toggle.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-saved-state/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-schedule/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-schedule/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-schedule/label.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-sticky/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-sticky/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-switch-to-draft-button/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-taxonomies/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-taxonomies/flat-term-selector.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-taxonomies/hierarchical-term-selector.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-taxonomies/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-text-editor/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-title/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-trash/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-trash/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-type-support-check/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-visibility/check.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-visibility/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-visibility/label.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/post-visibility/utils.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/preserve-scroll-in-reorder/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/provider/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/aria.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/core-tokens/image/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/core-tokens/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/format-toolbar/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/format-toolbar/link-container.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/format-toolbar/positioned-at-selection.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/format-toolbar/toolbar-container.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/formatting-controls.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/patterns.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/tinymce.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/tokens/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/rich-text/tokens/ui/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/server-side-render/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/skip-to-selected-block/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/table-of-contents/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/table-of-contents/panel.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/template-validation-notice/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/theme-support-check/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/unsaved-changes-warning/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/url-input/button.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/url-input/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/url-popover/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/warning/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/word-count/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/components/writing-flow/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/ast/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/ast/parse.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/ast/stringify/compiler.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/ast/stringify/compress.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/ast/stringify/identity.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/ast/stringify/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/transforms/editor-width.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/transforms/url-rewrite.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/transforms/wrap.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/editor-styles/traverse.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/align.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/anchor.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/custom-class-name.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/default-autocompleters.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/generated-class-name.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/hooks/layout.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/actions.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/array.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/defaults.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/effects.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/effects/posts.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/effects/reusable-blocks.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/effects/utils.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/middlewares.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/reducer.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/store/selectors.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/dom.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/media-upload/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/media-upload/media-upload.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/terms.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/url.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/with-change-detection/index.js","webpack://wp.[name]//Users/gziolo/PhpstormProjects/gutenberg/packages/editor/src/utils/with-history/index.js","webpack://wp.[name]/./node_modules/autosize/dist/autosize.js","webpack://wp.[name]/./node_modules/classnames/index.js","webpack://wp.[name]/./node_modules/computed-style/dist/computedStyle.commonjs.js","webpack://wp.[name]/../../src/convert/xml.js","webpack://wp.[name]/./node_modules/dom-scroll-into-view/lib/dom-scroll-into-view.js","webpack://wp.[name]/./node_modules/dom-scroll-into-view/lib/index.js","webpack://wp.[name]/./node_modules/dom-scroll-into-view/lib/util.js","webpack://wp.[name]/./node_modules/inherits/inherits_browser.js","webpack://wp.[name]/./node_modules/line-height/lib/line-height.js","webpack://wp.[name]/./node_modules/memize/index.js","webpack://wp.[name]/./node_modules/object-assign/index.js","webpack://wp.[name]/./node_modules/prop-types/checkPropTypes.js","webpack://wp.[name]/./node_modules/prop-types/factoryWithTypeCheckers.js","webpack://wp.[name]/./node_modules/prop-types/index.js","webpack://wp.[name]/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://wp.[name]/./node_modules/punycode/punycode.js","webpack://wp.[name]/./node_modules/querystring-es3/decode.js","webpack://wp.[name]/./node_modules/querystring-es3/encode.js","webpack://wp.[name]/./node_modules/querystring-es3/index.js","webpack://wp.[name]/./node_modules/react-autosize-textarea/lib/TextareaAutosize.js","webpack://wp.[name]/./node_modules/react-autosize-textarea/lib/index.js","webpack://wp.[name]/./node_modules/redux-multi/lib/index.js","webpack://wp.[name]/./node_modules/redux-optimist/index.js","webpack://wp.[name]/./node_modules/redux-optimist/lib/index.js","webpack://wp.[name]/./node_modules/refx/refx.js","webpack://wp.[name]/./node_modules/rememo/es/rememo.js","webpack://wp.[name]/./node_modules/tinycolor2/tinycolor.js","webpack://wp.[name]/./node_modules/traverse/index.js","webpack://wp.[name]/./node_modules/url/url.js","webpack://wp.[name]/./node_modules/url/util.js","webpack://wp.[name]/./node_modules/uuid/lib/bytesToUuid.js","webpack://wp.[name]/./node_modules/uuid/lib/rng-browser.js","webpack://wp.[name]/./node_modules/uuid/v4.js","webpack://wp.[name]/(webpack)/buildin/global.js","webpack://wp.[name]/(webpack)/buildin/module.js","webpack://wp.[name]/external {\"this\":[\"wp\",\"a11y\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"apiFetch\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"autop\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"blob\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"blocks\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"components\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"compose\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"coreData\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"data\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"date\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"deprecated\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"dom\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"element\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"hooks\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"htmlEntities\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"i18n\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"isShallowEqual\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"keycodes\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"nux\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"richText\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"tokenList\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"url\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"viewport\"]}","webpack://wp.[name]/external {\"this\":[\"wp\",\"wordcount\"]}","webpack://wp.[name]/external \"jQuery\"","webpack://wp.[name]/external \"lodash\"","webpack://wp.[name]/external \"React\"","webpack://wp.[name]/external \"tinymce\""],"names":["ALIGNMENT_CONTROLS","icon","title","__","align","AlignmentToolbar","isCollapsed","value","onChange","applyOrUnset","undefined","activeAlignment","find","control","map","isActive","onClick","compose","withBlockEditContext","clientId","withViewportMatch","isLargeViewport","withSelect","select","getBlockRootClientId","getEditorSettings","hasFixedToolbar","completersFallback","withFilteredAutocompleters","Autocomplete","state","completers","saveParentRef","bind","onFocus","hasFocus","parentNode","contains","document","activeElement","hasStaleCompleters","updateCompletersState","lastFilteredCompletersProp","props","blockName","nextCompleters","hasFilter","applyFilters","clone","setState","autocompleteProps","Component","name","OriginalAutocomplete","defaultGetBlockInsertionParentClientId","getBlockInsertionPoint","rootClientId","defaultGetInserterItems","parentClientId","getInserterItems","defaultGetSelectedBlockName","selectedBlock","getSelectedBlock","createBlockCompleter","getBlockInsertionParentClientId","getSelectedBlockName","className","triggerPrefix","options","selectedBlockName","filter","inserterItem","getOptionKeywords","keywords","getOptionLabel","src","allowContext","before","after","test","getOptionCompletion","initialAttributes","action","createBlock","isOptionDisabled","isDisabled","search","payload","encodeURIComponent","apiFetch","path","isDebounced","user","slug","avatar_urls","AutosaveMonitor","prevProps","isDirty","isAutosaveable","toggleTimer","isPendingSave","clearTimeout","pendingSave","autosaveInterval","setTimeout","autosave","isEditedPostDirty","isEditedPostAutosaveable","withDispatch","dispatch","BlockActions","onDuplicate","onRemove","onInsertBefore","onInsertAfter","isLocked","canDuplicate","children","getBlocksByClientId","getBlockIndex","getTemplateLock","blocks","clientIds","every","block","hasBlockSupport","firstSelectedIndex","first","castArray","lastSelectedIndex","last","extraProps","insertBlocks","multiSelect","removeBlocks","insertDefaultBlock","clonedBlocks","cloneBlock","length","BLOCK_ALIGNMENTS_CONTROLS","left","center","right","wide","full","DEFAULT_CONTROLS","WIDE_CONTROLS","BlockAlignmentToolbar","controls","wideControlsEnabled","enabledControls","indexOf","alignWide","BlockView","rawContent","renderedContent","actionText","BlockCompare","originalContent","newContent","difference","diffChars","item","pos","classes","classnames","added","removed","blockType","getBlockType","getSaveElement","attributes","newBlocks","getSaveContent","innerBlocks","join","onKeep","onConvert","convertor","convertButtonText","original","getOriginalContent","converted","getConvertedContent","getDifference","createSlotFill","Fill","Slot","BlockControlsFill","BlockControls","ifBlockEditSelected","BlockDraggable","blockElementId","index","onDragStart","onDragEnd","transferData","type","srcIndex","srcRootClientId","srcClientId","onDraggableStart","onDraggableEnd","parseDropEvent","event","result","dataTransfer","Object","assign","JSON","parse","getData","err","BlockDropZone","arguments","onFilesDrop","onHTMLDrop","onDrop","position","y","files","transformation","findTransform","getBlockTransforms","transform","isMatch","insertIndex","getInsertIndex","updateBlockAttributes","HTML","rawHandler","mode","dstRootClientId","dstClientId","dstIndex","getClientIdsOfDescendants","isBlockDropType","dropType","isSameLevel","srcRoot","dstRoot","isSameBlock","dst","isSrcBlockAnAncestorOfDstBlock","some","id","positionIndex","moveBlockToPosition","isAppender","ownProps","layout","createContext","isSelected","focusedElement","setFocusedElement","noop","Consumer","Provider","mapContextToProps","createHigherOrderComponent","OriginalComponent","context","Edit","generatedClassName","getBlockDefaultClassName","edit","save","withFilters","BlockEdit","prevState","BlockFormatControls","renderIcon","prototype","createElement","appliedProps","width","height","BlockIcon","showColors","renderedIcon","style","backgroundColor","background","color","foreground","BlockInspector","count","isSelectedBlockUnregistered","getUnregisteredTypeHandlerName","description","styles","fills","isEmpty","getSelectedBlockCount","BlockListAppender","blockClientIds","isGroupedByLayout","canInsertDefaultBlock","defaultLayout","onToggle","disabled","isOpen","getBlockOrder","canInsertBlockType","getDefaultBlockName","BlockContextualToolbar","BlockCrashBoundary","hasError","error","onError","warning","BlockHTML","onBlur","html","isValid","getBlockContent","isEqual","getBlockAttributes","content","isValidBlock","target","getBlock","updateBlock","BlockInvalidWarning","compare","onCompare","onCompareClose","convertToHTML","convertToBlocks","convertToClassic","hasHTMLBlock","hiddenActions","blockToBlocks","blockToClassic","blockToHTML","replaceBlock","BlockMobileToolbar","ifViewportMatches","BlockListBlock","setBlockListRef","bindBlockNode","setAttributes","maybeHover","hideHoverEffects","mergeBlocks","insertBlocksAfter","preventDrag","onPointerDown","deleteOrInsertAfterWrapper","onBlockError","onTouchStart","selectOnOpen","hadTouchStart","dragging","isHovered","focusTabbable","isTypingWithinBlock","node","findDOMNode","wrapperNode","blockRef","ignoreInnerBlocks","initialPosition","textInputs","focus","tabbable","isTextField","isInsideRootBlock","isReverse","placeCaretAtHorizontalEdge","placeCaretAtVerticalEdge","metaAttributes","reduce","key","get","meta","size","onMetaChange","isPartOfMultiSelection","isMultiSelecting","forward","previousBlockClientId","nextBlockClientId","onMerge","onInsertBlocks","order","onSelect","preventDefault","button","shiftKey","onShiftSelection","onSelectionStart","keyCode","ENTER","onInsertDefaultBlockAfter","BACKSPACE","DELETE","open","isFocusMode","isFirst","isLast","isFirstMultiSelected","hoverArea","isEmptyDefaultBlock","isMovable","isPreviousBlockADefaultEmptyBlock","isParentOfSelectedBlock","isDraggable","blockLabel","sprintf","isUnregisteredBlock","showEmptyBlockSideInserter","showSideInserter","shouldAppearSelected","shouldAppearHovered","shouldRenderMovers","shouldShowBreadcrumb","shouldShowContextualToolbar","shouldShowMobileToolbar","shouldShowInsertionPoint","canShowInBetweenInserter","wrapperClassName","isReusableBlock","onReplace","wrapperProps","getEditWrapperProps","blockEdit","isSelectionEnabled","toggleSelection","display","applyWithSelect","isBlockSelected","getPreviousBlockClientId","getNextBlockClientId","isAncestorMultiSelected","isBlockMultiSelected","isFirstMultiSelectedBlock","isTyping","getEditedPostAttribute","getBlockMode","getSelectedBlocksInitialCaretPosition","hasSelectedInnerBlock","focusMode","previousBlock","templateLock","isUnmodifiedDefaultBlock","applyWithDispatch","selectBlock","removeBlock","replaceBlocks","editPost","selectionEnabled","withHoverAreas","BlockBreadcrumb","isFocused","stopPropagation","isLight","BlockList","onSelectionEnd","setBlockRef","setLastClientY","onPointerMove","throttle","onScroll","clientY","lastClientY","nodes","window","addEventListener","removeEventListener","onStartMultiSelect","boundaries","selectionAtStart","getBoundingClientRect","top","findLast","coordMapKeys","coordY","onSelectionChange","coordMap","clientIdToCoordMap","mapValues","invert","sortBy","values","onMultiSelect","selectionStart","selectionEnd","isAtStart","cancel","onStopMultiSelect","selectionStartClientId","blockIndex","getMultiSelectedBlocksStartClientId","getMultiSelectedBlocksEndClientId","getBlockSelectionStart","startMultiSelect","stopMultiSelect","BlockInsertionPoint","isInserterFocused","onBlurInserter","onFocusInserter","startTyping","onInsert","showInsertionPoint","showInserter","canShowInserter","isBlockInsertionPointVisible","insertionPoint","defaultBlockName","ifCondition","BlockListMultiControls","multiSelectedBlockClientIds","isSelecting","getMultiSelectedBlockClientIds","getBlockCount","firstIndex","lastIndex","WrappedComponent","WithHoverAreasComponent","onMouseLeave","onMouseMove","container","isRTL","clientX","IconDragHandle","isVisible","dragHandleClassNames","upArrow","downArrow","dragHandle","BlockMover","onMoveUp","onMoveDown","instanceId","isHidden","blocksCount","getBlockMoverDescription","firstClientId","moveBlocksDown","moveBlocksUp","partial","withInstanceId","selectedCount","dir","getMultiBlockMoverDescription","_n","menuIcon","BlockNavigationDropdown","rawShortcut","access","onClose","BlockNavigationList","selectedBlockClientId","showNestedBlocks","BlockNavigation","rootBlock","rootBlocks","hasHierarchy","getSelectedBlockClientId","getBlockHierarchyRootClientId","getBlocks","BlockPreview","BlockPreviewContent","BlockSelectionClearer","bindContainer","clearSelectionIfFocusTarget","ref","hasSelectedBlock","hasMultiSelection","clearSelectedBlock","hasSelection","omit","BlockConvertButton","shouldRender","small","label","canUserUseUnfilteredHTML","BlockModeToggle","onToggleMode","toggleBlockMode","_BlockSettingsMenuFirstItem","_BlockSettingsMenuPluginsExtension","getFreeformContentHandlerName","serialize","BlockSettingsMenu","firstBlockClientId","toggleClassname","shortcuts","duplicate","insertBefore","insertAfter","ReusableBlockConvertButton","isStaticBlock","onConvertToStatic","onConvertToReusable","getReusableBlock","getFreeformFallbackBlockName","getUnregisteredFallbackBlockName","convertBlockToReusable","convertBlockToStatic","ReusableBlockDeleteButton","reusableBlock","onDelete","isTemporary","deleteReusableBlock","hasConfirmed","confirm","getActiveStyle","TokenList","potentialStyleName","substring","activeStyle","replaceActiveStyle","newStyle","list","remove","add","BlockStyles","onChangeClassName","onSwitch","onHoverClassName","updateClassName","updatedClassName","styleClassName","newClassName","BlockSwitcher","hoveredClassName","onTransform","inserterItems","itemsByName","mapKeys","possibleBlockTransformations","orderBy","getPossibleBlockTransformations","frecency","sourceBlockName","hasStyles","openOnArrowDown","DOWN","destinationBlockType","hasChildBlocksWithInserterSupport","switchToBlockType","MultiBlocksSwitcher","isMultiBlockSelection","selectedBlockClientIds","BlockTitle","getBlockName","BlockToolbar","createRef","focusContainer","tabbables","current","BlockTypesList","items","onHover","itemIconStyle","itemIconStackStyle","shadowColor","getBlockMenuDefaultClassName","colorIndicatorAriaLabel","ColorPaletteControl","colors","disableCustomColors","colorObject","getColorObjectByColorValue","colorName","ariaLabel","toLowerCase","labelElement","withColorContext","hasColorsToChoose","ColorPalette","settings","getColorObjectByAttributeValues","definedColor","customColor","colorObj","colorValue","getColorClassName","colorContextName","colorSlug","kebabCase","getMostReadableColor","tinycolor","mostReadable","toHexString","DEFAULT_COLORS","args","colorMap","arg","isString","setters","createSetters","colorUtils","settersAccumulator","colorContext","colorAttributeName","upperFirstColorAttributeName","upperFirst","customColorAttributeName","createSetColor","previousState","newState","previousColorObject","previousColor","class","ContrastChecker","fallbackBackgroundColor","fallbackTextColor","fontSize","isLargeText","textColor","tinyBackgroundColor","tinyTextColor","hasTransparency","getAlpha","isReadable","level","msg","getBrightness","CopyHandler","onCopy","onCut","multiSelectedBlocks","documentHasSelection","serialized","clipboardData","setData","getMultiSelectedBlocks","DefaultBlockAppender","onAppend","showPrompt","placeholder","decodeEntities","lastBlock","lastBlockClientId","isLastBlockDefault","isLastBlockValid","bodyPlaceholder","DocumentOutlineCheck","headings","emptyHeadingContent","incorrectLevelContent","singleH1Headings","multipleH1Headings","computeOutlineHeadings","flatMap","isEmptyHeading","heading","DocumentOutline","isTitleSupported","prevHeadingLevel","onSelectHeading","focusTitle","titleNode","querySelector","hasTitle","countByLevel","countBy","hasMultipleH1","isIncorrectLevel","getPostType","postType","TableOfContentsItem","raw","primaryShift","displayShortcut","primaryAlt","EditorGlobalKeyboardShortcuts","selectAll","undoOrRedo","deleteSelectedBlocks","clearMultiSelection","rootBlocksClientIds","onRedo","onUndo","onSave","getSelection","removeAllRanges","primary","flow","redo","undo","savePost","EditorHistoryRedo","hasRedo","hasEditorRedo","EditorHistoryUndo","hasUndo","hasEditorUndo","EditorNotices","notices","getNotices","removeNotice","ErrorBoundary","reboot","getContent","getEditedPostContent","store","getState","stack","contextTypes","disableCustomFontSizes","fontSizes","FontSizePicker","getFontSize","fontSizeAttribute","customFontSizeAttribute","fontSizeObject","getFontSizeClass","fontSizeSlug","fontSizeNames","fontSizeAttributeNames","fontSizeAttributeNamesAccumulator","fontSizeAttributeName","customFontSizeAttributeName","upperFirstFontSizeAttributeName","createSetFontSize","fontSizeValue","didAttributesChange","pickBy","newStateAccumulator","fontSizeAttributeValue","IgnoreNestedEvents","proxyEvent","eventMap","isHandled","nativeEvent","_blockHandled","propKey","childHandledEvents","eventHandlers","keys","match","isHandledProp","proxiedPropName","InnerBlocks","updateNestedSettings","parentLock","synchronizeBlocksWithTemplate","template","hasTemplateChanged","replaceInnerBlocks","nextBlocks","blockListSettings","allowedBlocks","newSettings","isShallowEqual","layouts","isSmallScreen","isSelectedBlockInRoot","pick","getBlockListSettings","updateBlockListSettings","Content","withBlockContentContext","BlockContent","InserterWithShortcuts","itemsWithoutDefaultBlock","slice","insertBlock","ChildBlocks","rootBlockIcon","rootBlockTitle","rootBlockName","rootBlockType","defaultRenderToggle","Inserter","onInsertBlock","renderToggle","parentId","insertedBlock","MAX_SUGGESTED_ITEMS","searchItems","searchTerm","normalizedSearchTerm","normalizeTerm","matchSearch","string","categories","getCategories","itemCategory","category","term","deburr","replace","trim","InserterMenu","childItems","filterValue","hoveredItem","suggestedItems","reusableItems","itemsPerCategory","openPanels","onChangeSearchInput","panels","inserterResults","fetchReusableBlocks","hideInsertionPoint","panel","isOpened","without","scrollIntoView","alignWithTop","rootChildBlocks","filteredItems","includes","maxSuggestedItems","utility","getCategoryIndex","findIndex","itemList","groupBy","firstCategory","isPanelOpen","isSearching","onTogglePanel","bindPanel","categoryItems","getChildBlockNames","withSpokenMessages","withSafeTimeout","InserterResultsPortal","InspectorAdvancedControls","InspectorControls","InsertFromURLPopover","onSubmit","MediaPlaceholder","isURLInputVisible","onChangeSrc","onSubmitSrc","onUpload","onFilesUpload","openURLInput","closeURLInput","allowedTypes","deprecatedType","allowedTypesToUse","deprecated","version","alternative","getAllowedTypes","allowedType","startsWith","onSelectURL","multiple","setMedia","media","mediaUpload","filesList","onFileChange","accept","labels","onlyAllowsImages","MediaUpload","MultiSelectScrollIntoView","extentClientId","extentNode","getBlockDOMNode","scrollContainer","getScrollContainer","onlyScrollIfNeeded","getLastMultiSelectedBlockClientId","Node","NavigableToolbar","bindNode","focusToolbar","focusSelection","switchOnKeyDown","cond","matchesProperty","ESCAPE","toolbar","selection","focusNode","focusElement","nodeType","ELEMENT_NODE","parentElement","KEY_DOWN_ELIGIBLE_KEY_CODES","UP","RIGHT","LEFT","isKeyDownEligibleForStartTyping","ObserveTyping","stopTypingOnSelectionUncollapse","stopTypingOnMouseMove","startTypingInTextField","stopTypingOnNonTextField","lastMouseMove","toggleEventBindings","isBound","bindFn","lastClientX","onStopTyping","rangeCount","getRangeAt","collapsed","onStartTyping","closest","persist","stopTyping","PageAttributesCheck","availableTemplates","supportsPageAttributes","PageAttributesOrder","withState","orderInput","onUpdateOrder","setUpdatedOrder","newOrder","Number","isInteger","invoke","PageAttributesOrderWithChecks","menu_order","PageAttributesParent","parent","onUpdateParent","isHierarchical","parentPageLabel","pageItems","pagesTree","buildTermsTree","getEntityRecords","getCurrentPostId","postTypeSlug","postId","query","per_page","exclude","parent_exclude","orderby","PageTemplate","selectedTemplate","onUpdate","templateName","templateSlug","hasCustomColorsDisabledForSetting","colorSetting","hasColorsToChooseInSetting","colorSettings","renderColorIndicators","availableColors","PanelColorSettings","titleElement","PanelColor","initialOpen","plugin","PlainText","PostAuthorCheck","hasAssignAuthorAction","authors","post","getCurrentPost","getCurrentPostType","getAuthors","PostAuthor","setAuthorId","onUpdateAuthor","postAuthor","selectId","author","PostComments","commentStatus","onToggleComments","comment_status","PostExcerptCheck","PostExcerpt","excerpt","onUpdateExcerpt","PostFeaturedImageCheck","ALLOWED_MEDIA_TYPES","DEFAULT_FEATURE_IMAGE_LABEL","DEFAULT_SET_FEATURE_IMAGE_LABEL","DEFAULT_REMOVE_FEATURE_IMAGE_LABEL","PostFeaturedImage","currentPostId","featuredImageId","onUpdateImage","onRemoveImage","postLabel","mediaWidth","mediaHeight","mediaSourceUrl","mediaSize","has","media_details","sizes","source_url","featured_image","isLoading","set_featured_image","remove_featured_image","getMedia","image","featured_media","PostFormatCheck","disablePostFormats","editorSettings","POST_FORMATS","caption","PostFormat","onUpdatePostFormat","postFormat","supportedFormats","suggestedFormat","postFormatSelectorId","formats","format","suggestion","getSuggestedPostFormat","themeSupports","getThemeSupports","union","PostLastRevisionCheck","lastRevisionId","revisionsCount","getCurrentPostLastRevisionId","getCurrentPostRevisionsCount","LastRevision","getWPAdminURL","revision","gutenberg","PostLockedModal","sendPostLock","receivePostLock","releasePostLock","jQuery","on","off","data","activePostLock","lock","post_id","updatePostLock","received","lock_error","isTakeover","avatar","avatar_src","new_lock","postLockUtils","_wpnonce","unlockNonce","post_ID","active_post_lock","async","url","ajaxUrl","userDisplayName","userAvatar","unlockUrl","addQueryArgs","lockKey","nonce","allPosts","isPostLocked","isPostLockTakeover","getPostLockUser","getActivePostLock","withGlobalEvents","beforeunload","PostPendingStatusCheck","hasPublishAction","isPublished","isCurrentPostPublished","PostPendingStatus","status","onUpdateStatus","togglePendingStatus","updatedStatus","PostPermalinkEditor","permalinkParts","editedPostName","postName","onSavePermalink","prefix","suffix","getPermalinkParts","PostPermalink","addVisibilityCheck","onVisibilityChange","isCopied","isEditingPermalink","isEditable","refreshPost","visibilityState","linkElement","isNew","postLink","samplePermalink","safeDecodeURI","isEditedPostNew","isPermalinkEditable","getPermalink","link","PostPingbacks","pingStatus","onTogglePingback","ping_status","PostPreviewButton","openPreviewWindow","previewLink","setPreviewWindowLink","previewWindow","closed","location","currentPostLink","getWindowTarget","markup","write","close","isSaveable","_x","getCurrentPostAttribute","getAutosaveAttribute","isEditedPostSaveable","isViewable","PostPublishButton","buttonNode","focusOnMount","isSaving","onStatusChange","isBeingScheduled","visibility","isPublishable","forceIsSaving","isButtonEnabled","publishStatus","forceIsDirty","isSavingPost","isEditedPostBeingScheduled","getEditedPostVisibility","isEditedPostPublishable","PublishButtonLabel","isPublishing","isAutosaving","isPublishingPost","isAutosavingPost","PostPublishPanel","loading","submitted","isScheduled","isPublishSidebarEnabled","onTogglePublishSidebar","PrePublishExtension","PostPublishExtension","additionalProps","isCurrentPostScheduled","disablePublishSidebar","enablePublishSidebar","PostFormatSuggestion","suggestedPostFormat","suggestionText","PostFormatPanel","panelBodyTitle","getSuggestion","currentPostFormat","TagsPanel","MaybeTagsPanel","hadTagsWhenOpeningThePanel","hasTags","tagsTaxonomy","getTaxonomy","tags","rest_base","areTagsFetched","isPostTypeSupported","types","PostPublishPanelPostpublish","showCopyConfirmation","onSelectInput","dismissCopyConfirmation","viewPostLabel","postPublishNonLinkHeader","PostPublishPanelPrepublish","prePublishTitle","prePublishBodyText","PostPublishPanelToggle","isPending","showToggle","isCurrentPostPending","PostSavedState","forceSavedMessage","PostScheduleCheck","PostSchedule","date","onUpdateDate","getSettings","is12HourTime","time","split","reverse","l10n","locale","PostScheduleLabel","isFloating","dateI18n","datetimeAbbreviated","isEditedPostDateFloating","PostStickyCheck","hasStickyAction","PostSticky","onUpdateSticky","postSticky","sticky","PostSwitchToDraftButton","alertMessage","PostTaxonomiesCheck","taxonomies","hasTaxonomies","taxonomy","getTaxonomies","DEFAULT_QUERY","_fields","MAX_TERMS_SUGGESTIONS","isSameTermName","termA","termB","FlatTermSelector","searchTerms","findOrCreateTerm","availableTerms","selectedTerms","terms","initRequest","fetchTerms","include","then","xhr","statusText","searchRequest","updateSelectedTerms","params","request","concat","availableTerm","termId","termObject","push","termName","method","catch","errorCode","code","addRequest","searchResult","Promise","reject","termNames","uniqueTerms","uniqBy","newTermNames","termNamesToIds","names","onUpdateTerms","all","newTerms","newAvailableTerms","hasAssignAction","newTermLabel","singularName","termAddedLabel","termRemovedLabel","removeTermLabel","unescapeString","hasCreateAction","restBase","MIN_TERMS_COUNT_FOR_FILTER","HierarchicalTermSelector","findTerm","onChangeFormName","onChangeFormParent","onAddTerm","onToggleForm","setFilterValue","sortBySelected","availableTermsTree","adding","formName","formParent","showForm","filteredTermsTree","parseInt","hasTerm","newValue","newParent","existingTerm","findOrCreatePromise","termAddedMessage","speak","fetchRequest","termsTree","treeHasSelection","termTree","anyChildIsSelected","child","termOrChildIsSelected","termASelected","termBSelected","sort","getFilterMatcher","getResultCount","i","resultCount","resultsFoundMessage","debouncedSpeak","matchTermsForFilter","originalTerm","renderedTerms","renderTerms","labelWithFallback","labelProperty","fallbackIsCategory","fallbackIsNotCategory","newTermButtonLabel","parentSelectLabel","noParentOption","newTermSubmitLabel","inputId","filterInputId","filterLabel","groupLabel","showFilter","PostTaxonomies","taxonomyWrapper","identity","availableTaxonomies","visibleTaxonomies","show_ui","TaxonomyComponent","hierarchical","PostTextEditor","stopEditing","onPersist","decodedPlaceholder","resetBlocks","REGEXP_NEWLINES","PostTitle","onUnselect","onKeyDown","redirectHistory","newTitle","onEnterPress","isCleanNewPost","isPostTypeViewable","titlePlaceholder","withFocusOutside","PostTrashCheck","PostTrash","trashPost","PostTypeSupportCheck","supportKeys","isSupported","supports","PostVisibilityCheck","render","canEdit","PostVisibility","setPublic","setPrivate","setPasswordProtected","updatePassword","hasPassword","password","onUpdateVisibility","visibilityHandlers","public","checked","private","visibilityOptions","info","PostVisibilityLabel","getVisibilityLabel","PreserveScrollInReorder","blockOrder","getOffset","snapshot","restorePreviousOffset","blockNode","offset","scrollTop","EditorProvider","recovery","updateEditorSettings","postLock","setupEditor","css","baseURL","transforms","editorWidth","wrap","urlRewrite","updatedCSS","traverse","innerHTML","body","appendChild","providers","SlotFillProvider","DropZoneProvider","createEditorElement","isAriaPropName","pickAriaProps","isNil","diffAriaProps","nextProps","prevAriaKeys","nextAriaKeys","removedKeys","updatedKeys","alt","Math","min","FormatToolbar","toggleFormat","editor","removeLink","addLink","stopAddingLink","applyFormat","removeFormat","getActiveFormat","addingLink","text","getTextContent","record","isURL","href","formatType","toolbarControls","FORMATTING_CONTROLS","linkIsActive","shortcut","activeShortcut","selector","stopKeyPropagation","getLinkAttributesFromFormat","createLinkFormat","opensInNewWindow","rel","isShowingInput","editLink","LinkEditor","inputValue","onChangeInputValue","submitLink","autocompleteRef","LinkViewer","filterURLForDisplay","LinkContainer","setLinkTarget","onClickOutside","resetState","prependHTTP","toInsert","create","insert","autocompleteElement","showInput","start","end","getCurrentCaretPositionStyle","rect","getRectangleFromRange","offsetParent","getOffsetParent","anchorNode","parentRect","PositionedAtSelection","ToolbarContainer","TINYMCE_ZWSP","RichText","multiline","multilineTag","onInit","onSetup","onNodeChange","onDeleteKeyDown","onHorizontalNavigationKeyDown","onKeyUp","onPropagateUndo","onPaste","onCreateUndoLevel","onInput","getRecord","createRecord","applyRecord","valueToFormat","setRef","formatToValue","memize","savedContent","containerRef","patterns","getPatterns","enterPatterns","trigger","usedDeprecatedChildrenSource","Array","isArray","editableRef","forced_root_block","custom_undo_redo_levels","unstableGetSettings","unstableOnSetup","command","defer","range","element","removeNode","getAttribute","unwrapNode","removeAttribute","attribute","filterString","apply","plainText","error1","error2","console","log","file","getAsFile","createBlobURL","tagName","shouldReplace","onSplit","splitContent","pastedText","recordToInsert","paste","unstableOnFocus","transformed","accumlator","_withoutApply","lastLevel","originalEvent","empty","isEdge","isHorizontalEdge","stopImmediatePropagation","nodeValue","TEXT_NODE","edgeSibling","isDelete","isHorizontalNavigation","regExp","isEmptyLine","charAt","isViewportSmall","scrollToRect","getRng","caretTop","graceOffset","epsilon","delta","abs","scrollTo","scrollLeft","parents","selectedAnchor","prevRecord","toHTML","fromDOM","unstableToDom","childNodes","toHTMLString","Tagname","inlineToolbar","formattingControls","keepPlaceholderOnFocus","autocompleters","MultilineTag","ariaProps","isPlaceholderVisible","formatToolbar","isExpanded","listBoxId","activeId","defaultProps","RichTextContainer","isViewportMatch","createUndoLevel","Tag","needsInternetExplorerInputFix","editorNode","navigator","userAgent","applyInternetExplorerInputFix","mapTextInputEvent","textInputEvent","inputEvent","createEvent","initEvent","dispatchEvent","mapDeletionKeyUpEvents","isDeletion","removeInternetExplorerInputFix","IS_PLACEHOLDER_VISIBLE_ATTR_NAME","TinyMCE","bindEditorNode","initialize","configureIsPlaceholderVisible","setAttribute","forEach","destroy","isPlaceholderVisibleString","String","theme","inline","browser_spellcheck","entity_encoding","convert_urls","inline_boundaries_selector","plugins","tinymce","init","setup","defaultValue","role","initialHTML","contentEditable","__html","validateTokenSettings","isFunction","normalizeIconObject","isValidIcon","TokenUI","selected","hovered","containerPosition","insertContent","renderToString","getInsertPosition","getTokenSettings","urlQueryArgs","SkipToSelectedBlock","selectedBlockElement","getBlockFocusableWrapper","TableOfContents","hasBlocks","TableOfContentsPanel","headingCount","paragraphCount","numberOfBlocks","getGlobalBlockCount","TemplateValidationNotice","confirmSynchronization","synchronizeTemplate","resetTemplateValidity","isValidTemplate","setTemplateValidity","ThemeSupportCheck","supported","UnsavedChangesWarning","warnIfUnsavedChanges","stubFalse","returnValue","URLInputButton","toggle","expanded","buttonLabel","stopEventPropagation","URLInput","updateSuggestions","suggestionNodes","posts","showSuggestions","selectedSuggestion","scrollingIntoView","suggestionsRequest","previousIndex","nextIndex","selectLink","autoFocus","bindSuggestionNode","URLPopover","toggleSettingsVisibility","isSettingsExpanded","renderSettings","showSettings","Warning","actions","secondaryActions","Children","WordCount","wordCount","isTabbableTextField","overEvery","isTabbableIndex","isNavigationCandidate","hasModifier","isVertical","WritingFlow","clearVerticalRect","focusLastTextField","verticalRect","focusableNodes","focusable","isTabCandidate","array","isBlockFocusStop","hasInnerBlocksContext","nextNode","selectionBeforeEndClientId","selectionAfterEndClientId","nextSelectionEndClientId","selectedFirstClientId","selectedLastClientId","focusedBlockClientId","onSelectBlock","closestTabbable","getClosestTabbable","isInSameBlock","isUp","isDown","isLeft","isRight","isHorizontal","isNav","isShift","ctrlKey","altKey","metaKey","isNavEdge","isVerticalEdge","isKeyboardEvent","isEntirelySelected","isContentEditable","defaultPrevented","computeCaretRect","isTabbableEdge","expandSelection","moveSelection","getFirstMultiSelectedBlockClientId","selectionEndClientId","commentre","lineno","column","updatePosition","str","lines","lastIndexOf","line","Position","whitespace","source","errorsList","Error","reason","filename","silent","stylesheet","rulesList","rules","parsingErrors","accumulator","comments","atrule","rule","re","m","exec","c","comment","matched","s","declaration","prop","val","ret","property","declarations","decls","decl","keyframe","vals","atkeyframes","vendor","frame","frames","keyframes","atsupports","athost","atmedia","atcustommedia","atpage","sel","selectors","atdocument","doc","atfontface","atimport","_compileAtrule","atcharset","atnamespace","RegExp","addParent","obj","isNode","childParent","k","v","defineProperty","configurable","writable","enumerable","Compiler","opts","emit","visit","mapVisit","delim","buf","Base","call","inherits","compile","import","charset","namespace","page","host","indentation","indent","compiler","compress","Compressed","Identity","getEditorWidthRules","widthDeclaration","isRemotePath","filePath","isAbsolutePath","isValidURL","getResourcePath","pathname","resolve","processURL","URL","newUrl","quote","getURLs","reg","URLs","replaceURLs","rewrite","rootURL","updatedURLs","IS_ROOT_TAG","ignore","updateSelector","traverseCSS","callback","parsed","updated","updatedNode","update","stringify","warn","addAttribute","getBlockValidAlignments","blockAlign","getBlockSupport","validAlignments","withToolbarControls","updateAlignment","nextAlign","blockDefaultAlign","withDataAlign","addAssignedAlign","addFilter","ANCHOR_REGEX","anchor","withInspectorControl","hasAnchor","nextValue","addSaveProps","hasCustomClassName","getHTMLRootElementClasses","parseWithAttributeSchema","addParsedDifference","blockAttributes","attributesSansClassName","defaultClasses","actualClasses","customClasses","defaultAutocompleters","userAutocompleter","once","setDefaultCompleters","blockAutocompleter","addGeneratedClassName","uniq","compact","preserveLayoutAttribute","transformedBlock","excludeLayoutFromUnmodifiedBlockCheck","attributeKeys","autosaveStatus","resetPost","resetAutosave","updatePost","edits","setupEditorState","receiveBlocks","updates","Date","now","createOnMove","fromRootClientId","toRootClientId","secondBlockClientId","selectPrevious","createNotice","uuid","isDismissible","spokenMessage","notice","noticeId","createSuccessNotice","createInfoNotice","createErrorNotice","createWarningNotice","receiveReusableBlocks","results","saveReusableBlock","updateReusableBlockTitle","registerToken","unregisterToken","insertAt","elements","moveTo","from","to","withoutMovedElements","splice","PREFERENCES_DEFAULTS","insertUsage","EDITOR_SETTINGS_DEFAULTS","maxWidth","allowedBlockTypes","maxUploadFileSize","allowedMimeTypes","validateBlocksToTemplate","getTemplate","isBlocksValidToTemplate","doBlocksMatchTemplate","selectPreviousBlock","firstRemovedBlockClientId","currentSelectedBlock","present","past","blockClientIdToSelect","ensureDefaultBlock","REQUEST_POST_UPDATE","requestPostUpdate","REQUEST_POST_UPDATE_SUCCESS","requestPostUpdateSuccess","REQUEST_POST_UPDATE_FAILURE","requestPostUpdateFailure","TRASH_POST","TRASH_POST_FAILURE","trashPostFailure","REFRESH_POST","MERGE_BLOCKS","blockA","blockB","merge","blocksWithTheSameType","updatedAttributes","SETUP_EDITOR","isNewPost","autosaveAction","noticeMessage","AUTOSAVE_POST_NOTICE_ID","setupAction","RESET_BLOCKS","SYNCHRONIZE_TEMPLATE","updatedBlockList","FETCH_REUSABLE_BLOCKS","SAVE_REUSABLE_BLOCK","saveReusableBlocks","DELETE_REUSABLE_BLOCK","deleteReusableBlocks","RECEIVE_REUSABLE_BLOCKS","CONVERT_BLOCK_TO_STATIC","CONVERT_BLOCK_TO_REUSABLE","CREATE_NOTICE","message","REMOVE_BLOCKS","REPLACE_BLOCKS","SAVE_POST_NOTICE_ID","TRASH_POST_NOTICE_ID","isAutosave","getPostEdits","toSend","resolveSelector","optimist","BEGIN","POST_UPDATE_TRANSACTION_ID","getAutosave","newPost","reset","isRevision","previousPost","REVERT","COMMIT","willPublish","shouldShowLink","item_reverted_to_draft","publish","item_published","item_published_privately","future","item_scheduled","item_updated","view_item","messages","cloudflareDetailsLink","cloudflaredMessage","REUSABLE_BLOCK_NOTICE_ID","reusableBlockOrBlocks","receiveReusableBlocksAction","parsedBlocks","getPostRawValue","parsedBlock","updatedReusableBlock","updatedId","allBlocks","associatedBlocks","associatedBlockClientIds","transactionId","uniqueId","oldBlock","referencedBlock","innerBlock","selectorName","hasFinished","hasFinishedResolution","getResult","unsubscribe","subscribe","MODULE_KEY","registerStore","reducer","applyMiddlewares","forOwn","tokens","middlewares","refx","effects","multi","enhancedDispatch","chain","middlewareAPI","middleware","flowRight","mapBlockOrder","getFlattenedBlocks","flattenedBlocks","shift","hasSameKeys","a","b","isUpdatingSameBlockAttribute","previousAction","isUpdatingSamePostProperty","shouldOverwriteState","overSome","withInnerBlocksRemoveCascade","combineReducers","withHistory","resetTypes","ignoreTypes","withChangeDetection","getCanonicalValue","blocksByClientId","nextAttributes","subState","mappedBlocks","fromIndex","lastClientId","nextState","currentPost","blockSelection","isEnabled","nextSelectedBlockClientId","blocksMode","isInsertionPointVisible","preferences","omitBy","saving","requesting","successful","reusableBlocks","isFetching","hasOwnProperty","field","preview_link","PERMALINK_POSTNAME_REGEX","INSERTER_UTILITY_HIGH","INSERTER_UTILITY_MEDIUM","INSERTER_UTILITY_LOW","INSERTER_UTILITY_NONE","MILLISECONDS_PER_HOUR","MILLISECONDS_PER_DAY","MILLISECONDS_PER_WEEK","EMPTY_ARRAY","inSomeHistory","attributeName","hasAutosave","moment","isBefore","isEditedPostEmpty","getBlocksForSerialization","isAfter","modified","getBlockDependantsCacheBust","createSelector","innerBlockClientId","getPostMeta","descendants","getClientIdsWithDescendants","topLevelIds","getBlockSelectionEnd","multiSelectedBlockCount","getAdjacentBlockClientId","startClientId","modifier","orderSet","startIndex","endIndex","ancestorClientId","isMultiSelected","deep","innerClientId","isBlockWithinSelection","didPostSaveRequestSucceed","didPostSaveRequestFail","isSingleUnmodifiedDefaultBlock","isSingleFreeformBlock","removep","checkAllowList","defaultResult","isBoolean","isBlockAllowedInEditor","parentBlockListSettings","parentAllowedBlocks","hasParentAllowedBlock","blockAllowedParentBlocks","parentName","hasBlockAllowedParent","getInsertUsage","calculateUtility","isContextual","calculateFrecency","duration","shouldIncludeBlockType","buildBlockTypeInserterItem","shouldIncludeReusableBlock","referencedBlockType","buildReusableBlockInserterItem","blockTypeInserterItems","getBlockTypes","reusableBlockInserterItems","getReusableBlocks","isNaN","isSavingReusableBlock","isFetchingReusableBlock","getStateBeforeOptimisticTransaction","transaction","entry","beforeState","stateBeforeRequest","permalinkTemplate","predicate","classList","blockElement","innerBlocksContainer","wpAllowedMimeTypes","additionalData","getMimeTypesArray","wpMimeTypesObject","mime","extensionsString","extensions","extension","filesSet","setAndUpdateFiles","idx","revokeBlobURL","isAllowedType","fileType","allowedMimeTypesForUser","isAllowedMimeTypeForUser","triggerError","mediaFile","createMediaFromFile","savedMedia","mediaObject","alt_text","mediaDetails","FormData","append","flatTerms","termsByParent","fillWithChildren","filteredURL","isReset","isChanging","isIgnored","DEFAULT_OPTIONS","initialState","lastAction","shouldCreateUndoLevel","dropRight","drop","nextPresent","nextPast","convertChangesToXML","changes","change","escapeHTML","n"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAe;AACf;AACA,C;;;;;;;;;;;;ACFA;AAAA;AAAe;AACf;AACA,iDAAiD,gBAAgB;AACjE;AACA;;AAEA;AACA;AACA,C;;;;;;;;;;;;ACRA;AAAA;AAAe;AACf;AACA;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACNA;AAAA;AAAA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA,C;;;;;;;;;;;;AClCA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACJA;AAAA;AAAA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;;ACdA;AAAA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbA;AAAA;AAAe;AACf;AACA,mBAAmB,sBAAsB;AACzC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;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;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAGA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAGA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CAGA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1GA;;;AAGA;AACA;AAEA;;;;AAGA;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AAC,MAAQ,EAAE,OAAS,CAAC,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AACxC,EAAE,MAAM,YAQN;AACF,CAAC;AACD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA,0BAA0B,gBAAgB;AAC1C;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,+EAA+E;;AAE/E;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;;AAEJ;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AA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ACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA,gC;;;;;;;;;;;;AChIa;;AAEb,iBAAiB,mBAAO,CAAC,+FAAwB,E;;;;;;;;;;;;ACFpC;;AAEb,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,oGAAoG,mBAAmB,EAAE,mBAAmB,kGAAkG;;AAE9O;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,kBAAkB;AAC/B;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,SAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,CAAC,Y;;;;;;;;;;;ACtbD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtBA;AACA,oBAAoB,mBAAO,CAAC,oFAAgB;;AAE5C;AACA;AACA,WAAW,YAAY;AACvB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AChGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,cAAc,SAAS;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAM,KAA+B,GAAG,EAMtC;;AAEF;AACA;;;;;;;;;;;;;ACpHA;AACA;AACA;AACA;AACA;;AAEa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,kCAAkC;AAClC;AACA;AACA;;AAEA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB,sBAAsB;AACtC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACzFA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA,IAAI,IAAqC;AACzC,6BAA6B,mBAAO,CAAC,yFAA4B;AACjE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,UAAU;AACrB;AACA;AACA;AACA,MAAM,IAAqC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AC1FA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,aAAa,mBAAO,CAAC,4DAAe;;AAEpC,2BAA2B,mBAAO,CAAC,yFAA4B;AAC/D,qBAAqB,mBAAO,CAAC,qEAAkB;;AAE/C;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,6BAA6B;AAC7B,QAAQ;AACR;AACA;AACA;AACA;AACA,+BAA+B,KAAK;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,4BAA4B;AAC5B,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAQ,IAAqC;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,UAAU,aAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,KAAqC,wFAAwF,SAAM;AACzI;AACA;;AAEA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM,KAAqC,4FAA4F,SAAM;AAC7I;AACA;;AAEA,mBAAmB,gCAAgC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;AC1iBA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAI,IAAqC;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,uFAA2B;AACtD,CAAC,MAAM,EAIN;;;;;;;;;;;;;AC3BD;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;;AAEA;;;;;;;;;;;;ACXA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;;AAExB,yCAAyC,qBAAqB;;AAE9D;AACA;AACA;AACA;AACA;AACA,kCAAkC,oBAAoB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,iBAAiB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE,IAEU;AACZ;AACA,EAAE,mCAAmB;AACrB;AACA,GAAG;AAAA,oGAAC;AACJ,EAAE,MAAM,EAaN;;AAEF,CAAC;;;;;;;;;;;;;;ACphBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpFa;;AAEb,iCAAiC,mBAAO,CAAC,0DAAU;AACnD,qCAAqC,mBAAO,CAAC,0DAAU;;;;;;;;;;;;;ACH1C;AACb;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA,YAAY,mBAAO,CAAC,oBAAO;AAC3B,gBAAgB,mBAAO,CAAC,sDAAY;AACpC,eAAe,mBAAO,CAAC,0DAAU;AACjC,qBAAqB,mBAAO,CAAC,kEAAa;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,UAAU,+DAA+D,UAAU,uBAAuB,qCAAqC;AAC7K;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iCAAiC,EAAE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,WAAW,sBAAsB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;ACxHa;AACb;AACA,yBAAyB,mBAAO,CAAC,0FAAoB;AACrD;;;;;;;;;;;;;ACHa;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wB;;;;;;;;;;;ACvBA,iBAAiB,mBAAO,CAAC,kEAAgB;;;;;;;;;;;;;ACA5B;;AAEb,mDAAmD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe;;AAE9P,8CAA8C,iBAAiB,qBAAqB,oCAAoC,6DAA6D,oBAAoB,EAAE,eAAe;;AAE1N;AACA;AACA;AACA,UAAU,6CAA6C,OAAO,WAAW;AACzE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iCAAiC,0CAA0C;AAC3E;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uBAAuB;AACnD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iBAAiB;AACpD;AACA;AACA;AACA,qBAAqB,qBAAqB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ,GAAG;AACH;;AAEA;;AAEA;;AAEA,YAAY;AACZ;AACA,C;;;;;;;;;;;;AC9Ja;;AAEb;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;AC/CA;AAAa;;AAEb;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA;AACA,WAAW,EAAE;AACb;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb;AACA,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA,YAAY,QAAQ;AACpB;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,cAAc;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB;AACA;AACA;AACA,YAAY,SAAS;AACrB;AACe;AACf;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA,cAAc,uBAAuB;AACrC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,KAAK;AACjB;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,SAAS;AACvB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;ACjRD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAAoB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,8BAA8B;AACpD,sBAAsB,8BAA8B;AACpD,sBAAsB,8BAA8B;;AAEpD;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+BAA+B,mBAAmB,OAAO;AACzD,+BAA+B,mBAAmB,OAAO;AACzD,+BAA+B,mBAAmB,OAAO;AACzD;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,gBAAgB;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,sDAAsD;AACtD,wCAAwC;AACxC,wCAAwC;AACxC;;AAEA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,cAAc;AACd;AACA;AACA;AACA,sDAAsD;AACtD,wCAAwC;AACxC,wCAAwC;AACxC;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,yCAAyC;AAC5D,mBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,wCAAwC;AAC3D,mBAAmB,yCAAyC;AAC5D,mBAAmB,yCAAyC;AAC5D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,uCAAuC;AAC1D,mBAAmB,wCAAwC;AAC3D;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA+D,WAAW;AAC1E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,kBAAkB;AAC9C;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA2D,wBAAwB;;AAEnF;AACA;AACA,2CAA2C,wBAAwB;AACnE;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,8EAA8E,4BAA4B,gBAAgB;AAC1H,8EAA8E,2BAA2B,gBAAgB;AACzH,qDAAqD,oDAAoD,gBAAgB;AACzH,qDAAqD,oDAAoD,gBAAgB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA,oDAAoD,0BAA0B;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,KAAK,kBAAkB,YAAY,kBAAkB;AACrD;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4BAA4B,YAAY;;AAExC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE;AACjE,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF,+BAA+B,EAAE,cAAc,EAAE,cAAc,EAAE,cAAc,EAAE;AACjF;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,UAAU,OAAO,UAAU,OAAO,SAAS;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2CAA2C;AAC3C;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS,IAA0C;AACnD,IAAI,mCAAO,aAAa,kBAAkB;AAAA,oGAAC;AAC3C;AACA;AACA,KAAK,EAEJ;;AAED,CAAC;;;;;;;;;;;;AC1qCD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,4B;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,mCAAmC,uBAAuB;AAC1D,kCAAkC,sBAAsB;AACxD,gCAAgC,oBAAoB;AACpD,iCAAiC,qBAAqB;AACtD,gCAAgC,gBAAgB;AAChD,iCAAiC;AACjC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;AACpB,uBAAuB;AACvB,yBAAyB;AACzB,wBAAwB;AACxB,0BAA0B;AAC1B,yBAAyB;AACzB,yBAAyB;;AAEzB;AACA;AACA;;AAEA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;;ACzTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,eAAe,mBAAO,CAAC,qDAAU;AACjC,WAAW,mBAAO,CAAC,0CAAQ;;AAE3B;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAK;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,2CAA2C,KAAK;AAChD,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kBAAkB,mBAAO,CAAC,4DAAa;;AAEvC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3tBa;;AAEb;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA,UAAU,mBAAO,CAAC,yDAAW;AAC7B,kBAAkB,mBAAO,CAAC,iEAAmB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;AC5BA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACrBA,aAAa,qCAAqC,EAAE,I;;;;;;;;;;;ACApD,aAAa,yCAAyC,EAAE,I;;;;;;;;;;;ACAxD,aAAa,sCAAsC,EAAE,I;;;;;;;;;;;ACArD,aAAa,qCAAqC,EAAE,I;;;;;;;;;;;ACApD,aAAa,uCAAuC,EAAE,I;;;;;;;;;;;ACAtD,aAAa,2CAA2C,EAAE,I;;;;;;;;;;;ACA1D,aAAa,wCAAwC,EAAE,I;;;;;;;;;;;ACAvD,aAAa,yCAAyC,EAAE,I;;;;;;;;;;;ACAxD,aAAa,qCAAqC,EAAE,I;;;;;;;;;;;ACApD,aAAa,qCAAqC,EAAE,I;;;;;;;;;;;ACApD,aAAa,2CAA2C,EAAE,I;;;;;;;;;;;ACA1D,aAAa,oCAAoC,EAAE,I;;;;;;;;;;;ACAnD,aAAa,wCAAwC,EAAE,I;;;;;;;;;;;ACAvD,aAAa,sCAAsC,EAAE,I;;;;;;;;;;;ACArD,aAAa,6CAA6C,EAAE,I;;;;;;;;;;;ACA5D,aAAa,qCAAqC,EAAE,I;;;;;;;;;;;ACApD,aAAa,+CAA+C,EAAE,I;;;;;;;;;;;ACA9D,aAAa,yCAAyC,EAAE,I;;;;;;;;;;;ACAxD,aAAa,oCAAoC,EAAE,I;;;;;;;;;;;ACAnD,aAAa,yCAAyC,EAAE,I;;;;;;;;;;;ACAxD,aAAa,0CAA0C,EAAE,I;;;;;;;;;;;ACAzD,aAAa,oCAAoC,EAAE,I;;;;;;;;;;;ACAnD,aAAa,yCAAyC,EAAE,I;;;;;;;;;;;ACAxD,aAAa,0CAA0C,EAAE,I;;;;;;;;;;;ACAzD,aAAa,iCAAiC,EAAE,I;;;;;;;;;;;ACAhD,aAAa,iCAAiC,EAAE,I;;;;;;;;;;;ACAhD,aAAa,gCAAgC,EAAE,I;;;;;;;;;;;ACA/C,aAAa,kCAAkC,EAAE,I","file":"editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./node_modules/@wordpress/editor/build-module/index.js\");\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","/**\n * External dependencies\n */\nimport { find } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Toolbar } from '@wordpress/components';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { withBlockEditContext } from '../block-edit/context';\n\nconst ALIGNMENT_CONTROLS = [\n\t{\n\t\ticon: 'editor-alignleft',\n\t\ttitle: __( 'Align left' ),\n\t\talign: 'left',\n\t},\n\t{\n\t\ticon: 'editor-aligncenter',\n\t\ttitle: __( 'Align center' ),\n\t\talign: 'center',\n\t},\n\t{\n\t\ticon: 'editor-alignright',\n\t\ttitle: __( 'Align right' ),\n\t\talign: 'right',\n\t},\n];\n\nexport function AlignmentToolbar( { isCollapsed, value, onChange } ) {\n\tfunction applyOrUnset( align ) {\n\t\treturn () => onChange( value === align ? undefined : align );\n\t}\n\n\tconst activeAlignment = find( ALIGNMENT_CONTROLS, ( control ) => control.align === value );\n\n\treturn (\n\t\t<Toolbar\n\t\t\tisCollapsed={ isCollapsed }\n\t\t\ticon={ activeAlignment ? activeAlignment.icon : 'editor-alignleft' }\n\t\t\tlabel={ __( 'Change Text Alignment' ) }\n\t\t\tcontrols={ ALIGNMENT_CONTROLS.map( ( control ) => {\n\t\t\t\tconst { align } = control;\n\t\t\t\tconst isActive = ( value === align );\n\n\t\t\t\treturn {\n\t\t\t\t\t...control,\n\t\t\t\t\tisActive,\n\t\t\t\t\tonClick: applyOrUnset( align ),\n\t\t\t\t};\n\t\t\t} ) }\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithBlockEditContext( ( { clientId } ) => {\n\t\treturn {\n\t\t\tclientId,\n\t\t};\n\t} ),\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\twithSelect( ( select, { clientId, isLargeViewport, isCollapsed } ) => {\n\t\tconst { getBlockRootClientId, getEditorSettings } = select( 'core/editor' );\n\t\treturn {\n\t\t\tisCollapsed: isCollapsed || ! isLargeViewport || (\n\t\t\t\t! getEditorSettings().hasFixedToolbar &&\n\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t),\n\t\t};\n\t} ),\n)( AlignmentToolbar );\n","/**\n * External dependencies\n */\nimport { clone } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { applyFilters, hasFilter } from '@wordpress/hooks';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Autocomplete as OriginalAutocomplete } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { withBlockEditContext } from '../block-edit/context';\n\n/*\n * Use one array instance for fallback rather than inline array literals\n * because the latter may cause rerender due to failed prop equality checks.\n */\nconst completersFallback = [];\n\n/**\n * Wrap the default Autocomplete component with one that\n * supports a filter hook for customizing its list of autocompleters.\n *\n * Since there may be many Autocomplete instances at one time, this component\n * applies the filter on demand, when the component is first focused after\n * receiving a new list of completers.\n *\n * This function is exported for unit test.\n *\n * @param  {Function} Autocomplete Original component.\n * @return {Function}              Wrapped component\n */\nexport function withFilteredAutocompleters( Autocomplete ) {\n\treturn class FilteredAutocomplete extends Component {\n\t\tconstructor() {\n\t\t\tsuper();\n\n\t\t\tthis.state = { completers: completersFallback };\n\n\t\t\tthis.saveParentRef = this.saveParentRef.bind( this );\n\t\t\tthis.onFocus = this.onFocus.bind( this );\n\t\t}\n\n\t\tcomponentDidUpdate() {\n\t\t\tconst hasFocus = this.parentNode.contains( document.activeElement );\n\n\t\t\t/*\n\t\t\t * It's possible for props to be updated when the component has focus,\n\t\t\t * so here, we ensure new completers are immediately applied while we\n\t\t\t * have the focus.\n\t\t\t *\n\t\t\t * NOTE: This may trigger another render but only when the component has focus.\n\t\t\t */\n\t\t\tif ( hasFocus && this.hasStaleCompleters() ) {\n\t\t\t\tthis.updateCompletersState();\n\t\t\t}\n\t\t}\n\n\t\tonFocus() {\n\t\t\tif ( this.hasStaleCompleters() ) {\n\t\t\t\tthis.updateCompletersState();\n\t\t\t}\n\t\t}\n\n\t\thasStaleCompleters() {\n\t\t\treturn (\n\t\t\t\t! ( 'lastFilteredCompletersProp' in this.state ) ||\n\t\t\t\tthis.state.lastFilteredCompletersProp !== this.props.completers\n\t\t\t);\n\t\t}\n\n\t\tupdateCompletersState() {\n\t\t\tconst { blockName, completers } = this.props;\n\t\t\tlet nextCompleters = completers;\n\t\t\tconst lastFilteredCompletersProp = nextCompleters;\n\n\t\t\tif ( hasFilter( 'editor.Autocomplete.completers' ) ) {\n\t\t\t\tnextCompleters = applyFilters(\n\t\t\t\t\t'editor.Autocomplete.completers',\n\t\t\t\t\t// Provide copies so filters may directly modify them.\n\t\t\t\t\tnextCompleters && nextCompleters.map( clone ),\n\t\t\t\t\tblockName,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.setState( {\n\t\t\t\tlastFilteredCompletersProp,\n\t\t\t\tcompleters: nextCompleters || completersFallback,\n\t\t\t} );\n\t\t}\n\n\t\tsaveParentRef( parentNode ) {\n\t\t\tthis.parentNode = parentNode;\n\t\t}\n\n\t\trender() {\n\t\t\tconst { completers } = this.state;\n\t\t\tconst autocompleteProps = {\n\t\t\t\t...this.props,\n\t\t\t\tcompleters,\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t\t<div onFocus={ this.onFocus } ref={ this.saveParentRef }>\n\t\t\t\t\t<Autocomplete onFocus={ this.onFocus } { ...autocompleteProps } />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t};\n}\n\nexport default compose( [\n\twithBlockEditContext( ( { name } ) => {\n\t\treturn {\n\t\t\tblockName: name,\n\t\t};\n\t} ),\n\twithFilteredAutocompleters,\n] )( OriginalAutocomplete );\n","/**\n * WordPress dependencies\n */\nimport { select } from '@wordpress/data';\nimport { createBlock } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\n/**\n * Returns the client ID of the parent where a newly inserted block would be\n * placed.\n *\n * @return {string} Client ID of the parent where a newly inserted block would\n *                  be placed.\n */\nfunction defaultGetBlockInsertionParentClientId() {\n\treturn select( 'core/editor' ).getBlockInsertionPoint().rootClientId;\n}\n\n/**\n * Returns the inserter items for the specified parent block.\n *\n * @param {string} parentClientId Client ID of the block for which to retrieve\n *                                inserter items.\n *\n * @return {Array<Editor.InserterItem>} The inserter items for the specified\n *                                      parent.\n */\nfunction defaultGetInserterItems( parentClientId ) {\n\treturn select( 'core/editor' ).getInserterItems( parentClientId );\n}\n\n/**\n * Returns the name of the currently selected block.\n *\n * @return {string?} The name of the currently selected block or `null` if no\n *                   block is selected.\n */\nfunction defaultGetSelectedBlockName() {\n\tconst selectedBlock = select( 'core/editor' ).getSelectedBlock();\n\treturn selectedBlock ? selectedBlock.name : null;\n}\n\n/**\n * Creates a blocks repeater for replacing the current block with a selected block type.\n *\n * @return {Completer} A blocks completer.\n */\nexport function createBlockCompleter( {\n\t// Allow store-based selectors to be overridden for unit test.\n\tgetBlockInsertionParentClientId = defaultGetBlockInsertionParentClientId,\n\tgetInserterItems = defaultGetInserterItems,\n\tgetSelectedBlockName = defaultGetSelectedBlockName,\n} = {} ) {\n\treturn {\n\t\tname: 'blocks',\n\t\tclassName: 'editor-autocompleters__block',\n\t\ttriggerPrefix: '/',\n\t\toptions() {\n\t\t\tconst selectedBlockName = getSelectedBlockName();\n\t\t\treturn getInserterItems( getBlockInsertionParentClientId() ).filter(\n\t\t\t\t// Avoid offering to replace the current block with a block of the same type.\n\t\t\t\t( inserterItem ) => selectedBlockName !== inserterItem.name\n\t\t\t);\n\t\t},\n\t\tgetOptionKeywords( inserterItem ) {\n\t\t\tconst { title, keywords = [] } = inserterItem;\n\t\t\treturn [ ...keywords, title ];\n\t\t},\n\t\tgetOptionLabel( inserterItem ) {\n\t\t\tconst { icon, title } = inserterItem;\n\t\t\treturn [\n\t\t\t\t<BlockIcon key=\"icon\" icon={ icon && icon.src } showColors />,\n\t\t\t\ttitle,\n\t\t\t];\n\t\t},\n\t\tallowContext( before, after ) {\n\t\t\treturn ! ( /\\S/.test( before ) || /\\S/.test( after ) );\n\t\t},\n\t\tgetOptionCompletion( inserterItem ) {\n\t\t\tconst { name, initialAttributes } = inserterItem;\n\t\t\treturn {\n\t\t\t\taction: 'replace',\n\t\t\t\tvalue: createBlock( name, initialAttributes ),\n\t\t\t};\n\t\t},\n\t\tisOptionDisabled( inserterItem ) {\n\t\t\treturn inserterItem.isDisabled;\n\t\t},\n\t};\n}\n\n/**\n * Creates a blocks repeater for replacing the current block with a selected block type.\n *\n * @return {Completer} A blocks completer.\n */\nexport default createBlockCompleter();\n","export { default as blockAutocompleter } from './block';\nexport { default as userAutocompleter } from './user';\n","/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\n\n/**\n* A user mentions completer.\n*\n* @type {Completer}\n*/\nexport default {\n\tname: 'users',\n\tclassName: 'editor-autocompleters__user',\n\ttriggerPrefix: '@',\n\toptions( search ) {\n\t\tlet payload = '';\n\t\tif ( search ) {\n\t\t\tpayload = '?search=' + encodeURIComponent( search );\n\t\t}\n\t\treturn apiFetch( { path: '/wp/v2/users' + payload } );\n\t},\n\tisDebounced: true,\n\tgetOptionKeywords( user ) {\n\t\treturn [ user.slug, user.name ];\n\t},\n\tgetOptionLabel( user ) {\n\t\treturn [\n\t\t\t<img key=\"avatar\" className=\"editor-autocompleters__user-avatar\" alt=\"\" src={ user.avatar_urls[ 24 ] } />,\n\t\t\t<span key=\"name\" className=\"editor-autocompleters__user-name\">{ user.name }</span>,\n\t\t\t<span key=\"slug\" className=\"editor-autocompleters__user-slug\">{ user.slug }</span>,\n\t\t];\n\t},\n\tgetOptionCompletion( user ) {\n\t\treturn `@${ user.slug }`;\n\t},\n};\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nexport class AutosaveMonitor extends Component {\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { isDirty, isAutosaveable } = this.props;\n\n\t\tif (\n\t\t\tprevProps.isDirty !== isDirty ||\n\t\t\tprevProps.isAutosaveable !== isAutosaveable\n\t\t) {\n\t\t\tthis.toggleTimer( isDirty && isAutosaveable );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.toggleTimer( false );\n\t}\n\n\ttoggleTimer( isPendingSave ) {\n\t\tclearTimeout( this.pendingSave );\n\t\tconst { autosaveInterval } = this.props;\n\t\tif ( isPendingSave ) {\n\t\t\tthis.pendingSave = setTimeout(\n\t\t\t\t() => this.props.autosave(),\n\t\t\t\tautosaveInterval * 1000\n\t\t\t);\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tisEditedPostDirty,\n\t\t\tisEditedPostAutosaveable,\n\t\t\tgetEditorSettings,\n\t\t} = select( 'core/editor' );\n\t\tconst { autosaveInterval } = getEditorSettings();\n\t\treturn {\n\t\t\tisDirty: isEditedPostDirty(),\n\t\t\tisAutosaveable: isEditedPostAutosaveable(),\n\t\t\tautosaveInterval,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tautosave: dispatch( 'core/editor' ).autosave,\n\t} ) ),\n] )( AutosaveMonitor );\n","/**\n * External dependencies\n */\nimport { castArray, first, last, every } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { cloneBlock, hasBlockSupport } from '@wordpress/blocks';\n\nfunction BlockActions( {\n\tonDuplicate,\n\tonRemove,\n\tonInsertBefore,\n\tonInsertAfter,\n\tisLocked,\n\tcanDuplicate,\n\tchildren,\n} ) {\n\treturn children( {\n\t\tonDuplicate,\n\t\tonRemove,\n\t\tonInsertAfter,\n\t\tonInsertBefore,\n\t\tisLocked,\n\t\tcanDuplicate,\n\t} );\n}\n\nexport default compose( [\n\twithSelect( ( select, props ) => {\n\t\tconst {\n\t\t\tgetBlocksByClientId,\n\t\t\tgetBlockIndex,\n\t\t\tgetTemplateLock,\n\t\t\tgetBlockRootClientId,\n\t\t} = select( 'core/editor' );\n\n\t\tconst blocks = getBlocksByClientId( props.clientIds );\n\t\tconst canDuplicate = every( blocks, ( block ) => {\n\t\t\treturn !! block && hasBlockSupport( block.name, 'multiple', true );\n\t\t} );\n\t\tconst rootClientId = getBlockRootClientId( props.clientIds[ 0 ] );\n\n\t\treturn {\n\t\t\tfirstSelectedIndex: getBlockIndex( first( castArray( props.clientIds ) ), rootClientId ),\n\t\t\tlastSelectedIndex: getBlockIndex( last( castArray( props.clientIds ) ), rootClientId ),\n\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\tblocks,\n\t\t\tcanDuplicate,\n\t\t\trootClientId,\n\t\t\textraProps: props,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, props ) => {\n\t\tconst {\n\t\t\tclientIds,\n\t\t\trootClientId,\n\t\t\tblocks,\n\t\t\tfirstSelectedIndex,\n\t\t\tlastSelectedIndex,\n\t\t\tisLocked,\n\t\t\tcanDuplicate,\n\t\t} = props;\n\n\t\tconst {\n\t\t\tinsertBlocks,\n\t\t\tmultiSelect,\n\t\t\tremoveBlocks,\n\t\t\tinsertDefaultBlock,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonDuplicate() {\n\t\t\t\tif ( isLocked || ! canDuplicate ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst clonedBlocks = blocks.map( ( block ) => cloneBlock( block ) );\n\t\t\t\tinsertBlocks(\n\t\t\t\t\tclonedBlocks,\n\t\t\t\t\tlastSelectedIndex + 1,\n\t\t\t\t\trootClientId\n\t\t\t\t);\n\t\t\t\tif ( clonedBlocks.length > 1 ) {\n\t\t\t\t\tmultiSelect(\n\t\t\t\t\t\tfirst( clonedBlocks ).clientId,\n\t\t\t\t\t\tlast( clonedBlocks ).clientId\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonRemove() {\n\t\t\t\tif ( ! isLocked ) {\n\t\t\t\t\tremoveBlocks( clientIds );\n\t\t\t\t}\n\t\t\t},\n\t\t\tonInsertBefore() {\n\t\t\t\tif ( ! isLocked ) {\n\t\t\t\t\tinsertDefaultBlock( {}, rootClientId, firstSelectedIndex );\n\t\t\t\t}\n\t\t\t},\n\t\t\tonInsertAfter() {\n\t\t\t\tif ( ! isLocked ) {\n\t\t\t\t\tinsertDefaultBlock( {}, rootClientId, lastSelectedIndex + 1 );\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n] )( BlockActions );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Toolbar } from '@wordpress/components';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { withBlockEditContext } from '../block-edit/context';\n\nconst BLOCK_ALIGNMENTS_CONTROLS = {\n\tleft: {\n\t\ticon: 'align-left',\n\t\ttitle: __( 'Align left' ),\n\t},\n\tcenter: {\n\t\ticon: 'align-center',\n\t\ttitle: __( 'Align center' ),\n\t},\n\tright: {\n\t\ticon: 'align-right',\n\t\ttitle: __( 'Align right' ),\n\t},\n\twide: {\n\t\ticon: 'align-wide',\n\t\ttitle: __( 'Wide width' ),\n\t},\n\tfull: {\n\t\ticon: 'align-full-width',\n\t\ttitle: __( 'Full width' ),\n\t},\n};\n\nconst DEFAULT_CONTROLS = [ 'left', 'center', 'right', 'wide', 'full' ];\nconst WIDE_CONTROLS = [ 'wide', 'full' ];\n\nexport function BlockAlignmentToolbar( { isCollapsed, value, onChange, controls = DEFAULT_CONTROLS, wideControlsEnabled = false } ) {\n\tfunction applyOrUnset( align ) {\n\t\treturn () => onChange( value === align ? undefined : align );\n\t}\n\n\tconst enabledControls = wideControlsEnabled ?\n\t\tcontrols :\n\t\tcontrols.filter( ( control ) => WIDE_CONTROLS.indexOf( control ) === -1 );\n\n\tconst activeAlignment = BLOCK_ALIGNMENTS_CONTROLS[ value ];\n\n\treturn (\n\t\t<Toolbar\n\t\t\tisCollapsed={ isCollapsed }\n\t\t\ticon={ activeAlignment ? activeAlignment.icon : 'align-left' }\n\t\t\tlabel={ __( 'Change Alignment' ) }\n\t\t\tcontrols={\n\t\t\t\tenabledControls.map( ( control ) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...BLOCK_ALIGNMENTS_CONTROLS[ control ],\n\t\t\t\t\t\tisActive: value === control,\n\t\t\t\t\t\tonClick: applyOrUnset( control ),\n\t\t\t\t\t};\n\t\t\t\t} )\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithBlockEditContext( ( { clientId } ) => {\n\t\treturn {\n\t\t\tclientId,\n\t\t};\n\t} ),\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\twithSelect( ( select, { clientId, isLargeViewport, isCollapsed } ) => {\n\t\tconst { getBlockRootClientId, getEditorSettings } = select( 'core/editor' );\n\t\treturn {\n\t\t\twideControlsEnabled: select( 'core/editor' ).getEditorSettings().alignWide,\n\t\t\tisCollapsed: isCollapsed || ! isLargeViewport || (\n\t\t\t\t! getEditorSettings().hasFixedToolbar &&\n\t\t\t\tgetBlockRootClientId( clientId )\n\t\t\t),\n\t\t};\n\t} ),\n)( BlockAlignmentToolbar );\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\n\nconst BlockView = ( { title, rawContent, renderedContent, action, actionText, className } ) => {\n\treturn (\n\t\t<div className={ className }>\n\t\t\t<div className=\"editor-block-compare__content\">\n\t\t\t\t<h1 className=\"editor-block-compare__heading\">{ title }</h1>\n\n\t\t\t\t<div className=\"editor-block-compare__html\">\n\t\t\t\t\t{ rawContent }\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"editor-block-compare__preview edit-post-visual-editor\">\n\t\t\t\t\t{ renderedContent }\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"editor-block-compare__action\">\n\t\t\t\t<Button isLarge tabIndex=\"0\" onClick={ action }>{ actionText }</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default BlockView;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { castArray } from 'lodash';\nimport { diffChars } from 'diff';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { getBlockType, getSaveContent, getSaveElement } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockView from './block-view';\n\nclass BlockCompare extends Component {\n\tgetDifference( originalContent, newContent ) {\n\t\tconst difference = diffChars( originalContent, newContent );\n\n\t\treturn difference.map( ( item, pos ) => {\n\t\t\tconst classes = classnames( {\n\t\t\t\t'editor-block-compare__added': item.added,\n\t\t\t\t'editor-block-compare__removed': item.removed,\n\t\t\t} );\n\n\t\t\treturn <span key={ pos } className={ classes }>{ item.value }</span>;\n\t\t} );\n\t}\n\n\tgetOriginalContent( block ) {\n\t\t// Get current block details\n\t\tconst blockType = getBlockType( block.name );\n\n\t\treturn {\n\t\t\trawContent: block.originalContent,\n\t\t\trenderedContent: getSaveElement( blockType, block.attributes ),\n\t\t};\n\t}\n\n\tgetConvertedContent( block ) {\n\t\t// The convertor may return an array of items or a single item\n\t\tconst newBlocks = castArray( block );\n\n\t\t// Get converted block details\n\t\tconst newContent = newBlocks.map( ( item ) => getSaveContent( getBlockType( item.name ), item.attributes, item.innerBlocks ) );\n\t\tconst renderedContent = newBlocks.map( ( item ) => getSaveElement( getBlockType( item.name ), item.attributes, item.innerBlocks ) );\n\n\t\treturn {\n\t\t\trawContent: newContent.join( '' ),\n\t\t\trenderedContent,\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { block, onKeep, onConvert, convertor, convertButtonText } = this.props;\n\t\tconst original = this.getOriginalContent( block );\n\t\tconst converted = this.getConvertedContent( convertor( block ) );\n\t\tconst difference = this.getDifference( original.rawContent, converted.rawContent );\n\n\t\treturn (\n\t\t\t<div className=\"editor-block-compare__wrapper\">\n\t\t\t\t<BlockView\n\t\t\t\t\ttitle={ __( 'Current' ) }\n\t\t\t\t\tclassName=\"editor-block-compare__current\"\n\t\t\t\t\taction={ onKeep }\n\t\t\t\t\tactionText={ __( 'Convert to HTML' ) }\n\t\t\t\t\trawContent={ original.rawContent }\n\t\t\t\t\trenderedContent={ original.renderedContent }\n\t\t\t\t/>\n\n\t\t\t\t<BlockView\n\t\t\t\t\ttitle={ __( 'After Conversion' ) }\n\t\t\t\t\tclassName=\"editor-block-compare__converted\"\n\t\t\t\t\taction={ onConvert }\n\t\t\t\t\tactionText={ convertButtonText }\n\t\t\t\t\trawContent={ difference }\n\t\t\t\t\trenderedContent={ converted.renderedContent }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default BlockCompare;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill, Toolbar } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { ifBlockEditSelected } from '../block-edit/context';\n\nconst { Fill, Slot } = createSlotFill( 'BlockControls' );\n\nconst BlockControlsFill = ( { controls, children } ) => (\n\t<Fill>\n\t\t<Toolbar controls={ controls } />\n\t\t{ children }\n\t</Fill>\n);\n\nconst BlockControls = ifBlockEditSelected( BlockControlsFill );\n\nBlockControls.Slot = Slot;\n\nexport default BlockControls;\n","/**\n * WordPress dependencies\n */\nimport { Draggable } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\n\nconst BlockDraggable = ( { children, clientId, rootClientId, blockElementId, index, onDragStart, onDragEnd } ) => {\n\tconst transferData = {\n\t\ttype: 'block',\n\t\tsrcIndex: index,\n\t\tsrcRootClientId: rootClientId,\n\t\tsrcClientId: clientId,\n\t};\n\n\treturn (\n\t\t<Draggable\n\t\t\telementId={ blockElementId }\n\t\t\ttransferData={ transferData }\n\t\t\tonDragStart={ onDragStart }\n\t\t\tonDragEnd={ onDragEnd }\n\t\t>\n\t\t\t{\n\t\t\t\t( { onDraggableStart, onDraggableEnd } ) => {\n\t\t\t\t\treturn children( {\n\t\t\t\t\t\tonDraggableStart: onDraggableStart,\n\t\t\t\t\t\tonDraggableEnd: onDraggableEnd,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t</Draggable>\n\t);\n};\n\nexport default withSelect( ( select, { clientId } ) => {\n\tconst { getBlockIndex, getBlockRootClientId } = select( 'core/editor' );\n\treturn {\n\t\tindex: getBlockIndex( clientId ),\n\t\trootClientId: getBlockRootClientId( clientId ),\n\t};\n} )( BlockDraggable );\n","/**\n * External Dependencies\n */\nimport { castArray } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { DropZone } from '@wordpress/components';\nimport {\n\trawHandler,\n\tcloneBlock,\n\tgetBlockTransforms,\n\tfindTransform,\n} from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nconst parseDropEvent = ( event ) => {\n\tlet result = {\n\t\tsrcRootClientId: null,\n\t\tsrcClientId: null,\n\t\tsrcIndex: null,\n\t\ttype: null,\n\t};\n\n\tif ( ! event.dataTransfer ) {\n\t\treturn result;\n\t}\n\n\ttry {\n\t\tresult = Object.assign( result, JSON.parse( event.dataTransfer.getData( 'text' ) ) );\n\t} catch ( err ) {\n\t\treturn result;\n\t}\n\n\treturn result;\n};\n\nclass BlockDropZone extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onFilesDrop = this.onFilesDrop.bind( this );\n\t\tthis.onHTMLDrop = this.onHTMLDrop.bind( this );\n\t\tthis.onDrop = this.onDrop.bind( this );\n\t}\n\n\tgetInsertIndex( position ) {\n\t\tconst { index } = this.props;\n\t\tif ( index !== undefined ) {\n\t\t\treturn position.y === 'top' ? index : index + 1;\n\t\t}\n\t}\n\n\tonFilesDrop( files, position ) {\n\t\tconst transformation = findTransform(\n\t\t\tgetBlockTransforms( 'from' ),\n\t\t\t( transform ) => transform.type === 'files' && transform.isMatch( files )\n\t\t);\n\n\t\tif ( transformation ) {\n\t\t\tconst insertIndex = this.getInsertIndex( position );\n\t\t\tconst blocks = transformation.transform( files, this.props.updateBlockAttributes );\n\t\t\tthis.props.insertBlocks( blocks, insertIndex );\n\t\t}\n\t}\n\n\tonHTMLDrop( HTML, position ) {\n\t\tconst blocks = rawHandler( { HTML, mode: 'BLOCKS' } );\n\n\t\tif ( blocks.length ) {\n\t\t\tthis.props.insertBlocks( blocks, this.getInsertIndex( position ) );\n\t\t}\n\t}\n\n\tonDrop( event, position ) {\n\t\tconst { rootClientId: dstRootClientId, clientId: dstClientId, index: dstIndex, getClientIdsOfDescendants } = this.props;\n\t\tconst { srcRootClientId, srcClientId, srcIndex, type } = parseDropEvent( event );\n\n\t\tconst isBlockDropType = ( dropType ) => dropType === 'block';\n\t\tconst isSameLevel = ( srcRoot, dstRoot ) => {\n\t\t\t// Note that rootClientId of top-level blocks will be undefined OR a void string,\n\t\t\t// so we also need to account for that case separately.\n\t\t\treturn ( srcRoot === dstRoot ) || ( ! srcRoot === true && ! dstRoot === true );\n\t\t};\n\t\tconst isSameBlock = ( src, dst ) => src === dst;\n\t\tconst isSrcBlockAnAncestorOfDstBlock = ( src, dst ) => getClientIdsOfDescendants( [ src ] ).some( ( id ) => id === dst );\n\n\t\tif ( ! isBlockDropType( type ) ||\n\t\t\tisSameBlock( srcClientId, dstClientId ) ||\n\t\t\tisSrcBlockAnAncestorOfDstBlock( srcClientId, dstClientId ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst positionIndex = this.getInsertIndex( position );\n\t\t// If the block is kept at the same level and moved downwards,\n\t\t// subtract to account for blocks shifting upward to occupy its old position.\n\t\tconst insertIndex = dstIndex && srcIndex < dstIndex && isSameLevel( srcRootClientId, dstRootClientId ) ? positionIndex - 1 : positionIndex;\n\t\tthis.props.moveBlockToPosition( srcClientId, srcRootClientId, insertIndex );\n\t}\n\n\trender() {\n\t\tconst { isLocked, index } = this.props;\n\t\tif ( isLocked ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst isAppender = index === undefined;\n\n\t\treturn (\n\t\t\t<DropZone\n\t\t\t\tclassName={ classnames( 'editor-block-drop-zone', {\n\t\t\t\t\t'is-appender': isAppender,\n\t\t\t\t} ) }\n\t\t\t\tonFilesDrop={ this.onFilesDrop }\n\t\t\t\tonHTMLDrop={ this.onHTMLDrop }\n\t\t\t\tonDrop={ this.onDrop }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithDispatch( ( dispatch, ownProps ) => {\n\t\tconst {\n\t\t\tinsertBlocks,\n\t\t\tupdateBlockAttributes,\n\t\t\tmoveBlockToPosition,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tinsertBlocks( blocks, index ) {\n\t\t\t\tconst { rootClientId, layout } = ownProps;\n\n\t\t\t\tif ( layout ) {\n\t\t\t\t\t// A block's transform function may return a single\n\t\t\t\t\t// transformed block or an array of blocks, so ensure\n\t\t\t\t\t// to first coerce to an array before mapping to inject\n\t\t\t\t\t// the layout attribute.\n\t\t\t\t\tblocks = castArray( blocks ).map( ( block ) => (\n\t\t\t\t\t\tcloneBlock( block, { layout } )\n\t\t\t\t\t) );\n\t\t\t\t}\n\n\t\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t\t},\n\t\t\tupdateBlockAttributes( ...args ) {\n\t\t\t\tupdateBlockAttributes( ...args );\n\t\t\t},\n\t\t\tmoveBlockToPosition( srcClientId, srcRootClientId, dstIndex ) {\n\t\t\t\tconst { rootClientId: dstRootClientId, layout } = ownProps;\n\t\t\t\tmoveBlockToPosition( srcClientId, srcRootClientId, dstRootClientId, layout, dstIndex );\n\t\t\t},\n\t\t};\n\t} ),\n\twithSelect( ( select, { rootClientId } ) => {\n\t\tconst { getClientIdsOfDescendants, getTemplateLock } = select( 'core/editor' );\n\t\treturn {\n\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t\tgetClientIdsOfDescendants,\n\t\t};\n\t} )\n)( BlockDropZone );\n","/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createContext } from '@wordpress/element';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\nconst { Consumer, Provider } = createContext( {\n\tname: '',\n\tisSelected: false,\n\tfocusedElement: null,\n\tsetFocusedElement: noop,\n\tclientId: null,\n} );\n\nexport { Provider as BlockEditContextProvider };\n\n/**\n * A Higher Order Component used to inject BlockEdit context to the\n * wrapped component.\n *\n * @param {Function} mapContextToProps Function called on every context change,\n *                                     expected to return object of props to\n *                                     merge with the component's own props.\n *\n * @return {Component} Enhanced component with injected context as props.\n */\nexport const withBlockEditContext = ( mapContextToProps ) => createHigherOrderComponent( ( OriginalComponent ) => {\n\treturn ( props ) => (\n\t\t<Consumer>\n\t\t\t{ ( context ) => (\n\t\t\t\t<OriginalComponent\n\t\t\t\t\t{ ...props }\n\t\t\t\t\t{ ...mapContextToProps( context, props ) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</Consumer>\n\t);\n}, 'withBlockEditContext' );\n\n/**\n * A Higher Order Component used to render conditionally the wrapped\n * component only when the BlockEdit has selected state set.\n *\n * @param {Component} OriginalComponent Component to wrap.\n *\n * @return {Component} Component which renders only when the BlockEdit is selected.\n */\nexport const ifBlockEditSelected = createHigherOrderComponent( ( OriginalComponent ) => {\n\treturn ( props ) => (\n\t\t<Consumer>\n\t\t\t{ ( { isSelected } ) => isSelected && (\n\t\t\t\t<OriginalComponent { ...props } />\n\t\t\t) }\n\t\t</Consumer>\n\t);\n}, 'ifBlockEditSelected' );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { withFilters } from '@wordpress/components';\nimport { getBlockDefaultClassName, hasBlockSupport, getBlockType } from '@wordpress/blocks';\n\nexport const Edit = ( props ) => {\n\tconst { attributes = {}, name } = props;\n\tconst blockType = getBlockType( name );\n\n\tif ( ! blockType ) {\n\t\treturn null;\n\t}\n\n\t// Generate a class name for the block's editable form\n\tconst generatedClassName = hasBlockSupport( blockType, 'className', true ) ?\n\t\tgetBlockDefaultClassName( name ) :\n\t\tnull;\n\tconst className = classnames( generatedClassName, attributes.className );\n\n\t// `edit` and `save` are functions or components describing the markup\n\t// with which a block is displayed. If `blockType` is valid, assign\n\t// them preferentially as the render value for the block.\n\tconst Component = blockType.edit || blockType.save;\n\n\treturn <Component { ...props } className={ className } />;\n};\n\nexport default withFilters( 'editor.BlockEdit' )( Edit );\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport Edit from './edit';\nimport { BlockEditContextProvider } from './context';\n\nclass BlockEdit extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.setFocusedElement = this.setFocusedElement.bind( this );\n\n\t\tthis.state = {\n\t\t\tfocusedElement: null,\n\t\t\tsetFocusedElement: this.setFocusedElement,\n\t\t};\n\t}\n\n\tsetFocusedElement( focusedElement ) {\n\t\tthis.setState( ( prevState ) => {\n\t\t\tif ( prevState.focusedElement === focusedElement ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn { focusedElement };\n\t\t} );\n\t}\n\n\tstatic getDerivedStateFromProps( props ) {\n\t\tconst { clientId, name, isSelected } = props;\n\n\t\treturn {\n\t\t\tname,\n\t\t\tisSelected,\n\t\t\tclientId,\n\t\t};\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<BlockEditContextProvider value={ this.state }>\n\t\t\t\t<Edit { ...this.props } />\n\t\t\t</BlockEditContextProvider>\n\t\t);\n\t}\n}\n\nexport default BlockEdit;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { ifBlockEditSelected } from '../block-edit/context';\n\nconst { Fill, Slot } = createSlotFill( 'BlockFormatControls' );\n\nconst BlockFormatControls = ifBlockEditSelected( Fill );\n\nBlockFormatControls.Slot = Slot;\n\nexport default BlockFormatControls;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Dashicon, SVG } from '@wordpress/components';\nimport { createElement, Component } from '@wordpress/element';\n\nfunction renderIcon( icon ) {\n\tif ( 'string' === typeof icon ) {\n\t\treturn <Dashicon icon={ icon } size={ 20 } />;\n\t} else if ( 'function' === typeof icon ) {\n\t\tif ( icon.prototype instanceof Component ) {\n\t\t\treturn createElement( icon );\n\t\t}\n\n\t\treturn icon();\n\t} else if ( icon && icon.type === 'svg' ) {\n\t\tconst appliedProps = {\n\t\t\t...icon.props,\n\t\t\twidth: icon.props.width || 24,\n\t\t\theight: icon.props.height || 24,\n\t\t};\n\n\t\treturn <SVG { ...appliedProps } />;\n\t}\n\n\treturn icon || null;\n}\n\nexport default function BlockIcon( { icon, showColors = false, className } ) {\n\tconst renderedIcon = renderIcon( icon && icon.src ? icon.src : icon );\n\tconst style = showColors ? {\n\t\tbackgroundColor: icon && icon.background,\n\t\tcolor: icon && icon.foreground,\n\t} : {};\n\n\tif ( ! renderedIcon ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tstyle={ style }\n\t\t\tclassName={ classnames(\n\t\t\t\t'editor-block-icon',\n\t\t\t\tclassName,\n\t\t\t\t{ 'has-colors': showColors }\n\t\t\t) }\n\t\t>\n\t\t\t{ renderedIcon }\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { getBlockType, getUnregisteredTypeHandlerName } from '@wordpress/blocks';\nimport { PanelBody } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\nimport { Fragment } from '@wordpress/element';\n\n/**\n * Internal Dependencies\n */\nimport SkipToSelectedBlock from '../skip-to-selected-block';\nimport BlockIcon from '../block-icon';\nimport InspectorControls from '../inspector-controls';\nimport InspectorAdvancedControls from '../inspector-advanced-controls';\nimport BlockStyles from '../block-styles';\n\nconst BlockInspector = ( { selectedBlock, blockType, count } ) => {\n\tif ( count > 1 ) {\n\t\treturn <span className=\"editor-block-inspector__multi-blocks\">{ __( 'Coming Soon' ) }</span>;\n\t}\n\n\tconst isSelectedBlockUnregistered =\n\t\t!! selectedBlock && selectedBlock.name === getUnregisteredTypeHandlerName();\n\n\t/*\n\t * If the selected block is of an unregistered type, avoid showing it as an actual selection\n\t * because we want the user to focus on the unregistered block warning, not block settings.\n\t */\n\tif ( ! selectedBlock || isSelectedBlockUnregistered ) {\n\t\treturn <span className=\"editor-block-inspector__no-blocks\">{ __( 'No block selected.' ) }</span>;\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<div className=\"editor-block-inspector__card\">\n\t\t\t\t<BlockIcon icon={ blockType.icon } showColors />\n\t\t\t\t<div className=\"editor-block-inspector__card-content\">\n\t\t\t\t\t<div className=\"editor-block-inspector__card-title\">{ blockType.title }</div>\n\t\t\t\t\t<div className=\"editor-block-inspector__card-description\">{ blockType.description }</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ !! blockType.styles && (\n\t\t\t\t<div>\n\t\t\t\t\t<PanelBody\n\t\t\t\t\t\ttitle={ __( 'Styles' ) }\n\t\t\t\t\t\tinitialOpen={ false }\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockStyles\n\t\t\t\t\t\t\tclientId={ selectedBlock.clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div><InspectorControls.Slot /></div>\n\t\t\t<div>\n\t\t\t\t<InspectorAdvancedControls.Slot>\n\t\t\t\t\t{ ( fills ) => ! isEmpty( fills ) && (\n\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\tclassName=\"editor-block-inspector__advanced\"\n\t\t\t\t\t\t\ttitle={ __( 'Advanced' ) }\n\t\t\t\t\t\t\tinitialOpen={ false }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ fills }\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t) }\n\t\t\t\t</InspectorAdvancedControls.Slot>\n\t\t\t</div>\n\t\t\t<SkipToSelectedBlock key=\"back\" />\n\t\t</Fragment>\n\t);\n};\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst { getSelectedBlock, getSelectedBlockCount } = select( 'core/editor' );\n\t\tconst selectedBlock = getSelectedBlock();\n\t\tconst blockType = selectedBlock && getBlockType( selectedBlock.name );\n\t\treturn {\n\t\t\tselectedBlock,\n\t\t\tblockType,\n\t\t\tcount: getSelectedBlockCount(),\n\t\t};\n\t}\n)( BlockInspector );\n","/**\n * External dependencies\n */\nimport { last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { getDefaultBlockName } from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { Button, Dashicon } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport IgnoreNestedEvents from '../ignore-nested-events';\nimport DefaultBlockAppender from '../default-block-appender';\nimport Inserter from '../inserter';\n\nfunction BlockListAppender( {\n\tblockClientIds,\n\tlayout,\n\tisGroupedByLayout,\n\trootClientId,\n\tcanInsertDefaultBlock,\n\tisLocked,\n} ) {\n\tif ( isLocked ) {\n\t\treturn null;\n\t}\n\n\tconst defaultLayout = isGroupedByLayout ? layout : undefined;\n\n\tif ( canInsertDefaultBlock ) {\n\t\treturn (\n\t\t\t<IgnoreNestedEvents childHandledEvents={ [ 'onFocus', 'onClick', 'onKeyDown' ] }>\n\t\t\t\t<DefaultBlockAppender\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tlastBlockClientId={ last( blockClientIds ) }\n\t\t\t\t\tlayout={ defaultLayout }\n\t\t\t\t/>\n\t\t\t</IgnoreNestedEvents>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"block-list-appender\">\n\t\t\t<Inserter\n\t\t\t\trootClientId={ rootClientId }\n\t\t\t\tlayout={ defaultLayout }\n\t\t\t\trenderToggle={ ( { onToggle, disabled, isOpen } ) => (\n\t\t\t\t\t<Button\n\t\t\t\t\t\taria-label={ __( 'Add block' ) }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tclassName=\"block-list-appender__toggle\"\n\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tdisabled={ disabled }\n\t\t\t\t\t>\n\t\t\t\t\t\t<Dashicon icon=\"insert\" />\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nexport default withSelect( ( select, { rootClientId } ) => {\n\tconst {\n\t\tgetBlockOrder,\n\t\tcanInsertBlockType,\n\t\tgetTemplateLock,\n\t} = select( 'core/editor' );\n\n\treturn {\n\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\tblockClientIds: getBlockOrder( rootClientId ),\n\t\tcanInsertDefaultBlock: canInsertBlockType( getDefaultBlockName(), rootClientId ),\n\t};\n} )( BlockListAppender );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport NavigableToolbar from '../navigable-toolbar';\nimport { BlockToolbar } from '../';\n\nfunction BlockContextualToolbar() {\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tclassName=\"editor-block-contextual-toolbar\"\n\t\t\taria-label={ __( 'Block Toolbar' ) }\n\t\t>\n\t\t\t<BlockToolbar />\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default BlockContextualToolbar;\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\nclass BlockCrashBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\thasError: false,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tthis.props.onError( error );\n\n\t\tthis.setState( {\n\t\t\thasError: true,\n\t\t} );\n\t}\n\n\trender() {\n\t\tif ( this.state.hasError ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default BlockCrashBoundary;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\n\nconst warning = (\n\t<Warning>\n\t\t{ __( 'This block has encountered an error and cannot be previewed.' ) }\n\t</Warning>\n);\n\nexport default () => warning;\n","\n/**\n * External Dependencies\n */\nimport TextareaAutosize from 'react-autosize-textarea';\nimport { isEqual } from 'lodash';\n\n/**\n * WordPress Dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { getBlockAttributes, getBlockContent, getBlockType, isValidBlock, getSaveContent } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nexport class BlockHTML extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onBlur = this.onBlur.bind( this );\n\t\tthis.state = {\n\t\t\thtml: props.block.isValid ? getBlockContent( props.block ) : props.block.originalContent,\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( ! isEqual( this.props.block.attributes, prevProps.block.attributes ) ) {\n\t\t\tthis.setState( {\n\t\t\t\thtml: getBlockContent( this.props.block ),\n\t\t\t} );\n\t\t}\n\t}\n\n\tonBlur() {\n\t\tconst { html } = this.state;\n\t\tconst blockType = getBlockType( this.props.block.name );\n\t\tconst attributes = getBlockAttributes( blockType, html, this.props.block.attributes );\n\n\t\t// If html is empty  we reset the block to the default HTML and mark it as valid to avoid triggering an error\n\t\tconst content = html ? html : getSaveContent( blockType, attributes );\n\t\tconst isValid = html ? isValidBlock( content, blockType, attributes ) : true;\n\n\t\tthis.props.onChange( this.props.clientId, attributes, content, isValid );\n\n\t\t// Ensure the state is updated if we reset so it displays the default content\n\t\tif ( ! html ) {\n\t\t\tthis.setState( { html: content } );\n\t\t}\n\t}\n\n\tonChange( event ) {\n\t\tthis.setState( { html: event.target.value } );\n\t}\n\n\trender() {\n\t\tconst { html } = this.state;\n\t\treturn (\n\t\t\t<TextareaAutosize\n\t\t\t\tclassName=\"editor-block-list__block-html-textarea\"\n\t\t\t\tvalue={ html }\n\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\tonChange={ this.onChange }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, ownProps ) => ( {\n\t\tblock: select( 'core/editor' ).getBlock( ownProps.clientId ),\n\t} ) ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonChange( clientId, attributes, originalContent, isValid ) {\n\t\t\tdispatch( 'core/editor' ).updateBlock( clientId, { attributes, originalContent, isValid } );\n\t\t},\n\t} ) ),\n] )( BlockHTML );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport {\n\tgetBlockType,\n\tcreateBlock,\n\trawHandler,\n} from '@wordpress/blocks';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport Warning from '../warning';\nimport BlockCompare from '../block-compare';\n\nexport class BlockInvalidWarning extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = { compare: false };\n\t\tthis.onCompare = this.onCompare.bind( this );\n\t\tthis.onCompareClose = this.onCompareClose.bind( this );\n\t}\n\n\tonCompare() {\n\t\tthis.setState( { compare: true } );\n\t}\n\n\tonCompareClose() {\n\t\tthis.setState( { compare: false } );\n\t}\n\n\trender() {\n\t\tconst { convertToHTML, convertToBlocks, convertToClassic, block } = this.props;\n\t\tconst hasHTMLBlock = !! getBlockType( 'core/html' );\n\t\tconst { compare } = this.state;\n\t\tconst hiddenActions = [\n\t\t\t{ title: __( 'Convert to Classic Block' ), onClick: convertToClassic },\n\t\t];\n\n\t\tif ( compare ) {\n\t\t\treturn (\n\t\t\t\t<Modal\n\t\t\t\t\ttitle={ __( 'Resolve Block' ) }\n\t\t\t\t\tonRequestClose={ this.onCompareClose }\n\t\t\t\t\tclassName=\"editor-block-compare\"\n\t\t\t\t>\n\t\t\t\t\t<BlockCompare\n\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\tonKeep={ convertToHTML }\n\t\t\t\t\t\tonConvert={ convertToBlocks }\n\t\t\t\t\t\tconvertor={ blockToBlocks }\n\t\t\t\t\t\tconvertButtonText={ __( 'Convert to Blocks' ) }\n\t\t\t\t\t/>\n\t\t\t\t</Modal>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Warning\n\t\t\t\tactions={ [\n\t\t\t\t\t<Button key=\"convert\" onClick={ this.onCompare } isLarge isPrimary={ ! hasHTMLBlock }>\n\t\t\t\t\t\t{ __( 'Resolve' ) }\n\t\t\t\t\t</Button>,\n\t\t\t\t\thasHTMLBlock && (\n\t\t\t\t\t\t<Button key=\"edit\" onClick={ convertToHTML } isLarge isPrimary>\n\t\t\t\t\t\t\t{ __( 'Convert to HTML' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t),\n\t\t\t\t] }\n\t\t\t\tsecondaryActions={ hiddenActions }\n\t\t\t>\n\t\t\t\t{ __( 'This block contains unexpected or invalid content.' ) }\n\t\t\t</Warning>\n\t\t);\n\t}\n}\n\nconst blockToClassic = ( block ) => createBlock( 'core/freeform', {\n\tcontent: block.originalContent,\n} );\nconst blockToHTML = ( block ) => createBlock( 'core/html', {\n\tcontent: block.originalContent,\n} );\nconst blockToBlocks = ( block ) => rawHandler( {\n\tHTML: block.originalContent,\n\tmode: 'BLOCKS',\n} );\n\nexport default withDispatch( ( dispatch, { block } ) => {\n\tconst { replaceBlock } = dispatch( 'core/editor' );\n\n\treturn {\n\t\tconvertToClassic() {\n\t\t\treplaceBlock( block.clientId, blockToClassic( block ) );\n\t\t},\n\t\tconvertToHTML() {\n\t\t\treplaceBlock( block.clientId, blockToHTML( block ) );\n\t\t},\n\t\tconvertToBlocks() {\n\t\t\treplaceBlock( block.clientId, blockToBlocks( block ) );\n\t\t},\n\t};\n} )( BlockInvalidWarning );\n","/**\n * WordPress dependencies\n */\nimport { ifViewportMatches } from '@wordpress/viewport';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\nimport VisualEditorInserter from '../inserter';\n\nfunction BlockMobileToolbar( { clientId } ) {\n\treturn (\n\t\t<div className=\"editor-block-list__block-mobile-toolbar\">\n\t\t\t<VisualEditorInserter />\n\t\t\t<BlockMover clientIds={ [ clientId ] } />\n\t\t</div>\n\t);\n}\n\nexport default ifViewportMatches( '< small' )( BlockMobileToolbar );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { get, reduce, size, castArray, first, last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component, findDOMNode, Fragment } from '@wordpress/element';\nimport {\n\tfocus,\n\tisTextField,\n\tplaceCaretAtHorizontalEdge,\n\tplaceCaretAtVerticalEdge,\n} from '@wordpress/dom';\nimport { BACKSPACE, DELETE, ENTER } from '@wordpress/keycodes';\nimport {\n\tcloneBlock,\n\tgetBlockType,\n\tgetSaveElement,\n\tisReusableBlock,\n\tisUnmodifiedDefaultBlock,\n\tgetUnregisteredTypeHandlerName,\n} from '@wordpress/blocks';\nimport { withFilters } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\nimport BlockMover from '../block-mover';\nimport BlockDropZone from '../block-drop-zone';\nimport BlockInvalidWarning from './block-invalid-warning';\nimport BlockCrashWarning from './block-crash-warning';\nimport BlockCrashBoundary from './block-crash-boundary';\nimport BlockHtml from './block-html';\nimport BlockBreadcrumb from './breadcrumb';\nimport BlockContextualToolbar from './block-contextual-toolbar';\nimport BlockMultiControls from './multi-controls';\nimport BlockMobileToolbar from './block-mobile-toolbar';\nimport BlockInsertionPoint from './insertion-point';\nimport IgnoreNestedEvents from '../ignore-nested-events';\nimport InserterWithShortcuts from '../inserter-with-shortcuts';\nimport Inserter from '../inserter';\nimport withHoverAreas from './with-hover-areas';\nimport { isInsideRootBlock } from '../../utils/dom';\n\nexport class BlockListBlock extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.setBlockListRef = this.setBlockListRef.bind( this );\n\t\tthis.bindBlockNode = this.bindBlockNode.bind( this );\n\t\tthis.setAttributes = this.setAttributes.bind( this );\n\t\tthis.maybeHover = this.maybeHover.bind( this );\n\t\tthis.hideHoverEffects = this.hideHoverEffects.bind( this );\n\t\tthis.mergeBlocks = this.mergeBlocks.bind( this );\n\t\tthis.insertBlocksAfter = this.insertBlocksAfter.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.preventDrag = this.preventDrag.bind( this );\n\t\tthis.onPointerDown = this.onPointerDown.bind( this );\n\t\tthis.deleteOrInsertAfterWrapper = this.deleteOrInsertAfterWrapper.bind( this );\n\t\tthis.onBlockError = this.onBlockError.bind( this );\n\t\tthis.onTouchStart = this.onTouchStart.bind( this );\n\t\tthis.onClick = this.onClick.bind( this );\n\t\tthis.onDragStart = this.onDragStart.bind( this );\n\t\tthis.onDragEnd = this.onDragEnd.bind( this );\n\t\tthis.selectOnOpen = this.selectOnOpen.bind( this );\n\t\tthis.hadTouchStart = false;\n\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t\tdragging: false,\n\t\t\tisHovered: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.props.isSelected ) {\n\t\t\tthis.focusTabbable();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.isTypingWithinBlock || this.props.isSelected ) {\n\t\t\tthis.hideHoverEffects();\n\t\t}\n\n\t\tif ( this.props.isSelected && ! prevProps.isSelected ) {\n\t\t\tthis.focusTabbable( true );\n\t\t}\n\t}\n\n\tsetBlockListRef( node ) {\n\t\t// Disable reason: The root return element uses a component to manage\n\t\t// event nesting, but the parent block list layout needs the raw DOM\n\t\t// node to track multi-selection.\n\t\t//\n\t\t// eslint-disable-next-line react/no-find-dom-node\n\t\tnode = findDOMNode( node );\n\n\t\tthis.wrapperNode = node;\n\n\t\tthis.props.blockRef( node, this.props.clientId );\n\t}\n\n\tbindBlockNode( node ) {\n\t\t// Disable reason: The block element uses a component to manage event\n\t\t// nesting, but we rely on a raw DOM node for focusing.\n\t\t//\n\t\t// eslint-disable-next-line react/no-find-dom-node\n\t\tthis.node = findDOMNode( node );\n\t}\n\n\t/**\n\t * When a block becomes selected, transition focus to an inner tabbable.\n\t *\n\t * @param {boolean} ignoreInnerBlocks Should not focus inner blocks.\n\t */\n\tfocusTabbable( ignoreInnerBlocks ) {\n\t\tconst { initialPosition } = this.props;\n\n\t\t// Focus is captured by the wrapper node, so while focus transition\n\t\t// should only consider tabbables within editable display, since it\n\t\t// may be the wrapper itself or a side control which triggered the\n\t\t// focus event, don't unnecessary transition to an inner tabbable.\n\t\tif ( this.wrapperNode.contains( document.activeElement ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable\n\t\t\t.find( this.node )\n\t\t\t.filter( isTextField )\n\t\t\t// Exclude inner blocks\n\t\t\t.filter( ( node ) => ! ignoreInnerBlocks || isInsideRootBlock( this.node, node ) );\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target = ( isReverse ? last : first )( textInputs );\n\n\t\tif ( ! target ) {\n\t\t\tthis.wrapperNode.focus();\n\t\t\treturn;\n\t\t}\n\n\t\ttarget.focus();\n\n\t\t// In reverse case, need to explicitly place caret position.\n\t\tif ( isReverse ) {\n\t\t\tplaceCaretAtHorizontalEdge( target, true );\n\t\t\tplaceCaretAtVerticalEdge( target, true );\n\t\t}\n\t}\n\n\tsetAttributes( attributes ) {\n\t\tconst { block, onChange } = this.props;\n\t\tconst type = getBlockType( block.name );\n\t\tonChange( block.clientId, attributes );\n\n\t\tconst metaAttributes = reduce( attributes, ( result, value, key ) => {\n\t\t\tif ( get( type, [ 'attributes', key, 'source' ] ) === 'meta' ) {\n\t\t\t\tresult[ type.attributes[ key ].meta ] = value;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {} );\n\n\t\tif ( size( metaAttributes ) ) {\n\t\t\tthis.props.onMetaChange( {\n\t\t\t\t...this.props.meta,\n\t\t\t\t...metaAttributes,\n\t\t\t} );\n\t\t}\n\t}\n\n\tonTouchStart() {\n\t\t// Detect touchstart to disable hover on iOS\n\t\tthis.hadTouchStart = true;\n\t}\n\n\tonClick() {\n\t\t// Clear touchstart detection\n\t\t// Browser will try to emulate mouse events also see https://www.html5rocks.com/en/mobile/touchandmouse/\n\t\tthis.hadTouchStart = false;\n\t}\n\n\t/**\n\t * A mouseover event handler to apply hover effect when a pointer device is\n\t * placed within the bounds of the block. The mouseover event is preferred\n\t * over mouseenter because it may be the case that a previous mouseenter\n\t * event was blocked from being handled by a IgnoreNestedEvents component,\n\t * therefore transitioning out of a nested block to the bounds of the block\n\t * would otherwise not trigger a hover effect.\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/Events/mouseenter\n\t */\n\tmaybeHover() {\n\t\tconst { isPartOfMultiSelection, isSelected } = this.props;\n\t\tconst { isHovered } = this.state;\n\n\t\tif ( isHovered || isPartOfMultiSelection || isSelected ||\n\t\t\t\tthis.props.isMultiSelecting || this.hadTouchStart ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( { isHovered: true } );\n\t}\n\n\t/**\n\t * Sets the block state as unhovered if currently hovering. There are cases\n\t * where mouseleave may occur but the block is not hovered (multi-select),\n\t * so to avoid unnecesary renders, the state is only set if hovered.\n\t */\n\thideHoverEffects() {\n\t\tif ( this.state.isHovered ) {\n\t\t\tthis.setState( { isHovered: false } );\n\t\t}\n\t}\n\n\tmergeBlocks( forward = false ) {\n\t\tconst { block, previousBlockClientId, nextBlockClientId, onMerge } = this.props;\n\n\t\t// Do nothing when it's the first block.\n\t\tif (\n\t\t\t( ! forward && ! previousBlockClientId ) ||\n\t\t\t( forward && ! nextBlockClientId )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( forward ) {\n\t\t\tonMerge( block.clientId, nextBlockClientId );\n\t\t} else {\n\t\t\tonMerge( previousBlockClientId, block.clientId );\n\t\t}\n\t}\n\n\tinsertBlocksAfter( blocks ) {\n\t\tthis.props.onInsertBlocks( blocks, this.props.order + 1 );\n\t}\n\n\t/**\n\t * Marks the block as selected when focused and not already selected. This\n\t * specifically handles the case where block does not set focus on its own\n\t * (via `setFocus`), typically if there is no focusable input in the block.\n\t *\n\t * @return {void}\n\t */\n\tonFocus() {\n\t\tif ( ! this.props.isSelected && ! this.props.isPartOfMultiSelection ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\t}\n\n\t/**\n\t * Prevents default dragging behavior within a block to allow for multi-\n\t * selection to take effect unhampered.\n\t *\n\t * @param {DragEvent} event Drag event.\n\t *\n\t * @return {void}\n\t */\n\tpreventDrag( event ) {\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Begins tracking cursor multi-selection when clicking down within block.\n\t *\n\t * @param {MouseEvent} event A mousedown event.\n\t *\n\t * @return {void}\n\t */\n\tonPointerDown( event ) {\n\t\t// Not the main button.\n\t\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button\n\t\tif ( event.button !== 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( event.shiftKey ) {\n\t\t\tif ( ! this.props.isSelected ) {\n\t\t\t\tthis.props.onShiftSelection( this.props.clientId );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.props.onSelectionStart( this.props.clientId );\n\n\t\t\t// Allow user to escape out of a multi-selection to a singular\n\t\t\t// selection of a block via click. This is handled here since\n\t\t\t// onFocus excludes blocks involved in a multiselection, as\n\t\t\t// focus can be incurred by starting a multiselection (focus\n\t\t\t// moved to first block's multi-controls).\n\t\t\tif ( this.props.isPartOfMultiSelection ) {\n\t\t\t\tthis.props.onSelect();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Interprets keydown event intent to remove or insert after block if key\n\t * event occurs on wrapper node. This can occur when the block has no text\n\t * fields of its own, particularly after initial insertion, to allow for\n\t * easy deletion and continuous writing flow to add additional content.\n\t *\n\t * @param {KeyboardEvent} event Keydown event.\n\t */\n\tdeleteOrInsertAfterWrapper( event ) {\n\t\tconst { keyCode, target } = event;\n\n\t\tif ( target !== this.wrapperNode || this.props.isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( keyCode ) {\n\t\t\tcase ENTER:\n\t\t\t\t// Insert default block after current block if enter and event\n\t\t\t\t// not already handled by descendant.\n\t\t\t\tthis.props.onInsertDefaultBlockAfter();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\n\t\t\tcase BACKSPACE:\n\t\t\tcase DELETE:\n\t\t\t\t// Remove block on backspace.\n\t\t\t\tconst { clientId, onRemove } = this.props;\n\t\t\t\tonRemove( clientId );\n\t\t\t\tevent.preventDefault();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tonBlockError( error ) {\n\t\tthis.setState( { error } );\n\t}\n\n\tonDragStart() {\n\t\tthis.setState( { dragging: true } );\n\t}\n\n\tonDragEnd() {\n\t\tthis.setState( { dragging: false } );\n\t}\n\n\tselectOnOpen( open ) {\n\t\tif ( open && ! this.props.isSelected ) {\n\t\t\tthis.props.onSelect();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tblock,\n\t\t\torder,\n\t\t\tmode,\n\t\t\tisFocusMode,\n\t\t\thasFixedToolbar,\n\t\t\tisLocked,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tclientId,\n\t\t\trootClientId,\n\t\t\tlayout,\n\t\t\tisSelected,\n\t\t\tisPartOfMultiSelection,\n\t\t\tisFirstMultiSelected,\n\t\t\tisTypingWithinBlock,\n\t\t\tisMultiSelecting,\n\t\t\thoverArea,\n\t\t\tisEmptyDefaultBlock,\n\t\t\tisMovable,\n\t\t\tisPreviousBlockADefaultEmptyBlock,\n\t\t\tisParentOfSelectedBlock,\n\t\t\tisDraggable,\n\t\t} = this.props;\n\t\tconst isHovered = this.state.isHovered && ! isMultiSelecting;\n\t\tconst { name: blockName, isValid } = block;\n\t\tconst blockType = getBlockType( blockName );\n\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\tconst blockLabel = sprintf( __( 'Block: %s' ), blockType.title );\n\t\t// The block as rendered in the editor is composed of general block UI\n\t\t// (mover, toolbar, wrapper) and the display of the block content.\n\n\t\tconst isUnregisteredBlock = block.name === getUnregisteredTypeHandlerName();\n\n\t\t// If the block is selected and we're typing the block should not appear.\n\t\t// Empty paragraph blocks should always show up as unselected.\n\t\tconst showEmptyBlockSideInserter = ( isSelected || isHovered ) && isEmptyDefaultBlock && isValid;\n\t\tconst showSideInserter = ( isSelected || isHovered ) && isEmptyDefaultBlock;\n\t\tconst shouldAppearSelected = ! isFocusMode && ! hasFixedToolbar && ! showSideInserter && isSelected && ! isTypingWithinBlock;\n\t\tconst shouldAppearHovered = ! isFocusMode && ! hasFixedToolbar && isHovered && ! isEmptyDefaultBlock;\n\t\t// We render block movers and block settings to keep them tabbale even if hidden\n\t\tconst shouldRenderMovers = ! isFocusMode && ( isSelected || hoverArea === 'left' ) && ! showEmptyBlockSideInserter && ! isMultiSelecting && ! isPartOfMultiSelection && ! isTypingWithinBlock;\n\t\tconst shouldShowBreadcrumb = ! isFocusMode && isHovered && ! isEmptyDefaultBlock;\n\t\tconst shouldShowContextualToolbar = ! hasFixedToolbar && ! showSideInserter && ( ( isSelected && ! isTypingWithinBlock ) || isFirstMultiSelected );\n\t\tconst shouldShowMobileToolbar = shouldAppearSelected;\n\t\tconst { error, dragging } = this.state;\n\n\t\t// Insertion point can only be made visible when the side inserter is\n\t\t// not present, and either the block is at the extent of a selection or\n\t\t// is the first block in the top-level list rendering.\n\t\tconst shouldShowInsertionPoint = ( isPartOfMultiSelection && isFirst ) || ! isPartOfMultiSelection;\n\t\tconst canShowInBetweenInserter = ! isEmptyDefaultBlock && ! isPreviousBlockADefaultEmptyBlock;\n\n\t\t// Generate the wrapper class names handling the different states of the block.\n\t\tconst wrapperClassName = classnames( 'editor-block-list__block', {\n\t\t\t'has-warning': ! isValid || !! error || isUnregisteredBlock,\n\t\t\t'is-selected': shouldAppearSelected,\n\t\t\t'is-multi-selected': isPartOfMultiSelection,\n\t\t\t'is-hovered': shouldAppearHovered,\n\t\t\t'is-reusable': isReusableBlock( blockType ),\n\t\t\t'is-dragging': dragging,\n\t\t\t'is-typing': isTypingWithinBlock,\n\t\t\t'is-focused': isFocusMode && ( isSelected || isParentOfSelectedBlock ),\n\t\t\t'is-focus-mode': isFocusMode,\n\t\t} );\n\n\t\tconst { onReplace } = this.props;\n\n\t\t// Determine whether the block has props to apply to the wrapper.\n\t\tlet wrapperProps = this.props.wrapperProps;\n\t\tif ( blockType.getEditWrapperProps ) {\n\t\t\twrapperProps = {\n\t\t\t\t...wrapperProps,\n\t\t\t\t...blockType.getEditWrapperProps( block.attributes ),\n\t\t\t};\n\t\t}\n\t\tconst blockElementId = `block-${ clientId }`;\n\n\t\t// We wrap the BlockEdit component in a div that hides it when editing in\n\t\t// HTML mode. This allows us to render all of the ancillary pieces\n\t\t// (InspectorControls, etc.) which are inside `BlockEdit` but not\n\t\t// `BlockHTML`, even in HTML mode.\n\t\tlet blockEdit = (\n\t\t\t<BlockEdit\n\t\t\t\tname={ blockName }\n\t\t\t\tisSelected={ isSelected }\n\t\t\t\tattributes={ block.attributes }\n\t\t\t\tsetAttributes={ this.setAttributes }\n\t\t\t\tinsertBlocksAfter={ isLocked ? undefined : this.insertBlocksAfter }\n\t\t\t\tonReplace={ isLocked ? undefined : onReplace }\n\t\t\t\tmergeBlocks={ isLocked ? undefined : this.mergeBlocks }\n\t\t\t\tclientId={ clientId }\n\t\t\t\tisSelectionEnabled={ this.props.isSelectionEnabled }\n\t\t\t\ttoggleSelection={ this.props.toggleSelection }\n\t\t\t/>\n\t\t);\n\t\tif ( mode !== 'visual' ) {\n\t\t\tblockEdit = <div style={ { display: 'none' } }>{ blockEdit }</div>;\n\t\t}\n\n\t\t// Disable reasons:\n\t\t//\n\t\t//  jsx-a11y/mouse-events-have-key-events:\n\t\t//   - onMouseOver is explicitly handling hover effects\n\t\t//\n\t\t//  jsx-a11y/no-static-element-interactions:\n\t\t//   - Each block can be selected by clicking on it\n\n\t\t/* eslint-disable jsx-a11y/mouse-events-have-key-events, jsx-a11y/no-static-element-interactions, jsx-a11y/onclick-has-role, jsx-a11y/click-events-have-key-events */\n\t\treturn (\n\t\t\t<IgnoreNestedEvents\n\t\t\t\tid={ blockElementId }\n\t\t\t\tref={ this.setBlockListRef }\n\t\t\t\tonMouseOver={ this.maybeHover }\n\t\t\t\tonMouseOverHandled={ this.hideHoverEffects }\n\t\t\t\tonMouseLeave={ this.hideHoverEffects }\n\t\t\t\tclassName={ wrapperClassName }\n\t\t\t\tdata-type={ block.name }\n\t\t\t\tonTouchStart={ this.onTouchStart }\n\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\tonClick={ this.onClick }\n\t\t\t\tonKeyDown={ this.deleteOrInsertAfterWrapper }\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\taria-label={ blockLabel }\n\t\t\t\tchildHandledEvents={ [\n\t\t\t\t\t'onDragStart',\n\t\t\t\t\t'onMouseDown',\n\t\t\t\t] }\n\t\t\t\t{ ...wrapperProps }\n\t\t\t>\n\t\t\t\t{ shouldShowInsertionPoint && (\n\t\t\t\t\t<BlockInsertionPoint\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\tcanShowInserter={ canShowInBetweenInserter }\n\t\t\t\t\t\tonInsert={ this.hideHoverEffects }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t<BlockDropZone\n\t\t\t\t\tindex={ order }\n\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tlayout={ layout }\n\t\t\t\t/>\n\t\t\t\t{ shouldRenderMovers && (\n\t\t\t\t\t<BlockMover\n\t\t\t\t\t\tclientIds={ clientId }\n\t\t\t\t\t\tblockElementId={ blockElementId }\n\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\tisLast={ isLast }\n\t\t\t\t\t\tisHidden={ ! ( isHovered || isSelected ) || hoverArea !== 'left' }\n\t\t\t\t\t\tisDraggable={ ( isDraggable !== false ) && ( ! isPartOfMultiSelection && isMovable ) }\n\t\t\t\t\t\tonDragStart={ this.onDragStart }\n\t\t\t\t\t\tonDragEnd={ this.onDragEnd }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ shouldShowBreadcrumb && (\n\t\t\t\t\t<BlockBreadcrumb\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tisHidden={ ! ( isHovered || isSelected ) || hoverArea !== 'left' }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ shouldShowContextualToolbar && <BlockContextualToolbar /> }\n\t\t\t\t{ isFirstMultiSelected && (\n\t\t\t\t\t<BlockMultiControls rootClientId={ rootClientId } />\n\t\t\t\t) }\n\t\t\t\t<IgnoreNestedEvents\n\t\t\t\t\tref={ this.bindBlockNode }\n\t\t\t\t\tonDragStart={ this.preventDrag }\n\t\t\t\t\tonMouseDown={ this.onPointerDown }\n\t\t\t\t\tclassName=\"editor-block-list__block-edit\"\n\t\t\t\t\tdata-block={ clientId }\n\t\t\t\t>\n\t\t\t\t\t<BlockCrashBoundary onError={ this.onBlockError }>\n\t\t\t\t\t\t{ isValid && blockEdit }\n\t\t\t\t\t\t{ isValid && mode === 'html' && (\n\t\t\t\t\t\t\t<BlockHtml clientId={ clientId } />\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t{ ! isValid && [\n\t\t\t\t\t\t\t<BlockInvalidWarning\n\t\t\t\t\t\t\t\tkey=\"invalid-warning\"\n\t\t\t\t\t\t\t\tblock={ block }\n\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t<div key=\"invalid-preview\">\n\t\t\t\t\t\t\t\t{ getSaveElement( blockType, block.attributes ) }\n\t\t\t\t\t\t\t</div>,\n\t\t\t\t\t\t] }\n\t\t\t\t\t</BlockCrashBoundary>\n\t\t\t\t\t{ shouldShowMobileToolbar && (\n\t\t\t\t\t\t<BlockMobileToolbar\n\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ !! error && <BlockCrashWarning /> }\n\t\t\t\t</IgnoreNestedEvents>\n\t\t\t\t{ showEmptyBlockSideInserter && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<div className=\"editor-block-list__side-inserter\">\n\t\t\t\t\t\t\t<InserterWithShortcuts\n\t\t\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t\t\tlayout={ layout }\n\t\t\t\t\t\t\t\tonToggle={ this.selectOnOpen }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"editor-block-list__empty-block-inserter\">\n\t\t\t\t\t\t\t<Inserter\n\t\t\t\t\t\t\t\tposition=\"top right\"\n\t\t\t\t\t\t\t\tonToggle={ this.selectOnOpen }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t</IgnoreNestedEvents>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-static-element-interactions, jsx-a11y/onclick-has-role, jsx-a11y/click-events-have-key-events */\n\t}\n}\n\nconst applyWithSelect = withSelect( ( select, { clientId, rootClientId, isLargeViewport } ) => {\n\tconst {\n\t\tisBlockSelected,\n\t\tgetPreviousBlockClientId,\n\t\tgetNextBlockClientId,\n\t\tgetBlock,\n\t\tisAncestorMultiSelected,\n\t\tisBlockMultiSelected,\n\t\tisFirstMultiSelectedBlock,\n\t\tisMultiSelecting,\n\t\tisTyping,\n\t\tgetBlockIndex,\n\t\tgetEditedPostAttribute,\n\t\tgetBlockMode,\n\t\tisSelectionEnabled,\n\t\tgetSelectedBlocksInitialCaretPosition,\n\t\tgetEditorSettings,\n\t\thasSelectedInnerBlock,\n\t\tgetTemplateLock,\n\t} = select( 'core/editor' );\n\tconst isSelected = isBlockSelected( clientId );\n\tconst { hasFixedToolbar, focusMode } = getEditorSettings();\n\tconst block = getBlock( clientId );\n\tconst previousBlockClientId = getPreviousBlockClientId( clientId );\n\tconst previousBlock = getBlock( previousBlockClientId );\n\tconst templateLock = getTemplateLock( rootClientId );\n\tconst isParentOfSelectedBlock = hasSelectedInnerBlock( clientId, true );\n\n\treturn {\n\t\tnextBlockClientId: getNextBlockClientId( clientId ),\n\t\tisPartOfMultiSelection: isBlockMultiSelected( clientId ) || isAncestorMultiSelected( clientId ),\n\t\tisFirstMultiSelected: isFirstMultiSelectedBlock( clientId ),\n\t\tisMultiSelecting: isMultiSelecting(),\n\t\t// We only care about this prop when the block is selected\n\t\t// Thus to avoid unnecessary rerenders we avoid updating the prop if the block is not selected.\n\t\tisTypingWithinBlock: ( isSelected || isParentOfSelectedBlock ) && isTyping(),\n\t\torder: getBlockIndex( clientId, rootClientId ),\n\t\tmeta: getEditedPostAttribute( 'meta' ),\n\t\tmode: getBlockMode( clientId ),\n\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\tinitialPosition: getSelectedBlocksInitialCaretPosition(),\n\t\tisEmptyDefaultBlock: block && isUnmodifiedDefaultBlock( block ),\n\t\tisPreviousBlockADefaultEmptyBlock: previousBlock && isUnmodifiedDefaultBlock( previousBlock ),\n\t\tisMovable: 'all' !== templateLock,\n\t\tisLocked: !! templateLock,\n\t\tisFocusMode: focusMode && isLargeViewport,\n\t\thasFixedToolbar: hasFixedToolbar && isLargeViewport,\n\t\tpreviousBlockClientId,\n\t\tblock,\n\t\tisSelected,\n\t\tisParentOfSelectedBlock,\n\t};\n} );\n\nconst applyWithDispatch = withDispatch( ( dispatch, ownProps ) => {\n\tconst {\n\t\tupdateBlockAttributes,\n\t\tselectBlock,\n\t\tinsertBlocks,\n\t\tinsertDefaultBlock,\n\t\tremoveBlock,\n\t\tmergeBlocks,\n\t\treplaceBlocks,\n\t\teditPost,\n\t\ttoggleSelection,\n\t} = dispatch( 'core/editor' );\n\n\treturn {\n\t\tonChange( clientId, attributes ) {\n\t\t\tupdateBlockAttributes( clientId, attributes );\n\t\t},\n\t\tonSelect( clientId = ownProps.clientId, initialPosition ) {\n\t\t\tselectBlock( clientId, initialPosition );\n\t\t},\n\t\tonInsertBlocks( blocks, index ) {\n\t\t\tconst { rootClientId, layout } = ownProps;\n\t\t\tblocks = blocks.map( ( block ) => cloneBlock( block, { layout } ) );\n\t\t\tinsertBlocks( blocks, index, rootClientId );\n\t\t},\n\t\tonInsertDefaultBlockAfter() {\n\t\t\tconst { order, rootClientId } = ownProps;\n\t\t\tinsertDefaultBlock( {}, rootClientId, order + 1 );\n\t\t},\n\t\tonRemove( clientId ) {\n\t\t\tremoveBlock( clientId );\n\t\t},\n\t\tonMerge( ...args ) {\n\t\t\tmergeBlocks( ...args );\n\t\t},\n\t\tonReplace( blocks ) {\n\t\t\tconst { layout } = ownProps;\n\t\t\tblocks = castArray( blocks ).map( ( block ) => (\n\t\t\t\tcloneBlock( block, { layout } )\n\t\t\t) );\n\t\t\treplaceBlocks( [ ownProps.clientId ], blocks );\n\t\t},\n\t\tonMetaChange( meta ) {\n\t\t\teditPost( { meta } );\n\t\t},\n\t\ttoggleSelection( selectionEnabled ) {\n\t\t\ttoggleSelection( selectionEnabled );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\twithFilters( 'editor.BlockListBlock' ),\n\twithHoverAreas,\n)( BlockListBlock );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, Fragment } from '@wordpress/element';\nimport { Toolbar } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\n\n/**\n * Block breadcrumb component, displaying the label of the block. If the block\n * descends from a root block, a button is displayed enabling the user to select\n * the root block.\n *\n * @param {string}   props.clientId        Client ID of block.\n * @param {string}   props.rootClientId    Client ID of block's root.\n * @param {Function} props.selectRootBlock Callback to select root block.\n */\nexport class BlockBreadcrumb extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tisFocused: false,\n\t\t};\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onBlur = this.onBlur.bind( this );\n\t}\n\n\tonFocus( event ) {\n\t\tthis.setState( {\n\t\t\tisFocused: true,\n\t\t} );\n\n\t\t// This is used for improved interoperability\n\t\t// with the block's `onFocus` handler which selects the block, thus conflicting\n\t\t// with the intention to select the root block.\n\t\tevent.stopPropagation();\n\t}\n\n\tonBlur() {\n\t\tthis.setState( {\n\t\t\tisFocused: false,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { clientId, rootClientId, isLight } = this.props;\n\n\t\treturn (\n\t\t\t<div className={ classnames( 'editor-block-list__breadcrumb', {\n\t\t\t\t'is-light': isLight,\n\t\t\t} ) }>\n\t\t\t\t<Toolbar>\n\t\t\t\t\t{ rootClientId && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<BlockTitle clientId={ rootClientId } />\n\t\t\t\t\t\t\t<span className=\"editor-block-list__descendant-arrow\" />\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) }\n\t\t\t\t\t<BlockTitle clientId={ clientId } />\n\t\t\t\t</Toolbar>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, ownProps ) => {\n\t\tconst { getBlockRootClientId, getEditorSettings } = select( 'core/editor' );\n\t\tconst { clientId } = ownProps;\n\n\t\treturn {\n\t\t\trootClientId: getBlockRootClientId( clientId ),\n\t\t\tisLight: getEditorSettings().hasFixedToolbar,\n\t\t};\n\t} ),\n] )( BlockBreadcrumb );\n","/**\n * External dependencies\n */\nimport {\n\tfindLast,\n\tmap,\n\tinvert,\n\tmapValues,\n\tsortBy,\n\tthrottle,\n} from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockListBlock from './block';\nimport BlockListAppender from '../block-list-appender';\n\nclass BlockList extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.onSelectionStart = this.onSelectionStart.bind( this );\n\t\tthis.onSelectionEnd = this.onSelectionEnd.bind( this );\n\t\tthis.onShiftSelection = this.onShiftSelection.bind( this );\n\t\tthis.setBlockRef = this.setBlockRef.bind( this );\n\t\tthis.setLastClientY = this.setLastClientY.bind( this );\n\t\tthis.onPointerMove = throttle( this.onPointerMove.bind( this ), 100 );\n\t\t// Browser does not fire `*move` event when the pointer position changes\n\t\t// relative to the document, so fire it with the last known position.\n\t\tthis.onScroll = () => this.onPointerMove( { clientY: this.lastClientY } );\n\n\t\tthis.lastClientY = 0;\n\t\tthis.nodes = {};\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener( 'mousemove', this.setLastClientY );\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener( 'mousemove', this.setLastClientY );\n\t}\n\n\tsetLastClientY( { clientY } ) {\n\t\tthis.lastClientY = clientY;\n\t}\n\n\tsetBlockRef( node, clientId ) {\n\t\tif ( node === null ) {\n\t\t\tdelete this.nodes[ clientId ];\n\t\t} else {\n\t\t\tthis.nodes = {\n\t\t\t\t...this.nodes,\n\t\t\t\t[ clientId ]: node,\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Handles a pointer move event to update the extent of the current cursor\n\t * multi-selection.\n\t *\n\t * @param {MouseEvent} event A mousemove event object.\n\t *\n\t * @return {void}\n\t */\n\tonPointerMove( { clientY } ) {\n\t\t// We don't start multi-selection until the mouse starts moving, so as\n\t\t// to avoid dispatching multi-selection actions on an in-place click.\n\t\tif ( ! this.props.isMultiSelecting ) {\n\t\t\tthis.props.onStartMultiSelect();\n\t\t}\n\n\t\tconst boundaries = this.nodes[ this.selectionAtStart ].getBoundingClientRect();\n\t\tconst y = clientY - boundaries.top;\n\t\tconst key = findLast( this.coordMapKeys, ( coordY ) => coordY < y );\n\n\t\tthis.onSelectionChange( this.coordMap[ key ] );\n\t}\n\n\t/**\n\t * Binds event handlers to the document for tracking a pending multi-select\n\t * in response to a mousedown event occurring in a rendered block.\n\t *\n\t * @param {string} clientId Client ID of block where mousedown occurred.\n\t *\n\t * @return {void}\n\t */\n\tonSelectionStart( clientId ) {\n\t\tif ( ! this.props.isSelectionEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst boundaries = this.nodes[ clientId ].getBoundingClientRect();\n\n\t\t// Create a clientId to Y cordinate map.\n\t\tconst clientIdToCoordMap = mapValues( this.nodes, ( node ) =>\n\t\t\tnode.getBoundingClientRect().top - boundaries.top );\n\n\t\t// Cache a Y cordinate to clientId map for use in `onPointerMove`.\n\t\tthis.coordMap = invert( clientIdToCoordMap );\n\t\t// Cache an array of the Y cordinates for use in `onPointerMove`.\n\t\t// Sort the cordinates, as `this.nodes` will not necessarily reflect\n\t\t// the current block sequence.\n\t\tthis.coordMapKeys = sortBy( Object.values( clientIdToCoordMap ) );\n\t\tthis.selectionAtStart = clientId;\n\n\t\twindow.addEventListener( 'mousemove', this.onPointerMove );\n\t\t// Capture scroll on all elements.\n\t\twindow.addEventListener( 'scroll', this.onScroll, true );\n\t\twindow.addEventListener( 'mouseup', this.onSelectionEnd );\n\t}\n\n\t/**\n\t * Handles multi-selection changes in response to pointer move.\n\t *\n\t * @param {string} clientId Client ID of block under cursor in multi-select\n\t *                          drag.\n\t */\n\tonSelectionChange( clientId ) {\n\t\tconst { onMultiSelect, selectionStart, selectionEnd } = this.props;\n\t\tconst { selectionAtStart } = this;\n\t\tconst isAtStart = selectionAtStart === clientId;\n\n\t\tif ( ! selectionAtStart || ! this.props.isSelectionEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If multi-selecting and cursor extent returns to the start of\n\t\t// selection, cancel multi-select.\n\t\tif ( isAtStart && selectionStart ) {\n\t\t\tonMultiSelect( null, null );\n\t\t}\n\n\t\t// Expand multi-selection to block under cursor.\n\t\tif ( ! isAtStart && selectionEnd !== clientId ) {\n\t\t\tonMultiSelect( selectionAtStart, clientId );\n\t\t}\n\t}\n\n\t/**\n\t * Handles a mouseup event to end the current cursor multi-selection.\n\t *\n\t * @return {void}\n\t */\n\tonSelectionEnd() {\n\t\t// Cancel throttled calls.\n\t\tthis.onPointerMove.cancel();\n\n\t\tdelete this.coordMap;\n\t\tdelete this.coordMapKeys;\n\t\tdelete this.selectionAtStart;\n\n\t\twindow.removeEventListener( 'mousemove', this.onPointerMove );\n\t\twindow.removeEventListener( 'scroll', this.onScroll, true );\n\t\twindow.removeEventListener( 'mouseup', this.onSelectionEnd );\n\n\t\t// We may or may not be in a multi-selection when mouseup occurs (e.g.\n\t\t// an in-place mouse click), so only trigger stop if multi-selecting.\n\t\tif ( this.props.isMultiSelecting ) {\n\t\t\tthis.props.onStopMultiSelect();\n\t\t}\n\t}\n\n\tonShiftSelection( clientId ) {\n\t\tif ( ! this.props.isSelectionEnabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { selectionStartClientId, onMultiSelect, onSelect } = this.props;\n\n\t\tif ( selectionStartClientId ) {\n\t\t\tonMultiSelect( selectionStartClientId, clientId );\n\t\t} else {\n\t\t\tonSelect( clientId );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tblockClientIds,\n\t\t\tlayout,\n\t\t\tisGroupedByLayout,\n\t\t\trootClientId,\n\t\t\tisDraggable,\n\t\t} = this.props;\n\n\t\tlet defaultLayout;\n\t\tif ( isGroupedByLayout ) {\n\t\t\tdefaultLayout = layout;\n\t\t}\n\n\t\tconst classes = classnames( 'editor-block-list__layout', {\n\t\t\t[ `layout-${ layout }` ]: layout,\n\t\t} );\n\n\t\treturn (\n\t\t\t<div className={ classes }>\n\t\t\t\t{ map( blockClientIds, ( clientId, blockIndex ) => (\n\t\t\t\t\t<BlockListBlock\n\t\t\t\t\t\tkey={ 'block-' + clientId }\n\t\t\t\t\t\tindex={ blockIndex }\n\t\t\t\t\t\tclientId={ clientId }\n\t\t\t\t\t\tblockRef={ this.setBlockRef }\n\t\t\t\t\t\tonSelectionStart={ this.onSelectionStart }\n\t\t\t\t\t\tonShiftSelection={ this.onShiftSelection }\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\tlayout={ defaultLayout }\n\t\t\t\t\t\tisFirst={ blockIndex === 0 }\n\t\t\t\t\t\tisLast={ blockIndex === blockClientIds.length - 1 }\n\t\t\t\t\t\tisDraggable={ isDraggable }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\n\t\t\t\t<BlockListAppender\n\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\tlayout={ layout }\n\t\t\t\t\tisGroupedByLayout={ isGroupedByLayout }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, ownProps ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tisSelectionEnabled,\n\t\t\tisMultiSelecting,\n\t\t\tgetMultiSelectedBlocksStartClientId,\n\t\t\tgetMultiSelectedBlocksEndClientId,\n\t\t\tgetBlockSelectionStart,\n\t\t} = select( 'core/editor' );\n\t\tconst { rootClientId } = ownProps;\n\n\t\treturn {\n\t\t\tblockClientIds: getBlockOrder( rootClientId ),\n\t\t\tselectionStart: getMultiSelectedBlocksStartClientId(),\n\t\t\tselectionEnd: getMultiSelectedBlocksEndClientId(),\n\t\t\tselectionStartClientId: getBlockSelectionStart(),\n\t\t\tisSelectionEnabled: isSelectionEnabled(),\n\t\t\tisMultiSelecting: isMultiSelecting(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst {\n\t\t\tstartMultiSelect,\n\t\t\tstopMultiSelect,\n\t\t\tmultiSelect,\n\t\t\tselectBlock,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonStartMultiSelect: startMultiSelect,\n\t\t\tonStopMultiSelect: stopMultiSelect,\n\t\t\tonMultiSelect: multiSelect,\n\t\t\tonSelect: selectBlock,\n\t\t};\n\t} ),\n] )( BlockList );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { IconButton } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { ifCondition, compose } from '@wordpress/compose';\n\nclass BlockInsertionPoint extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tisInserterFocused: false,\n\t\t};\n\n\t\tthis.onBlurInserter = this.onBlurInserter.bind( this );\n\t\tthis.onFocusInserter = this.onFocusInserter.bind( this );\n\t\tthis.onClick = this.onClick.bind( this );\n\t}\n\n\tonFocusInserter( event ) {\n\t\t// We stop propagation of the focus event to avoid selecting the current block\n\t\t// While we're trying to insert a new block\n\t\tevent.stopPropagation();\n\n\t\tthis.setState( {\n\t\t\tisInserterFocused: true,\n\t\t} );\n\t}\n\n\tonBlurInserter() {\n\t\tthis.setState( {\n\t\t\tisInserterFocused: false,\n\t\t} );\n\t}\n\n\tonClick() {\n\t\tconst { layout, rootClientId, index, ...props } = this.props;\n\t\tprops.insertDefaultBlock( { layout }, rootClientId, index );\n\t\tprops.startTyping();\n\t\tthis.onBlurInserter();\n\t\tif ( props.onInsert ) {\n\t\t\tthis.props.onInsert();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { isInserterFocused } = this.state;\n\t\tconst { showInsertionPoint, showInserter } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"editor-block-list__insertion-point\">\n\t\t\t\t{ showInsertionPoint && <div className=\"editor-block-list__insertion-point-indicator\" /> }\n\t\t\t\t{ showInserter && (\n\t\t\t\t\t<div className={ classnames( 'editor-block-list__insertion-point-inserter', { 'is-visible': isInserterFocused } ) }>\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticon=\"insert\"\n\t\t\t\t\t\t\tclassName=\"editor-block-list__insertion-point-button\"\n\t\t\t\t\t\t\tonClick={ this.onClick }\n\t\t\t\t\t\t\tlabel={ __( 'Insert block' ) }\n\t\t\t\t\t\t\tonFocus={ this.onFocusInserter }\n\t\t\t\t\t\t\tonBlur={ this.onBlurInserter }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default compose(\n\twithSelect( ( select, { clientId, rootClientId, canShowInserter } ) => {\n\t\tconst {\n\t\t\tcanInsertBlockType,\n\t\t\tgetBlockIndex,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tgetBlock,\n\t\t\tisBlockInsertionPointVisible,\n\t\t\tisTyping,\n\t\t} = select( 'core/editor' );\n\t\tconst {\n\t\t\tgetDefaultBlockName,\n\t\t} = select( 'core/blocks' );\n\t\tconst blockIndex = clientId ? getBlockIndex( clientId, rootClientId ) : -1;\n\t\tconst insertIndex = blockIndex;\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst block = clientId ? getBlock( clientId ) : null;\n\t\tconst showInsertionPoint = (\n\t\t\tisBlockInsertionPointVisible() &&\n\t\t\tinsertionPoint.index === insertIndex &&\n\t\t\tinsertionPoint.rootClientId === rootClientId &&\n\t\t\t( ! block || ! isUnmodifiedDefaultBlock( block ) )\n\t\t);\n\n\t\tconst defaultBlockName = getDefaultBlockName();\n\t\treturn {\n\t\t\tcanInsertDefaultBlock: canInsertBlockType( defaultBlockName, rootClientId ),\n\t\t\tshowInserter: ! isTyping() && canShowInserter,\n\t\t\tindex: insertIndex,\n\t\t\tshowInsertionPoint,\n\t\t};\n\t} ),\n\tifCondition( ( { canInsertDefaultBlock } ) => canInsertDefaultBlock ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { insertDefaultBlock, startTyping } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tinsertDefaultBlock,\n\t\t\tstartTyping,\n\t\t};\n\t} )\n)( BlockInsertionPoint );\n","/**\n * External dependencies\n */\nimport { first, last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockMover from '../block-mover';\n\nfunction BlockListMultiControls( {\n\tmultiSelectedBlockClientIds,\n\tclientId,\n\tisSelecting,\n\tisFirst,\n\tisLast,\n} ) {\n\tif ( isSelecting ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<BlockMover\n\t\t\tkey=\"mover\"\n\t\t\tclientId={ clientId }\n\t\t\tclientIds={ multiSelectedBlockClientIds }\n\t\t\tisFirst={ isFirst }\n\t\t\tisLast={ isLast }\n\t\t/>\n\t);\n}\n\nexport default withSelect( ( select, { clientId } ) => {\n\tconst {\n\t\tgetMultiSelectedBlockClientIds,\n\t\tisMultiSelecting,\n\t\tgetBlockIndex,\n\t\tgetBlockCount,\n\t} = select( 'core/editor' );\n\tconst clientIds = getMultiSelectedBlockClientIds();\n\tconst firstIndex = getBlockIndex( first( clientIds ), clientId );\n\tconst lastIndex = getBlockIndex( last( clientIds ), clientId );\n\n\treturn {\n\t\tmultiSelectedBlockClientIds: clientIds,\n\t\tisSelecting: isMultiSelecting(),\n\t\tisFirst: firstIndex === 0,\n\t\tisLast: lastIndex + 1 === getBlockCount(),\n\t};\n} )( BlockListMultiControls );\n","/**\n * WordPress dependencies\n */\nimport { Component, findDOMNode } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\nconst withHoverAreas = createHigherOrderComponent( ( WrappedComponent ) => {\n\tclass WithHoverAreasComponent extends Component {\n\t\tconstructor() {\n\t\t\tsuper( ...arguments );\n\t\t\tthis.state = {\n\t\t\t\thoverArea: null,\n\t\t\t};\n\t\t\tthis.onMouseLeave = this.onMouseLeave.bind( this );\n\t\t\tthis.onMouseMove = this.onMouseMove.bind( this );\n\t\t}\n\n\t\tcomponentDidMount() {\n\t\t\t// Disable reason: We use findDOMNode to avoid unnecessary extra dom Nodes\n\t\t\t// eslint-disable-next-line react/no-find-dom-node\n\t\t\tthis.container = findDOMNode( this );\n\t\t\tthis.container.addEventListener( 'mousemove', this.onMouseMove );\n\t\t\tthis.container.addEventListener( 'mouseleave', this.onMouseLeave );\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tthis.container.removeEventListener( 'mousemove', this.onMouseMove );\n\t\t\tthis.container.removeEventListener( 'mouseleave', this.onMouseLeave );\n\t\t}\n\n\t\tonMouseLeave() {\n\t\t\tif ( this.state.hoverArea ) {\n\t\t\t\tthis.setState( { hoverArea: null } );\n\t\t\t}\n\t\t}\n\n\t\tonMouseMove( event ) {\n\t\t\tconst { isRTL } = this.props;\n\t\t\tconst { width, left, right } = this.container.getBoundingClientRect();\n\n\t\t\tlet hoverArea = null;\n\t\t\tif ( ( event.clientX - left ) < width / 3 ) {\n\t\t\t\thoverArea = isRTL ? 'right' : 'left';\n\t\t\t} else if ( ( right - event.clientX ) < width / 3 ) {\n\t\t\t\thoverArea = isRTL ? 'left' : 'right';\n\t\t\t}\n\n\t\t\tif ( hoverArea !== this.state.hoverArea ) {\n\t\t\t\tthis.setState( { hoverArea } );\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\tconst { hoverArea } = this.state;\n\t\t\treturn (\n\t\t\t\t<WrappedComponent { ...this.props } hoverArea={ hoverArea } />\n\t\t\t);\n\t\t}\n\t}\n\n\treturn withSelect( ( select ) => {\n\t\treturn {\n\t\t\tisRTL: select( 'core/editor' ).getEditorSettings().isRTL,\n\t\t};\n\t} )( WithHoverAreasComponent );\n} );\n\nexport default withHoverAreas;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport BlockDraggable from '../block-draggable';\n\nexport const IconDragHandle = ( { isVisible, className, icon, onDragStart, onDragEnd, blockElementId, clientId } ) => {\n\tif ( ! isVisible ) {\n\t\treturn null;\n\t}\n\n\tconst dragHandleClassNames = classnames( 'editor-block-mover__control-drag-handle', className );\n\n\treturn (\n\t\t<BlockDraggable\n\t\t\tclientId={ clientId }\n\t\t\tblockElementId={ blockElementId }\n\t\t\tonDragStart={ onDragStart }\n\t\t\tonDragEnd={ onDragEnd }\n\t\t>\n\t\t\t{\n\t\t\t\t( { onDraggableStart, onDraggableEnd } ) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={ dragHandleClassNames }\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\tonDragStart={ onDraggableStart }\n\t\t\t\t\t\tonDragEnd={ onDraggableEnd }\n\t\t\t\t\t\tdraggable\n\t\t\t\t\t>\n\t\t\t\t\t\t{ icon }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t</BlockDraggable>\n\t);\n};\n","/**\n * WordPress dependencies\n */\nimport { Path, Polygon, SVG } from '@wordpress/components';\n\nexport const upArrow = (\n\t<SVG width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\">\n\t\t<Polygon points=\"9,4.5 3.3,10.1 4.8,11.5 9,7.3 13.2,11.5 14.7,10.1 \" />\n\t</SVG>\n);\n\nexport const downArrow = (\n\t<SVG width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\">\n\t\t<Polygon points=\"9,13.5 14.7,7.9 13.2,6.5 9,10.7 4.8,6.5 3.3,7.9 \" />\n\t</SVG>\n);\n\nexport const dragHandle = (\n\t<SVG width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\">\n\t\t<Path d=\"M13,8c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S12.4,8,13,8z M5,6C4.4,6,4,6.4,4,7s0.4,1,1,1s1-0.4,1-1S5.6,6,5,6z M5,10\n\t\t\tc-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S5.6,10,5,10z M13,10c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S13.6,10,13,10z M9,6\n\t\t\tC8.4,6,8,6.4,8,7s0.4,1,1,1s1-0.4,1-1S9.6,6,9,6z M9,10c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S9.6,10,9,10z\" />\n\t</SVG>\n);\n","/**\n * External dependencies\n */\nimport { first, partial, castArray } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { IconButton } from '@wordpress/components';\nimport { getBlockType } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { getBlockMoverDescription } from './mover-description';\nimport { upArrow, downArrow, dragHandle } from './icons';\nimport { IconDragHandle } from './drag-handle';\n\nexport class BlockMover extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tisFocused: false,\n\t\t};\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onBlur = this.onBlur.bind( this );\n\t}\n\n\tonFocus() {\n\t\tthis.setState( {\n\t\t\tisFocused: true,\n\t\t} );\n\t}\n\n\tonBlur() {\n\t\tthis.setState( {\n\t\t\tisFocused: false,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { onMoveUp, onMoveDown, isFirst, isLast, isDraggable, onDragStart, onDragEnd, clientIds, blockElementId, blockType, firstIndex, isLocked, instanceId, isHidden } = this.props;\n\t\tconst { isFocused } = this.state;\n\t\tconst blocksCount = castArray( clientIds ).length;\n\t\tif ( isLocked || ( isFirst && isLast ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// We emulate a disabled state because forcefully applying the `disabled`\n\t\t// attribute on the button while it has focus causes the screen to change\n\t\t// to an unfocused state (body as active element) without firing blur on,\n\t\t// the rendering parent, leaving it unable to react to focus out.\n\t\treturn (\n\t\t\t<div className={ classnames( 'editor-block-mover', { 'is-visible': isFocused || ! isHidden } ) }>\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName=\"editor-block-mover__control\"\n\t\t\t\t\tonClick={ isFirst ? null : onMoveUp }\n\t\t\t\t\ticon={ upArrow }\n\t\t\t\t\tlabel={ __( 'Move up' ) }\n\t\t\t\t\taria-describedby={ `editor-block-mover__up-description-${ instanceId }` }\n\t\t\t\t\taria-disabled={ isFirst }\n\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\t/>\n\t\t\t\t<IconDragHandle\n\t\t\t\t\tclassName=\"editor-block-mover__control\"\n\t\t\t\t\ticon={ dragHandle }\n\t\t\t\t\tclientId={ clientIds }\n\t\t\t\t\tblockElementId={ blockElementId }\n\t\t\t\t\tisVisible={ isDraggable }\n\t\t\t\t\tonDragStart={ onDragStart }\n\t\t\t\t\tonDragEnd={ onDragEnd }\n\t\t\t\t/>\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName=\"editor-block-mover__control\"\n\t\t\t\t\tonClick={ isLast ? null : onMoveDown }\n\t\t\t\t\ticon={ downArrow }\n\t\t\t\t\tlabel={ __( 'Move down' ) }\n\t\t\t\t\taria-describedby={ `editor-block-mover__down-description-${ instanceId }` }\n\t\t\t\t\taria-disabled={ isLast }\n\t\t\t\t\tonFocus={ this.onFocus }\n\t\t\t\t\tonBlur={ this.onBlur }\n\t\t\t\t/>\n\t\t\t\t<span id={ `editor-block-mover__up-description-${ instanceId }` } className=\"editor-block-mover__description\">\n\t\t\t\t\t{\n\t\t\t\t\t\tgetBlockMoverDescription(\n\t\t\t\t\t\t\tblocksCount,\n\t\t\t\t\t\t\tblockType && blockType.title,\n\t\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\t\tisFirst,\n\t\t\t\t\t\t\tisLast,\n\t\t\t\t\t\t\t-1,\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</span>\n\t\t\t\t<span id={ `editor-block-mover__down-description-${ instanceId }` } className=\"editor-block-mover__description\">\n\t\t\t\t\t{\n\t\t\t\t\t\tgetBlockMoverDescription(\n\t\t\t\t\t\t\tblocksCount,\n\t\t\t\t\t\t\tblockType && blockType.title,\n\t\t\t\t\t\t\tfirstIndex,\n\t\t\t\t\t\t\tisFirst,\n\t\t\t\t\t\t\tisLast,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, { clientIds } ) => {\n\t\tconst { getBlock, getBlockIndex, getTemplateLock, getBlockRootClientId } = select( 'core/editor' );\n\t\tconst firstClientId = first( castArray( clientIds ) );\n\t\tconst block = getBlock( firstClientId );\n\t\tconst rootClientId = getBlockRootClientId( first( castArray( clientIds ) ) );\n\n\t\treturn {\n\t\t\tfirstIndex: getBlockIndex( firstClientId, rootClientId ),\n\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t\tisLocked: getTemplateLock( rootClientId ) === 'all',\n\t\t\trootClientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientIds, rootClientId } ) => {\n\t\tconst { moveBlocksDown, moveBlocksUp } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonMoveDown: partial( moveBlocksDown, clientIds, rootClientId ),\n\t\t\tonMoveUp: partial( moveBlocksUp, clientIds, rootClientId ),\n\t\t};\n\t} ),\n\twithInstanceId,\n)( BlockMover );\n","/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\n\n/**\n * Return a label for the block movement controls depending on block position.\n *\n * @param {number}  selectedCount Number of blocks selected.\n * @param {string}  type          Block type - in the case of a single block, should\n *                                 define its 'type'. I.e. 'Text', 'Heading', 'Image' etc.\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\n * @param {boolean} isFirst       This is the first block.\n * @param {boolean} isLast        This is the last block.\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\n *                                 down, < 0 is up).\n *\n * @return {string} Label for the block movement controls.\n */\nexport function getBlockMoverDescription( selectedCount, type, firstIndex, isFirst, isLast, dir ) {\n\tconst position = ( firstIndex + 1 );\n\n\tif ( selectedCount > 1 ) {\n\t\treturn getMultiBlockMoverDescription( selectedCount, firstIndex, isFirst, isLast, dir );\n\t}\n\n\tif ( isFirst && isLast ) {\n\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\treturn sprintf( __( 'Block %s is the only block, and cannot be moved' ), type );\n\t}\n\n\tif ( dir > 0 && ! isLast ) {\n\t\t// moving down\n\t\treturn sprintf(\n\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t__( 'Move %1$s block from position %2$d down to position %3$d' ),\n\t\t\ttype,\n\t\t\tposition,\n\t\t\t( position + 1 )\n\t\t);\n\t}\n\n\tif ( dir > 0 && isLast ) {\n\t\t// moving down, and is the last item\n\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\treturn sprintf( __( 'Block %s is at the end of the content and cant be moved down' ), type );\n\t}\n\n\tif ( dir < 0 && ! isFirst ) {\n\t\t// moving up\n\t\treturn sprintf(\n\t\t\t// translators: 1: Type of block (i.e. Text, Image etc), 2: Position of selected block, 3: New position\n\t\t\t__( 'Move %1$s block from position %2$d up to position %3$d' ),\n\t\t\ttype,\n\t\t\tposition,\n\t\t\t( position - 1 )\n\t\t);\n\t}\n\n\tif ( dir < 0 && isFirst ) {\n\t\t// moving up, and is the first item\n\t\t// translators: %s: Type of block (i.e. Text, Image etc)\n\t\treturn sprintf( __( 'Block %s is at the beginning of the content and cant be moved up' ), type );\n\t}\n}\n\n/**\n * Return a label for the block movement controls depending on block position.\n *\n * @param {number}  selectedCount Number of blocks selected.\n * @param {number}  firstIndex    The index (position - 1) of the first block selected.\n * @param {boolean} isFirst       This is the first block.\n * @param {boolean} isLast        This is the last block.\n * @param {number}  dir           Direction of movement (> 0 is considered to be going\n *                                 down, < 0 is up).\n *\n * @return {string} Label for the block movement controls.\n */\nexport function getMultiBlockMoverDescription( selectedCount, firstIndex, isFirst, isLast, dir ) {\n\tconst position = ( firstIndex + 1 );\n\n\tif ( dir < 0 && isFirst ) {\n\t\treturn __( 'Blocks cannot be moved up as they are already at the top' );\n\t}\n\n\tif ( dir > 0 && isLast ) {\n\t\treturn __( 'Blocks cannot be moved down as they are already at the bottom' );\n\t}\n\n\tif ( dir < 0 && ! isFirst ) {\n\t\treturn sprintf(\n\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t_n(\n\t\t\t\t'Move %1$d block from position %2$d up by one place',\n\t\t\t\t'Move %1$d blocks from position %2$d up by one place',\n\t\t\t\tselectedCount\n\t\t\t),\n\t\t\tselectedCount,\n\t\t\tposition\n\t\t);\n\t}\n\n\tif ( dir > 0 && ! isLast ) {\n\t\treturn sprintf(\n\t\t\t// translators: 1: Number of selected blocks, 2: Position of selected blocks\n\t\t\t_n(\n\t\t\t\t'Move %1$d block from position %2$d down by one place',\n\t\t\t\t'Move %1$d blocks from position %2$d down by one place',\n\t\t\t\tselectedCount\n\t\t\t),\n\t\t\tselectedCount,\n\t\t\tposition\n\t\t);\n\t}\n}\n","/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { IconButton, Dropdown, SVG, Path, KeyboardShortcuts } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { rawShortcut } from '@wordpress/keycodes';\n\n/**\n * Internal dependencies\n */\nimport BlockNavigation from './';\n\nconst menuIcon = (\n\t<SVG xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"20\">\n\t\t<Path d=\"M5 5H3v2h2V5zm3 8h11v-2H8v2zm9-8H6v2h11V5zM7 11H5v2h2v-2zm0 8h2v-2H7v2zm3-2v2h11v-2H10z\" />\n\t</SVG>\n);\n\nfunction BlockNavigationDropdown() {\n\treturn\t(\n\t\t<Dropdown\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t[ rawShortcut.access( 'o' ) ]: onToggle,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\ticon={ menuIcon }\n\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\tlabel={ __( 'Block Navigation' ) }\n\t\t\t\t\t/>\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t<BlockNavigation onSelect={ onClose } />\n\t\t\t) }\n\t\t/>\n\t);\n}\n\nexport default BlockNavigationDropdown;\n","/**\n * External dependencies\n */\nimport { map, noop } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { MenuItem, MenuGroup } from '@wordpress/components';\nimport { getBlockType } from '@wordpress/blocks';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\nfunction BlockNavigationList( {\n\tblocks,\n\tselectedBlockClientId,\n\tselectBlock,\n\tshowNestedBlocks,\n} ) {\n\treturn (\n\t\t<ul className=\"editor-block-navigation__list\" role=\"presentation\">\n\t\t\t{ map( blocks, ( block ) => {\n\t\t\t\tconst blockType = getBlockType( block.name );\n\t\t\t\treturn (\n\t\t\t\t\t<li key={ block.clientId } role=\"presentation\">\n\t\t\t\t\t\t<div role=\"presentation\" className=\"editor-block-navigation__item\">\n\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\tclassName={ classnames( 'editor-block-navigation__item-button', {\n\t\t\t\t\t\t\t\t\t'is-selected': block.clientId === selectedBlockClientId,\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\tonClick={ () => selectBlock( block.clientId ) }\n\t\t\t\t\t\t\t\tisSelected={ block.clientId === selectedBlockClientId }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockIcon icon={ blockType.icon } showColors />\n\t\t\t\t\t\t\t\t{ blockType.title }\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ showNestedBlocks && !! block.innerBlocks && !! block.innerBlocks.length && (\n\t\t\t\t\t\t\t<BlockNavigationList\n\t\t\t\t\t\t\t\tblocks={ block.innerBlocks }\n\t\t\t\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\t\t\t\tshowNestedBlocks\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t} ) }\n\t\t</ul>\n\t);\n}\n\nfunction BlockNavigation( { rootBlock, rootBlocks, selectedBlockClientId, selectBlock } ) {\n\tconst hasHierarchy = (\n\t\trootBlock && (\n\t\t\trootBlock.clientId !== selectedBlockClientId ||\n\t\t\t( rootBlock.innerBlocks && rootBlock.innerBlocks.length !== 0 )\n\t\t)\n\t);\n\n\treturn (\n\t\t<MenuGroup label={ __( 'Block Navigation' ) }>\n\t\t\t{ hasHierarchy && (\n\t\t\t\t<BlockNavigationList\n\t\t\t\t\tblocks={ [ rootBlock ] }\n\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t\tshowNestedBlocks\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ! hasHierarchy && (\n\t\t\t\t<BlockNavigationList\n\t\t\t\t\tblocks={ rootBlocks }\n\t\t\t\t\tselectedBlockClientId={ selectedBlockClientId }\n\t\t\t\t\tselectBlock={ selectBlock }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t{ ( ! rootBlocks || rootBlocks.length === 0 ) && (\n\t\t\t\t// If there are no blocks in this document, don't render a list of blocks.\n\t\t\t\t// Instead: inform the user no blocks exist yet.\n\t\t\t\t<p className=\"editor-block-navigation__paragraph\">\n\t\t\t\t\t{ __( 'No blocks created yet.' ) }\n\t\t\t\t</p>\n\t\t\t) }\n\t\t</MenuGroup>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlockHierarchyRootClientId,\n\t\t\tgetBlock,\n\t\t\tgetBlocks,\n\t\t} = select( 'core/editor' );\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\treturn {\n\t\t\trootBlocks: getBlocks(),\n\t\t\trootBlock: selectedBlockClientId ? getBlock( getBlockHierarchyRootClientId( selectedBlockClientId ) ) : null,\n\t\t\tselectedBlockClientId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { onSelect = noop } ) => {\n\t\treturn {\n\t\t\tselectBlock( clientId ) {\n\t\t\t\tdispatch( 'core/editor' ).selectBlock( clientId );\n\t\t\t\tonSelect( clientId );\n\t\t\t},\n\t\t};\n\t} )\n)( BlockNavigation );\n","/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { createBlock } from '@wordpress/blocks';\nimport { Disabled } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockEdit from '../block-edit';\n\n/**\n * Block Preview Component: It renders a preview given a block name and attributes.\n *\n * @param {Object} props Component props.\n *\n * @return {WPElement} Rendered element.\n */\nfunction BlockPreview( props ) {\n\treturn (\n\t\t<div className=\"editor-block-preview\">\n\t\t\t<div className=\"editor-block-preview__title\">{ __( 'Preview' ) }</div>\n\t\t\t<BlockPreviewContent { ...props } />\n\t\t</div>\n\t);\n}\n\nexport function BlockPreviewContent( { name, attributes } ) {\n\tconst block = createBlock( name, attributes );\n\treturn (\n\t\t<Disabled className=\"editor-block-preview__content\" aria-hidden>\n\t\t\t<BlockEdit\n\t\t\t\tname={ name }\n\t\t\t\tfocus={ false }\n\t\t\t\tattributes={ block.attributes }\n\t\t\t\tsetAttributes={ noop }\n\t\t\t/>\n\t\t</Disabled>\n\t);\n}\n\nexport default BlockPreview;\n","/**\n * External dependencies\n */\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nclass BlockSelectionClearer extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\tthis.clearSelectionIfFocusTarget = this.clearSelectionIfFocusTarget.bind( this );\n\t}\n\n\tbindContainer( ref ) {\n\t\tthis.container = ref;\n\t}\n\n\t/**\n\t * Clears the selected block on focus if the container is the target of the\n\t * focus. This assumes no other descendents have received focus until event\n\t * has bubbled to the container.\n\t *\n\t * @param {FocusEvent} event Focus event.\n\t */\n\tclearSelectionIfFocusTarget( event ) {\n\t\tconst {\n\t\t\thasSelectedBlock,\n\t\t\thasMultiSelection,\n\t\t\tclearSelectedBlock,\n\t\t} = this.props;\n\n\t\tconst hasSelection = ( hasSelectedBlock || hasMultiSelection );\n\t\tif ( event.target === this.container && hasSelection ) {\n\t\t\tclearSelectedBlock();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div\n\t\t\t\ttabIndex={ -1 }\n\t\t\t\tonFocus={ this.clearSelectionIfFocusTarget }\n\t\t\t\tref={ this.bindContainer }\n\t\t\t\t{ ...omit( this.props, [\n\t\t\t\t\t'clearSelectedBlock',\n\t\t\t\t\t'hasSelectedBlock',\n\t\t\t\t\t'hasMultiSelection',\n\t\t\t\t] ) }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { hasSelectedBlock, hasMultiSelection } = select( 'core/editor' );\n\n\t\treturn {\n\t\t\thasSelectedBlock: hasSelectedBlock(),\n\t\t\thasMultiSelection: hasMultiSelection(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { clearSelectedBlock } = dispatch( 'core/editor' );\n\t\treturn { clearSelectedBlock };\n\t} ),\n] )( BlockSelectionClearer );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\n\nexport default function BlockConvertButton( { shouldRender, onClick, small } ) {\n\tif ( ! shouldRender ) {\n\t\treturn null;\n\t}\n\n\tconst label = __( 'Convert to Blocks' );\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\tonClick={ onClick }\n\t\t\ticon=\"screenoptions\"\n\t\t\tlabel={ small ? label : undefined }\n\t\t>\n\t\t\t{ ! small && label }\n\t\t</MenuItem>\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { rawHandler, getBlockContent } from '@wordpress/blocks';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockConvertButton from './block-convert-button';\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock, canUserUseUnfilteredHTML } = select( 'core/editor' );\n\t\tconst block = getBlock( clientId );\n\t\treturn {\n\t\t\tblock,\n\t\t\tcanUserUseUnfilteredHTML: canUserUseUnfilteredHTML(),\n\t\t\tshouldRender: ( block && block.name === 'core/html' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { block, canUserUseUnfilteredHTML } ) => ( {\n\t\tonClick: () => dispatch( 'core/editor' ).replaceBlocks(\n\t\t\tblock.clientId,\n\t\t\trawHandler( {\n\t\t\t\tHTML: getBlockContent( block ),\n\t\t\t\tmode: 'BLOCKS',\n\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t} ),\n\t\t),\n\t} ) ),\n)( BlockConvertButton );\n","/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { MenuItem } from '@wordpress/components';\nimport { getBlockType, hasBlockSupport } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nexport function BlockModeToggle( { blockType, mode, onToggleMode, small = false } ) {\n\tif ( ! hasBlockSupport( blockType, 'html', true ) ) {\n\t\treturn null;\n\t}\n\n\tconst label = mode === 'visual' ?\n\t\t__( 'Edit as HTML' ) :\n\t\t__( 'Edit visually' );\n\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\tonClick={ onToggleMode }\n\t\t\ticon=\"html\"\n\t\t\tlabel={ small ? label : undefined }\n\t\t>\n\t\t\t{ ! small && label }\n\t\t</MenuItem>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock, getBlockMode } = select( 'core/editor' );\n\t\tconst block = getBlock( clientId );\n\n\t\treturn {\n\t\t\tmode: getBlockMode( clientId ),\n\t\t\tblockType: block ? getBlockType( block.name ) : null,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { onToggle = noop, clientId } ) => ( {\n\t\tonToggleMode() {\n\t\t\tdispatch( 'core/editor' ).toggleBlockMode( clientId );\n\t\t\tonToggle();\n\t\t},\n\t} ) ),\n] )( BlockModeToggle );\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: _BlockSettingsMenuFirstItem, Slot } = createSlotFill( '_BlockSettingsMenuFirstItem' );\n\n_BlockSettingsMenuFirstItem.Slot = Slot;\n\nexport default _BlockSettingsMenuFirstItem;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\nconst { Fill: _BlockSettingsMenuPluginsExtension, Slot } = createSlotFill( '_BlockSettingsMenuPluginsExtension' );\n\n_BlockSettingsMenuPluginsExtension.Slot = Slot;\n\nexport default _BlockSettingsMenuPluginsExtension;\n","/**\n * WordPress dependencies\n */\nimport { getFreeformContentHandlerName, rawHandler, serialize } from '@wordpress/blocks';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockConvertButton from './block-convert-button';\n\nexport default compose(\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { canUserUseUnfilteredHTML, getBlock } = select( 'core/editor' );\n\t\tconst block = getBlock( clientId );\n\t\treturn {\n\t\t\tblock,\n\t\t\tcanUserUseUnfilteredHTML: canUserUseUnfilteredHTML(),\n\t\t\tshouldRender: ( block && block.name === getFreeformContentHandlerName() ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { block, canUserUseUnfilteredHTML } ) => ( {\n\t\tonClick: () => dispatch( 'core/editor' ).replaceBlocks(\n\t\t\tblock.clientId,\n\t\t\trawHandler( {\n\t\t\t\tHTML: serialize( block ),\n\t\t\t\tmode: 'BLOCKS',\n\t\t\t\tcanUserUseUnfilteredHTML,\n\t\t\t} )\n\t\t),\n\t} ) ),\n)( BlockConvertButton );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { castArray } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { Toolbar, Dropdown, NavigableMenu, MenuItem } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { shortcuts } from '../editor-global-keyboard-shortcuts';\nimport BlockActions from '../block-actions';\nimport BlockModeToggle from './block-mode-toggle';\nimport ReusableBlockConvertButton from './reusable-block-convert-button';\nimport ReusableBlockDeleteButton from './reusable-block-delete-button';\nimport BlockHTMLConvertButton from './block-html-convert-button';\nimport BlockUnknownConvertButton from './block-unknown-convert-button';\nimport _BlockSettingsMenuFirstItem from './block-settings-menu-first-item';\nimport _BlockSettingsMenuPluginsExtension from './block-settings-menu-plugins-extension';\n\nexport function BlockSettingsMenu( { clientIds, onSelect } ) {\n\tconst blockClientIds = castArray( clientIds );\n\tconst count = blockClientIds.length;\n\tconst firstBlockClientId = blockClientIds[ 0 ];\n\n\treturn (\n\t\t<BlockActions clientIds={ clientIds }>\n\t\t\t{ ( { onDuplicate, onRemove, onInsertAfter, onInsertBefore, canDuplicate, isLocked } ) => (\n\t\t\t\t<Dropdown\n\t\t\t\t\tcontentClassName=\"editor-block-settings-menu__popover\"\n\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\t\tconst toggleClassname = classnames( 'editor-block-settings-menu__toggle', {\n\t\t\t\t\t\t\t'is-opened': isOpen,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tconst label = isOpen ? __( 'Hide options' ) : __( 'More options' );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Toolbar controls={ [ {\n\t\t\t\t\t\t\t\ticon: 'ellipsis',\n\t\t\t\t\t\t\t\ttitle: label,\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\tif ( count === 1 ) {\n\t\t\t\t\t\t\t\t\t\tonSelect( firstBlockClientId );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tclassName: toggleClassname,\n\t\t\t\t\t\t\t\textraProps: { 'aria-expanded': isOpen },\n\t\t\t\t\t\t\t} ] } />\n\t\t\t\t\t\t);\n\t\t\t\t\t} }\n\t\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t\t<NavigableMenu className=\"editor-block-settings-menu__content\">\n\t\t\t\t\t\t\t<_BlockSettingsMenuFirstItem.Slot fillProps={ { onClose } } />\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<BlockUnknownConvertButton\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<BlockHTMLConvertButton\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! isLocked && canDuplicate && (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\tonClick={ onDuplicate }\n\t\t\t\t\t\t\t\t\ticon=\"admin-page\"\n\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.duplicate.display }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Duplicate' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! isLocked && (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\t\tonClick={ onInsertBefore }\n\t\t\t\t\t\t\t\t\t\ticon=\"insert-before\"\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertBefore.display }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Insert Before' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\t\tonClick={ onInsertAfter }\n\t\t\t\t\t\t\t\t\t\ticon=\"insert-after\"\n\t\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.insertAfter.display }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Insert After' ) }\n\t\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<BlockModeToggle\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\tonToggle={ onClose }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<ReusableBlockConvertButton\n\t\t\t\t\t\t\t\tclientIds={ clientIds }\n\t\t\t\t\t\t\t\tonToggle={ onClose }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<_BlockSettingsMenuPluginsExtension.Slot fillProps={ { clientIds, onClose } } />\n\t\t\t\t\t\t\t<div className=\"editor-block-settings-menu__separator\" />\n\t\t\t\t\t\t\t{ count === 1 && (\n\t\t\t\t\t\t\t\t<ReusableBlockDeleteButton\n\t\t\t\t\t\t\t\t\tclientId={ firstBlockClientId }\n\t\t\t\t\t\t\t\t\tonToggle={ onClose }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t{ ! isLocked && (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\t\t\t\t\t\t\tonClick={ onRemove }\n\t\t\t\t\t\t\t\t\ticon=\"trash\"\n\t\t\t\t\t\t\t\t\tshortcut={ shortcuts.removeBlock.display }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Remove Block' ) }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</NavigableMenu>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</BlockActions>\n\t);\n}\n\nexport default withDispatch( ( dispatch ) => {\n\tconst { selectBlock } = dispatch( 'core/editor' );\n\n\treturn {\n\t\tonSelect( clientId ) {\n\t\t\tselectBlock( clientId );\n\t\t},\n\t};\n} )( BlockSettingsMenu );\n","/**\n * External dependencies\n */\nimport { noop, every, map } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { isReusableBlock } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nexport function ReusableBlockConvertButton( {\n\tisVisible,\n\tisStaticBlock,\n\tonConvertToStatic,\n\tonConvertToReusable,\n} ) {\n\tif ( ! isVisible ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Fragment>\n\t\t\t{ isStaticBlock && (\n\t\t\t\t<MenuItem\n\t\t\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\t\t\ticon=\"controls-repeat\"\n\t\t\t\t\tonClick={ onConvertToReusable }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Add to Reusable Blocks' ) }\n\t\t\t\t</MenuItem>\n\t\t\t) }\n\t\t\t{ ! isStaticBlock && (\n\t\t\t\t<MenuItem\n\t\t\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\t\t\ticon=\"controls-repeat\"\n\t\t\t\t\tonClick={ onConvertToStatic }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Convert to Regular Block' ) }\n\t\t\t\t</MenuItem>\n\t\t\t) }\n\t\t</Fragment>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientIds } ) => {\n\t\tconst { getBlock, canInsertBlockType, getReusableBlock } = select( 'core/editor' );\n\t\tconst {\n\t\t\tgetFreeformFallbackBlockName,\n\t\t\tgetUnregisteredFallbackBlockName,\n\t\t} = select( 'core/blocks' );\n\n\t\tconst blocks = map( clientIds, ( clientId ) => getBlock( clientId ) );\n\n\t\tconst isVisible = (\n\t\t\t// Guard against the case where a regular block has *just* been converted to a\n\t\t\t// reusable block and doesn't yet exist in the editor store.\n\t\t\tevery( blocks, ( block ) => !! block ) &&\n\n\t\t\t// Hide 'Add to Reusable Blocks' when Reusable Blocks are disabled, i.e. when\n\t\t\t// core/block is not in the allowed_block_types filter.\n\t\t\tcanInsertBlockType( 'core/block' ) &&\n\n\t\t\t// Hide 'Add to Reusable Blocks' on Classic blocks. Showing it causes a\n\t\t\t// confusing UX, because of its similarity to the 'Convert to Blocks' button.\n\t\t\t( blocks.length !== 1 || (\n\t\t\t\tblocks[ 0 ].name !== getFreeformFallbackBlockName() &&\n\t\t\t\tblocks[ 0 ].name !== getUnregisteredFallbackBlockName()\n\t\t\t) )\n\t\t);\n\n\t\treturn {\n\t\t\tisVisible,\n\t\t\tisStaticBlock: isVisible && (\n\t\t\t\tblocks.length !== 1 ||\n\t\t\t\t! isReusableBlock( blocks[ 0 ] ) ||\n\t\t\t\t! getReusableBlock( blocks[ 0 ].attributes.ref )\n\t\t\t),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientIds, onToggle = noop } ) => {\n\t\tconst {\n\t\t\tconvertBlockToReusable,\n\t\t\tconvertBlockToStatic,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonConvertToStatic() {\n\t\t\t\tif ( clientIds.length !== 1 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconvertBlockToStatic( clientIds[ 0 ] );\n\t\t\t\tonToggle();\n\t\t\t},\n\t\t\tonConvertToReusable() {\n\t\t\t\tconvertBlockToReusable( clientIds );\n\t\t\t\tonToggle();\n\t\t\t},\n\t\t};\n\t} ),\n] )( ReusableBlockConvertButton );\n","/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { isReusableBlock } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nexport function ReusableBlockDeleteButton( { reusableBlock, onDelete } ) {\n\tif ( ! reusableBlock ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuItem\n\t\t\tclassName=\"editor-block-settings-menu__control\"\n\t\t\ticon=\"no\"\n\t\t\tdisabled={ reusableBlock.isTemporary }\n\t\t\tonClick={ () => onDelete( reusableBlock.id ) }\n\t\t>\n\t\t\t{ __( 'Remove from Reusable Blocks' ) }\n\t\t</MenuItem>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst { getBlock, getReusableBlock } = select( 'core/editor' );\n\t\tconst block = getBlock( clientId );\n\t\treturn {\n\t\t\treusableBlock: block && isReusableBlock( block ) ? getReusableBlock( block.attributes.ref ) : null,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { onToggle = noop } ) => {\n\t\tconst {\n\t\t\tdeleteReusableBlock,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonDelete( id ) {\n\t\t\t\t// TODO: Make this a <Confirm /> component or similar\n\t\t\t\t// eslint-disable-next-line no-alert\n\t\t\t\tconst hasConfirmed = window.confirm( __(\n\t\t\t\t\t'Are you sure you want to delete this Reusable Block?\\n\\n' +\n\t\t\t\t\t'It will be permanently removed from all posts and pages that use it.'\n\t\t\t\t) );\n\n\t\t\t\tif ( hasConfirmed ) {\n\t\t\t\t\tdeleteReusableBlock( id );\n\t\t\t\t\tonToggle();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n] )( ReusableBlockDeleteButton );\n","/**\n * External dependencies\n */\nimport { find, get, noop } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { getBlockType } from '@wordpress/blocks';\nimport { __, sprintf } from '@wordpress/i18n';\nimport TokenList from '@wordpress/token-list';\n\n/**\n * Internal dependencies\n */\nimport { BlockPreviewContent } from '../block-preview';\n\n/**\n * Returns the active style from the given className.\n *\n * @param {Array} styles Block style variations.\n * @param {string} className  Class name\n *\n * @return {Object?} The active style.\n */\nexport function getActiveStyle( styles, className ) {\n\tfor ( const style of new TokenList( className ).values() ) {\n\t\tif ( style.indexOf( 'is-style-' ) === -1 ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst potentialStyleName = style.substring( 9 );\n\t\tconst activeStyle = find( styles, { name: potentialStyleName } );\n\t\tif ( activeStyle ) {\n\t\t\treturn activeStyle;\n\t\t}\n\t}\n\n\treturn find( styles, 'isDefault' );\n}\n\n/**\n * Replaces the active style in the block's className.\n *\n * @param {string}  className   Class name.\n * @param {Object?} activeStyle The replaced style.\n * @param {Object}  newStyle    The replacing style.\n *\n * @return {string} The updated className.\n */\nexport function replaceActiveStyle( className, activeStyle, newStyle ) {\n\tconst list = new TokenList( className );\n\n\tif ( activeStyle ) {\n\t\tlist.remove( 'is-style-' + activeStyle.name );\n\t}\n\n\tlist.add( 'is-style-' + newStyle.name );\n\n\treturn list.value;\n}\n\nfunction BlockStyles( {\n\tstyles,\n\tclassName,\n\tonChangeClassName,\n\tname,\n\tattributes,\n\tonSwitch = noop,\n\tonHoverClassName = noop,\n} ) {\n\tif ( ! styles ) {\n\t\treturn null;\n\t}\n\n\tconst activeStyle = getActiveStyle( styles, className );\n\tfunction updateClassName( style ) {\n\t\tconst updatedClassName = replaceActiveStyle( className, activeStyle, style );\n\t\tonChangeClassName( updatedClassName );\n\t\tonSwitch();\n\t}\n\n\treturn (\n\t\t<div className=\"editor-block-styles\">\n\t\t\t{ styles.map( ( style ) => {\n\t\t\t\tconst styleClassName = replaceActiveStyle( className, activeStyle, style );\n\t\t\t\t/* eslint-disable jsx-a11y/click-events-have-key-events */\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={ style.name }\n\t\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t\t'editor-block-styles__item', {\n\t\t\t\t\t\t\t\t'is-active': activeStyle === style,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonClick={ () => updateClassName( style ) }\n\t\t\t\t\t\tonMouseEnter={ () => onHoverClassName( styleClassName ) }\n\t\t\t\t\t\tonMouseLeave={ () => onHoverClassName( null ) }\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\t\taria-label={ sprintf( __( 'Apply style variation \"%s\"' ), style.label || style.name ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"editor-block-styles__item-preview\">\n\t\t\t\t\t\t\t<BlockPreviewContent\n\t\t\t\t\t\t\t\tname={ name }\n\t\t\t\t\t\t\t\tattributes={ {\n\t\t\t\t\t\t\t\t\t...attributes,\n\t\t\t\t\t\t\t\t\tclassName: styleClassName,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"editor-block-styles__item-label\">\n\t\t\t\t\t\t\t{ style.label || style.name }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t\t/* eslint-enable jsx-a11y/click-events-have-key-events */\n\t\t\t} ) }\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst block = select( 'core/editor' ).getBlock( clientId );\n\n\t\treturn {\n\t\t\tname: block.name,\n\t\t\tattributes: block.attributes,\n\t\t\tclassName: block.attributes.className || '',\n\t\t\tstyles: get( getBlockType( block.name ), [ 'styles' ] ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tonChangeClassName( newClassName ) {\n\t\t\t\tdispatch( 'core/editor' ).updateBlockAttributes( clientId, {\n\t\t\t\t\tclassName: newClassName,\n\t\t\t\t} );\n\t\t\t},\n\t\t};\n\t} ),\n] )( BlockStyles );\n","/**\n * External dependencies\n */\nimport { castArray, filter, first, get, mapKeys, orderBy } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport { Dropdown, IconButton, Toolbar, PanelBody, Path, SVG } from '@wordpress/components';\nimport { getBlockType, getPossibleBlockTransformations, switchToBlockType, hasChildBlocksWithInserterSupport } from '@wordpress/blocks';\nimport { Component, Fragment } from '@wordpress/element';\nimport { DOWN } from '@wordpress/keycodes';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\nimport BlockStyles from '../block-styles';\nimport BlockPreview from '../block-preview';\nimport BlockTypesList from '../block-types-list';\n\nexport class BlockSwitcher extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\thoveredClassName: null,\n\t\t};\n\t\tthis.onHoverClassName = this.onHoverClassName.bind( this );\n\t}\n\n\tonHoverClassName( className ) {\n\t\tthis.setState( { hoveredClassName: className } );\n\t}\n\n\trender() {\n\t\tconst { blocks, onTransform, inserterItems } = this.props;\n\t\tconst { hoveredClassName } = this.state;\n\n\t\tif ( ! blocks || ! blocks.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst itemsByName = mapKeys( inserterItems, ( { name } ) => name );\n\t\tconst possibleBlockTransformations = orderBy(\n\t\t\tfilter(\n\t\t\t\tgetPossibleBlockTransformations( blocks ),\n\t\t\t\t( block ) => !! itemsByName[ block.name ]\n\t\t\t),\n\t\t\t( block ) => itemsByName[ block.name ].frecency,\n\t\t\t'desc'\n\t\t);\n\n\t\tconst sourceBlockName = blocks[ 0 ].name;\n\t\tconst blockType = getBlockType( sourceBlockName );\n\t\tconst hasStyles = blocks.length === 1 && get( blockType, [ 'styles' ], [] ).length !== 0;\n\n\t\tif ( ! hasStyles && ! possibleBlockTransformations.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tposition=\"bottom right\"\n\t\t\t\tclassName=\"editor-block-switcher\"\n\t\t\t\tcontentClassName=\"editor-block-switcher__popover\"\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => {\n\t\t\t\t\tconst openOnArrowDown = ( event ) => {\n\t\t\t\t\t\tif ( ! isOpen && event.keyCode === DOWN ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tonToggle();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst label = (\n\t\t\t\t\t\t1 === blocks.length ?\n\t\t\t\t\t\t\t__( 'Change block type' ) :\n\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t_n(\n\t\t\t\t\t\t\t\t\t'Change type of %d block',\n\t\t\t\t\t\t\t\t\t'Change type of %d blocks',\n\t\t\t\t\t\t\t\t\tblocks.length\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tblocks.length\n\t\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Toolbar>\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName=\"editor-block-switcher__toggle\"\n\t\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\t\taria-haspopup=\"true\"\n\t\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t\ttooltip={ label }\n\t\t\t\t\t\t\t\tonKeyDown={ openOnArrowDown }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockIcon icon={ blockType.icon && blockType.icon.src } showColors />\n\t\t\t\t\t\t\t\t<SVG className=\"editor-block-switcher__transform\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><Path d=\"M6.5 8.9c.6-.6 1.4-.9 2.2-.9h6.9l-1.3 1.3 1.4 1.4L19.4 7l-3.7-3.7-1.4 1.4L15.6 6H8.7c-1.4 0-2.6.5-3.6 1.5l-2.8 2.8 1.4 1.4 2.8-2.8zm13.8 2.4l-2.8 2.8c-.6.6-1.3.9-2.1.9h-7l1.3-1.3-1.4-1.4L4.6 16l3.7 3.7 1.4-1.4L8.4 17h6.9c1.3 0 2.6-.5 3.5-1.5l2.8-2.8-1.3-1.4z\" /></SVG>\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t</Toolbar>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t\trenderContent={ ( { onClose } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t{ hasStyles &&\n\t\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\t\ttitle={ __( 'Block Styles' ) }\n\t\t\t\t\t\t\t\tinitialOpen\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockStyles\n\t\t\t\t\t\t\t\t\tclientId={ blocks[ 0 ].clientId }\n\t\t\t\t\t\t\t\t\tonSwitch={ onClose }\n\t\t\t\t\t\t\t\t\tonHoverClassName={ this.onHoverClassName }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{ possibleBlockTransformations.length !== 0 &&\n\t\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\t\ttitle={ __( 'Transform To:' ) }\n\t\t\t\t\t\t\t\tinitialOpen\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockTypesList\n\t\t\t\t\t\t\t\t\titems={ possibleBlockTransformations.map( ( destinationBlockType ) => ( {\n\t\t\t\t\t\t\t\t\t\tid: destinationBlockType.name,\n\t\t\t\t\t\t\t\t\t\ticon: destinationBlockType.icon,\n\t\t\t\t\t\t\t\t\t\ttitle: destinationBlockType.title,\n\t\t\t\t\t\t\t\t\t\thasChildBlocksWithInserterSupport: hasChildBlocksWithInserterSupport( destinationBlockType.name ),\n\t\t\t\t\t\t\t\t\t} ) ) }\n\t\t\t\t\t\t\t\t\tonSelect={ ( item ) => {\n\t\t\t\t\t\t\t\t\t\tonTransform( blocks, item.id );\n\t\t\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{ ( hoveredClassName !== null ) &&\n\t\t\t\t\t\t\t<BlockPreview\n\t\t\t\t\t\t\t\tname={ blocks[ 0 ].name }\n\t\t\t\t\t\t\t\tattributes={ { ...blocks[ 0 ].attributes, className: hoveredClassName } }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, { clientIds } ) => {\n\t\tconst { getBlocksByClientId, getBlockRootClientId, getInserterItems } = select( 'core/editor' );\n\t\tconst rootClientId = getBlockRootClientId( first( castArray( clientIds ) ) );\n\t\treturn {\n\t\t\tblocks: getBlocksByClientId( clientIds ),\n\t\t\tinserterItems: getInserterItems( rootClientId ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => ( {\n\t\tonTransform( blocks, name ) {\n\t\t\tdispatch( 'core/editor' ).replaceBlocks(\n\t\t\t\townProps.clientIds,\n\t\t\t\tswitchToBlockType( blocks, name )\n\t\t\t);\n\t\t},\n\t} ) ),\n)( BlockSwitcher );\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockSwitcher from './';\n\nexport function MultiBlocksSwitcher( { isMultiBlockSelection, selectedBlockClientIds } ) {\n\tif ( ! isMultiBlockSelection ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<BlockSwitcher key=\"switcher\" clientIds={ selectedBlockClientIds } />\n\t);\n}\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst selectedBlockClientIds = select( 'core/editor' ).getMultiSelectedBlockClientIds();\n\t\treturn {\n\t\t\tisMultiBlockSelection: selectedBlockClientIds.length > 1,\n\t\t\tselectedBlockClientIds,\n\t\t};\n\t}\n)( MultiBlocksSwitcher );\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { getBlockType } from '@wordpress/blocks';\n\n/**\n * Renders the block's configured title as a string, or empty if the title\n * cannot be determined.\n *\n * @example\n *\n * ```jsx\n * <BlockTitle clientId=\"afd1cb17-2c08-4e7a-91be-007ba7ddc3a1\" />\n * ```\n *\n * @param {?string} props.name Block name.\n *\n * @return {?string} Block title.\n */\nexport function BlockTitle( { name } ) {\n\tif ( ! name ) {\n\t\treturn null;\n\t}\n\n\tconst blockType = getBlockType( name );\n\tif ( ! blockType ) {\n\t\treturn null;\n\t}\n\n\treturn blockType.title;\n}\n\nexport default withSelect( ( select, ownProps ) => {\n\tconst { getBlockName } = select( 'core/editor' );\n\tconst { clientId } = ownProps;\n\n\treturn {\n\t\tname: getBlockName( clientId ),\n\t};\n} )( BlockTitle );\n","/**\n * WordPress Dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { Component, createRef, Fragment } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\n\n/**\n * Internal Dependencies\n */\nimport BlockSwitcher from '../block-switcher';\nimport MultiBlocksSwitcher from '../block-switcher/multi-blocks-switcher';\nimport BlockControls from '../block-controls';\nimport BlockFormatControls from '../block-format-controls';\nimport BlockSettingsMenu from '../block-settings-menu';\n\nclass BlockToolbar extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.container = createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( this.props.blockClientIds.length > 1 ) {\n\t\t\tthis.focusContainer();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif (\n\t\t\tprevProps.blockClientIds.length <= 1 &&\n\t\t\tthis.props.blockClientIds.length > 1\n\t\t) {\n\t\t\tthis.focusContainer();\n\t\t}\n\t}\n\n\tfocusContainer() {\n\t\tconst tabbables = focus.tabbable.find( this.container.current );\n\t\tif ( tabbables.length ) {\n\t\t\ttabbables[ 0 ].focus();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { blockClientIds, isValid, mode } = this.props;\n\n\t\tif ( blockClientIds.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( blockClientIds.length > 1 ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"editor-block-toolbar\" ref={ this.container }>\n\t\t\t\t\t<MultiBlocksSwitcher />\n\t\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"editor-block-toolbar\">\n\t\t\t\t{ mode === 'visual' && isValid && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<BlockSwitcher clientIds={ blockClientIds } />\n\t\t\t\t\t\t<BlockControls.Slot />\n\t\t\t\t\t\t<BlockFormatControls.Slot />\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t\t<BlockSettingsMenu clientIds={ blockClientIds } />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst {\n\t\tgetSelectedBlock,\n\t\tgetBlockMode,\n\t\tgetMultiSelectedBlockClientIds,\n\t} = select( 'core/editor' );\n\tconst block = getSelectedBlock();\n\tconst blockClientIds = block ?\n\t\t[ block.clientId ] :\n\t\tgetMultiSelectedBlockClientIds();\n\n\treturn {\n\t\tblockClientIds,\n\t\tisValid: block ? block.isValid : null,\n\t\tmode: block ? getBlockMode( block.clientId ) : null,\n\t};\n} )( BlockToolbar );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { getBlockMenuDefaultClassName } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\nclass BlockTypesList extends Component {\n\trender() {\n\t\tconst { items, onSelect, onHover = noop } = this.props;\n\n\t\treturn (\n\t\t\t/*\n\t\t\t * Disable reason: The `list` ARIA role is redundant but\n\t\t\t * Safari+VoiceOver won't announce the list otherwise.\n\t\t\t */\n\t\t\t/* eslint-disable jsx-a11y/no-redundant-roles */\n\t\t\t<ul role=\"list\" className=\"editor-block-types-list\">\n\t\t\t\t{ items.map( ( item ) => {\n\t\t\t\t\tconst itemIconStyle = item.icon ? {\n\t\t\t\t\t\tbackgroundColor: item.icon.background,\n\t\t\t\t\t\tcolor: item.icon.foreground,\n\t\t\t\t\t} : {};\n\t\t\t\t\tconst itemIconStackStyle = item.icon && item.icon.shadowColor ? {\n\t\t\t\t\t\tbackgroundColor: item.icon.shadowColor,\n\t\t\t\t\t} : {};\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li className=\"editor-block-types-list__list-item\" key={ item.id }>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tclassnames(\n\t\t\t\t\t\t\t\t\t\t'editor-block-types-list__item',\n\t\t\t\t\t\t\t\t\t\tgetBlockMenuDefaultClassName( item.id ),\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'editor-block-types-list__item-has-children': item.hasChildBlocksWithInserterSupport,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\tonSelect( item );\n\t\t\t\t\t\t\t\t\tonHover( null );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\tdisabled={ item.isDisabled }\n\t\t\t\t\t\t\t\tonMouseEnter={ () => onHover( item ) }\n\t\t\t\t\t\t\t\tonMouseLeave={ () => onHover( null ) }\n\t\t\t\t\t\t\t\tonFocus={ () => onHover( item ) }\n\t\t\t\t\t\t\t\tonBlur={ () => onHover( null ) }\n\t\t\t\t\t\t\t\taria-label={ item.title } // Fix for IE11 and JAWS 2018.\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tclassName=\"editor-block-types-list__item-icon\"\n\t\t\t\t\t\t\t\t\tstyle={ itemIconStyle }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<BlockIcon icon={ item.icon && item.icon.src } showColors />\n\t\t\t\t\t\t\t\t\t{ item.hasChildBlocksWithInserterSupport &&\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"editor-block-types-list__item-icon-stack\"\n\t\t\t\t\t\t\t\t\t\tstyle={ itemIconStackStyle }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t<span className=\"editor-block-types-list__item-title\">\n\t\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t\t/* eslint-enable jsx-a11y/no-redundant-roles */\n\t\t);\n\t}\n}\n\nexport default BlockTypesList;\n","/**\n * WordPress dependencies\n */\nimport { BaseControl, ColorIndicator } from '@wordpress/components';\nimport { ifCondition, compose } from '@wordpress/compose';\nimport { Fragment } from '@wordpress/element';\nimport { sprintf, __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ColorPalette from './';\nimport withColorContext from './with-color-context';\nimport { getColorObjectByColorValue } from '../colors';\n\n// translators: first %s: The type of color (e.g. background color), second %s: the color name or value (e.g. red or #ff0000)\nconst colorIndicatorAriaLabel = __( '(current %s: %s)' );\n\nexport function ColorPaletteControl( {\n\tcolors,\n\tdisableCustomColors,\n\tlabel,\n\tonChange,\n\tvalue,\n} ) {\n\tconst colorObject = getColorObjectByColorValue( colors, value );\n\tconst colorName = colorObject && colorObject.name;\n\tconst ariaLabel = sprintf( colorIndicatorAriaLabel, label.toLowerCase(), colorName || value );\n\n\tconst labelElement = (\n\t\t<Fragment>\n\t\t\t{ label }\n\t\t\t{ value && (\n\t\t\t\t<ColorIndicator\n\t\t\t\t\tcolorValue={ value }\n\t\t\t\t\taria-label={ ariaLabel }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</Fragment>\n\t);\n\n\treturn (\n\t\t<BaseControl\n\t\t\tclassName=\"editor-color-palette-control\"\n\t\t\tlabel={ labelElement }>\n\t\t\t<ColorPalette\n\t\t\t\tclassName=\"editor-color-palette-control__color-palette\"\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ onChange }\n\t\t\t\t{ ... { colors, disableCustomColors } }\n\t\t\t/>\n\t\t</BaseControl>\n\t);\n}\n\nexport default compose( [\n\twithColorContext,\n\tifCondition( ( { hasColorsToChoose } ) => hasColorsToChoose ),\n] )( ColorPaletteControl );\n","/**\n * WordPress dependencies\n */\nimport { ColorPalette } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport withColorContext from './with-color-context';\n\nexport default withColorContext( ColorPalette );\n","\n/**\n * External dependencies\n */\nimport { isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport default createHigherOrderComponent(\n\twithSelect(\n\t\t( select, ownProps ) => {\n\t\t\tconst settings = select( 'core/editor' ).getEditorSettings();\n\t\t\tconst colors = ownProps.colors === undefined ?\n\t\t\t\tsettings.colors : ownProps.colors;\n\n\t\t\tconst disableCustomColors = ownProps.disableCustomColors === undefined ?\n\t\t\t\tsettings.disableCustomColors : ownProps.disableCustomColors;\n\t\t\treturn {\n\t\t\t\tcolors,\n\t\t\t\tdisableCustomColors,\n\t\t\t\thasColorsToChoose: ! isEmpty( colors ) || ! disableCustomColors,\n\t\t\t};\n\t\t}\n\t),\n\t'withColorContext'\n);\n","export {\n\tgetColorClassName,\n\tgetColorObjectByAttributeValues,\n\tgetColorObjectByColorValue,\n} from './utils';\nexport { default as withColors } from './with-colors';\n","/**\n * External dependencies\n */\nimport { find, kebabCase, map } from 'lodash';\nimport tinycolor from 'tinycolor2';\n\n/**\n * Provided an array of color objects as set by the theme or by the editor defaults,\n * and the values of the defined color or custom color returns a color object describing the color.\n *\n * @param {Array}   colors       Array of color objects as set by the theme or by the editor defaults.\n * @param {?string} definedColor A string containing the color slug.\n * @param {?string} customColor  A string containing the customColor value.\n *\n * @return {?string} If definedColor is passed and the name is found in colors,\n *                   the color object exactly as set by the theme or editor defaults is returned.\n *                   Otherwise, an object that just sets the color is defined.\n */\nexport const getColorObjectByAttributeValues = ( colors, definedColor, customColor ) => {\n\tif ( definedColor ) {\n\t\tconst colorObj = find( colors, { slug: definedColor } );\n\n\t\tif ( colorObj ) {\n\t\t\treturn colorObj;\n\t\t}\n\t}\n\treturn {\n\t\tcolor: customColor,\n\t};\n};\n\n/**\n* Provided an array of color objects as set by the theme or by the editor defaults, and a color value returns the color object matching that value or undefined.\n*\n* @param {Array}   colors      Array of color objects as set by the theme or by the editor defaults.\n* @param {?string} colorValue  A string containing the color value.\n*\n* @return {?string} Returns the color object included in the colors array whose color property equals colorValue.\n*                   Returns undefined if no color object matches this requirement.\n*/\nexport const getColorObjectByColorValue = ( colors, colorValue ) => {\n\treturn find( colors, { color: colorValue } );\n};\n\n/**\n * Returns a class based on the context a color is being used and its slug.\n *\n * @param {string} colorContextName Context/place where color is being used e.g: background, text etc...\n * @param {string} colorSlug        Slug of the color.\n *\n * @return {string} String with the class corresponding to the color in the provided context.\n */\nexport function getColorClassName( colorContextName, colorSlug ) {\n\tif ( ! colorContextName || ! colorSlug ) {\n\t\treturn;\n\t}\n\n\treturn `has-${ kebabCase( colorSlug ) }-${ colorContextName }`;\n}\n\n/**\n* Given an array of color objects and a color value returns the color value of the most readable color in the array.\n*\n* @param {Array}   colors     Array of color objects as set by the theme or by the editor defaults.\n* @param {?string} colorValue A string containing the color value.\n*\n* @return {string} String with the color value of the most readable color.\n*/\nexport function getMostReadableColor( colors, colorValue ) {\n\treturn tinycolor.mostReadable(\n\t\tcolorValue,\n\t\tmap( colors, 'color' )\n\t).toHexString();\n}\n","/**\n * External dependencies\n */\nimport { get, isString, kebabCase, reduce, upperFirst } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { compose, createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { getColorClassName, getColorObjectByColorValue, getColorObjectByAttributeValues, getMostReadableColor } from './utils';\n\nconst DEFAULT_COLORS = [];\n\n/**\n * Higher-order component, which handles color logic for class generation\n * color value, retrieval and color attribute setting.\n *\n * @param {...(object|string)} args The arguments can be strings or objects. If the argument is an object,\n *                                  it should contain the color attribute name as key and the color context as value.\n *                                  If the argument is a string the value should be the color attribute name,\n *                                  the color context is computed by applying a kebab case transform to the value.\n *                                  Color context represents the context/place where the color is going to be used.\n *                                  The class name of the color is generated using 'has' followed by the color name\n *                                  and ending with the color context all in kebab case e.g: has-green-background-color.\n *\n *\n * @return {Function} Higher-order component.\n */\nexport default ( ...args ) => {\n\tconst colorMap = reduce( args, ( colorObject, arg ) => {\n\t\treturn {\n\t\t\t...colorObject,\n\t\t\t...( isString( arg ) ? { [ arg ]: kebabCase( arg ) } : arg ),\n\t\t};\n\t}, {} );\n\n\treturn createHigherOrderComponent(\n\t\tcompose( [\n\t\t\twithSelect( ( select ) => {\n\t\t\t\tconst settings = select( 'core/editor' ).getEditorSettings();\n\t\t\t\treturn {\n\t\t\t\t\tcolors: get( settings, [ 'colors' ], DEFAULT_COLORS ),\n\t\t\t\t};\n\t\t\t} ),\n\t\t\t( WrappedComponent ) => {\n\t\t\t\treturn class extends Component {\n\t\t\t\t\tconstructor( props ) {\n\t\t\t\t\t\tsuper( props );\n\n\t\t\t\t\t\tthis.setters = this.createSetters();\n\t\t\t\t\t\tthis.colorUtils = {\n\t\t\t\t\t\t\tgetMostReadableColor: this.getMostReadableColor.bind( this ),\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.state = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tgetMostReadableColor( colorValue ) {\n\t\t\t\t\t\tconst { colors } = this.props;\n\t\t\t\t\t\treturn getMostReadableColor( colors, colorValue );\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetters() {\n\t\t\t\t\t\treturn reduce( colorMap, ( settersAccumulator, colorContext, colorAttributeName ) => {\n\t\t\t\t\t\t\tconst upperFirstColorAttributeName = upperFirst( colorAttributeName );\n\t\t\t\t\t\t\tconst customColorAttributeName = `custom${ upperFirstColorAttributeName }`;\n\t\t\t\t\t\t\tsettersAccumulator[ `set${ upperFirstColorAttributeName }` ] =\n\t\t\t\t\t\t\t\tthis.createSetColor( colorAttributeName, customColorAttributeName );\n\t\t\t\t\t\t\treturn settersAccumulator;\n\t\t\t\t\t\t}, {} );\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetColor( colorAttributeName, customColorAttributeName ) {\n\t\t\t\t\t\treturn ( colorValue ) => {\n\t\t\t\t\t\t\tconst colorObject = getColorObjectByColorValue( this.props.colors, colorValue );\n\t\t\t\t\t\t\tthis.props.setAttributes( {\n\t\t\t\t\t\t\t\t[ colorAttributeName ]: colorObject && colorObject.slug ? colorObject.slug : undefined,\n\t\t\t\t\t\t\t\t[ customColorAttributeName ]: colorObject && colorObject.slug ? undefined : colorValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tstatic getDerivedStateFromProps( { attributes, colors }, previousState ) {\n\t\t\t\t\t\treturn reduce( colorMap, ( newState, colorContext, colorAttributeName ) => {\n\t\t\t\t\t\t\tconst colorObject = getColorObjectByAttributeValues(\n\t\t\t\t\t\t\t\tcolors,\n\t\t\t\t\t\t\t\tattributes[ colorAttributeName ],\n\t\t\t\t\t\t\t\tattributes[ `custom${ upperFirst( colorAttributeName ) }` ],\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst previousColorObject = previousState[ colorAttributeName ];\n\t\t\t\t\t\t\tconst previousColor = get( previousColorObject, [ 'color' ] );\n\t\t\t\t\t\t\t/**\n\t\t\t\t\t\t\t* The \"and previousColorObject\" condition checks that a previous color object was already computed.\n\t\t\t\t\t\t\t* At the start previousColorObject and colorValue are both equal to undefined\n\t\t\t\t\t\t\t* bus as previousColorObject does not exist we should compute the object.\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\tif ( previousColor === colorObject.color && previousColorObject ) {\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] = previousColorObject;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tnewState[ colorAttributeName ] = {\n\t\t\t\t\t\t\t\t\t...colorObject,\n\t\t\t\t\t\t\t\t\tclass: getColorClassName( colorContext, colorObject.slug ),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn newState;\n\t\t\t\t\t\t}, {} );\n\t\t\t\t\t}\n\n\t\t\t\t\trender() {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\t\tcolors: undefined,\n\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\t...this.setters,\n\t\t\t\t\t\t\t\t\tcolorUtils: this.colorUtils,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t] ),\n\t\t'withColors'\n\t);\n};\n","/**\n * External dependencies\n */\nimport tinycolor from 'tinycolor2';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Notice } from '@wordpress/components';\n\nfunction ContrastChecker( {\n\tbackgroundColor,\n\tfallbackBackgroundColor,\n\tfallbackTextColor,\n\tfontSize,\n\tisLargeText,\n\ttextColor,\n} ) {\n\tif ( ! ( backgroundColor || fallbackBackgroundColor ) || ! ( textColor || fallbackTextColor ) ) {\n\t\treturn null;\n\t}\n\tconst tinyBackgroundColor = tinycolor( backgroundColor || fallbackBackgroundColor );\n\tconst tinyTextColor = tinycolor( textColor || fallbackTextColor );\n\tconst hasTransparency = tinyBackgroundColor.getAlpha() !== 1 || tinyTextColor.getAlpha() !== 1;\n\n\tif ( hasTransparency || tinycolor.isReadable(\n\t\ttinyBackgroundColor,\n\t\ttinyTextColor,\n\t\t{ level: 'AA', size: ( isLargeText || ( isLargeText !== false && fontSize >= 18 ) ? 'large' : 'small' ) }\n\t) ) {\n\t\treturn null;\n\t}\n\tconst msg = tinyBackgroundColor.getBrightness() < tinyTextColor.getBrightness() ?\n\t\t__( 'This color combination may be hard for people to read. Try using a darker background color and/or a brighter text color.' ) :\n\t\t__( 'This color combination may be hard for people to read. Try using a brighter background color and/or a darker text color.' );\n\treturn (\n\t\t<div className=\"editor-contrast-checker\">\n\t\t\t<Notice status=\"warning\" isDismissible={ false }>\n\t\t\t\t{ msg }\n\t\t\t</Notice>\n\t\t</div>\n\t);\n}\n\nexport default ContrastChecker;\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { serialize } from '@wordpress/blocks';\nimport { documentHasSelection } from '@wordpress/dom';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nclass CopyHandler extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onCopy = this.onCopy.bind( this );\n\t\tthis.onCut = this.onCut.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener( 'copy', this.onCopy );\n\t\tdocument.addEventListener( 'cut', this.onCut );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener( 'copy', this.onCopy );\n\t\tdocument.removeEventListener( 'cut', this.onCut );\n\t}\n\n\tonCopy( event ) {\n\t\tconst { multiSelectedBlocks, selectedBlock } = this.props;\n\n\t\tif ( ! multiSelectedBlocks.length && ! selectedBlock ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Let native copy behaviour take over in input fields.\n\t\tif ( selectedBlock && documentHasSelection() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst serialized = serialize( selectedBlock || multiSelectedBlocks );\n\n\t\tevent.clipboardData.setData( 'text/plain', serialized );\n\t\tevent.clipboardData.setData( 'text/html', serialized );\n\n\t\tevent.preventDefault();\n\t}\n\n\tonCut( event ) {\n\t\tconst { multiSelectedBlockClientIds } = this.props;\n\n\t\tthis.onCopy( event );\n\n\t\tif ( multiSelectedBlockClientIds.length ) {\n\t\t\tthis.props.onRemove( multiSelectedBlockClientIds );\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetMultiSelectedBlocks,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\tgetSelectedBlock,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tmultiSelectedBlocks: getMultiSelectedBlocks(),\n\t\t\tmultiSelectedBlockClientIds: getMultiSelectedBlockClientIds(),\n\t\t\tselectedBlock: getSelectedBlock(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonRemove: dispatch( 'core/editor' ).removeBlocks,\n\t} ) ),\n] )( CopyHandler );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { getDefaultBlockName } from '@wordpress/blocks';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockDropZone from '../block-drop-zone';\nimport InserterWithShortcuts from '../inserter-with-shortcuts';\nimport Inserter from '../inserter';\n\nexport function DefaultBlockAppender( {\n\tisLocked,\n\tisVisible,\n\tonAppend,\n\tshowPrompt,\n\tplaceholder,\n\tlayout,\n\trootClientId,\n} ) {\n\tif ( isLocked || ! isVisible ) {\n\t\treturn null;\n\t}\n\n\tconst value = decodeEntities( placeholder ) || __( 'Write your story' );\n\n\t// The appender \"button\" is in-fact a text field so as to support\n\t// transitions by WritingFlow occurring by arrow key press. WritingFlow\n\t// only supports tab transitions into text fields and to the block focus\n\t// boundary.\n\t//\n\t// See: https://github.com/WordPress/gutenberg/issues/4829#issuecomment-374213658\n\t//\n\t// If it were ever to be made to be a proper `button` element, it is\n\t// important to note that `onFocus` alone would not be sufficient to\n\t// capture click events, notably in Firefox.\n\t//\n\t// See: https://gist.github.com/cvrebert/68659d0333a578d75372\n\n\treturn (\n\t\t<div data-root-client-id={ rootClientId || '' } className=\"editor-default-block-appender\">\n\t\t\t<BlockDropZone rootClientId={ rootClientId } layout={ layout } />\n\t\t\t<input\n\t\t\t\trole=\"button\"\n\t\t\t\taria-label={ __( 'Add block' ) }\n\t\t\t\tclassName=\"editor-default-block-appender__content\"\n\t\t\t\ttype=\"text\"\n\t\t\t\treadOnly\n\t\t\t\tonFocus={ onAppend }\n\t\t\t\tvalue={ showPrompt ? value : '' }\n\t\t\t/>\n\t\t\t<InserterWithShortcuts rootClientId={ rootClientId } layout={ layout } />\n\t\t\t<Inserter position=\"top right\" />\n\t\t</div>\n\t);\n}\nexport default compose(\n\twithSelect( ( select, ownProps ) => {\n\t\tconst { getBlockCount, getBlock, getEditorSettings, getTemplateLock } = select( 'core/editor' );\n\n\t\tconst isEmpty = ! getBlockCount( ownProps.rootClientId );\n\t\tconst lastBlock = getBlock( ownProps.lastBlockClientId );\n\t\tconst isLastBlockDefault = get( lastBlock, [ 'name' ] ) === getDefaultBlockName();\n\t\tconst isLastBlockValid = get( lastBlock, [ 'isValid' ] );\n\t\tconst { bodyPlaceholder } = getEditorSettings();\n\n\t\treturn {\n\t\t\tisVisible: isEmpty || ! isLastBlockDefault || ! isLastBlockValid,\n\t\t\tshowPrompt: isEmpty,\n\t\t\tisLocked: !! getTemplateLock( ownProps.rootClientId ),\n\t\t\tplaceholder: bodyPlaceholder,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => {\n\t\tconst {\n\t\t\tinsertDefaultBlock,\n\t\t\tstartTyping,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonAppend() {\n\t\t\t\tconst { layout, rootClientId } = ownProps;\n\n\t\t\t\tlet attributes;\n\t\t\t\tif ( layout ) {\n\t\t\t\t\tattributes = { layout };\n\t\t\t\t}\n\n\t\t\t\tinsertDefaultBlock( attributes, rootClientId );\n\t\t\t\tstartTyping();\n\t\t\t},\n\t\t};\n\t} ),\n)( DefaultBlockAppender );\n","/**\n * External dependencies\n */\nimport { filter } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\nfunction DocumentOutlineCheck( { blocks, children } ) {\n\tconst headings = filter( blocks, ( block ) => block.name === 'core/heading' );\n\n\tif ( headings.length < 1 ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default withSelect( ( select ) => ( {\n\tblocks: select( 'core/editor' ).getBlocks(),\n} ) )( DocumentOutlineCheck );\n","/**\n * External dependencies\n */\nimport { countBy, flatMap, get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport DocumentOutlineItem from './item';\nimport RichText from './../rich-text';\n\n/**\n * Module constants\n */\nconst emptyHeadingContent = <em>{ __( '(Empty heading)' ) }</em>;\nconst incorrectLevelContent = [\n\t<br key=\"incorrect-break\" />,\n\t<em key=\"incorrect-message\">{ __( '(Incorrect heading level)' ) }</em>,\n];\nconst singleH1Headings = [\n\t<br key=\"incorrect-break-h1\" />,\n\t<em key=\"incorrect-message-h1\">{ __( '(Your theme may already use a H1 for the post title)' ) }</em>,\n];\nconst multipleH1Headings = [\n\t<br key=\"incorrect-break-multiple-h1\" />,\n\t<em key=\"incorrect-message-multiple-h1\">{ __( '(Multiple H1 headings are not recommended)' ) }</em>,\n];\n\n/**\n * Returns an array of heading blocks enhanced with the following properties:\n * path    - An array of blocks that are ancestors of the heading starting from a top-level node.\n *           Can be an empty array if the heading is a top-level node (is not nested inside another block).\n * level   - An integer with the heading level.\n * isEmpty - Flag indicating if the heading has no content.\n *\n * @param {?Array} blocks An array of blocks.\n * @param {?Array} path   An array of blocks that are ancestors of the blocks passed as blocks.\n *\n * @return {Array} An array of heading blocks enhanced with the properties described above.\n */\nconst computeOutlineHeadings = ( blocks = [], path = [] ) => {\n\treturn flatMap( blocks, ( block = {} ) => {\n\t\tif ( block.name === 'core/heading' ) {\n\t\t\treturn {\n\t\t\t\t...block,\n\t\t\t\tpath,\n\t\t\t\tlevel: block.attributes.level,\n\t\t\t\tisEmpty: isEmptyHeading( block ),\n\t\t\t};\n\t\t}\n\t\treturn computeOutlineHeadings( block.innerBlocks, [ ...path, block ] );\n\t} );\n};\n\nconst isEmptyHeading = ( heading ) => ! heading.attributes.content || heading.attributes.content.length === 0;\n\nexport const DocumentOutline = ( { blocks = [], title, onSelect, isTitleSupported } ) => {\n\tconst headings = computeOutlineHeadings( blocks );\n\n\tif ( headings.length < 1 ) {\n\t\treturn null;\n\t}\n\n\tlet prevHeadingLevel = 1;\n\n\t// Select the corresponding block in the main editor\n\t// when clicking on a heading item from the list.\n\tconst onSelectHeading = ( clientId ) => onSelect( clientId );\n\tconst focusTitle = () => {\n\t\t// Not great but it's the simplest way to focus the title right now.\n\t\tconst titleNode = document.querySelector( '.editor-post-title__input' );\n\t\tif ( titleNode ) {\n\t\t\ttitleNode.focus();\n\t\t}\n\t};\n\n\tconst hasTitle = isTitleSupported && title;\n\tconst countByLevel = countBy( headings, 'level' );\n\tconst hasMultipleH1 = countByLevel[ 1 ] > 1;\n\n\treturn (\n\t\t<div className=\"document-outline\">\n\t\t\t<ul>\n\t\t\t\t{ hasTitle && (\n\t\t\t\t\t<DocumentOutlineItem\n\t\t\t\t\t\tlevel={ __( 'Title' ) }\n\t\t\t\t\t\tisValid\n\t\t\t\t\t\tonClick={ focusTitle }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ title }\n\t\t\t\t\t</DocumentOutlineItem>\n\t\t\t\t) }\n\t\t\t\t{ headings.map( ( item, index ) => {\n\t\t\t\t\t// Headings remain the same, go up by one, or down by any amount.\n\t\t\t\t\t// Otherwise there are missing levels.\n\t\t\t\t\tconst isIncorrectLevel = item.level > prevHeadingLevel + 1;\n\n\t\t\t\t\tconst isValid = (\n\t\t\t\t\t\t! item.isEmpty &&\n\t\t\t\t\t\t! isIncorrectLevel &&\n\t\t\t\t\t\t!! item.level &&\n\t\t\t\t\t\t( item.level !== 1 || ( ! hasMultipleH1 && ! hasTitle ) )\n\t\t\t\t\t);\n\t\t\t\t\tprevHeadingLevel = item.level;\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<DocumentOutlineItem\n\t\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t\tlevel={ `H${ item.level }` }\n\t\t\t\t\t\t\tisValid={ isValid }\n\t\t\t\t\t\t\tonClick={ () => onSelectHeading( item.clientId ) }\n\t\t\t\t\t\t\tpath={ item.path }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ item.isEmpty ?\n\t\t\t\t\t\t\t\temptyHeadingContent :\n\t\t\t\t\t\t\t\t<RichText.Content\n\t\t\t\t\t\t\t\t\ttagName=\"span\"\n\t\t\t\t\t\t\t\t\tvalue={ item.attributes.content }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{ isIncorrectLevel && incorrectLevelContent }\n\t\t\t\t\t\t\t{ item.level === 1 && hasMultipleH1 && multipleH1Headings }\n\t\t\t\t\t\t\t{ hasTitle && item.level === 1 && ! hasMultipleH1 && singleH1Headings }\n\t\t\t\t\t\t</DocumentOutlineItem>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getEditedPostAttribute, getBlocks } = select( 'core/editor' );\n\t\tconst { getPostType } = select( 'core' );\n\t\tconst postType = getPostType( getEditedPostAttribute( 'type' ) );\n\n\t\treturn {\n\t\t\ttitle: getEditedPostAttribute( 'title' ),\n\t\t\tblocks: getBlocks(),\n\t\t\tisTitleSupported: get( postType, [ 'supports', 'title' ], false ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { selectBlock } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonSelect: selectBlock,\n\t\t};\n\t} )\n)( DocumentOutline );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport BlockTitle from '../block-title';\n\nconst TableOfContentsItem = ( {\n\tchildren,\n\tisValid,\n\tlevel,\n\tonClick,\n\tpath = [],\n} ) => (\n\t<li\n\t\tclassName={ classnames(\n\t\t\t'document-outline__item',\n\t\t\t`is-${ level.toLowerCase() }`,\n\t\t\t{\n\t\t\t\t'is-invalid': ! isValid,\n\t\t\t}\n\t\t) }\n\t>\n\t\t<button\n\t\t\tclassName=\"document-outline__button\"\n\t\t\tonClick={ onClick }\n\t\t>\n\t\t\t<span className=\"document-outline__emdash\" aria-hidden=\"true\"></span>\n\t\t\t{\n\t\t\t\t// path is an array of nodes that are ancestors of the heading starting in the top level node.\n\t\t\t\t// This mapping renders each ancestor to make it easier for the user to know where the headings are nested.\n\t\t\t\tpath.map( ( { clientId }, index ) => (\n\t\t\t\t\t<strong key={ index } className=\"document-outline__level\">\n\t\t\t\t\t\t<BlockTitle clientId={ clientId } />\n\t\t\t\t\t</strong>\n\t\t\t\t) )\n\t\t\t}\n\t\t\t<strong className=\"document-outline__level\">\n\t\t\t\t{ level }\n\t\t\t</strong>\n\t\t\t<span className=\"document-outline__item-content\">\n\t\t\t\t{ children }\n\t\t\t</span>\n\t\t\t<span className=\"screen-reader-text\">{ __( '(Click to focus this heading)' ) }</span>\n\t\t</button>\n\t</li>\n);\n\nexport default TableOfContentsItem;\n","/**\n * External dependencies\n */\nimport { first, last, some, flow } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component, Fragment } from '@wordpress/element';\nimport { KeyboardShortcuts } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { rawShortcut, displayShortcut } from '@wordpress/keycodes';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockActions from '../block-actions';\n\nconst preventDefault = ( event ) => {\n\tevent.preventDefault();\n\treturn event;\n};\n\nexport const shortcuts = {\n\tduplicate: {\n\t\traw: rawShortcut.primaryShift( 'd' ),\n\t\tdisplay: displayShortcut.primaryShift( 'd' ),\n\t},\n\tremoveBlock: {\n\t\traw: rawShortcut.access( 'z' ),\n\t\tdisplay: displayShortcut.access( 'z' ),\n\t},\n\tinsertBefore: {\n\t\traw: rawShortcut.primaryAlt( 't' ),\n\t\tdisplay: displayShortcut.primaryAlt( 't' ),\n\t},\n\tinsertAfter: {\n\t\traw: rawShortcut.primaryAlt( 'y' ),\n\t\tdisplay: displayShortcut.primaryAlt( 'y' ),\n\t},\n};\n\nclass EditorGlobalKeyboardShortcuts extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.selectAll = this.selectAll.bind( this );\n\t\tthis.undoOrRedo = this.undoOrRedo.bind( this );\n\t\tthis.save = this.save.bind( this );\n\t\tthis.deleteSelectedBlocks = this.deleteSelectedBlocks.bind( this );\n\t\tthis.clearMultiSelection = this.clearMultiSelection.bind( this );\n\t}\n\n\tselectAll( event ) {\n\t\tconst { rootBlocksClientIds, onMultiSelect } = this.props;\n\t\tevent.preventDefault();\n\t\tonMultiSelect( first( rootBlocksClientIds ), last( rootBlocksClientIds ) );\n\t}\n\n\tundoOrRedo( event ) {\n\t\tconst { onRedo, onUndo } = this.props;\n\n\t\tif ( event.shiftKey ) {\n\t\t\tonRedo();\n\t\t} else {\n\t\t\tonUndo();\n\t\t}\n\n\t\tevent.preventDefault();\n\t}\n\n\tsave( event ) {\n\t\tevent.preventDefault();\n\t\tthis.props.onSave();\n\t}\n\n\tdeleteSelectedBlocks( event ) {\n\t\tconst { selectedBlockClientIds, hasMultiSelection, onRemove, isLocked } = this.props;\n\t\tif ( hasMultiSelection ) {\n\t\t\tevent.preventDefault();\n\t\t\tif ( ! isLocked ) {\n\t\t\t\tonRemove( selectedBlockClientIds );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Clears current multi-selection, if one exists.\n\t */\n\tclearMultiSelection() {\n\t\tconst { hasMultiSelection, clearSelectedBlock } = this.props;\n\t\tif ( hasMultiSelection ) {\n\t\t\tclearSelectedBlock();\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { selectedBlockClientIds } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t[ rawShortcut.primary( 'a' ) ]: this.selectAll,\n\t\t\t\t\t\t[ rawShortcut.primary( 'z' ) ]: this.undoOrRedo,\n\t\t\t\t\t\t[ rawShortcut.primaryShift( 'z' ) ]: this.undoOrRedo,\n\t\t\t\t\t\tbackspace: this.deleteSelectedBlocks,\n\t\t\t\t\t\tdel: this.deleteSelectedBlocks,\n\t\t\t\t\t\tescape: this.clearMultiSelection,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\tbindGlobal\n\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t[ rawShortcut.primary( 's' ) ]: this.save,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t{ selectedBlockClientIds.length > 0 && (\n\t\t\t\t\t<BlockActions clientIds={ selectedBlockClientIds }>\n\t\t\t\t\t\t{ ( { onDuplicate, onRemove, onInsertAfter, onInsertBefore } ) => (\n\t\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\t\tbindGlobal\n\t\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t\t// Prevents bookmark all Tabs shortcut in Chrome when devtools are closed.\n\t\t\t\t\t\t\t\t\t// Prevents reposition Chrome devtools pane shortcut when devtools are open.\n\t\t\t\t\t\t\t\t\t[ shortcuts.duplicate.raw ]: flow( preventDefault, onDuplicate ),\n\n\t\t\t\t\t\t\t\t\t// Does not clash with any known browser/native shortcuts, but preventDefault\n\t\t\t\t\t\t\t\t\t// is used to prevent any obscure unknown shortcuts from triggering.\n\t\t\t\t\t\t\t\t\t[ shortcuts.removeBlock.raw ]: flow( preventDefault, onRemove ),\n\n\t\t\t\t\t\t\t\t\t// Prevent 'view recently closed tabs' in Opera using preventDefault.\n\t\t\t\t\t\t\t\t\t[ shortcuts.insertBefore.raw ]: flow( preventDefault, onInsertBefore ),\n\n\t\t\t\t\t\t\t\t\t// Does not clash with any known browser/native shortcuts, but preventDefault\n\t\t\t\t\t\t\t\t\t// is used to prevent any obscure unknown shortcuts from triggering.\n\t\t\t\t\t\t\t\t\t[ shortcuts.insertAfter.raw ]: flow( preventDefault, onInsertAfter ),\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</BlockActions>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetBlockOrder,\n\t\t\tgetMultiSelectedBlockClientIds,\n\t\t\thasMultiSelection,\n\t\t\tisEditedPostDirty,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetTemplateLock,\n\t\t\tgetSelectedBlock,\n\t\t} = select( 'core/editor' );\n\t\tconst block = getSelectedBlock();\n\t\tconst selectedBlockClientIds = block ? [ block.clientId ] : getMultiSelectedBlockClientIds();\n\n\t\treturn {\n\t\t\trootBlocksClientIds: getBlockOrder(),\n\t\t\thasMultiSelection: hasMultiSelection(),\n\t\t\tisLocked: some(\n\t\t\t\tselectedBlockClientIds,\n\t\t\t\t( clientId ) => !! getTemplateLock( getBlockRootClientId( clientId ) )\n\t\t\t),\n\t\t\tisDirty: isEditedPostDirty(),\n\t\t\tselectedBlockClientIds,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => {\n\t\tconst {\n\t\t\tclearSelectedBlock,\n\t\t\tmultiSelect,\n\t\t\tredo,\n\t\t\tundo,\n\t\t\tremoveBlocks,\n\t\t\tsavePost,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonSave() {\n\t\t\t\t// TODO: This should be handled in the `savePost` effect in\n\t\t\t\t// considering `isSaveable`. See note on `isEditedPostSaveable`\n\t\t\t\t// selector about dirtiness and meta-boxes. When removing, also\n\t\t\t\t// remember to remove `isDirty` prop passing from `withSelect`.\n\t\t\t\t//\n\t\t\t\t// See: `isEditedPostSaveable`\n\t\t\t\tif ( ! ownProps.isDirty ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsavePost();\n\t\t\t},\n\t\t\tclearSelectedBlock,\n\t\t\tonMultiSelect: multiSelect,\n\t\t\tonRedo: redo,\n\t\t\tonUndo: undo,\n\t\t\tonRemove: removeBlocks,\n\t\t};\n\t} ),\n] )( EditorGlobalKeyboardShortcuts );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { IconButton } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { displayShortcut } from '@wordpress/keycodes';\n\nfunction EditorHistoryRedo( { hasRedo, redo } ) {\n\treturn (\n\t\t<IconButton\n\t\t\ticon=\"redo\"\n\t\t\tlabel={ __( 'Redo' ) }\n\t\t\tshortcut={ displayShortcut.primaryShift( 'z' ) }\n\t\t\tdisabled={ ! hasRedo }\n\t\t\tonClick={ redo }\n\t\t\tclassName=\"editor-history__redo\"\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => ( {\n\t\thasRedo: select( 'core/editor' ).hasEditorRedo(),\n\t} ) ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tredo: () => dispatch( 'core/editor' ).redo(),\n\t} ) ),\n] )( EditorHistoryRedo );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { IconButton } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { displayShortcut } from '@wordpress/keycodes';\n\nfunction EditorHistoryUndo( { hasUndo, undo } ) {\n\treturn (\n\t\t<IconButton\n\t\t\ticon=\"undo\"\n\t\t\tlabel={ __( 'Undo' ) }\n\t\t\tshortcut={ displayShortcut.primary( 'z' ) }\n\t\t\tdisabled={ ! hasUndo }\n\t\t\tonClick={ undo }\n\t\t\tclassName=\"editor-history__undo\"\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => ( {\n\t\thasUndo: select( 'core/editor' ).hasEditorUndo(),\n\t} ) ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tundo: () => dispatch( 'core/editor' ).undo(),\n\t} ) ),\n] )( EditorHistoryUndo );\n","/**\n * WordPress dependencies\n */\nimport { NoticeList } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport TemplateValidationNotice from '../template-validation-notice';\n\nfunction EditorNotices( props ) {\n\treturn (\n\t\t<NoticeList { ...props }>\n\t\t\t<TemplateValidationNotice />\n\t\t</NoticeList>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => ( {\n\t\tnotices: select( 'core/editor' ).getNotices(),\n\t} ) ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonRemove: dispatch( 'core/editor' ).removeNotice,\n\t} ) ),\n] )( EditorNotices );\n","/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button, ClipboardButton } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { Warning } from '../';\nimport { getEditedPostContent } from '../../store/selectors';\n\nclass ErrorBoundary extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.reboot = this.reboot.bind( this );\n\t\tthis.getContent = this.getContent.bind( this );\n\n\t\tthis.state = {\n\t\t\terror: null,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tthis.setState( { error } );\n\t}\n\n\treboot() {\n\t\tthis.props.onError();\n\t}\n\n\tgetContent() {\n\t\ttry {\n\t\t\treturn getEditedPostContent( this.context.store.getState() );\n\t\t} catch ( error ) {}\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\tif ( ! error ) {\n\t\t\treturn this.props.children;\n\t\t}\n\n\t\treturn (\n\t\t\t<Warning\n\t\t\t\tclassName=\"editor-error-boundary\"\n\t\t\t\tactions={ [\n\t\t\t\t\t<Button key=\"recovery\" onClick={ this.reboot } isLarge>\n\t\t\t\t\t\t{ __( 'Attempt Recovery' ) }\n\t\t\t\t\t</Button>,\n\t\t\t\t\t<ClipboardButton key=\"copy-post\" text={ this.getContent } isLarge>\n\t\t\t\t\t\t{ __( 'Copy Post Text' ) }\n\t\t\t\t\t</ClipboardButton>,\n\t\t\t\t\t<ClipboardButton key=\"copy-error\" text={ error.stack } isLarge>\n\t\t\t\t\t\t{ __( 'Copy Error' ) }\n\t\t\t\t\t</ClipboardButton>,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t{ __( 'The editor has encountered an unexpected error.' ) }\n\t\t\t</Warning>\n\t\t);\n\t}\n}\n\nErrorBoundary.contextTypes = {\n\tstore: noop,\n};\n\nexport default ErrorBoundary;\n","/**\n * WordPress dependencies\n */\nimport { FontSizePicker } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst {\n\t\t\tdisableCustomFontSizes,\n\t\t\tfontSizes,\n\t\t} = select( 'core/editor' ).getEditorSettings();\n\n\t\treturn {\n\t\t\tdisableCustomFontSizes,\n\t\t\tfontSizes,\n\t\t};\n\t}\n)( FontSizePicker );\n","export { getFontSize, getFontSizeClass } from './utils';\nexport { default as FontSizePicker } from './font-size-picker';\nexport { default as withFontSizes } from './with-font-sizes';\n","/**\n * External dependencies\n */\nimport { find, kebabCase } from 'lodash';\n\n/**\n *  Returns the font size object based on an array of named font sizes and the namedFontSize and customFontSize values.\n * \tIf namedFontSize is undefined or not found in fontSizes an object with just the size value based on customFontSize is returned.\n *\n * @param {Array}   fontSizes               Array of font size objects containing at least the \"name\" and \"size\" values as properties.\n * @param {?string} fontSizeAttribute       Content of the font size attribute (slug).\n * @param {?number} customFontSizeAttribute Contents of the custom font size attribute (value).\n *\n * @return {?string} If fontSizeAttribute is set and an equal slug is found in fontSizes it returns the font size object for that slug.\n * \t\t\t\t\t Otherwise, an object with just the size value based on customFontSize is returned.\n */\nexport const getFontSize = ( fontSizes, fontSizeAttribute, customFontSizeAttribute ) => {\n\tif ( fontSizeAttribute ) {\n\t\tconst fontSizeObject = find( fontSizes, { slug: fontSizeAttribute } );\n\t\tif ( fontSizeObject ) {\n\t\t\treturn fontSizeObject;\n\t\t}\n\t}\n\treturn {\n\t\tsize: customFontSizeAttribute,\n\t};\n};\n\n/**\n * Returns a class based on fontSizeName.\n *\n * @param {string} fontSizeSlug    Slug of the fontSize.\n *\n * @return {string} String with the class corresponding to the fontSize passed.\n *                  The class is generated by appending 'has-' followed by fontSizeSlug in kebabCase and ending with '-font-size'.\n */\nexport function getFontSizeClass( fontSizeSlug ) {\n\tif ( ! fontSizeSlug ) {\n\t\treturn;\n\t}\n\n\treturn `has-${ kebabCase( fontSizeSlug ) }-font-size`;\n}\n","/**\n * External dependencies\n */\nimport { find, pickBy, reduce, some, upperFirst } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent, compose } from '@wordpress/compose';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { getFontSize, getFontSizeClass } from './utils';\n\n/**\n * Higher-order component, which handles font size logic for class generation,\n * font size value retrieval, and font size change handling.\n *\n * @param {...(object|string)} args The arguments should all be strings\n *                                  Each string contains the font size attribute name e.g: 'fontSize'.\n *\n * @return {Function} Higher-order component.\n */\nexport default ( ...fontSizeNames ) => {\n\t/*\n\t* Computes an object whose key is the font size attribute name as passed in the array,\n\t* and the value is the custom font size attribute name.\n\t* Custom font size is automatically compted by appending custom followed by the font size attribute name in with the first letter capitalized.\n\t*/\n\tconst fontSizeAttributeNames = reduce( fontSizeNames, ( fontSizeAttributeNamesAccumulator, fontSizeAttributeName ) => {\n\t\tfontSizeAttributeNamesAccumulator[ fontSizeAttributeName ] = `custom${ upperFirst( fontSizeAttributeName ) }`;\n\t\treturn fontSizeAttributeNamesAccumulator;\n\t}, {} );\n\n\treturn createHigherOrderComponent(\n\t\tcompose( [\n\t\t\twithSelect( ( select ) => {\n\t\t\t\tconst { fontSizes } = select( 'core/editor' ).getEditorSettings();\n\t\t\t\treturn {\n\t\t\t\t\tfontSizes,\n\t\t\t\t};\n\t\t\t} ),\n\t\t\t( WrappedComponent ) => {\n\t\t\t\treturn class extends Component {\n\t\t\t\t\tconstructor( props ) {\n\t\t\t\t\t\tsuper( props );\n\n\t\t\t\t\t\tthis.setters = this.createSetters();\n\n\t\t\t\t\t\tthis.state = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetters() {\n\t\t\t\t\t\treturn reduce( fontSizeAttributeNames, ( settersAccumulator, customFontSizeAttributeName, fontSizeAttributeName ) => {\n\t\t\t\t\t\t\tconst upperFirstFontSizeAttributeName = upperFirst( fontSizeAttributeName );\n\t\t\t\t\t\t\tsettersAccumulator[ `set${ upperFirstFontSizeAttributeName }` ] =\n\t\t\t\t\t\t\t\tthis.createSetFontSize( fontSizeAttributeName, customFontSizeAttributeName );\n\t\t\t\t\t\t\treturn settersAccumulator;\n\t\t\t\t\t\t}, {} );\n\t\t\t\t\t}\n\n\t\t\t\t\tcreateSetFontSize( fontSizeAttributeName, customFontSizeAttributeName ) {\n\t\t\t\t\t\treturn ( fontSizeValue ) => {\n\t\t\t\t\t\t\tconst fontSizeObject = find( this.props.fontSizes, { size: fontSizeValue } );\n\t\t\t\t\t\t\tthis.props.setAttributes( {\n\t\t\t\t\t\t\t\t[ fontSizeAttributeName ]: fontSizeObject && fontSizeObject.slug ? fontSizeObject.slug : undefined,\n\t\t\t\t\t\t\t\t[ customFontSizeAttributeName ]: fontSizeObject && fontSizeObject.slug ? undefined : fontSizeValue,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\tstatic getDerivedStateFromProps( { attributes, fontSizes }, previousState ) {\n\t\t\t\t\t\tconst didAttributesChange = ( customFontSizeAttributeName, fontSizeAttributeName ) => {\n\t\t\t\t\t\t\tif ( previousState[ fontSizeAttributeName ] ) {\n\t\t\t\t\t\t\t\t// if new font size is name compare with the previous slug\n\t\t\t\t\t\t\t\tif ( attributes[ fontSizeAttributeName ] ) {\n\t\t\t\t\t\t\t\t\treturn attributes[ fontSizeAttributeName ] !== previousState[ fontSizeAttributeName ].slug;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// if font size is not named, update when the font size value changes.\n\t\t\t\t\t\t\t\treturn previousState[ fontSizeAttributeName ].size !== attributes[ customFontSizeAttributeName ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// in this case we need to build the font size object\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif ( ! some( fontSizeAttributeNames, didAttributesChange ) ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst newState = reduce(\n\t\t\t\t\t\t\tpickBy( fontSizeAttributeNames, didAttributesChange ),\n\t\t\t\t\t\t\t( newStateAccumulator, customFontSizeAttributeName, fontSizeAttributeName ) => {\n\t\t\t\t\t\t\t\tconst fontSizeAttributeValue = attributes[ fontSizeAttributeName ];\n\t\t\t\t\t\t\t\tconst fontSizeObject = getFontSize(\n\t\t\t\t\t\t\t\t\tfontSizes,\n\t\t\t\t\t\t\t\t\tfontSizeAttributeValue,\n\t\t\t\t\t\t\t\t\tattributes[ customFontSizeAttributeName ]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tnewStateAccumulator[ fontSizeAttributeName ] = {\n\t\t\t\t\t\t\t\t\t...fontSizeObject,\n\t\t\t\t\t\t\t\t\tclass: getFontSizeClass( fontSizeAttributeValue ),\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\treturn newStateAccumulator;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...previousState,\n\t\t\t\t\t\t\t...newState,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\trender() {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<WrappedComponent\n\t\t\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\t\t\t...this.props,\n\t\t\t\t\t\t\t\t\tfontSizes: undefined,\n\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\t...this.setters,\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t] ),\n\t\t'withFontSizes'\n\t);\n};\n","/**\n * External dependencies\n */\nimport { reduce } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\n\n/**\n * Component which renders a div with passed props applied except the optional\n * `childHandledEvents` prop. Event prop handlers are replaced with a proxying\n * event handler to capture and prevent events from being handled by ancestor\n * `IgnoreNestedEvents` elements by testing the presence of a private property\n * assigned on the event object.\n *\n * Optionally accepts an `childHandledEvents` prop array, which can be used in\n * instances where an inner `IgnoreNestedEvents` element exists and the outer\n * element should stop propagation but not invoke a callback handler, since it\n * would be assumed these are invoked by the child element.\n *\n * @type {Component}\n */\nclass IgnoreNestedEvents extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.proxyEvent = this.proxyEvent.bind( this );\n\n\t\t// The event map is responsible for tracking an event type to a React\n\t\t// component prop name, since it is easy to determine event type from\n\t\t// a React prop name, but not the other way around.\n\t\tthis.eventMap = {};\n\t}\n\n\t/**\n\t * General event handler which only calls to its original props callback if\n\t * it has not already been handled by a descendant IgnoreNestedEvents.\n\t *\n\t * @param {Event} event Event object.\n\t *\n\t * @return {void}\n\t */\n\tproxyEvent( event ) {\n\t\tconst isHandled = !! event.nativeEvent._blockHandled;\n\n\t\t// Assign into the native event, since React will reuse their synthetic\n\t\t// event objects and this property assignment could otherwise leak.\n\t\t//\n\t\t// See: https://reactjs.org/docs/events.html#event-pooling\n\t\tevent.nativeEvent._blockHandled = true;\n\n\t\t// Invoke original prop handler\n\t\tlet propKey = this.eventMap[ event.type ];\n\n\t\t// If already handled (i.e. assume nested block), only invoke a\n\t\t// corresponding \"Handled\"-suffixed prop callback.\n\t\tif ( isHandled ) {\n\t\t\tpropKey += 'Handled';\n\t\t}\n\n\t\tif ( this.props[ propKey ] ) {\n\t\t\tthis.props[ propKey ]( event );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { childHandledEvents = [], ...props } = this.props;\n\n\t\tconst eventHandlers = reduce( [\n\t\t\t...childHandledEvents,\n\t\t\t...Object.keys( props ),\n\t\t], ( result, key ) => {\n\t\t\t// Try to match prop key as event handler\n\t\t\tconst match = key.match( /^on([A-Z][a-zA-Z]+?)(Handled)?$/ );\n\t\t\tif ( match ) {\n\t\t\t\tconst isHandledProp = !! match[ 2 ];\n\t\t\t\tif ( isHandledProp ) {\n\t\t\t\t\t// Avoid assigning through the invalid prop key. This\n\t\t\t\t\t// assumes mutation of shallow clone by above spread.\n\t\t\t\t\tdelete props[ key ];\n\t\t\t\t}\n\n\t\t\t\t// Re-map the prop to the local proxy handler to check whether\n\t\t\t\t// the event has already been handled.\n\t\t\t\tconst proxiedPropName = 'on' + match[ 1 ];\n\t\t\t\tresult[ proxiedPropName ] = this.proxyEvent;\n\n\t\t\t\t// Assign event -> propName into an instance variable, so as to\n\t\t\t\t// avoid re-renders which could be incurred either by setState\n\t\t\t\t// or in mapping values to a newly created function.\n\t\t\t\tthis.eventMap[ match[ 1 ].toLowerCase() ] = proxiedPropName;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {} );\n\n\t\treturn <div { ...props } { ...eventHandlers } />;\n\t}\n}\n\nexport default IgnoreNestedEvents;\n","// Block Creation Components\nexport { default as Autocomplete } from './autocomplete';\nexport * from './autocompleters';\nexport { default as AlignmentToolbar } from './alignment-toolbar';\nexport { default as BlockAlignmentToolbar } from './block-alignment-toolbar';\nexport { default as BlockControls } from './block-controls';\nexport { default as BlockEdit } from './block-edit';\nexport { default as BlockFormatControls } from './block-format-controls';\nexport { default as BlockNavigationDropdown } from './block-navigation/dropdown';\nexport { default as BlockIcon } from './block-icon';\nexport { default as ColorPalette } from './color-palette';\nexport { default as withColorContext } from './color-palette/with-color-context';\nexport * from './colors';\nexport { default as ContrastChecker } from './contrast-checker';\nexport * from './font-sizes';\nexport { default as InnerBlocks } from './inner-blocks';\nexport { default as InspectorAdvancedControls } from './inspector-advanced-controls';\nexport { default as InspectorControls } from './inspector-controls';\nexport { default as PanelColor } from './panel-color';\nexport { default as PanelColorSettings } from './panel-color-settings';\nexport { default as PlainText } from './plain-text';\nexport { default as RichText } from './rich-text';\nexport { default as ServerSideRender } from './server-side-render';\nexport { default as MediaPlaceholder } from './media-placeholder';\nexport { default as MediaUpload } from './media-upload';\nexport { default as URLInput } from './url-input';\nexport { default as URLInputButton } from './url-input/button';\nexport { default as URLPopover } from './url-popover';\n\n// Post Related Components\nexport { default as AutosaveMonitor } from './autosave-monitor';\nexport { default as DocumentOutline } from './document-outline';\nexport { default as DocumentOutlineCheck } from './document-outline/check';\nexport { default as EditorGlobalKeyboardShortcuts } from './editor-global-keyboard-shortcuts';\nexport { default as EditorHistoryRedo } from './editor-history/redo';\nexport { default as EditorHistoryUndo } from './editor-history/undo';\nexport { default as EditorNotices } from './editor-notices';\nexport { default as PageAttributesCheck } from './page-attributes/check';\nexport { default as PageAttributesOrder } from './page-attributes/order';\nexport { default as PageAttributesParent } from './page-attributes/parent';\nexport { default as PageTemplate } from './page-attributes/template';\nexport { default as PostAuthor } from './post-author';\nexport { default as PostAuthorCheck } from './post-author/check';\nexport { default as PostComments } from './post-comments';\nexport { default as PostExcerpt } from './post-excerpt';\nexport { default as PostExcerptCheck } from './post-excerpt/check';\nexport { default as PostFeaturedImage } from './post-featured-image';\nexport { default as PostFeaturedImageCheck } from './post-featured-image/check';\nexport { default as PostFormat } from './post-format';\nexport { default as PostFormatCheck } from './post-format/check';\nexport { default as PostLastRevision } from './post-last-revision';\nexport { default as PostLastRevisionCheck } from './post-last-revision/check';\nexport { default as PostLockedModal } from './post-locked-modal';\nexport { default as PostPendingStatus } from './post-pending-status';\nexport { default as PostPendingStatusCheck } from './post-pending-status/check';\nexport { default as PostPingbacks } from './post-pingbacks';\nexport { default as PostPreviewButton } from './post-preview-button';\nexport { default as PostPublishButton } from './post-publish-button';\nexport { default as PostPublishButtonLabel } from './post-publish-button/label';\nexport { default as PostPublishPanel } from './post-publish-panel';\nexport { default as PostPublishPanelToggle } from './post-publish-panel/toggle';\nexport { default as PostSavedState } from './post-saved-state';\nexport { default as PostSchedule } from './post-schedule';\nexport { default as PostScheduleCheck } from './post-schedule/check';\nexport { default as PostScheduleLabel } from './post-schedule/label';\nexport { default as PostSticky } from './post-sticky';\nexport { default as PostStickyCheck } from './post-sticky/check';\nexport { default as PostSwitchToDraftButton } from './post-switch-to-draft-button';\nexport { default as PostTaxonomies } from './post-taxonomies';\nexport { default as PostTaxonomiesCheck } from './post-taxonomies/check';\nexport { default as PostTextEditor } from './post-text-editor';\nexport { default as PostTitle } from './post-title';\nexport { default as PostTrash } from './post-trash';\nexport { default as PostTrashCheck } from './post-trash/check';\nexport { default as PostTypeSupportCheck } from './post-type-support-check';\nexport { default as PostVisibility } from './post-visibility';\nexport { default as PostVisibilityLabel } from './post-visibility/label';\nexport { default as PostVisibilityCheck } from './post-visibility/check';\nexport { default as TableOfContents } from './table-of-contents';\nexport { default as UnsavedChangesWarning } from './unsaved-changes-warning';\nexport { default as WordCount } from './word-count';\n\n// Content Related Components\nexport { default as BlockInspector } from './block-inspector';\nexport { default as BlockList } from './block-list';\nexport { default as BlockMover } from './block-mover';\nexport { default as BlockSelectionClearer } from './block-selection-clearer';\nexport { default as BlockSettingsMenu } from './block-settings-menu';\nexport { default as _BlockSettingsMenuFirstItem } from './block-settings-menu/block-settings-menu-first-item';\nexport { default as _BlockSettingsMenuPluginsExtension } from './block-settings-menu/block-settings-menu-plugins-extension';\nexport { default as BlockTitle } from './block-title';\nexport { default as BlockToolbar } from './block-toolbar';\nexport { default as CopyHandler } from './copy-handler';\nexport { default as DefaultBlockAppender } from './default-block-appender';\nexport { default as ErrorBoundary } from './error-boundary';\nexport { default as Inserter } from './inserter';\nexport { default as MultiBlocksSwitcher } from './block-switcher/multi-blocks-switcher';\nexport { default as MultiSelectScrollIntoView } from './multi-select-scroll-into-view';\nexport { default as NavigableToolbar } from './navigable-toolbar';\nexport { default as ObserveTyping } from './observe-typing';\nexport { default as PreserveScrollInReorder } from './preserve-scroll-in-reorder';\nexport { default as SkipToSelectedBlock } from './skip-to-selected-block';\nexport { default as Warning } from './warning';\nexport { default as WritingFlow } from './writing-flow';\n\n// State Related Components\nexport { default as EditorProvider } from './provider';\n","/**\n * External dependencies\n */\nimport { pick, isEqual, map } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { withViewportMatch } from '@wordpress/viewport';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { synchronizeBlocksWithTemplate, withBlockContentContext } from '@wordpress/blocks';\nimport isShallowEqual from '@wordpress/is-shallow-equal';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockList from '../block-list';\nimport { withBlockEditContext } from '../block-edit/context';\n\nclass InnerBlocks extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.updateNestedSettings();\n\t}\n\n\tgetTemplateLock() {\n\t\tconst {\n\t\t\ttemplateLock,\n\t\t\tparentLock,\n\t\t} = this.props;\n\t\treturn templateLock === undefined ? parentLock : templateLock;\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { innerBlocks } = this.props.block;\n\t\t// only synchronize innerBlocks with template if innerBlocks are empty or a locking all exists\n\t\tif ( innerBlocks.length === 0 || this.getTemplateLock() === 'all' ) {\n\t\t\treturn \tthis.synchronizeBlocksWithTemplate();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { template, block } = this.props;\n\t\tconst { innerBlocks } = block;\n\n\t\tthis.updateNestedSettings();\n\t\t// only synchronize innerBlocks with template if innerBlocks are empty or a locking all exists\n\t\tif ( innerBlocks.length === 0 || this.getTemplateLock() === 'all' ) {\n\t\t\tconst hasTemplateChanged = ! isEqual( template, prevProps.template );\n\t\t\tif ( hasTemplateChanged ) {\n\t\t\t\tthis.synchronizeBlocksWithTemplate();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Called on mount or when a mismatch exists between the templates and\n\t * inner blocks, synchronizes inner blocks with the template, replacing\n\t * current blocks.\n\t */\n\tsynchronizeBlocksWithTemplate() {\n\t\tconst { template, block, replaceInnerBlocks } = this.props;\n\t\tconst { innerBlocks } = block;\n\n\t\t// Synchronize with templates. If the next set differs, replace.\n\t\tconst nextBlocks = synchronizeBlocksWithTemplate( innerBlocks, template );\n\t\tif ( ! isEqual( nextBlocks, innerBlocks\t) ) {\n\t\t\treplaceInnerBlocks( nextBlocks );\n\t\t}\n\t}\n\n\tupdateNestedSettings() {\n\t\tconst {\n\t\t\tblockListSettings,\n\t\t\tallowedBlocks,\n\t\t\tupdateNestedSettings,\n\t\t} = this.props;\n\n\t\tconst newSettings = {\n\t\t\tallowedBlocks,\n\t\t\ttemplateLock: this.getTemplateLock(),\n\t\t};\n\n\t\tif ( ! isShallowEqual( blockListSettings, newSettings ) ) {\n\t\t\tupdateNestedSettings( newSettings );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tclientId,\n\t\t\tlayouts,\n\t\t\tallowedBlocks,\n\t\t\ttemplateLock,\n\t\t\ttemplate,\n\t\t\tisSmallScreen,\n\t\t\tisSelectedBlockInRoot,\n\t\t} = this.props;\n\n\t\tconst classes = classnames( 'editor-inner-blocks', {\n\t\t\t'has-overlay': isSmallScreen && ! isSelectedBlockInRoot,\n\t\t} );\n\n\t\treturn (\n\t\t\t<div className={ classes }>\n\t\t\t\t<BlockList\n\t\t\t\t\trootClientId={ clientId }\n\t\t\t\t\t{ ...{ layouts, allowedBlocks, templateLock, template } }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nInnerBlocks = compose( [\n\twithBlockEditContext( ( context ) => pick( context, [ 'clientId' ] ) ),\n\twithViewportMatch( { isSmallScreen: '< medium' } ),\n\twithSelect( ( select, ownProps ) => {\n\t\tconst {\n\t\t\tisBlockSelected,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetBlock,\n\t\t\tgetBlockListSettings,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetTemplateLock,\n\t\t} = select( 'core/editor' );\n\t\tconst { clientId } = ownProps;\n\t\tconst parentClientId = getBlockRootClientId( clientId );\n\t\treturn {\n\t\t\tisSelectedBlockInRoot: isBlockSelected( clientId ) || hasSelectedInnerBlock( clientId ),\n\t\t\tblock: getBlock( clientId ),\n\t\t\tblockListSettings: getBlockListSettings( clientId ),\n\t\t\tparentLock: getTemplateLock( parentClientId ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => {\n\t\tconst {\n\t\t\treplaceBlocks,\n\t\t\tinsertBlocks,\n\t\t\tupdateBlockListSettings,\n\t\t} = dispatch( 'core/editor' );\n\t\tconst { block, clientId } = ownProps;\n\n\t\treturn {\n\t\t\treplaceInnerBlocks( blocks ) {\n\t\t\t\tconst clientIds = map( block.innerBlocks, 'clientId' );\n\t\t\t\tif ( clientIds.length ) {\n\t\t\t\t\treplaceBlocks( clientIds, blocks );\n\t\t\t\t} else {\n\t\t\t\t\tinsertBlocks( blocks, undefined, clientId );\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdateNestedSettings( settings ) {\n\t\t\t\tdispatch( updateBlockListSettings( clientId, settings ) );\n\t\t\t},\n\t\t};\n\t} ),\n] )( InnerBlocks );\n\nInnerBlocks.Content = withBlockContentContext(\n\t( { BlockContent } ) => <BlockContent />\n);\n\nexport default InnerBlocks;\n","/**\n * External dependencies\n */\nimport { filter, isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createBlock, getDefaultBlockName } from '@wordpress/blocks';\nimport { compose } from '@wordpress/compose';\nimport { IconButton } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport BlockIcon from '../block-icon';\n\nfunction InserterWithShortcuts( { items, isLocked, onInsert } ) {\n\tif ( isLocked ) {\n\t\treturn null;\n\t}\n\n\tconst itemsWithoutDefaultBlock = filter( items, ( item ) => {\n\t\treturn ! item.isDisabled && (\n\t\t\titem.name !== getDefaultBlockName() ||\n\t\t\t! isEmpty( item.initialAttributes )\n\t\t);\n\t} ).slice( 0, 3 );\n\n\treturn (\n\t\t<div className=\"editor-inserter-with-shortcuts\">\n\t\t\t{ itemsWithoutDefaultBlock.map( ( item ) => (\n\t\t\t\t<IconButton\n\t\t\t\t\tkey={ item.id }\n\t\t\t\t\tclassName=\"editor-inserter-with-shortcuts__block\"\n\t\t\t\t\tonClick={ () => onInsert( item ) }\n\t\t\t\t\t// translators: %s: block title/name to be added\n\t\t\t\t\tlabel={ sprintf( __( 'Add %s' ), item.title ) }\n\t\t\t\t\ticon={ (\n\t\t\t\t\t\t<BlockIcon icon={ item.icon && item.icon.src } />\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</div>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select, { rootClientId } ) => {\n\t\tconst { getInserterItems, getTemplateLock } = select( 'core/editor' );\n\t\treturn {\n\t\t\titems: getInserterItems( rootClientId ),\n\t\t\tisLocked: !! getTemplateLock( rootClientId ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => {\n\t\tconst { clientId, rootClientId, layout } = ownProps;\n\n\t\treturn {\n\t\t\tonInsert( { name, initialAttributes } ) {\n\t\t\t\tconst block = createBlock( name, { ...initialAttributes, layout } );\n\t\t\t\tif ( clientId ) {\n\t\t\t\t\tdispatch( 'core/editor' ).replaceBlocks( clientId, block );\n\t\t\t\t} else {\n\t\t\t\t\tdispatch( 'core/editor' ).insertBlock( block, undefined, rootClientId );\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n)( InserterWithShortcuts );\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { ifCondition, compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport BlockIcon from '../block-icon';\n\nfunction ChildBlocks( { rootBlockIcon, rootBlockTitle, items, ...props } ) {\n\treturn (\n\t\t<div className=\"editor-inserter__child-blocks\">\n\t\t\t{ ( rootBlockIcon || rootBlockTitle ) && (\n\t\t\t\t<div className=\"editor-inserter__parent-block-header\">\n\t\t\t\t\t<BlockIcon icon={ rootBlockIcon } showColors />\n\t\t\t\t\t{ rootBlockTitle && <h2>{ rootBlockTitle }</h2> }\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<BlockTypesList items={ items } { ...props } />\n\t\t</div>\n\t);\n}\n\nexport default compose(\n\tifCondition( ( { items } ) => items && items.length > 0 ),\n\twithSelect( ( select, { rootClientId } ) => {\n\t\tconst {\n\t\t\tgetBlockType,\n\t\t} = select( 'core/blocks' );\n\t\tconst {\n\t\t\tgetBlockName,\n\t\t} = select( 'core/editor' );\n\t\tconst rootBlockName = getBlockName( rootClientId );\n\t\tconst rootBlockType = getBlockType( rootBlockName );\n\t\treturn {\n\t\t\trootBlockTitle: rootBlockType && rootBlockType.title,\n\t\t\trootBlockIcon: rootBlockType && rootBlockType.icon,\n\t\t};\n\t} ),\n)( ChildBlocks );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Dropdown, IconButton } from '@wordpress/components';\nimport { createBlock, isUnmodifiedDefaultBlock } from '@wordpress/blocks';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport InserterMenu from './menu';\n\nexport { default as InserterResultsPortal } from './results-portal';\n\nconst defaultRenderToggle = ( { onToggle, disabled, isOpen } ) => (\n\t<IconButton\n\t\ticon=\"insert\"\n\t\tlabel={ __( 'Add block' ) }\n\t\tonClick={ onToggle }\n\t\tclassName=\"editor-inserter__toggle\"\n\t\taria-haspopup=\"true\"\n\t\taria-expanded={ isOpen }\n\t\tdisabled={ disabled }\n\t/>\n);\n\nclass Inserter extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onToggle = this.onToggle.bind( this );\n\t}\n\n\tonToggle( isOpen ) {\n\t\tconst { onToggle } = this.props;\n\n\t\t// Surface toggle callback to parent component\n\t\tif ( onToggle ) {\n\t\t\tonToggle( isOpen );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\titems,\n\t\t\tposition,\n\t\t\ttitle,\n\t\t\tonInsertBlock,\n\t\t\trootClientId,\n\t\t\tdisabled,\n\t\t\trenderToggle = defaultRenderToggle,\n\t\t} = this.props;\n\n\t\tif ( items.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Dropdown\n\t\t\t\tclassName=\"editor-inserter\"\n\t\t\t\tcontentClassName=\"editor-inserter__popover\"\n\t\t\t\tposition={ position }\n\t\t\t\tonToggle={ this.onToggle }\n\t\t\t\texpandOnMobile\n\t\t\t\theaderTitle={ title }\n\t\t\t\trenderToggle={ ( { onToggle, isOpen } ) => renderToggle( { onToggle, isOpen, disabled } ) }\n\t\t\t\trenderContent={ ( { onClose } ) => {\n\t\t\t\t\tconst onSelect = ( item ) => {\n\t\t\t\t\t\tonInsertBlock( item );\n\n\t\t\t\t\t\tonClose();\n\t\t\t\t\t};\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<InserterMenu\n\t\t\t\t\t\t\titems={ items }\n\t\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { rootClientId, layout } ) => {\n\t\tconst {\n\t\t\tgetEditedPostAttribute,\n\t\t\tgetBlockInsertionPoint,\n\t\t\tgetSelectedBlock,\n\t\t\tgetInserterItems,\n\t\t\tgetBlockOrder,\n\t\t} = select( 'core/editor' );\n\t\tconst insertionPoint = getBlockInsertionPoint();\n\t\tconst parentId = rootClientId || insertionPoint.rootClientId;\n\t\treturn {\n\t\t\ttitle: getEditedPostAttribute( 'title' ),\n\t\t\tinsertionPoint: {\n\t\t\t\trootClientId: parentId,\n\t\t\t\tlayout: rootClientId ? layout : insertionPoint.layout,\n\t\t\t\tindex: rootClientId ? getBlockOrder( rootClientId ).length : insertionPoint.index,\n\t\t\t},\n\t\t\tselectedBlock: getSelectedBlock(),\n\t\t\titems: getInserterItems( parentId ),\n\t\t\trootClientId: parentId,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, ownProps ) => ( {\n\t\tonInsertBlock: ( item ) => {\n\t\t\tconst { selectedBlock, insertionPoint } = ownProps;\n\t\t\tconst { index, rootClientId, layout } = insertionPoint;\n\t\t\tconst { name, initialAttributes } = item;\n\t\t\tconst insertedBlock = createBlock( name, { ...initialAttributes, layout } );\n\t\t\tif ( selectedBlock && isUnmodifiedDefaultBlock( selectedBlock ) ) {\n\t\t\t\treturn dispatch( 'core/editor' ).replaceBlocks( selectedBlock.clientId, insertedBlock );\n\t\t\t}\n\t\t\treturn dispatch( 'core/editor' ).insertBlock( insertedBlock, index, rootClientId );\n\t\t},\n\t} ) ),\n] )( Inserter );\n","/**\n * External dependencies\n */\nimport {\n\tfilter,\n\tfind,\n\tfindIndex,\n\tflow,\n\tgroupBy,\n\tisEmpty,\n\tmap,\n\tsome,\n\tsortBy,\n\twithout,\n\tincludes,\n\tdeburr,\n} from 'lodash';\nimport scrollIntoView from 'dom-scroll-into-view';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, findDOMNode, createRef } from '@wordpress/element';\nimport { withSpokenMessages, PanelBody } from '@wordpress/components';\nimport { getCategories, isReusableBlock } from '@wordpress/blocks';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { withInstanceId, compose, withSafeTimeout } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport BlockTypesList from '../block-types-list';\nimport ChildBlocks from './child-blocks';\nimport InserterResultsPortal from './results-portal';\n\nconst MAX_SUGGESTED_ITEMS = 9;\n\n/**\n * Filters an item list given a search term.\n *\n * @param {Array} items        Item list\n * @param {string} searchTerm  Search term.\n *\n * @return {Array}             Filtered item list.\n */\nexport const searchItems = ( items, searchTerm ) => {\n\tconst normalizedSearchTerm = normalizeTerm( searchTerm );\n\tconst matchSearch = ( string ) => normalizeTerm( string ).indexOf( normalizedSearchTerm ) !== -1;\n\tconst categories = getCategories();\n\n\treturn items.filter( ( item ) => {\n\t\tconst itemCategory = find( categories, { slug: item.category } );\n\t\treturn matchSearch( item.title ) || some( item.keywords, matchSearch ) || ( itemCategory && matchSearch( itemCategory.title ) );\n\t} );\n};\n\n/**\n * Converts the search term into a normalized term.\n *\n * @param {string} term The search term to normalize.\n *\n * @return {string} The normalized search term.\n */\nexport const normalizeTerm = ( term ) => {\n\t// Disregard diacritics.\n\t//  Input: \"mdia\"\n\tterm = deburr( term );\n\n\t// Accommodate leading slash, matching autocomplete expectations.\n\t//  Input: \"/media\"\n\tterm = term.replace( /^\\//, '' );\n\n\t// Lowercase.\n\t//  Input: \"MEDIA\"\n\tterm = term.toLowerCase();\n\n\t// Strip leading and trailing whitespace.\n\t//  Input: \" media \"\n\tterm = term.trim();\n\n\treturn term;\n};\n\nexport class InserterMenu extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tchildItems: [],\n\t\t\tfilterValue: '',\n\t\t\thoveredItem: null,\n\t\t\tsuggestedItems: [],\n\t\t\treusableItems: [],\n\t\t\titemsPerCategory: {},\n\t\t\topenPanels: [ 'suggested' ],\n\t\t};\n\t\tthis.onChangeSearchInput = this.onChangeSearchInput.bind( this );\n\t\tthis.onHover = this.onHover.bind( this );\n\t\tthis.panels = {};\n\t\tthis.inserterResults = createRef();\n\t}\n\n\tcomponentDidMount() {\n\t\t// This could be replaced by a resolver.\n\t\tthis.props.fetchReusableBlocks();\n\t\tthis.filter();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.items !== this.props.items ) {\n\t\t\tthis.filter( this.state.filterValue );\n\t\t}\n\t}\n\n\tonChangeSearchInput( event ) {\n\t\tthis.filter( event.target.value );\n\t}\n\n\tonHover( item ) {\n\t\tthis.setState( {\n\t\t\thoveredItem: item,\n\t\t} );\n\n\t\tif ( item ) {\n\t\t\tthis.props.showInsertionPoint();\n\t\t} else {\n\t\t\tthis.props.hideInsertionPoint();\n\t\t}\n\t}\n\n\tbindPanel( name ) {\n\t\treturn ( ref ) => {\n\t\t\tthis.panels[ name ] = ref;\n\t\t};\n\t}\n\n\tonTogglePanel( panel ) {\n\t\treturn () => {\n\t\t\tconst isOpened = this.state.openPanels.indexOf( panel ) !== -1;\n\t\t\tif ( isOpened ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\topenPanels: without( this.state.openPanels, panel ),\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tthis.setState( {\n\t\t\t\t\topenPanels: [\n\t\t\t\t\t\t...this.state.openPanels,\n\t\t\t\t\t\tpanel,\n\t\t\t\t\t],\n\t\t\t\t} );\n\n\t\t\t\tthis.props.setTimeout( () => {\n\t\t\t\t\t// We need a generic way to access the panel's container\n\t\t\t\t\t// eslint-disable-next-line react/no-find-dom-node\n\t\t\t\t\tscrollIntoView( findDOMNode( this.panels[ panel ] ), this.inserterResults.current, {\n\t\t\t\t\t\talignWithTop: true,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}\n\n\tfilter( filterValue = '' ) {\n\t\tconst { items, rootChildBlocks } = this.props;\n\t\tconst filteredItems = searchItems( items, filterValue );\n\n\t\tconst childItems = filter( filteredItems, ( { name } ) => includes( rootChildBlocks, name ) );\n\n\t\tlet suggestedItems = [];\n\t\tif ( ! filterValue ) {\n\t\t\tconst maxSuggestedItems = this.props.maxSuggestedItems || MAX_SUGGESTED_ITEMS;\n\t\t\tsuggestedItems = filter( items, ( item ) => item.utility > 0 ).slice( 0, maxSuggestedItems );\n\t\t}\n\n\t\tconst reusableItems = filter( filteredItems, { category: 'reusable' } );\n\n\t\tconst getCategoryIndex = ( item ) => {\n\t\t\treturn findIndex( getCategories(), ( category ) => category.slug === item.category );\n\t\t};\n\t\tconst itemsPerCategory = flow(\n\t\t\t( itemList ) => filter( itemList, ( item ) => item.category !== 'reusable' ),\n\t\t\t( itemList ) => sortBy( itemList, getCategoryIndex ),\n\t\t\t( itemList ) => groupBy( itemList, 'category' )\n\t\t)( filteredItems );\n\n\t\tlet openPanels = this.state.openPanels;\n\t\tif ( filterValue !== this.state.filterValue ) {\n\t\t\tif ( ! filterValue ) {\n\t\t\t\topenPanels = [ 'suggested' ];\n\t\t\t} else if ( reusableItems.length ) {\n\t\t\t\topenPanels = [ 'reusable' ];\n\t\t\t} else if ( filteredItems.length ) {\n\t\t\t\tconst firstCategory = find( getCategories(), ( { slug } ) => itemsPerCategory[ slug ] && itemsPerCategory[ slug ].length );\n\t\t\t\topenPanels = [ firstCategory.slug ];\n\t\t\t}\n\t\t}\n\n\t\tthis.setState( {\n\t\t\thoveredItem: null,\n\t\t\tchildItems,\n\t\t\tfilterValue,\n\t\t\tsuggestedItems,\n\t\t\treusableItems,\n\t\t\titemsPerCategory,\n\t\t\topenPanels,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { instanceId, onSelect, rootClientId } = this.props;\n\t\tconst { childItems, filterValue, hoveredItem, suggestedItems, reusableItems, itemsPerCategory, openPanels } = this.state;\n\t\tconst isPanelOpen = ( panel ) => openPanels.indexOf( panel ) !== -1;\n\t\tconst isSearching = !! filterValue;\n\n\t\t// Disable reason: The inserter menu is a modal display, not one which\n\t\t// is always visible, and one which already incurs this behavior of\n\t\t// autoFocus via Popover's focusOnMount.\n\n\t\t/* eslint-disable jsx-a11y/no-autofocus */\n\t\treturn (\n\t\t\t<div className=\"editor-inserter__menu\">\n\t\t\t\t<label htmlFor={ `editor-inserter__search-${ instanceId }` } className=\"screen-reader-text\">\n\t\t\t\t\t{ __( 'Search for a block' ) }\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\tid={ `editor-inserter__search-${ instanceId }` }\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tplaceholder={ __( 'Search for a block' ) }\n\t\t\t\t\tclassName=\"editor-inserter__search\"\n\t\t\t\t\tautoFocus\n\t\t\t\t\tonChange={ this.onChangeSearchInput }\n\t\t\t\t/>\n\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"editor-inserter__results\"\n\t\t\t\t\tref={ this.inserterResults }\n\t\t\t\t\ttabIndex=\"0\"\n\t\t\t\t\trole=\"region\"\n\t\t\t\t\taria-label={ __( 'Available block types' ) }\n\t\t\t\t>\n\n\t\t\t\t\t<ChildBlocks\n\t\t\t\t\t\trootClientId={ rootClientId }\n\t\t\t\t\t\titems={ childItems }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t\tonHover={ this.onHover }\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ !! suggestedItems.length &&\n\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\ttitle={ __( 'Most Used' ) }\n\t\t\t\t\t\t\topened={ isPanelOpen( 'suggested' ) }\n\t\t\t\t\t\t\tonToggle={ this.onTogglePanel( 'suggested' ) }\n\t\t\t\t\t\t\tref={ this.bindPanel( 'suggested' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockTypesList items={ suggestedItems } onSelect={ onSelect } onHover={ this.onHover } />\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t}\n\n\t\t\t\t\t<InserterResultsPortal.Slot fillProps={ { filterValue } } />\n\n\t\t\t\t\t{ map( getCategories(), ( category ) => {\n\t\t\t\t\t\tconst categoryItems = itemsPerCategory[ category.slug ];\n\t\t\t\t\t\tif ( ! categoryItems || ! categoryItems.length ) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\t\tkey={ category.slug }\n\t\t\t\t\t\t\t\ttitle={ category.title }\n\t\t\t\t\t\t\t\topened={ isSearching || isPanelOpen( category.slug ) }\n\t\t\t\t\t\t\t\tonToggle={ this.onTogglePanel( category.slug ) }\n\t\t\t\t\t\t\t\tref={ this.bindPanel( category.slug ) }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<BlockTypesList items={ categoryItems } onSelect={ onSelect } onHover={ this.onHover } />\n\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t);\n\t\t\t\t\t} ) }\n\n\t\t\t\t\t{ !! reusableItems.length && (\n\t\t\t\t\t\t<PanelBody\n\t\t\t\t\t\t\tclassName=\"editor-inserter__reusable-blocks-panel\"\n\t\t\t\t\t\t\ttitle={ __( 'Reusable' ) }\n\t\t\t\t\t\t\topened={ isPanelOpen( 'reusable' ) }\n\t\t\t\t\t\t\tonToggle={ this.onTogglePanel( 'reusable' ) }\n\t\t\t\t\t\t\ticon=\"controls-repeat\"\n\t\t\t\t\t\t\tref={ this.bindPanel( 'reusable' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<BlockTypesList items={ reusableItems } onSelect={ onSelect } onHover={ this.onHover } />\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"editor-inserter__manage-reusable-blocks\"\n\t\t\t\t\t\t\t\thref=\"edit.php?post_type=wp_block\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Manage All Reusable Blocks' ) }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t) }\n\t\t\t\t\t{ isEmpty( suggestedItems ) && isEmpty( reusableItems ) && isEmpty( itemsPerCategory ) && (\n\t\t\t\t\t\t<p className=\"editor-inserter__no-results\">{ __( 'No blocks found.' ) }</p>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\n\t\t\t\t{ hoveredItem && isReusableBlock( hoveredItem ) &&\n\t\t\t\t\t<BlockPreview name={ hoveredItem.name } attributes={ hoveredItem.initialAttributes } />\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-autofocus */\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, { rootClientId } ) => {\n\t\tconst {\n\t\t\tgetChildBlockNames,\n\t\t} = select( 'core/blocks' );\n\t\tconst {\n\t\t\tgetBlockName,\n\t\t} = select( 'core/editor' );\n\t\tconst rootBlockName = getBlockName( rootClientId );\n\t\treturn {\n\t\t\trootChildBlocks: getChildBlockNames( rootBlockName ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tfetchReusableBlocks: dispatch( 'core/editor' ).fetchReusableBlocks,\n\t\tshowInsertionPoint: dispatch( 'core/editor' ).showInsertionPoint,\n\t\thideInsertionPoint: dispatch( 'core/editor' ).hideInsertionPoint,\n\t} ) ),\n\twithSpokenMessages,\n\twithInstanceId,\n\twithSafeTimeout\n)( InserterMenu );\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill, PanelBody } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockTypesList from '../block-types-list';\nimport { searchItems } from './menu';\n\nconst { Fill, Slot } = createSlotFill( 'InserterResultsPortal' );\n\nconst InserterResultsPortal = ( { items, title, onSelect, onHover, ...props } ) => {\n\treturn (\n\t\t<Fill>\n\t\t\t{ ( { filterValue } ) => {\n\t\t\t\tconst filteredItems = searchItems( items, filterValue );\n\n\t\t\t\tif ( ! filteredItems.length ) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<PanelBody\n\t\t\t\t\t\ttitle={ title }\n\t\t\t\t\t\t{ ...props }\n\t\t\t\t\t\tclassName=\"editor-inserter__results-portal\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<BlockTypesList items={ filteredItems } onSelect={ onSelect } onHover={ onHover } />\n\t\t\t\t\t</PanelBody>\n\t\t\t\t);\n\t\t\t} }\n\t\t</Fill>\n\t);\n};\n\nInserterResultsPortal.Slot = Slot;\n\nexport default InserterResultsPortal;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { ifBlockEditSelected } from '../block-edit/context';\n\nconst { Fill, Slot } = createSlotFill( 'InspectorAdvancedControls' );\n\nconst InspectorAdvancedControls = ifBlockEditSelected( Fill );\n\nInspectorAdvancedControls.Slot = Slot;\n\nexport default InspectorAdvancedControls;\n","/**\n * WordPress dependencies\n */\nimport { createSlotFill } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport { ifBlockEditSelected } from '../block-edit/context';\n\nconst { Fill, Slot } = createSlotFill( 'InspectorControls' );\n\nconst InspectorControls = ifBlockEditSelected( Fill );\n\nInspectorControls.Slot = Slot;\n\nexport default InspectorControls;\n","/**\n * External dependencies\n */\nimport { every, get, noop, startsWith } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tButton,\n\tFormFileUpload,\n\tPlaceholder,\n\tDropZone,\n\tIconButton,\n} from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport MediaUpload from '../media-upload';\nimport URLPopover from '../url-popover';\nimport { mediaUpload } from '../../utils/';\n\nconst InsertFromURLPopover = ( { src, onChange, onSubmit, onClose } ) => (\n\t<URLPopover onClose={ onClose }>\n\t\t<form\n\t\t\tclassName=\"editor-media-placeholder__url-input-form\"\n\t\t\tonSubmit={ onSubmit }\n\t\t>\n\t\t\t<input\n\t\t\t\tclassName=\"editor-media-placeholder__url-input-field\"\n\t\t\t\ttype=\"url\"\n\t\t\t\taria-label={ __( 'URL' ) }\n\t\t\t\tplaceholder={ __( 'Paste or type URL' ) }\n\t\t\t\tonChange={ onChange }\n\t\t\t\tvalue={ src }\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tclassName=\"editor-media-placeholder__url-input-submit-button\"\n\t\t\t\ticon=\"editor-break\"\n\t\t\t\tlabel={ __( 'Apply' ) }\n\t\t\t\ttype=\"submit\"\n\t\t\t/>\n\t\t</form>\n\t</URLPopover>\n);\n\nclass MediaPlaceholder extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tsrc: '',\n\t\t\tisURLInputVisible: false,\n\t\t};\n\t\tthis.onChangeSrc = this.onChangeSrc.bind( this );\n\t\tthis.onSubmitSrc = this.onSubmitSrc.bind( this );\n\t\tthis.onUpload = this.onUpload.bind( this );\n\t\tthis.onFilesUpload = this.onFilesUpload.bind( this );\n\t\tthis.openURLInput = this.openURLInput.bind( this );\n\t\tthis.closeURLInput = this.closeURLInput.bind( this );\n\t}\n\n\tgetAllowedTypes() {\n\t\tconst { allowedTypes, type: deprecatedType } = this.props;\n\t\tlet allowedTypesToUse = allowedTypes;\n\t\tif ( ! allowedTypes && deprecatedType ) {\n\t\t\tdeprecated( 'type property of wp.editor.MediaPlaceholder', {\n\t\t\t\tversion: '4.2',\n\t\t\t\talternative: 'allowedTypes property containing an array with the allowedTypes or do not pass any property if all types are allowed',\n\t\t\t} );\n\t\t\tif ( deprecatedType === '*' ) {\n\t\t\t\tallowedTypesToUse = undefined;\n\t\t\t} else {\n\t\t\t\tallowedTypesToUse = [ deprecatedType ];\n\t\t\t}\n\t\t}\n\t\treturn allowedTypesToUse;\n\t}\n\n\tonlyAllowsImages() {\n\t\tconst allowedTypes = this.getAllowedTypes();\n\t\tif ( ! allowedTypes ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn every( allowedTypes, ( allowedType ) => {\n\t\t\treturn allowedType === 'image' || startsWith( allowedType, 'image/' );\n\t\t} );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.setState( { src: get( this.props.value, [ 'src' ], '' ) } );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( get( prevProps.value, [ 'src' ], '' ) !== get( this.props.value, [ 'src' ], '' ) ) {\n\t\t\tthis.setState( { src: get( this.props.value, [ 'src' ], '' ) } );\n\t\t}\n\t}\n\n\tonChangeSrc( event ) {\n\t\tthis.setState( { src: event.target.value } );\n\t}\n\n\tonSubmitSrc( event ) {\n\t\tevent.preventDefault();\n\t\tif ( this.state.src && this.props.onSelectURL ) {\n\t\t\tthis.props.onSelectURL( this.state.src );\n\t\t\tthis.closeURLInput();\n\t\t}\n\t}\n\n\tonUpload( event ) {\n\t\tthis.onFilesUpload( event.target.files );\n\t}\n\n\tonFilesUpload( files ) {\n\t\tconst { onSelect, multiple, onError } = this.props;\n\t\tconst allowedTypes = this.getAllowedTypes();\n\t\tconst setMedia = multiple ? onSelect : ( [ media ] ) => onSelect( media );\n\t\tmediaUpload( {\n\t\t\tallowedTypes,\n\t\t\tfilesList: files,\n\t\t\tonFileChange: setMedia,\n\t\t\tonError,\n\t\t} );\n\t}\n\n\topenURLInput() {\n\t\tthis.setState( { isURLInputVisible: true } );\n\t}\n\n\tcloseURLInput() {\n\t\tthis.setState( { isURLInputVisible: false } );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\taccept,\n\t\t\ticon,\n\t\t\tclassName,\n\t\t\tlabels,\n\t\t\tonSelect,\n\t\t\tvalue = {},\n\t\t\tonSelectURL,\n\t\t\tonHTMLDrop = noop,\n\t\t\tmultiple = false,\n\t\t\tnotices,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tisURLInputVisible,\n\t\t\tsrc,\n\t\t} = this.state;\n\n\t\tconst allowedTypes = this.getAllowedTypes();\n\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\ticon={ icon }\n\t\t\t\tlabel={ labels.title }\n\t\t\t\t// translators: %s: media name label e.g: \"an audio\",\"an image\", \"a video\"\n\t\t\t\tinstructions={ sprintf( __( 'Drag %s, upload a new one or select a file from your library.' ), labels.name ) }\n\t\t\t\tclassName={ classnames( 'editor-media-placeholder', className ) }\n\t\t\t\tnotices={ notices }\n\t\t\t>\n\t\t\t\t<DropZone\n\t\t\t\t\tonFilesDrop={ this.onFilesUpload }\n\t\t\t\t\tonHTMLDrop={ onHTMLDrop }\n\t\t\t\t/>\n\t\t\t\t<FormFileUpload\n\t\t\t\t\tisLarge\n\t\t\t\t\tclassName=\"editor-media-placeholder__button\"\n\t\t\t\t\tonChange={ this.onUpload }\n\t\t\t\t\taccept={ accept }\n\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Upload' ) }\n\t\t\t\t</FormFileUpload>\n\t\t\t\t<MediaUpload\n\t\t\t\t\tgallery={ multiple && this.onlyAllowsImages() }\n\t\t\t\t\tmultiple={ multiple }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\tallowedTypes={ allowedTypes }\n\t\t\t\t\tvalue={ value.id }\n\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLarge\n\t\t\t\t\t\t\tclassName=\"editor-media-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ open }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Media Library' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t{ onSelectURL && (\n\t\t\t\t\t<div className=\"editor-media-placeholder__url-input-container\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName=\"editor-media-placeholder__button\"\n\t\t\t\t\t\t\tonClick={ this.openURLInput }\n\t\t\t\t\t\t\tisToggled={ isURLInputVisible }\n\t\t\t\t\t\t\tisLarge\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Insert from URL' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{ isURLInputVisible && (\n\t\t\t\t\t\t\t<InsertFromURLPopover\n\t\t\t\t\t\t\t\tsrc={ src }\n\t\t\t\t\t\t\t\tonChange={ this.onChangeSrc }\n\t\t\t\t\t\t\t\tonSubmit={ this.onSubmitSrc }\n\t\t\t\t\t\t\t\tonClose={ this.closeURLInput }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Placeholder>\n\t\t);\n\t}\n}\n\nexport default MediaPlaceholder;\n","/**\n * WordPress dependencies\n */\nimport { withFilters } from '@wordpress/components';\n\n/**\n * This is a placeholder for the media upload component necessary to make it possible to provide\n * an integration with the core blocks that handle media files. By default it renders nothing but\n * it provides a way to have it overridden with the `editor.MediaUpload` filter.\n *\n * @return {WPElement} Media upload element.\n */\nconst MediaUpload = () => null;\n\n// Todo: rename the filter\nexport default withFilters( 'editor.MediaUpload' )( MediaUpload );\n","/**\n * External dependencies\n */\nimport scrollIntoView from 'dom-scroll-into-view';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { getScrollContainer } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { getBlockDOMNode } from '../../utils/dom';\n\nclass MultiSelectScrollIntoView extends Component {\n\tcomponentDidUpdate() {\n\t\t// Relies on expectation that `componentDidUpdate` will only be called\n\t\t// if value of `extentClientId` changes.\n\t\tthis.scrollIntoView();\n\t}\n\n\t/**\n\t * Ensures that if a multi-selection exists, the extent of the selection is\n\t * visible within the nearest scrollable container.\n\t *\n\t * @return {void}\n\t */\n\tscrollIntoView() {\n\t\tconst { extentClientId } = this.props;\n\t\tif ( ! extentClientId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst extentNode = getBlockDOMNode( extentClientId );\n\t\tif ( ! extentNode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst scrollContainer = getScrollContainer( extentNode );\n\n\t\t// If there's no scroll container, it follows that there's no scrollbar\n\t\t// and thus there's no need to try to scroll into view.\n\t\tif ( ! scrollContainer ) {\n\t\t\treturn;\n\t\t}\n\n\t\tscrollIntoView( extentNode, scrollContainer, {\n\t\t\tonlyScrollIfNeeded: true,\n\t\t} );\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getLastMultiSelectedBlockClientId } = select( 'core/editor' );\n\n\treturn {\n\t\textentClientId: getLastMultiSelectedBlockClientId(),\n\t};\n} )( MultiSelectScrollIntoView );\n","/**\n * External dependencies\n */\nimport { cond, matchesProperty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { NavigableMenu, KeyboardShortcuts } from '@wordpress/components';\nimport { Component, findDOMNode } from '@wordpress/element';\nimport { focus } from '@wordpress/dom';\nimport { ESCAPE } from '@wordpress/keycodes';\n\n/**\n * Browser dependencies\n */\n\nconst { Node, getSelection } = window;\n\nclass NavigableToolbar extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.bindNode = this.bindNode.bind( this );\n\t\tthis.focusToolbar = this.focusToolbar.bind( this );\n\t\tthis.focusSelection = this.focusSelection.bind( this );\n\n\t\tthis.switchOnKeyDown = cond( [\n\t\t\t[ matchesProperty( [ 'keyCode' ], ESCAPE ), this.focusSelection ],\n\t\t] );\n\t}\n\n\tbindNode( ref ) {\n\t\t// Disable reason: Need DOM node for finding first focusable element\n\t\t// on keyboard interaction to shift to toolbar.\n\t\t// eslint-disable-next-line react/no-find-dom-node\n\t\tthis.toolbar = findDOMNode( ref );\n\t}\n\n\tfocusToolbar() {\n\t\tconst tabbables = focus.tabbable.find( this.toolbar );\n\t\tif ( tabbables.length ) {\n\t\t\ttabbables[ 0 ].focus();\n\t\t}\n\t}\n\n\t/**\n\t * Programmatically shifts focus to the element where the current selection\n\t * exists, if there is a selection.\n\t */\n\tfocusSelection() {\n\t\t// Ensure that a selection exists.\n\t\tconst selection = getSelection();\n\t\tif ( ! selection ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Focus node may be a text node, which cannot be focused directly.\n\t\t// Find its parent element instead.\n\t\tconst { focusNode } = selection;\n\t\tlet focusElement = focusNode;\n\t\tif ( focusElement.nodeType !== Node.ELEMENT_NODE ) {\n\t\t\tfocusElement = focusElement.parentElement;\n\t\t}\n\n\t\tif ( focusElement ) {\n\t\t\tfocusElement.focus();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children, ...props } = this.props;\n\t\treturn (\n\t\t\t<NavigableMenu\n\t\t\t\torientation=\"horizontal\"\n\t\t\t\trole=\"toolbar\"\n\t\t\t\tref={ this.bindNode }\n\t\t\t\tonKeyDown={ this.switchOnKeyDown }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\tbindGlobal\n\t\t\t\t\t// Use the same event that TinyMCE uses in the Classic block for its own `alt+f10` shortcut.\n\t\t\t\t\teventName=\"keydown\"\n\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t'alt+f10': this.focusToolbar,\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t\t{ children }\n\t\t\t</NavigableMenu>\n\t\t);\n\t}\n}\n\nexport default NavigableToolbar;\n","/**\n * External dependencies\n */\nimport { includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { isTextField } from '@wordpress/dom';\nimport { UP, RIGHT, DOWN, LEFT, ENTER, BACKSPACE } from '@wordpress/keycodes';\nimport { withSafeTimeout, compose } from '@wordpress/compose';\n\n/**\n * Set of key codes upon which typing is to be initiated on a keydown event.\n *\n * @type {number[]}\n */\nconst KEY_DOWN_ELIGIBLE_KEY_CODES = [ UP, RIGHT, DOWN, LEFT, ENTER, BACKSPACE ];\n\n/**\n * Returns true if a given keydown event can be inferred as intent to start\n * typing, or false otherwise. A keydown is considered eligible if it is a\n * text navigation without shift active.\n *\n * @param {KeyboardEvent} event Keydown event to test.\n *\n * @return {boolean} Whether event is eligible to start typing.\n */\nfunction isKeyDownEligibleForStartTyping( event ) {\n\tconst { keyCode, shiftKey } = event;\n\treturn ! shiftKey && includes( KEY_DOWN_ELIGIBLE_KEY_CODES, keyCode );\n}\n\nclass ObserveTyping extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.stopTypingOnSelectionUncollapse = this.stopTypingOnSelectionUncollapse.bind( this );\n\t\tthis.stopTypingOnMouseMove = this.stopTypingOnMouseMove.bind( this );\n\t\tthis.startTypingInTextField = this.startTypingInTextField.bind( this );\n\t\tthis.stopTypingOnNonTextField = this.stopTypingOnNonTextField.bind( this );\n\n\t\tthis.lastMouseMove = null;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.toggleEventBindings( this.props.isTyping );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.isTyping !== prevProps.isTyping ) {\n\t\t\tthis.toggleEventBindings( this.props.isTyping );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.toggleEventBindings( false );\n\t}\n\n\t/**\n\t * Bind or unbind events to the document when typing has started or stopped\n\t * respectively, or when component has become unmounted.\n\t *\n\t * @param {boolean} isBound Whether event bindings should be applied.\n\t */\n\ttoggleEventBindings( isBound ) {\n\t\tconst bindFn = isBound ? 'addEventListener' : 'removeEventListener';\n\t\tdocument[ bindFn ]( 'selectionchange', this.stopTypingOnSelectionUncollapse );\n\t\tdocument[ bindFn ]( 'mousemove', this.stopTypingOnMouseMove );\n\t}\n\n\t/**\n\t * On mouse move, unset typing flag if user has moved cursor.\n\t *\n\t * @param {MouseEvent} event Mousemove event.\n\t */\n\tstopTypingOnMouseMove( event ) {\n\t\tconst { clientX, clientY } = event;\n\n\t\t// We need to check that the mouse really moved because Safari triggers\n\t\t// mousemove events when shift or ctrl are pressed.\n\t\tif ( this.lastMouseMove ) {\n\t\t\tconst {\n\t\t\t\tclientX: lastClientX,\n\t\t\t\tclientY: lastClientY,\n\t\t\t} = this.lastMouseMove;\n\n\t\t\tif ( lastClientX !== clientX || lastClientY !== clientY ) {\n\t\t\t\tthis.props.onStopTyping();\n\t\t\t}\n\t\t}\n\n\t\tthis.lastMouseMove = { clientX, clientY };\n\t}\n\n\t/**\n\t * On selection change, unset typing flag if user has made an uncollapsed\n\t * (shift) selection.\n\t */\n\tstopTypingOnSelectionUncollapse() {\n\t\tconst selection = window.getSelection();\n\t\tconst isCollapsed = selection.rangeCount > 0 && selection.getRangeAt( 0 ).collapsed;\n\n\t\tif ( ! isCollapsed ) {\n\t\t\tthis.props.onStopTyping();\n\t\t}\n\t}\n\n\t/**\n\t * Handles a keypress or keydown event to infer intention to start typing.\n\t *\n\t * @param {KeyboardEvent} event Keypress or keydown event to interpret.\n\t */\n\tstartTypingInTextField( event ) {\n\t\tconst { isTyping, onStartTyping } = this.props;\n\t\tconst { type, target } = event;\n\n\t\t// Abort early if already typing, or key press is incurred outside a\n\t\t// text field (e.g. arrow-ing through toolbar buttons).\n\t\t// Ignore typing in a block toolbar\n\t\tif ( isTyping || ! isTextField( target ) || target.closest( '.editor-block-toolbar' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Special-case keydown because certain keys do not emit a keypress\n\t\t// event. Conversely avoid keydown as the canonical event since there\n\t\t// are many keydown which are explicitly not targeted for typing.\n\t\tif ( type === 'keydown' && ! isKeyDownEligibleForStartTyping( event ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tonStartTyping();\n\t}\n\n\t/**\n\t * Stops typing when focus transitions to a non-text field element.\n\t *\n\t * @param {FocusEvent} event Focus event.\n\t */\n\tstopTypingOnNonTextField( event ) {\n\t\tevent.persist();\n\n\t\t// Since focus to a non-text field via arrow key will trigger before\n\t\t// the keydown event, wait until after current stack before evaluating\n\t\t// whether typing is to be stopped. Otherwise, typing will re-start.\n\t\tthis.props.setTimeout( () => {\n\t\t\tconst { isTyping, onStopTyping } = this.props;\n\t\t\tconst { target } = event;\n\t\t\tif ( isTyping && ! isTextField( target ) ) {\n\t\t\t\tonStopTyping();\n\t\t\t}\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { children } = this.props;\n\n\t\t// Disable reason: This component is responsible for capturing bubbled\n\t\t// keyboard events which are interpreted as typing intent.\n\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\t\treturn (\n\t\t\t<div\n\t\t\t\tonFocus={ this.stopTypingOnNonTextField }\n\t\t\t\tonKeyPress={ this.startTypingInTextField }\n\t\t\t\tonKeyDown={ this.startTypingInTextField }\n\t\t\t>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-static-element-interactions */\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isTyping } = select( 'core/editor' );\n\n\t\treturn {\n\t\t\tisTyping: isTyping(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { startTyping, stopTyping } = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonStartTyping: startTyping,\n\t\t\tonStopTyping: stopTyping,\n\t\t};\n\t} ),\n\twithSafeTimeout,\n] )( ObserveTyping );\n","/**\n * External dependencies\n */\nimport { get, isEmpty } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\nexport function PageAttributesCheck( { availableTemplates, postType, children } ) {\n\tconst supportsPageAttributes = get( postType, [ 'supports', 'page-attributes' ], false );\n\n\t// Only render fields if post type supports page attributes or available templates exist.\n\tif ( ! supportsPageAttributes && isEmpty( availableTemplates ) ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getEditedPostAttribute, getEditorSettings } = select( 'core/editor' );\n\tconst { getPostType } = select( 'core' );\n\tconst { availableTemplates } = getEditorSettings();\n\treturn {\n\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t\tavailableTemplates,\n\t};\n} )( PageAttributesCheck );\n","/**\n * External dependencies\n */\nimport { invoke } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { TextControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose, withState } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PostTypeSupportCheck from '../post-type-support-check';\n\nexport const PageAttributesOrder = withState( {\n\torderInput: null,\n} )(\n\t( { onUpdateOrder, order = 0, orderInput, setState } ) => {\n\t\tconst setUpdatedOrder = ( value ) => {\n\t\t\tsetState( {\n\t\t\t\torderInput: value,\n\t\t\t} );\n\t\t\tconst newOrder = Number( value );\n\t\t\tif ( Number.isInteger( newOrder ) && invoke( value, [ 'trim' ] ) !== '' ) {\n\t\t\t\tonUpdateOrder( Number( value ) );\n\t\t\t}\n\t\t};\n\t\tconst value = orderInput === null ? order : orderInput;\n\t\treturn (\n\t\t\t<TextControl\n\t\t\t\tclassName=\"editor-page-attributes__order\"\n\t\t\t\ttype=\"number\"\n\t\t\t\tlabel={ __( 'Order' ) }\n\t\t\t\tvalue={ value }\n\t\t\t\tonChange={ setUpdatedOrder }\n\t\t\t\tsize={ 6 }\n\t\t\t\tonBlur={ () => {\n\t\t\t\t\tsetState( {\n\t\t\t\t\t\torderInput: null,\n\t\t\t\t\t} );\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n);\n\nfunction PageAttributesOrderWithChecks( props ) {\n\treturn (\n\t\t<PostTypeSupportCheck supportKeys=\"page-attributes\">\n\t\t\t<PageAttributesOrder { ...props } />\n\t\t</PostTypeSupportCheck>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\torder: select( 'core/editor' ).getEditedPostAttribute( 'menu_order' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdateOrder( order ) {\n\t\t\tdispatch( 'core/editor' ).editPost( {\n\t\t\t\tmenu_order: order,\n\t\t\t} );\n\t\t},\n\t} ) ),\n] )( PageAttributesOrderWithChecks );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { TreeSelect } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { buildTermsTree } from '../../utils/terms';\n\nexport function PageAttributesParent( { parent, postType, items, onUpdateParent } ) {\n\tconst isHierarchical = get( postType, [ 'hierarchical' ], false );\n\tconst parentPageLabel = get( postType, [ 'labels', 'parent_item_colon' ] );\n\tconst pageItems = items || [];\n\tif ( ! isHierarchical || ! parentPageLabel || ! pageItems.length ) {\n\t\treturn null;\n\t}\n\n\tconst pagesTree = buildTermsTree( pageItems.map( ( item ) => ( {\n\t\tid: item.id,\n\t\tparent: item.parent,\n\t\tname: item.title.raw ? item.title.raw : `#${ item.id } (${ __( 'no title' ) })`,\n\t} ) ) );\n\treturn (\n\t\t<TreeSelect\n\t\t\tlabel={ parentPageLabel }\n\t\t\tnoOptionLabel={ `(${ __( 'no parent' ) })` }\n\t\t\ttree={ pagesTree }\n\t\t\tselectedId={ parent }\n\t\t\tonChange={ onUpdateParent }\n\t\t/>\n\t);\n}\n\nconst applyWithSelect = withSelect( ( select ) => {\n\tconst { getPostType, getEntityRecords } = select( 'core' );\n\tconst { getCurrentPostId, getEditedPostAttribute } = select( 'core/editor' );\n\tconst postTypeSlug = getEditedPostAttribute( 'type' );\n\tconst postType = getPostType( postTypeSlug );\n\tconst postId = getCurrentPostId();\n\tconst isHierarchical = get( postType, [ 'hierarchical' ], false );\n\tconst query = {\n\t\tper_page: -1,\n\t\texclude: postId,\n\t\tparent_exclude: postId,\n\t\torderby: 'menu_order',\n\t\torder: 'asc',\n\t};\n\n\treturn {\n\t\tparent: getEditedPostAttribute( 'parent' ),\n\t\titems: isHierarchical ? getEntityRecords( 'postType', postTypeSlug, query ) : [],\n\t\tpostType,\n\t};\n} );\n\nconst applyWithDispatch = withDispatch( ( dispatch ) => {\n\tconst { editPost } = dispatch( 'core/editor' );\n\treturn {\n\t\tonUpdateParent( parent ) {\n\t\t\teditPost( { parent: parent || 0 } );\n\t\t},\n\t};\n} );\n\nexport default compose( [\n\tapplyWithSelect,\n\tapplyWithDispatch,\n] )( PageAttributesParent );\n","/**\n * External dependencies\n */\nimport { isEmpty, map } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { SelectControl } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nexport function PageTemplate( { availableTemplates, selectedTemplate, onUpdate } ) {\n\tif ( isEmpty( availableTemplates ) ) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<SelectControl\n\t\t\tlabel={ __( 'Template:' ) }\n\t\t\tvalue={ selectedTemplate }\n\t\t\tonChange={ onUpdate }\n\t\t\tclassName=\"editor-page-attributes__template\"\n\t\t\toptions={\n\t\t\t\tmap( availableTemplates, ( templateName, templateSlug ) => ( {\n\t\t\t\t\tvalue: templateSlug,\n\t\t\t\t\tlabel: templateName,\n\t\t\t\t} ) )\n\t\t\t}\n\t\t/>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getEditedPostAttribute, getEditorSettings } = select( 'core/editor' );\n\t\tconst { availableTemplates } = getEditorSettings();\n\t\treturn {\n\t\t\tselectedTemplate: getEditedPostAttribute( 'template' ),\n\t\t\tavailableTemplates,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdate( templateSlug ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { template: templateSlug || '' } );\n\t\t},\n\t} ) ),\n)( PageTemplate );\n","/**\n * External dependencies\n */\nimport { some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { PanelBody, ColorIndicator } from '@wordpress/components';\nimport { ifCondition } from '@wordpress/compose';\nimport { sprintf, __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport ColorPaletteControl from '../color-palette/control';\nimport withColorContext from '../color-palette/with-color-context';\nimport { getColorObjectByColorValue } from '../colors';\n\nconst hasCustomColorsDisabledForSetting = ( disableCustomColors, colorSetting ) => {\n\tif ( colorSetting.disableCustomColors !== undefined ) {\n\t\treturn colorSetting.disableCustomColors;\n\t}\n\treturn disableCustomColors;\n};\n\nconst hasColorsToChooseInSetting = (\n\tcolors = [],\n\tdisableCustomColors,\n\tcolorSetting ) => {\n\tif ( ! hasCustomColorsDisabledForSetting( disableCustomColors, colorSetting ) ) {\n\t\treturn true;\n\t}\n\treturn ( colorSetting.colors || colors ).length > 0;\n};\n\nconst hasColorsToChoose = ( { colors, disableCustomColors, colorSettings } ) => {\n\treturn some( colorSettings, ( colorSetting ) => {\n\t\treturn hasColorsToChooseInSetting(\n\t\t\tcolors,\n\t\t\tdisableCustomColors,\n\t\t\tcolorSetting\n\t\t);\n\t} );\n};\n\n// translators: first %s: The type of color (e.g. background color), second %s: the color name or value (e.g. red or #ff0000)\nconst colorIndicatorAriaLabel = __( '(%s: %s)' );\n\nconst renderColorIndicators = ( colorSettings, colors ) => {\n\treturn colorSettings.map(\n\t\t( { value, label, colors: availableColors }, index ) => {\n\t\t\tif ( ! value ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst colorObject = getColorObjectByColorValue(\n\t\t\t\tavailableColors || colors,\n\t\t\t\tvalue\n\t\t\t);\n\t\t\tconst colorName = colorObject && colorObject.name;\n\t\t\tconst ariaLabel = sprintf(\n\t\t\t\tcolorIndicatorAriaLabel,\n\t\t\t\tlabel.toLowerCase(),\n\t\t\t\tcolorName || value\n\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<ColorIndicator\n\t\t\t\t\tkey={ index }\n\t\t\t\t\tcolorValue={ value }\n\t\t\t\t\taria-label={ ariaLabel }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t);\n};\n\n// colorSettings is passed as an array of props so that it can be used for\n// mapping both ColorIndicator and ColorPaletteControl components. Passing\n// an array of components/nodes here wouldn't be feasible.\nexport const PanelColorSettings = ifCondition( hasColorsToChoose )(\n\t( {\n\t\tchildren,\n\t\tcolors,\n\t\tcolorSettings,\n\t\tdisableCustomColors,\n\t\ttitle,\n\t\t...props\n\t} ) => {\n\t\tconst className = 'editor-panel-color-settings';\n\n\t\tconst titleElement = (\n\t\t\t<span className={ `${ className }__panel-title` }>\n\t\t\t\t{ title }\n\t\t\t\t{ renderColorIndicators( colorSettings, colors ) }\n\t\t\t</span>\n\t\t);\n\n\t\treturn (\n\t\t\t<PanelBody\n\t\t\t\tclassName={ className }\n\t\t\t\ttitle={ titleElement }\n\t\t\t\t{ ...props }\n\t\t\t>\n\t\t\t\t{ colorSettings.map( ( settings, index ) => (\n\t\t\t\t\t<ColorPaletteControl\n\t\t\t\t\t\tkey={ index }\n\t\t\t\t\t\t{ ...{\n\t\t\t\t\t\t\tcolors,\n\t\t\t\t\t\t\tdisableCustomColors,\n\t\t\t\t\t\t\t...settings,\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t) ) }\n\n\t\t\t\t{ children }\n\t\t\t</PanelBody>\n\t\t);\n\t}\n);\n\nexport default withColorContext( PanelColorSettings );\n","/**\n * External dependencies\n */\nimport { omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { PanelColor as PanelColorComponent } from '@wordpress/components';\nimport { ifCondition, compose } from '@wordpress/compose';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport ColorPalette from '../color-palette';\nimport withColorContext from '../color-palette/with-color-context';\nimport { getColorObjectByColorValue } from '../colors';\n\nfunction PanelColor( { colors, title, colorValue, initialOpen, ...props } ) {\n\tdeprecated( 'wp.editor.PanelColor', {\n\t\tversion: '4.3',\n\t\talternative: 'wp.editor.PanelColorSettings',\n\t\tplugin: 'Gutenberg',\n\t} );\n\n\tconst colorObject = getColorObjectByColorValue( colors, colorValue );\n\tconst colorName = colorObject && colorObject.name;\n\treturn (\n\t\t<PanelColorComponent { ...{ title, colorName, colorValue, initialOpen } } >\n\t\t\t<ColorPalette\n\t\t\t\tvalue={ colorValue }\n\t\t\t\t{ ...omit( props, [ 'disableCustomColors' ] ) }\n\t\t\t/>\n\t\t</PanelColorComponent>\n\t);\n}\n\nexport default compose( [\n\twithColorContext,\n\tifCondition( ( { hasColorsToChoose } ) => hasColorsToChoose ),\n] )( PanelColor );\n","/**\n * External dependencies\n */\nimport TextareaAutosize from 'react-autosize-textarea';\nimport classnames from 'classnames';\n\nfunction PlainText( { onChange, className, ...props } ) {\n\treturn (\n\t\t<TextareaAutosize\n\t\t\tclassName={ classnames( 'editor-plain-text', className ) }\n\t\t\tonChange={ ( event ) => onChange( event.target.value ) }\n\t\t\t{ ...props }\n\t\t/>\n\t);\n}\n\nexport default PlainText;\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostTypeSupportCheck from '../post-type-support-check';\n\nexport function PostAuthorCheck( { hasAssignAuthorAction, authors, children } ) {\n\tif ( ! hasAssignAuthorAction || authors.length < 2 ) {\n\t\treturn null;\n\t}\n\n\treturn <PostTypeSupportCheck supportKeys=\"author\">{ children }</PostTypeSupportCheck>;\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst post = select( 'core/editor' ).getCurrentPost();\n\t\treturn {\n\t\t\thasAssignAuthorAction: get( post, [ '_links', 'wp:action-assign-author' ], false ),\n\t\t\tpostType: select( 'core/editor' ).getCurrentPostType(),\n\t\t\tauthors: select( 'core' ).getAuthors(),\n\t\t};\n\t} ),\n\twithInstanceId,\n] )( PostAuthorCheck );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostAuthorCheck from './check';\n\nexport class PostAuthor extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.setAuthorId = this.setAuthorId.bind( this );\n\t}\n\n\tsetAuthorId( event ) {\n\t\tconst { onUpdateAuthor } = this.props;\n\t\tconst { value } = event.target;\n\t\tonUpdateAuthor( Number( value ) );\n\t}\n\n\trender() {\n\t\tconst { postAuthor, instanceId, authors } = this.props;\n\t\tconst selectId = 'post-author-selector-' + instanceId;\n\n\t\t// Disable reason: A select with an onchange throws a warning\n\n\t\t/* eslint-disable jsx-a11y/no-onchange */\n\t\treturn (\n\t\t\t<PostAuthorCheck>\n\t\t\t\t<label htmlFor={ selectId }>{ __( 'Author' ) }</label>\n\t\t\t\t<select\n\t\t\t\t\tid={ selectId }\n\t\t\t\t\tvalue={ postAuthor }\n\t\t\t\t\tonChange={ this.setAuthorId }\n\t\t\t\t\tclassName=\"editor-post-author__select\"\n\t\t\t\t>\n\t\t\t\t\t{ authors.map( ( author ) => (\n\t\t\t\t\t\t<option key={ author.id } value={ author.id }>{ author.name }</option>\n\t\t\t\t\t) ) }\n\t\t\t\t</select>\n\t\t\t</PostAuthorCheck>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-onchange */\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostAuthor: select( 'core/editor' ).getEditedPostAttribute( 'author' ),\n\t\t\tauthors: select( 'core' ).getAuthors(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdateAuthor( author ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { author } );\n\t\t},\n\t} ) ),\n\twithInstanceId,\n] )( PostAuthor );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { CheckboxControl } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\nfunction PostComments( { commentStatus = 'open', ...props } ) {\n\tconst onToggleComments = () => props.editPost( { comment_status: commentStatus === 'open' ? 'closed' : 'open' } );\n\n\treturn (\n\t\t<CheckboxControl\n\t\t\tlabel={ __( 'Allow Comments' ) }\n\t\t\tchecked={ commentStatus === 'open' }\n\t\t\tonChange={ onToggleComments }\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tcommentStatus: select( 'core/editor' ).getEditedPostAttribute( 'comment_status' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\teditPost: dispatch( 'core/editor' ).editPost,\n\t} ) ),\n] )( PostComments );\n","/**\n * Internal dependencies\n */\nimport PostTypeSupportCheck from '../post-type-support-check';\n\nfunction PostExcerptCheck( props ) {\n\treturn <PostTypeSupportCheck { ...props } supportKeys=\"excerpt\" />;\n}\n\nexport default PostExcerptCheck;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { ExternalLink, TextareaControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nfunction PostExcerpt( { excerpt, onUpdateExcerpt } ) {\n\treturn (\n\t\t<div className=\"editor-post-excerpt\">\n\t\t\t<TextareaControl\n\t\t\t\tlabel={ __( 'Write an excerpt (optional)' ) }\n\t\t\t\tclassName=\"editor-post-excerpt__textarea\"\n\t\t\t\tonChange={ ( value ) => onUpdateExcerpt( value ) }\n\t\t\t\tvalue={ excerpt }\n\t\t\t/>\n\t\t\t<ExternalLink href=\"https://codex.wordpress.org/Excerpt\">\n\t\t\t\t{ __( 'Learn more about manual excerpts' ) }\n\t\t\t</ExternalLink>\n\t\t</div>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\texcerpt: select( 'core/editor' ).getEditedPostAttribute( 'excerpt' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdateExcerpt( excerpt ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { excerpt } );\n\t\t},\n\t} ) ),\n] )( PostExcerpt );\n","/**\n * Internal dependencies\n */\nimport PostTypeSupportCheck from '../post-type-support-check';\nimport ThemeSupportCheck from '../theme-support-check';\n\nfunction PostFeaturedImageCheck( props ) {\n\treturn (\n\t\t<ThemeSupportCheck supportKeys=\"post-thumbnails\">\n\t\t\t<PostTypeSupportCheck { ...props } supportKeys=\"thumbnail\" />\n\t\t</ThemeSupportCheck>\n\t);\n}\n\nexport default PostFeaturedImageCheck;\n","/**\n * External dependencies\n */\nimport { has, get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\nimport { Button, Spinner, ResponsiveWrapper, withFilters } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostFeaturedImageCheck from './check';\nimport MediaUpload from '../media-upload';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\n// Used when labels from post type were not yet loaded or when they are not present.\nconst DEFAULT_FEATURE_IMAGE_LABEL = __( 'Featured Image' );\nconst DEFAULT_SET_FEATURE_IMAGE_LABEL = __( 'Set featured image' );\nconst DEFAULT_REMOVE_FEATURE_IMAGE_LABEL = __( 'Remove image' );\n\nfunction PostFeaturedImage( { currentPostId, featuredImageId, onUpdateImage, onRemoveImage, media, postType } ) {\n\tconst postLabel = get( postType, [ 'labels' ], {} );\n\n\tlet mediaWidth, mediaHeight, mediaSourceUrl;\n\tif ( media ) {\n\t\tconst mediaSize = applyFilters( 'editor.PostFeaturedImage.imageSize', 'post-thumbnail', media.id, currentPostId );\n\t\tif ( has( media, [ 'media_details', 'sizes', mediaSize ] ) ) {\n\t\t\tmediaWidth = media.media_details.sizes[ mediaSize ].width;\n\t\t\tmediaHeight = media.media_details.sizes[ mediaSize ].height;\n\t\t\tmediaSourceUrl = media.media_details.sizes[ mediaSize ].source_url;\n\t\t} else {\n\t\t\tmediaWidth = media.media_details.width;\n\t\t\tmediaHeight = media.media_details.height;\n\t\t\tmediaSourceUrl = media.source_url;\n\t\t}\n\t}\n\n\treturn (\n\t\t<PostFeaturedImageCheck>\n\t\t\t<div className=\"editor-post-featured-image\">\n\t\t\t\t{ !! featuredImageId &&\n\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\ttitle={ postLabel.featured_image || DEFAULT_FEATURE_IMAGE_LABEL }\n\t\t\t\t\t\tonSelect={ onUpdateImage }\n\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\tmodalClass=\"editor-post-featured-image__media-modal\"\n\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t<Button className=\"editor-post-featured-image__preview\" onClick={ open }>\n\t\t\t\t\t\t\t\t{ media &&\n\t\t\t\t\t\t\t\t\t<ResponsiveWrapper\n\t\t\t\t\t\t\t\t\t\tnaturalWidth={ mediaWidth }\n\t\t\t\t\t\t\t\t\t\tnaturalHeight={ mediaHeight }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img src={ mediaSourceUrl } alt={ postLabel.featured_image || DEFAULT_FEATURE_IMAGE_LABEL } />\n\t\t\t\t\t\t\t\t\t</ResponsiveWrapper>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{ ! media && <Spinner /> }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ featuredImageId }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{ !! featuredImageId && media && ! media.isLoading &&\n\t\t\t\t<MediaUpload\n\t\t\t\t\ttitle={ postLabel.featured_image || DEFAULT_FEATURE_IMAGE_LABEL }\n\t\t\t\t\tonSelect={ onUpdateImage }\n\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\tmodalClass=\"editor-post-featured-image__media-modal\"\n\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t<Button onClick={ open } isDefault isLarge>\n\t\t\t\t\t\t\t{ __( 'Replace image' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{ ! featuredImageId &&\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<MediaUpload\n\t\t\t\t\t\t\ttitle={ postLabel.featured_image || DEFAULT_FEATURE_IMAGE_LABEL }\n\t\t\t\t\t\t\tonSelect={ onUpdateImage }\n\t\t\t\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\t\t\t\tmodalClass=\"editor-post-featured-image__media-modal\"\n\t\t\t\t\t\t\trender={ ( { open } ) => (\n\t\t\t\t\t\t\t\t<Button className=\"editor-post-featured-image__toggle\" onClick={ open }>\n\t\t\t\t\t\t\t\t\t{ postLabel.set_featured_image || DEFAULT_SET_FEATURE_IMAGE_LABEL }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\t{ !! featuredImageId &&\n\t\t\t\t\t<Button onClick={ onRemoveImage } isLink isDestructive>\n\t\t\t\t\t\t{ postLabel.remove_featured_image || DEFAULT_REMOVE_FEATURE_IMAGE_LABEL }\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</PostFeaturedImageCheck>\n\t);\n}\n\nconst applyWithSelect = withSelect( ( select ) => {\n\tconst { getMedia, getPostType } = select( 'core' );\n\tconst { getCurrentPostId, getEditedPostAttribute } = select( 'core/editor' );\n\tconst featuredImageId = getEditedPostAttribute( 'featured_media' );\n\n\treturn {\n\t\tmedia: featuredImageId ? getMedia( featuredImageId ) : null,\n\t\tcurrentPostId: getCurrentPostId(),\n\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t\tfeaturedImageId,\n\t};\n} );\n\nconst applyWithDispatch = withDispatch( ( dispatch ) => {\n\tconst { editPost } = dispatch( 'core/editor' );\n\treturn {\n\t\tonUpdateImage( image ) {\n\t\t\teditPost( { featured_media: image.id } );\n\t\t},\n\t\tonRemoveImage() {\n\t\t\teditPost( { featured_media: 0 } );\n\t\t},\n\t};\n} );\n\nexport default compose(\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\twithFilters( 'editor.PostFeaturedImage' ),\n)( PostFeaturedImage );\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostTypeSupportCheck from '../post-type-support-check';\n\nfunction PostFormatCheck( { disablePostFormats, ...props } ) {\n\treturn ! disablePostFormats &&\n\t\t<PostTypeSupportCheck { ...props } supportKeys=\"post-formats\" />;\n}\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst editorSettings = select( 'core/editor' ).getEditorSettings();\n\t\treturn {\n\t\t\tdisablePostFormats: editorSettings.disablePostFormats,\n\t\t};\n\t}\n)( PostFormatCheck );\n\n","/**\n * External dependencies\n */\nimport { find, get, includes, union } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PostFormatCheck from './check';\n\nexport const POST_FORMATS = [\n\t{ id: 'aside', caption: __( 'Aside' ) },\n\t{ id: 'gallery', caption: __( 'Gallery' ) },\n\t{ id: 'link', caption: __( 'Link' ) },\n\t{ id: 'image', caption: __( 'Image' ) },\n\t{ id: 'quote', caption: __( 'Quote' ) },\n\t{ id: 'standard', caption: __( 'Standard' ) },\n\t{ id: 'status', caption: __( 'Status' ) },\n\t{ id: 'video', caption: __( 'Video' ) },\n\t{ id: 'audio', caption: __( 'Audio' ) },\n\t{ id: 'chat', caption: __( 'Chat' ) },\n];\n\nfunction PostFormat( { onUpdatePostFormat, postFormat = 'standard', supportedFormats, suggestedFormat, instanceId } ) {\n\tconst postFormatSelectorId = 'post-format-selector-' + instanceId;\n\tconst formats = POST_FORMATS.filter( ( format ) => includes( supportedFormats, format.id ) );\n\tconst suggestion = find( formats, ( format ) => format.id === suggestedFormat );\n\n\t// Disable reason: We need to change the value immiediately to show/hide the suggestion if needed\n\n\t/* eslint-disable jsx-a11y/no-onchange */\n\treturn (\n\t\t<PostFormatCheck>\n\t\t\t<div className=\"editor-post-format\">\n\t\t\t\t<div className=\"editor-post-format__content\">\n\t\t\t\t\t<label htmlFor={ postFormatSelectorId }>{ __( 'Post Format' ) }</label>\n\t\t\t\t\t<select\n\t\t\t\t\t\tvalue={ postFormat }\n\t\t\t\t\t\tonChange={ ( event ) => onUpdatePostFormat( event.target.value ) }\n\t\t\t\t\t\tid={ postFormatSelectorId }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ formats.map( ( format ) => (\n\t\t\t\t\t\t\t<option key={ format.id } value={ format.id }>{ format.caption }</option>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\n\t\t\t\t{ suggestion && suggestion.id !== postFormat && (\n\t\t\t\t\t<div className=\"editor-post-format__suggestion\">\n\t\t\t\t\t\t{ __( 'Suggestion:' ) }{ ' ' }\n\t\t\t\t\t\t<Button isLink onClick={ () => onUpdatePostFormat( suggestion.id ) }>\n\t\t\t\t\t\t\t{ suggestion.caption }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</PostFormatCheck>\n\t);\n\t/* eslint-enable jsx-a11y/no-onchange */\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getEditedPostAttribute, getSuggestedPostFormat } = select( 'core/editor' );\n\t\tconst postFormat = getEditedPostAttribute( 'format' );\n\t\tconst themeSupports = select( 'core' ).getThemeSupports();\n\t\t// Ensure current format is always in the set.\n\t\t// The current format may not be a format supported by the theme.\n\t\tconst supportedFormats = union( [ postFormat ], get( themeSupports, [ 'formats' ], [] ) );\n\t\treturn {\n\t\t\tpostFormat,\n\t\t\tsupportedFormats,\n\t\t\tsuggestedFormat: getSuggestedPostFormat(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdatePostFormat( postFormat ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { format: postFormat } );\n\t\t},\n\t} ) ),\n\twithInstanceId,\n] )( PostFormat );\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostTypeSupportCheck from '../post-type-support-check';\n\nexport function PostLastRevisionCheck( { lastRevisionId, revisionsCount, children } ) {\n\tif ( ! lastRevisionId || revisionsCount < 2 ) {\n\t\treturn null;\n\t}\n\n\treturn <PostTypeSupportCheck supportKeys=\"revisions\" >{ children }</PostTypeSupportCheck>;\n}\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst { getCurrentPostLastRevisionId, getCurrentPostRevisionsCount } = select( 'core/editor' );\n\t\treturn {\n\t\t\tlastRevisionId: getCurrentPostLastRevisionId(),\n\t\t\trevisionsCount: getCurrentPostRevisionsCount(),\n\t\t};\n\t}\n)( PostLastRevisionCheck );\n","/**\n * WordPress dependencies\n */\nimport { sprintf, _n } from '@wordpress/i18n';\nimport { IconButton } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostLastRevisionCheck from './check';\nimport { getWPAdminURL } from '../../utils/url';\n\nfunction LastRevision( { lastRevisionId, revisionsCount } ) {\n\treturn (\n\t\t<PostLastRevisionCheck>\n\t\t\t<IconButton\n\t\t\t\thref={ getWPAdminURL( 'revision.php', { revision: lastRevisionId, gutenberg: true } ) }\n\t\t\t\tclassName=\"editor-post-last-revision__title\"\n\t\t\t\ticon=\"backup\"\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t_n( '%d Revision', '%d Revisions', revisionsCount ),\n\t\t\t\t\t\trevisionsCount\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</IconButton>\n\t\t</PostLastRevisionCheck>\n\t);\n}\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst {\n\t\t\tgetCurrentPostLastRevisionId,\n\t\t\tgetCurrentPostRevisionsCount,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tlastRevisionId: getCurrentPostLastRevisionId(),\n\t\t\trevisionsCount: getCurrentPostRevisionsCount(),\n\t\t};\n\t}\n)( LastRevision );\n","/**\n * External dependencies\n */\nimport jQuery from 'jquery';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Modal, Button } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { addQueryArgs } from '@wordpress/url';\nimport { Component } from '@wordpress/element';\nimport { compose, withGlobalEvents } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { getWPAdminURL } from '../../utils/url';\nimport PostPreviewButton from '../post-preview-button';\n\nclass PostLockedModal extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.sendPostLock = this.sendPostLock.bind( this );\n\t\tthis.receivePostLock = this.receivePostLock.bind( this );\n\t\tthis.releasePostLock = this.releasePostLock.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\t// Details on these events on the Heartbeat API docs\n\t\t// https://developer.wordpress.org/plugins/javascript/heartbeat-api/\n\t\tjQuery( document )\n\t\t\t.on( 'heartbeat-send.refresh-lock', this.sendPostLock )\n\t\t\t.on( 'heartbeat-tick.refresh-lock', this.receivePostLock );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tjQuery( document )\n\t\t\t.off( 'heartbeat-send.refresh-lock', this.sendPostLock )\n\t\t\t.off( 'heartbeat-tick.refresh-lock', this.receivePostLock );\n\t}\n\n\t/**\n\t * Keep the lock refreshed.\n\t *\n\t * When the user does not send a heartbeat in a heartbeat-tick\n\t * the user is no longer editing and another user can start editing.\n\t *\n\t * @param {Object} event Event.\n\t * @param {Object} data  Data to send in the heartbeat request.\n\t */\n\tsendPostLock( event, data ) {\n\t\tconst { isLocked, activePostLock, postId } = this.props;\n\t\tif ( isLocked ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata[ 'wp-refresh-post-lock' ] = {\n\t\t\tlock: activePostLock,\n\t\t\tpost_id: postId,\n\t\t};\n\t}\n\n\t/**\n\t * Refresh post locks: update the lock string or show the dialog if somebody has taken over editing.\n\t *\n\t * @param {Object} event Event.\n\t * @param {Object} data  Data received in the heartbeat request\n\t */\n\treceivePostLock( event, data ) {\n\t\tif ( ! data[ 'wp-refresh-post-lock' ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { autosave, updatePostLock } = this.props;\n\t\tconst received = data[ 'wp-refresh-post-lock' ];\n\t\tif ( received.lock_error ) {\n\t\t\t// Auto save and display the takeover modal.\n\t\t\tautosave();\n\t\t\tupdatePostLock( {\n\t\t\t\tisLocked: true,\n\t\t\t\tisTakeover: true,\n\t\t\t\tuser: {\n\t\t\t\t\tavatar: received.lock_error.avatar_src,\n\t\t\t\t},\n\t\t\t} );\n\t\t} else if ( received.new_lock ) {\n\t\t\tupdatePostLock( {\n\t\t\t\tisLocked: false,\n\t\t\t\tactivePostLock: received.new_lock,\n\t\t\t} );\n\t\t}\n\t}\n\n\t/**\n\t * Unlock the post before the window is exited.\n\t */\n\treleasePostLock() {\n\t\tconst { isLocked, activePostLock, postLockUtils, postId } = this.props;\n\t\tif ( isLocked || ! activePostLock ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = {\n\t\t\taction: 'wp-remove-post-lock',\n\t\t\t_wpnonce: postLockUtils.unlockNonce,\n\t\t\tpost_ID: postId,\n\t\t\tactive_post_lock: activePostLock,\n\t\t};\n\n\t\tjQuery.post( {\n\t\t\tasync: false,\n\t\t\turl: postLockUtils.ajaxUrl,\n\t\t\tdata,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { user, postId, isLocked, isTakeover, postLockUtils } = this.props;\n\t\tif ( ! isLocked ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst userDisplayName = user.name;\n\t\tconst userAvatar = user.avatar;\n\n\t\tconst unlockUrl = addQueryArgs( 'post.php', {\n\t\t\t'get-post-lock': '1',\n\t\t\tlockKey: true,\n\t\t\tpost: postId,\n\t\t\taction: 'edit',\n\t\t\t_wpnonce: postLockUtils.nonce,\n\t\t} );\n\t\tconst allPosts = getWPAdminURL( 'edit.php' );\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={ isTakeover ? __( 'Someone else has taken over this post.' ) : __( 'This post is already being edited.' ) }\n\t\t\t\tfocusOnMount={ true }\n\t\t\t\tshouldCloseOnClickOutside={ false }\n\t\t\t\tshouldCloseOnEsc={ false }\n\t\t\t\tisDismissable={ false }\n\t\t\t\tclassName=\"editor-post-locked-modal\"\n\t\t\t>\n\t\t\t\t{ !! userAvatar && (\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={ userAvatar }\n\t\t\t\t\t\talt={ __( 'Avatar' ) }\n\t\t\t\t\t\tclassName=\"editor-post-locked-modal__avatar\"\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ !! isTakeover && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{ userDisplayName ?\n\t\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t\t/* translators: 'post' is generic and may be of any type (post, page, etc.). */\n\t\t\t\t\t\t\t\t\t__( '%s now has editing control of this post. Don\\'t worry, your changes up to this moment have been saved' ),\n\t\t\t\t\t\t\t\t\tuserDisplayName\n\t\t\t\t\t\t\t\t) :\n\t\t\t\t\t\t\t\t/* translators: 'post' is generic and may be of any type (post, page, etc.). */\n\t\t\t\t\t\t\t\t__( 'Another user now has editing control of this post. Don\\'t worry, your changes up to this moment have been saved' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t<a href={ allPosts }>\n\t\t\t\t\t\t\t\t{ __( 'View all posts' ) }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ ! isTakeover && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{ userDisplayName ?\n\t\t\t\t\t\t\t\tsprintf(\n\t\t\t\t\t\t\t\t\t/* translators: 'post' is generic and may be of any type (post, page, etc.). */\n\t\t\t\t\t\t\t\t\t__( '%s is currently working on this post, which means you cannot make changes, unless you take over.' ),\n\t\t\t\t\t\t\t\t\tuserDisplayName\n\t\t\t\t\t\t\t\t) :\n\t\t\t\t\t\t\t\t/* translators: 'post' is generic and may be of any type (post, page, etc.). */\n\t\t\t\t\t\t\t\t__( 'Another user is currently working on this post, which means you cannot make changes, unless you take over.' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"editor-post-locked-modal__buttons\">\n\t\t\t\t\t\t\t<Button isDefault isLarge href={ allPosts }>\n\t\t\t\t\t\t\t\t{ __( 'All Posts' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<PostPreviewButton />\n\t\t\t\t\t\t\t<Button isPrimary isLarge href={ unlockUrl }>\n\t\t\t\t\t\t\t\t{ __( 'Take Over' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetEditorSettings,\n\t\t\tisPostLocked,\n\t\t\tisPostLockTakeover,\n\t\t\tgetPostLockUser,\n\t\t\tgetCurrentPostId,\n\t\t\tgetActivePostLock,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tisLocked: isPostLocked(),\n\t\t\tisTakeover: isPostLockTakeover(),\n\t\t\tuser: getPostLockUser(),\n\t\t\tpostId: getCurrentPostId(),\n\t\t\tpostLockUtils: getEditorSettings().postLockUtils,\n\t\t\tactivePostLock: getActivePostLock(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { autosave, updatePostLock } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tautosave,\n\t\t\tupdatePostLock,\n\t\t};\n\t} ),\n\twithGlobalEvents( {\n\t\tbeforeunload: 'releasePostLock',\n\t} )\n)( PostLockedModal );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport function PostPendingStatusCheck( { hasPublishAction, isPublished, children } ) {\n\tif ( isPublished || ! hasPublishAction ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { isCurrentPostPublished, getCurrentPostType, getCurrentPost } = select( 'core/editor' );\n\t\treturn {\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t} )\n)( PostPendingStatusCheck );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { CheckboxControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PostPendingStatusCheck from './check';\n\nexport function PostPendingStatus( { status, onUpdateStatus } ) {\n\tconst togglePendingStatus = () => {\n\t\tconst updatedStatus = status === 'pending' ? 'draft' : 'pending';\n\t\tonUpdateStatus( updatedStatus );\n\t};\n\n\treturn (\n\t\t<PostPendingStatusCheck>\n\t\t\t<CheckboxControl\n\t\t\t\tlabel={ __( 'Pending Review' ) }\n\t\t\t\tchecked={ status === 'pending' }\n\t\t\t\tonChange={ togglePendingStatus }\n\t\t\t/>\n\t\t</PostPendingStatusCheck>\n\t);\n}\n\nexport default compose(\n\twithSelect( ( select ) => ( {\n\t\tstatus: select( 'core/editor' ).getEditedPostAttribute( 'status' ),\n\t} ) ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdateStatus( status ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { status } );\n\t\t},\n\t} ) ),\n)( PostPendingStatus );\n","/**\n * WordPress dependencies\n */\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\n\nclass PostPermalinkEditor extends Component {\n\tconstructor( { permalinkParts } ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\teditedPostName: permalinkParts.postName,\n\t\t};\n\n\t\tthis.onSavePermalink = this.onSavePermalink.bind( this );\n\t}\n\n\tonSavePermalink( event ) {\n\t\tconst postName = this.state.editedPostName.replace( /\\s+/g, '-' );\n\n\t\tevent.preventDefault();\n\n\t\tthis.props.onSave();\n\n\t\tif ( postName === this.props.postName ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.editPost( {\n\t\t\tslug: postName,\n\t\t} );\n\n\t\tthis.setState( {\n\t\t\teditedPostName: postName,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { prefix, suffix } = this.props.permalinkParts;\n\t\tconst { editedPostName } = this.state;\n\n\t\t/* eslint-disable jsx-a11y/no-autofocus */\n\t\t// Autofocus is allowed here, as this mini-UI is only loaded when the user clicks to open it.\n\t\treturn (\n\t\t\t<form\n\t\t\t\tclassName=\"editor-post-permalink-editor\"\n\t\t\t\tonSubmit={ this.onSavePermalink }\n\t\t\t>\n\t\t\t\t<span className=\"editor-post-permalink__editor-container\">\n\t\t\t\t\t<span className=\"editor-post-permalink-editor__prefix\">\n\t\t\t\t\t\t{ prefix }\n\t\t\t\t\t</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"editor-post-permalink-editor__edit\"\n\t\t\t\t\t\taria-label={ __( 'Edit post permalink' ) }\n\t\t\t\t\t\tvalue={ editedPostName }\n\t\t\t\t\t\tonChange={ ( event ) => this.setState( { editedPostName: event.target.value } ) }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tautoFocus\n\t\t\t\t\t/>\n\t\t\t\t\t<span className=\"editor-post-permalink-editor__suffix\">\n\t\t\t\t\t\t{ suffix }\n\t\t\t\t\t</span>\n\t\t\t\t\t&lrm;\n\t\t\t\t</span>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"editor-post-permalink-editor__save\"\n\t\t\t\t\tisLarge\n\t\t\t\t\tonClick={ this.onSavePermalink }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t</Button>\n\t\t\t</form>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-autofocus */\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getPermalinkParts } = select( 'core/editor' );\n\t\treturn {\n\t\t\tpermalinkParts: getPermalinkParts(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { editPost } = dispatch( 'core/editor' );\n\t\treturn { editPost };\n\t} ),\n] )( PostPermalinkEditor );\n\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Component } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { ClipboardButton, Button, ExternalLink } from '@wordpress/components';\nimport { safeDecodeURI } from '@wordpress/url';\n\n/**\n * Internal Dependencies\n */\nimport PostPermalinkEditor from './editor.js';\nimport { getWPAdminURL } from '../../utils/url';\n\nclass PostPermalink extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.addVisibilityCheck = this.addVisibilityCheck.bind( this );\n\t\tthis.onVisibilityChange = this.onVisibilityChange.bind( this );\n\n\t\tthis.state = {\n\t\t\tisCopied: false,\n\t\t\tisEditingPermalink: false,\n\t\t};\n\t}\n\n\taddVisibilityCheck() {\n\t\twindow.addEventListener( 'visibilitychange', this.onVisibilityChange );\n\t}\n\n\tonVisibilityChange() {\n\t\tconst { isEditable, refreshPost } = this.props;\n\t\t// If the user just returned after having clicked the \"Change Permalinks\" button,\n\t\t// fetch a new copy of the post from the server, just in case they enabled permalinks.\n\t\tif ( ! isEditable && 'visible' === document.visibilityState ) {\n\t\t\trefreshPost();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\t// If we've just stopped editing the permalink, focus on the new permalink.\n\t\tif ( prevState.isEditingPermalink && ! this.state.isEditingPermalink ) {\n\t\t\tthis.linkElement.focus();\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener( 'visibilitychange', this.addVisibilityCheck );\n\t}\n\n\trender() {\n\t\tconst { isNew, postLink, isEditable, samplePermalink, isPublished } = this.props;\n\t\tconst { isCopied, isEditingPermalink } = this.state;\n\t\tconst ariaLabel = isCopied ? __( 'Permalink copied' ) : __( 'Copy the permalink' );\n\n\t\tif ( isNew || ! postLink ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"editor-post-permalink\">\n\t\t\t\t<ClipboardButton\n\t\t\t\t\tclassName={ classnames( 'editor-post-permalink__copy', { 'is-copied': isCopied } ) }\n\t\t\t\t\ttext={ samplePermalink }\n\t\t\t\t\tlabel={ ariaLabel }\n\t\t\t\t\tonCopy={ () => this.setState( { isCopied: true } ) }\n\t\t\t\t\taria-disabled={ isCopied }\n\t\t\t\t\ticon=\"admin-links\"\n\t\t\t\t/>\n\n\t\t\t\t<span className=\"editor-post-permalink__label\">{ __( 'Permalink:' ) }</span>\n\n\t\t\t\t{ ! isEditingPermalink &&\n\t\t\t\t\t<ExternalLink\n\t\t\t\t\t\tclassName=\"editor-post-permalink__link\"\n\t\t\t\t\t\thref={ ! isPublished ? postLink : samplePermalink }\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\tref={ ( linkElement ) => this.linkElement = linkElement }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ safeDecodeURI( samplePermalink ) }\n\t\t\t\t\t\t&lrm;\n\t\t\t\t\t</ExternalLink>\n\t\t\t\t}\n\n\t\t\t\t{ isEditingPermalink &&\n\t\t\t\t\t<PostPermalinkEditor\n\t\t\t\t\t\tonSave={ () => this.setState( { isEditingPermalink: false } ) }\n\t\t\t\t\t/>\n\t\t\t\t}\n\n\t\t\t\t{ isEditable && ! isEditingPermalink &&\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"editor-post-permalink__edit\"\n\t\t\t\t\t\tisLarge\n\t\t\t\t\t\tonClick={ () => this.setState( { isEditingPermalink: true } ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Edit' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\n\t\t\t\t{ ! isEditable &&\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"editor-post-permalink__change\"\n\t\t\t\t\t\tisLarge\n\t\t\t\t\t\thref={ getWPAdminURL( 'options-permalink.php' ) }\n\t\t\t\t\t\tonClick={ this.addVisibilityCheck }\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Change Permalinks' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tisEditedPostNew,\n\t\t\tisPermalinkEditable,\n\t\t\tgetCurrentPost,\n\t\t\tgetPermalink,\n\t\t\tisCurrentPostPublished,\n\t\t} = select( 'core/editor' );\n\n\t\tconst { link } = getCurrentPost();\n\n\t\treturn {\n\t\t\tisNew: isEditedPostNew(),\n\t\t\tpostLink: link,\n\t\t\tisEditable: isPermalinkEditable(),\n\t\t\tsamplePermalink: getPermalink(),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { refreshPost } = dispatch( 'core/editor' );\n\t\treturn { refreshPost };\n\t} ),\n] )( PostPermalink );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { CheckboxControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nfunction PostPingbacks( { pingStatus = 'open', ...props } ) {\n\tconst onTogglePingback = () => props.editPost( { ping_status: pingStatus === 'open' ? 'closed' : 'open' } );\n\n\treturn (\n\t\t<CheckboxControl\n\t\t\tlabel={ __( 'Allow Pingbacks & Trackbacks' ) }\n\t\t\tchecked={ pingStatus === 'open' }\n\t\t\tonChange={ onTogglePingback }\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tpingStatus: select( 'core/editor' ).getEditedPostAttribute( 'ping_status' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\teditPost: dispatch( 'core/editor' ).editPost,\n\t} ) ),\n] )( PostPingbacks );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { DotTip } from '@wordpress/nux';\nimport { ifCondition, compose } from '@wordpress/compose';\n\nexport class PostPreviewButton extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.openPreviewWindow = this.openPreviewWindow.bind( this );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { previewLink } = this.props;\n\n\t\t// This relies on the window being responsible to unset itself when\n\t\t// navigation occurs or a new preview window is opened, to avoid\n\t\t// unintentional forceful redirects.\n\t\tif ( previewLink && ! prevProps.previewLink ) {\n\t\t\tthis.setPreviewWindowLink( previewLink );\n\n\t\t\t// Once popup redirect is evaluated, even if already closed, delete\n\t\t\t// reference to avoid later assignment of location in post update.\n\t\t\tdelete this.previewWindow;\n\t\t}\n\t}\n\n\t/**\n\t * Sets the preview window's location to the given URL, if a preview window\n\t * exists and is not closed.\n\t *\n\t * @param {string} url URL to assign as preview window location.\n\t */\n\tsetPreviewWindowLink( url ) {\n\t\tconst { previewWindow } = this;\n\n\t\tif ( previewWindow && ! previewWindow.closed ) {\n\t\t\tpreviewWindow.location = url;\n\t\t}\n\t}\n\n\tgetWindowTarget() {\n\t\tconst { postId } = this.props;\n\t\treturn `wp-preview-${ postId }`;\n\t}\n\n\t/**\n\t * Opens a popup window, navigating user to a preview of the current post.\n\t * Triggers autosave if post is autosaveable.\n\t */\n\topenPreviewWindow() {\n\t\tconst { isAutosaveable, previewLink, currentPostLink } = this.props;\n\n\t\t// Open a popup, BUT: Set it to a blank page until save completes. This\n\t\t// is necessary because popups can only be opened in response to user\n\t\t// interaction (click), but we must still wait for the post to save.\n\t\tif ( ! this.previewWindow || this.previewWindow.closed ) {\n\t\t\tthis.previewWindow = window.open( '', this.getWindowTarget() );\n\t\t}\n\n\t\t// Ask the browser to bring the preview tab to the front\n\t\t// This can work or not depending on the browser's user preferences\n\t\t// https://html.spec.whatwg.org/multipage/interaction.html#dom-window-focus\n\t\tthis.previewWindow.focus();\n\n\t\t// If there are no changes to autosave, we cannot perform the save, but\n\t\t// if there is an existing preview link (e.g. previous published post\n\t\t// autosave), it should be reused as the popup destination.\n\t\tif ( ! isAutosaveable && ! previewLink && currentPostLink ) {\n\t\t\tthis.setPreviewWindowLink( currentPostLink );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! isAutosaveable ) {\n\t\t\tthis.setPreviewWindowLink( previewLink );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.props.autosave();\n\n\t\tconst markup = `\n\t\t\t<div class=\"editor-post-preview-button__interstitial-message\">\n\t\t\t\t<p>Please wait&hellip;</p>\n\t\t\t\t<p>Generating preview.</p>\n\t\t\t</div>\n\t\t\t<style>\n\t\t\t\tbody {\n\t\t\t\t\tmargin: 0;\n\t\t\t\t}\n\t\t\t\t.editor-post-preview-button__interstitial-message {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\theight: 100vh;\n\t\t\t\t\twidth: 100vw;\n\t\t\t\t}\n\t\t\t\tp {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tfont-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n\t\t\t\t}\n\t\t\t</style>`;\n\n\t\tthis.previewWindow.document.write( markup );\n\t\tthis.previewWindow.document.close();\n\t}\n\n\trender() {\n\t\tconst { isSaveable } = this.props;\n\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tclassName=\"editor-post-preview\"\n\t\t\t\tisLarge\n\t\t\t\tonClick={ this.openPreviewWindow }\n\t\t\t\tdisabled={ ! isSaveable }\n\t\t\t>\n\t\t\t\t{ _x( 'Preview', 'imperative verb' ) }\n\t\t\t\t<DotTip id=\"core/editor.preview\">\n\t\t\t\t\t{ __( 'Click Preview to load a preview of this page, so you can make sure youre happy with your blocks.' ) }\n\t\t\t\t</DotTip>\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetCurrentPostId,\n\t\t\tgetCurrentPostAttribute,\n\t\t\tgetAutosaveAttribute,\n\t\t\tgetEditedPostAttribute,\n\t\t\tisEditedPostDirty,\n\t\t\tisEditedPostNew,\n\t\t\tisEditedPostSaveable,\n\t\t\tisEditedPostAutosaveable,\n\t\t} = select( 'core/editor' );\n\t\tconst {\n\t\t\tgetPostType,\n\t\t} = select( 'core' );\n\t\tconst postType = getPostType( getEditedPostAttribute( 'type' ) );\n\t\treturn {\n\t\t\tpostId: getCurrentPostId(),\n\t\t\tcurrentPostLink: getCurrentPostAttribute( 'link' ),\n\t\t\tpreviewLink: getAutosaveAttribute( 'preview_link' ),\n\t\t\tisDirty: isEditedPostDirty(),\n\t\t\tisNew: isEditedPostNew(),\n\t\t\tisSaveable: isEditedPostSaveable(),\n\t\t\tisAutosaveable: isEditedPostAutosaveable(),\n\t\t\tisViewable: get( postType, [ 'viewable' ], false ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tautosave: dispatch( 'core/editor' ).autosave,\n\t} ) ),\n\tifCondition( ( { isViewable } ) => isViewable ),\n] )( PostPreviewButton );\n","/**\n * External dependencies\n */\nimport { noop, get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { Component, createRef } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PublishButtonLabel from './label';\nexport class PostPublishButton extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.buttonNode = createRef();\n\t}\n\tcomponentDidMount() {\n\t\tif ( this.props.focusOnMount ) {\n\t\t\tthis.buttonNode.current.focus();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tisSaving,\n\t\t\tonStatusChange,\n\t\t\tonSave,\n\t\t\tisBeingScheduled,\n\t\t\tvisibility,\n\t\t\tisPublishable,\n\t\t\tisSaveable,\n\t\t\thasPublishAction,\n\t\t\tonSubmit = noop,\n\t\t\tforceIsSaving,\n\t\t} = this.props;\n\t\tconst isButtonEnabled = isPublishable && isSaveable;\n\n\t\tlet publishStatus;\n\t\tif ( ! hasPublishAction ) {\n\t\t\tpublishStatus = 'pending';\n\t\t} else if ( isBeingScheduled ) {\n\t\t\tpublishStatus = 'future';\n\t\t} else if ( visibility === 'private' ) {\n\t\t\tpublishStatus = 'private';\n\t\t} else {\n\t\t\tpublishStatus = 'publish';\n\t\t}\n\n\t\tconst onClick = () => {\n\t\t\tonSubmit();\n\t\t\tonStatusChange( publishStatus );\n\t\t\tonSave();\n\t\t};\n\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tref={ this.buttonNode }\n\t\t\t\tclassName=\"editor-post-publish-button\"\n\t\t\t\tisPrimary\n\t\t\t\tisLarge\n\t\t\t\tonClick={ onClick }\n\t\t\t\tdisabled={ ! isButtonEnabled }\n\t\t\t\tisBusy={ isSaving }\n\t\t\t>\n\t\t\t\t<PublishButtonLabel forceIsSaving={ forceIsSaving } />\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { forceIsSaving, forceIsDirty } ) => {\n\t\tconst {\n\t\t\tisSavingPost,\n\t\t\tisEditedPostBeingScheduled,\n\t\t\tgetEditedPostVisibility,\n\t\t\tisEditedPostSaveable,\n\t\t\tisEditedPostPublishable,\n\t\t\tgetCurrentPost,\n\t\t\tgetCurrentPostType,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tisSaving: forceIsSaving || isSavingPost(),\n\t\t\tisBeingScheduled: isEditedPostBeingScheduled(),\n\t\t\tvisibility: getEditedPostVisibility(),\n\t\t\tisSaveable: isEditedPostSaveable(),\n\t\t\tisPublishable: forceIsDirty || isEditedPostPublishable(),\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { editPost, savePost } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonStatusChange: ( status ) => editPost( { status } ),\n\t\t\tonSave: savePost,\n\t\t};\n\t} ),\n] )( PostPublishButton );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport function PublishButtonLabel( {\n\tisPublished,\n\tisBeingScheduled,\n\tisSaving,\n\tisPublishing,\n\thasPublishAction,\n\tisAutosaving,\n} ) {\n\tif ( isPublishing ) {\n\t\treturn __( 'Publishing' );\n\t} else if ( isPublished && isSaving && ! isAutosaving ) {\n\t\treturn __( 'Updating' );\n\t} else if ( isBeingScheduled && isSaving && ! isAutosaving ) {\n\t\treturn __( 'Scheduling' );\n\t}\n\n\tif ( ! hasPublishAction ) {\n\t\treturn __( 'Submit for Review' );\n\t} else if ( isPublished ) {\n\t\treturn __( 'Update' );\n\t} else if ( isBeingScheduled ) {\n\t\treturn __( 'Schedule' );\n\t}\n\n\treturn __( 'Publish' );\n}\n\nexport default compose( [\n\twithSelect( ( select, { forceIsSaving } ) => {\n\t\tconst {\n\t\t\tisCurrentPostPublished,\n\t\t\tisEditedPostBeingScheduled,\n\t\t\tisSavingPost,\n\t\t\tisPublishingPost,\n\t\t\tgetCurrentPost,\n\t\t\tgetCurrentPostType,\n\t\t\tisAutosavingPost,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tisBeingScheduled: isEditedPostBeingScheduled(),\n\t\t\tisSaving: forceIsSaving || isSavingPost(),\n\t\t\tisPublishing: isPublishingPost(),\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tpostType: getCurrentPostType(),\n\t\t\tisAutosaving: isAutosavingPost(),\n\t\t};\n\t} ),\n] )( PublishButtonLabel );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { IconButton, Spinner, CheckboxControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal Dependencies\n */\nimport PostPublishButton from '../post-publish-button';\nimport PostPublishPanelPrepublish from './prepublish';\nimport PostPublishPanelPostpublish from './postpublish';\n\nclass PostPublishPanel extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSubmit = this.onSubmit.bind( this );\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\tsubmitted: false,\n\t\t};\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\tif (\n\t\t\tstate.submitted ||\n\t\t\tprops.isSaving ||\n\t\t\t( ! props.isPublished && ! props.isScheduled )\n\t\t) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tsubmitted: true,\n\t\t\tloading: false,\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\t// Automatically collapse the publish sidebar when a post\n\t\t// is published and the user makes an edit.\n\t\tif ( prevProps.isPublished && ! this.props.isSaving && this.props.isDirty ) {\n\t\t\tthis.props.onClose();\n\t\t}\n\t}\n\n\tonSubmit() {\n\t\tconst { onClose, hasPublishAction } = this.props;\n\t\tif ( ! hasPublishAction ) {\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\t\tthis.setState( { loading: true } );\n\t}\n\n\trender() {\n\t\tconst { isScheduled, isPublishSidebarEnabled, onClose, onTogglePublishSidebar, forceIsDirty, forceIsSaving, PrePublishExtension, PostPublishExtension, ...additionalProps } = this.props;\n\t\tconst { loading, submitted } = this.state;\n\t\treturn (\n\t\t\t<div className=\"editor-post-publish-panel\" { ...additionalProps }>\n\t\t\t\t<div className=\"editor-post-publish-panel__header\">\n\t\t\t\t\t{ ! submitted && (\n\t\t\t\t\t\t<div className=\"editor-post-publish-panel__header-publish-button\">\n\t\t\t\t\t\t\t<PostPublishButton focusOnMount={ true } onSubmit={ this.onSubmit } forceIsDirty={ forceIsDirty } forceIsSaving={ forceIsSaving } />\n\t\t\t\t\t\t\t<span className=\"editor-post-publish-panel__spacer\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t{ submitted && (\n\t\t\t\t\t\t<div className=\"editor-post-publish-panel__header-published\">\n\t\t\t\t\t\t\t{ isScheduled ? __( 'Scheduled' ) : __( 'Published' ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\taria-expanded={ true }\n\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t\ticon=\"no-alt\"\n\t\t\t\t\t\tlabel={ __( 'Close panel' ) }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"editor-post-publish-panel__content\">\n\t\t\t\t\t{ ! loading && ! submitted && (\n\t\t\t\t\t\t<PostPublishPanelPrepublish>\n\t\t\t\t\t\t\t{ PrePublishExtension && <PrePublishExtension /> }\n\t\t\t\t\t\t</PostPublishPanelPrepublish>\n\t\t\t\t\t) }\n\t\t\t\t\t{ loading && ! submitted && <Spinner /> }\n\t\t\t\t\t{ submitted && (\n\t\t\t\t\t\t<PostPublishPanelPostpublish>\n\t\t\t\t\t\t\t{ PostPublishExtension && <PostPublishExtension /> }\n\t\t\t\t\t\t</PostPublishPanelPostpublish>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t<div className=\"editor-post-publish-panel__footer\">\n\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\tlabel={ __( 'Always show pre-publish checks.' ) }\n\t\t\t\t\t\tchecked={ isPublishSidebarEnabled }\n\t\t\t\t\t\tonChange={ onTogglePublishSidebar }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetCurrentPost,\n\t\t\tgetCurrentPostType,\n\t\t\tisCurrentPostPublished,\n\t\t\tisCurrentPostScheduled,\n\t\t\tisSavingPost,\n\t\t\tisEditedPostDirty,\n\t\t} = select( 'core/editor' );\n\t\tconst { isPublishSidebarEnabled } = select( 'core/editor' );\n\t\treturn {\n\t\t\tpostType: getCurrentPostType(),\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t\tisSaving: isSavingPost(),\n\t\t\tisDirty: isEditedPostDirty(),\n\t\t\tisPublishSidebarEnabled: isPublishSidebarEnabled(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { isPublishSidebarEnabled } ) => {\n\t\tconst { disablePublishSidebar, enablePublishSidebar } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonTogglePublishSidebar: ( ) => {\n\t\t\t\tif ( isPublishSidebarEnabled ) {\n\t\t\t\t\tdisablePublishSidebar();\n\t\t\t\t} else {\n\t\t\t\t\tenablePublishSidebar();\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t} ),\n] )( PostPublishPanel );\n","/**\n * External dependencies\n */\nimport { find, get, includes } from 'lodash';\n\n/**\n * WordPress dependencies.\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { ifCondition, compose } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Button, PanelBody } from '@wordpress/components';\n\n/**\n * Internal dependencies.\n */\nimport { POST_FORMATS } from '../post-format';\n\nconst PostFormatSuggestion = ( { suggestedPostFormat, suggestionText, onUpdatePostFormat } ) => (\n\t<Button isLink onClick={ () => onUpdatePostFormat( suggestedPostFormat ) }>\n\t\t{ suggestionText }\n\t</Button>\n);\n\nconst PostFormatPanel = ( { suggestion, onUpdatePostFormat } ) => {\n\tconst panelBodyTitle = [\n\t\t__( 'Suggestion:' ),\n\t\t(\n\t\t\t<span className=\"editor-post-publish-panel__link\" key=\"label\">\n\t\t\t\t{ __( 'Use a post format' ) }\n\t\t\t</span>\n\t\t),\n\t];\n\n\treturn (\n\t\t<PanelBody initialOpen={ false } title={ panelBodyTitle } >\n\t\t\t<p>\n\t\t\t\t{ __( 'Your theme uses post formats to highlight different kinds of content, like images or videos. Apply a post format to see this special styling.' ) }\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\t<PostFormatSuggestion\n\t\t\t\t\tonUpdatePostFormat={ onUpdatePostFormat }\n\t\t\t\t\tsuggestedPostFormat={ suggestion.id }\n\t\t\t\t\tsuggestionText={ sprintf(\n\t\t\t\t\t\t__( 'Apply the \"%1$s\" format.' ),\n\t\t\t\t\t\tsuggestion.caption\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</p>\n\t\t</PanelBody>\n\t);\n};\n\nconst getSuggestion = ( supportedFormats, suggestedPostFormat ) => {\n\tconst formats = POST_FORMATS.filter( ( format ) => includes( supportedFormats, format.id ) );\n\treturn find( formats, ( format ) => format.id === suggestedPostFormat );\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getEditedPostAttribute, getSuggestedPostFormat } = select( 'core/editor' );\n\t\tconst supportedFormats = get( select( 'core' ).getThemeSupports(), [ 'formats' ], [] );\n\t\treturn {\n\t\t\tcurrentPostFormat: getEditedPostAttribute( 'format' ),\n\t\t\tsuggestion: getSuggestion( supportedFormats, getSuggestedPostFormat() ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdatePostFormat( postFormat ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { format: postFormat } );\n\t\t},\n\t} ) ),\n\tifCondition( ( { suggestion, currentPostFormat } ) => suggestion && suggestion.id !== currentPostFormat ),\n)( PostFormatPanel );\n","/**\n * External dependencies\n */\nimport { some } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose, ifCondition } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport { PanelBody } from '@wordpress/components';\n\nimport FlatTermSelector from '../post-taxonomies/flat-term-selector';\n\nconst TagsPanel = () => {\n\tconst panelBodyTitle = [\n\t\t__( 'Suggestion:' ),\n\t\t(\n\t\t\t<span className=\"editor-post-publish-panel__link\" key=\"label\">\n\t\t\t\t{ __( 'Add tags' ) }\n\t\t\t</span>\n\t\t),\n\t];\n\n\treturn (\n\t\t<PanelBody initialOpen={ false } title={ panelBodyTitle }>\n\t\t\t<p>\n\t\t\t\t{ __( 'Tags help users and search engines navigate your site and find your content. Add a few keywords to describe your post.' ) }\n\t\t\t</p>\n\t\t\t<FlatTermSelector slug={ 'post_tag' } />\n\t\t</PanelBody>\n\t);\n};\n\nclass MaybeTagsPanel extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\thadTagsWhenOpeningThePanel: props.hasTags,\n\t\t};\n\t}\n\n\t/*\n\t * We only want to show the tag panel if the post didn't have\n\t * any tags when the user hit the Publish button.\n\t *\n\t * We can't use the prop.hasTags because it'll change to true\n\t * if the user adds a new tag within the pre-publish panel.\n\t * This would force a re-render and a new prop.hasTags check,\n\t * hiding this panel and keeping the user from adding\n\t * more than one tag.\n\t */\n\trender() {\n\t\tif ( ! this.state.hadTagsWhenOpeningThePanel ) {\n\t\t\treturn <TagsPanel />;\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst postType = select( 'core/editor' ).getCurrentPostType();\n\t\tconst tagsTaxonomy = select( 'core' ).getTaxonomy( 'post_tag' );\n\t\tconst tags = tagsTaxonomy && select( 'core/editor' ).getEditedPostAttribute( tagsTaxonomy.rest_base );\n\t\treturn {\n\t\t\tareTagsFetched: tagsTaxonomy !== undefined,\n\t\t\tisPostTypeSupported: tagsTaxonomy && some( tagsTaxonomy.types, ( type ) => type === postType ),\n\t\t\thasTags: tags && tags.length,\n\t\t};\n\t} ),\n\tifCondition( ( { areTagsFetched, isPostTypeSupported } ) => isPostTypeSupported && areTagsFetched ),\n)( MaybeTagsPanel );\n","/**\n * External Dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress Dependencies\n */\nimport { PanelBody, Button, ClipboardButton, TextControl } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport PostScheduleLabel from '../post-schedule/label';\n\nclass PostPublishPanelPostpublish extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tshowCopyConfirmation: false,\n\t\t};\n\t\tthis.onCopy = this.onCopy.bind( this );\n\t\tthis.onSelectInput = this.onSelectInput.bind( this );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.dismissCopyConfirmation );\n\t}\n\n\tonCopy() {\n\t\tthis.setState( {\n\t\t\tshowCopyConfirmation: true,\n\t\t} );\n\n\t\tclearTimeout( this.dismissCopyConfirmation );\n\t\tthis.dismissCopyConfirmation = setTimeout( () => {\n\t\t\tthis.setState( {\n\t\t\t\tshowCopyConfirmation: false,\n\t\t\t} );\n\t\t}, 4000 );\n\t}\n\n\tonSelectInput( event ) {\n\t\tevent.target.select();\n\t}\n\n\trender() {\n\t\tconst { children, isScheduled, post, postType } = this.props;\n\t\tconst postLabel = get( postType, [ 'labels', 'singular_name' ] );\n\t\tconst viewPostLabel = get( postType, [ 'labels', 'view_item' ] );\n\n\t\tconst postPublishNonLinkHeader = isScheduled ?\n\t\t\t<Fragment>{ __( 'is now scheduled. It will go live on' ) } <PostScheduleLabel />.</Fragment> :\n\t\t\t__( 'is now live.' );\n\n\t\treturn (\n\t\t\t<div className=\"post-publish-panel__postpublish\">\n\t\t\t\t<PanelBody className=\"post-publish-panel__postpublish-header\">\n\t\t\t\t\t<a href={ post.link }>{ post.title || __( '(no title)' ) }</a> { postPublishNonLinkHeader }\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<p className=\"post-publish-panel__postpublish-subheader\">\n\t\t\t\t\t\t<strong>{ __( 'Whats next?' ) }</strong>\n\t\t\t\t\t</p>\n\t\t\t\t\t<TextControl\n\t\t\t\t\t\tclassName=\"post-publish-panel__postpublish-post-address\"\n\t\t\t\t\t\treadOnly\n\t\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t\t/* translators: %s: post type singular name */\n\t\t\t\t\t\t\t__( '%s address' ), postLabel\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tvalue={ post.link }\n\t\t\t\t\t\tonFocus={ this.onSelectInput }\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"post-publish-panel__postpublish-buttons\">\n\t\t\t\t\t\t{ ! isScheduled && (\n\t\t\t\t\t\t\t<Button isDefault href={ post.link }>\n\t\t\t\t\t\t\t\t{ viewPostLabel }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t) }\n\n\t\t\t\t\t\t<ClipboardButton isDefault text={ post.link } onCopy={ this.onCopy }>\n\t\t\t\t\t\t\t{ this.state.showCopyConfirmation ? __( 'Copied!' ) : __( 'Copy Link' ) }\n\t\t\t\t\t\t</ClipboardButton>\n\t\t\t\t\t</div>\n\t\t\t\t</PanelBody>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getEditedPostAttribute, getCurrentPost, isCurrentPostScheduled } = select( 'core/editor' );\n\tconst { getPostType } = select( 'core' );\n\n\treturn {\n\t\tpost: getCurrentPost(),\n\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t\tisScheduled: isCurrentPostScheduled(),\n\t};\n} )( PostPublishPanelPostpublish );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { PanelBody } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport PostVisibility from '../post-visibility';\nimport PostVisibilityLabel from '../post-visibility/label';\nimport PostSchedule from '../post-schedule';\nimport PostScheduleLabel from '../post-schedule/label';\nimport MaybeTagsPanel from './maybe-tags-panel';\nimport MaybePostFormatPanel from './maybe-post-format-panel';\n\nfunction PostPublishPanelPrepublish( {\n\thasPublishAction,\n\tisBeingScheduled,\n\tchildren,\n} ) {\n\tlet prePublishTitle, prePublishBodyText;\n\n\tif ( ! hasPublishAction ) {\n\t\tprePublishTitle = __( 'Are you ready to submit for review?' );\n\t\tprePublishBodyText = __( 'When youre ready, submit your work for review, and an Editor will be able to approve it for you.' );\n\t} else if ( isBeingScheduled ) {\n\t\tprePublishTitle = __( 'Are you ready to schedule?' );\n\t\tprePublishBodyText = __( 'Your post will be published at the specified date and time.' );\n\t} else {\n\t\tprePublishTitle = __( 'Are you ready to publish?' );\n\t\tprePublishBodyText = __( 'Double-check your settings, then use the button to publish your post.' );\n\t}\n\n\treturn (\n\t\t<div className=\"editor-post-publish-panel__prepublish\">\n\t\t\t<div><strong>{ prePublishTitle }</strong></div>\n\t\t\t<p>{ prePublishBodyText }</p>\n\t\t\t{ hasPublishAction && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<PanelBody initialOpen={ false } title={ [\n\t\t\t\t\t\t__( 'Visibility:' ),\n\t\t\t\t\t\t<span className=\"editor-post-publish-panel__link\" key=\"label\"><PostVisibilityLabel /></span>,\n\t\t\t\t\t] }>\n\t\t\t\t\t\t<PostVisibility />\n\t\t\t\t\t</PanelBody>\n\t\t\t\t\t<PanelBody initialOpen={ false } title={ [\n\t\t\t\t\t\t__( 'Publish:' ),\n\t\t\t\t\t\t<span className=\"editor-post-publish-panel__link\" key=\"label\"><PostScheduleLabel /></span>,\n\t\t\t\t\t] }>\n\t\t\t\t\t\t<PostSchedule />\n\t\t\t\t\t</PanelBody>\n\t\t\t\t\t<MaybePostFormatPanel />\n\t\t\t\t\t<MaybeTagsPanel />\n\t\t\t\t\t{ children }\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default withSelect(\n\t( select ) => {\n\t\tconst {\n\t\t\tgetCurrentPost,\n\t\t\tisEditedPostBeingScheduled,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tisBeingScheduled: isEditedPostBeingScheduled(),\n\t\t};\n\t}\n)( PostPublishPanelPrepublish );\n","/**\n * External Dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress Dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect } from '@wordpress/data';\nimport { DotTip } from '@wordpress/nux';\n\n/**\n * Internal Dependencies\n */\nimport PostPublishButton from '../post-publish-button';\n\nexport function PostPublishPanelToggle( {\n\thasPublishAction,\n\tisSaving,\n\tisPublishable,\n\tisSaveable,\n\tisPublished,\n\tisBeingScheduled,\n\tisPending,\n\tisScheduled,\n\tonToggle,\n\tisOpen,\n\tforceIsDirty,\n\tforceIsSaving,\n} ) {\n\tconst isButtonEnabled = (\n\t\t! isSaving && ! forceIsSaving && isPublishable && isSaveable\n\t) || isPublished;\n\n\tconst showToggle = ! isPublished && ! ( isScheduled && isBeingScheduled ) && ! ( isPending && ! hasPublishAction );\n\n\tif ( ! showToggle ) {\n\t\treturn <PostPublishButton forceIsDirty={ forceIsDirty } forceIsSaving={ forceIsSaving } />;\n\t}\n\n\treturn (\n\t\t<Button\n\t\t\tclassName=\"editor-post-publish-panel__toggle\"\n\t\t\tisPrimary\n\t\t\tonClick={ onToggle }\n\t\t\taria-expanded={ isOpen }\n\t\t\tdisabled={ ! isButtonEnabled }\n\t\t\tisBusy={ isSaving && isPublished }\n\t\t>\n\t\t\t{ isBeingScheduled ? __( 'Schedule' ) : __( 'Publish' ) }\n\t\t\t<DotTip id=\"core/editor.publish\">\n\t\t\t\t{ __( 'Finished writing? Thats great, lets get this published right now. Just click Publish and youre good to go.' ) }\n\t\t\t</DotTip>\n\t\t</Button>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tisSavingPost,\n\t\t\tisEditedPostSaveable,\n\t\t\tisEditedPostPublishable,\n\t\t\tisCurrentPostPending,\n\t\t\tisCurrentPostPublished,\n\t\t\tisEditedPostBeingScheduled,\n\t\t\tisCurrentPostScheduled,\n\t\t\tgetCurrentPost,\n\t\t\tgetCurrentPostType,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tisSaving: isSavingPost(),\n\t\t\tisSaveable: isEditedPostSaveable(),\n\t\t\tisPublishable: isEditedPostPublishable(),\n\t\t\tisPending: isCurrentPostPending(),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t\tisBeingScheduled: isEditedPostBeingScheduled(),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t} ),\n] )( PostPublishPanelToggle );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Dashicon, Button, IconButton } from '@wordpress/components';\nimport { Component } from '@wordpress/element';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { displayShortcut } from '@wordpress/keycodes';\nimport { withSafeTimeout, compose } from '@wordpress/compose';\nimport { withViewportMatch } from '@wordpress/viewport';\n\n/**\n * Internal dependencies\n */\nimport PostSwitchToDraftButton from '../post-switch-to-draft-button';\n\n/**\n * Component showing whether the post is saved or not and displaying save links.\n *\n * @param   {Object}    Props Component Props.\n */\nexport class PostSavedState extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.state = {\n\t\t\tforceSavedMessage: false,\n\t\t};\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.isSaving && ! this.props.isSaving ) {\n\t\t\tthis.setState( { forceSavedMessage: true } );\n\t\t\tthis.props.setTimeout( () => {\n\t\t\t\tthis.setState( { forceSavedMessage: false } );\n\t\t\t}, 1000 );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tpost,\n\t\t\tisNew,\n\t\t\tisScheduled,\n\t\t\tisPublished,\n\t\t\tisDirty,\n\t\t\tisSaving,\n\t\t\tisSaveable,\n\t\t\tonSave,\n\t\t\tisAutosaving,\n\t\t\tisPending,\n\t\t\tisLargeViewport,\n\t\t} = this.props;\n\t\tconst { forceSavedMessage } = this.state;\n\t\tconst hasPublishAction = get( post, [ '_links', 'wp:action-publish' ], false );\n\t\tif ( isSaving ) {\n\t\t\t// TODO: Classes generation should be common across all return\n\t\t\t// paths of this function, including proper naming convention for\n\t\t\t// the \"Save Draft\" button.\n\t\t\tconst classes = classnames( 'editor-post-saved-state', 'is-saving', {\n\t\t\t\t'is-autosaving': isAutosaving,\n\t\t\t} );\n\n\t\t\treturn (\n\t\t\t\t<span className={ classes }>\n\t\t\t\t\t<Dashicon icon=\"cloud\" />\n\t\t\t\t\t{ isAutosaving ? __( 'Autosaving' ) : __( 'Saving' ) }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\tif ( isPublished || isScheduled ) {\n\t\t\treturn <PostSwitchToDraftButton />;\n\t\t}\n\n\t\tif ( ! isSaveable ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( forceSavedMessage || ( ! isNew && ! isDirty ) ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"editor-post-saved-state is-saved\">\n\t\t\t\t\t<Dashicon icon=\"saved\" />\n\t\t\t\t\t{ __( 'Saved' ) }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\t// Once the post has been submitted for review this button\n\t\t// is not needed for the contributor role.\n\t\tif ( ! hasPublishAction && isPending ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst label = isPending ? __( 'Save as Pending' ) : __( 'Save Draft' );\n\t\tif ( ! isLargeViewport ) {\n\t\t\treturn (\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName=\"editor-post-save-draft\"\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tonClick={ onSave }\n\t\t\t\t\tshortcut={ displayShortcut.primary( 's' ) }\n\t\t\t\t\ticon=\"cloud-upload\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Button\n\t\t\t\tclassName=\"editor-post-save-draft\"\n\t\t\t\tonClick={ onSave }\n\t\t\t\tshortcut={ displayShortcut.primary( 's' ) }\n\t\t\t\tisTertiary\n\t\t\t>\n\t\t\t\t{ label }\n\t\t\t</Button>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { forceIsDirty, forceIsSaving } ) => {\n\t\tconst {\n\t\t\tisEditedPostNew,\n\t\t\tisCurrentPostPublished,\n\t\t\tisCurrentPostScheduled,\n\t\t\tisEditedPostDirty,\n\t\t\tisSavingPost,\n\t\t\tisEditedPostSaveable,\n\t\t\tgetCurrentPost,\n\t\t\tisAutosavingPost,\n\t\t\tgetEditedPostAttribute,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tpost: getCurrentPost(),\n\t\t\tisNew: isEditedPostNew(),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t\tisDirty: forceIsDirty || isEditedPostDirty(),\n\t\t\tisSaving: forceIsSaving || isSavingPost(),\n\t\t\tisSaveable: isEditedPostSaveable(),\n\t\t\tisAutosaving: isAutosavingPost(),\n\t\t\tisPending: 'pending' === getEditedPostAttribute( 'status' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonSave: dispatch( 'core/editor' ).savePost,\n\t} ) ),\n\twithSafeTimeout,\n\twithViewportMatch( { isLargeViewport: 'medium' } ),\n] )( PostSavedState );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport function PostScheduleCheck( { hasPublishAction, children } ) {\n\tif ( ! hasPublishAction ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getCurrentPost, getCurrentPostType } = select( 'core/editor' );\n\t\treturn {\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t} ),\n] )( PostScheduleCheck );\n","/**\n * WordPress dependencies\n */\nimport { getSettings } from '@wordpress/date';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport { DateTimePicker } from '@wordpress/components';\n\nexport function PostSchedule( { date, onUpdateDate } ) {\n\tconst settings = getSettings();\n\t// To know if the current timezone is a 12 hour time with look for \"a\" in the time format\n\t// We also make sure this a is not escaped by a \"/\"\n\tconst is12HourTime = /a(?!\\\\)/i.test(\n\t\tsettings.formats.time\n\t\t\t.toLowerCase() // Test only the lower case a\n\t\t\t.replace( /\\\\\\\\/g, '' ) // Replace \"//\" with empty strings\n\t\t\t.split( '' ).reverse().join( '' ) // Reverse the string and test for \"a\" not followed by a slash\n\t);\n\n\treturn (\n\t\t<DateTimePicker\n\t\t\tkey=\"date-time-picker\"\n\t\t\tcurrentDate={ date }\n\t\t\tonChange={ onUpdateDate }\n\t\t\tlocale={ settings.l10n.locale }\n\t\t\tis12Hour={ is12HourTime }\n\t\t/>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tdate: select( 'core/editor' ).getEditedPostAttribute( 'date' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\treturn {\n\t\t\tonUpdateDate( date ) {\n\t\t\t\tdispatch( 'core/editor' ).editPost( { date } );\n\t\t\t},\n\t\t};\n\t} ),\n] )( PostSchedule );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { dateI18n, getSettings } from '@wordpress/date';\nimport { withSelect } from '@wordpress/data';\n\nexport function PostScheduleLabel( { date, isFloating } ) {\n\tconst settings = getSettings();\n\n\treturn date && ! isFloating ?\n\t\tdateI18n( settings.formats.datetimeAbbreviated, date ) :\n\t\t__( 'Immediately' );\n}\n\nexport default withSelect( ( select ) => {\n\treturn {\n\t\tdate: select( 'core/editor' ).getEditedPostAttribute( 'date' ),\n\t\tisFloating: select( 'core/editor' ).isEditedPostDateFloating(),\n\t};\n} )( PostScheduleLabel );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport function PostStickyCheck( { hasStickyAction, postType, children } ) {\n\tif (\n\t\tpostType !== 'post' ||\n\t\t! hasStickyAction\n\t) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst post = select( 'core/editor' ).getCurrentPost();\n\t\treturn {\n\t\t\thasStickyAction: get( post, [ '_links', 'wp:action-sticky' ], false ),\n\t\t\tpostType: select( 'core/editor' ).getCurrentPostType(),\n\t\t};\n\t} ),\n] )( PostStickyCheck );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { CheckboxControl } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PostStickyCheck from './check';\n\nexport function PostSticky( { onUpdateSticky, postSticky = false } ) {\n\treturn (\n\t\t<PostStickyCheck>\n\t\t\t<CheckboxControl\n\t\t\t\tlabel={ __( 'Stick to the Front Page' ) }\n\t\t\t\tchecked={ postSticky }\n\t\t\t\tonChange={ () => onUpdateSticky( ! postSticky ) }\n\t\t\t/>\n\t\t</PostStickyCheck>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostSticky: select( 'core/editor' ).getEditedPostAttribute( 'sticky' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\treturn {\n\t\t\tonUpdateSticky( postSticky ) {\n\t\t\t\tdispatch( 'core/editor' ).editPost( { sticky: postSticky } );\n\t\t\t},\n\t\t};\n\t} ),\n] )( PostSticky );\n","/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nfunction PostSwitchToDraftButton( { isSaving, isPublished, isScheduled, onClick } ) {\n\tif ( ! isPublished && ! isScheduled ) {\n\t\treturn null;\n\t}\n\n\tconst onSwitch = () => {\n\t\tlet alertMessage;\n\t\tif ( isPublished ) {\n\t\t\talertMessage = __( 'Are you sure you want to unpublish this post?' );\n\t\t} else if ( isScheduled ) {\n\t\t\talertMessage = __( 'Are you sure you want to unschedule this post?' );\n\t\t}\n\t\t// eslint-disable-next-line no-alert\n\t\tif ( window.confirm( alertMessage ) ) {\n\t\t\tonClick();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Button\n\t\t\tclassName=\"editor-post-switch-to-draft\"\n\t\t\tonClick={ onSwitch }\n\t\t\tdisabled={ isSaving }\n\t\t\tisTertiary\n\t\t>\n\t\t\t{ __( 'Switch to Draft' ) }\n\t\t</Button>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { isSavingPost, isCurrentPostPublished, isCurrentPostScheduled } = select( 'core/editor' );\n\t\treturn {\n\t\t\tisSaving: isSavingPost(),\n\t\t\tisPublished: isCurrentPostPublished(),\n\t\t\tisScheduled: isCurrentPostScheduled(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { editPost, savePost } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonClick: () => {\n\t\t\t\teditPost( { status: 'draft' } );\n\t\t\t\tsavePost();\n\t\t\t},\n\t\t};\n\t} ),\n] )( PostSwitchToDraftButton );\n\n","/**\n * External Dependencies\n */\nimport { some, includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport function PostTaxonomiesCheck( { postType, taxonomies, children } ) {\n\tconst hasTaxonomies = some( taxonomies, ( taxonomy ) => includes( taxonomy.types, postType ) );\n\tif ( ! hasTaxonomies ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostType: select( 'core/editor' ).getCurrentPostType(),\n\t\t\ttaxonomies: select( 'core' ).getTaxonomies(),\n\t\t};\n\t} ),\n] )( PostTaxonomiesCheck );\n\n","/**\n * External dependencies\n */\nimport { isEmpty, get, unescape as unescapeString, find, throttle, uniqBy, invoke } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { FormTokenField, withFilters } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Module constants\n */\nconst DEFAULT_QUERY = {\n\tper_page: -1,\n\torderby: 'count',\n\torder: 'desc',\n\t_fields: 'id,name',\n};\nconst MAX_TERMS_SUGGESTIONS = 20;\nconst isSameTermName = ( termA, termB ) => termA.toLowerCase() === termB.toLowerCase();\n\nclass FlatTermSelector extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.searchTerms = throttle( this.searchTerms.bind( this ), 500 );\n\t\tthis.findOrCreateTerm = this.findOrCreateTerm.bind( this );\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\tavailableTerms: [],\n\t\t\tselectedTerms: [],\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( ! isEmpty( this.props.terms ) ) {\n\t\t\tthis.setState( { loading: false } );\n\t\t\tthis.initRequest = this.fetchTerms( {\n\t\t\t\tinclude: this.props.terms.join( ',' ),\n\t\t\t\tper_page: 100,\n\t\t\t} );\n\t\t\tthis.initRequest.then(\n\t\t\t\t() => {\n\t\t\t\t\tthis.setState( { loading: false } );\n\t\t\t\t},\n\t\t\t\t( xhr ) => {\n\t\t\t\t\tif ( xhr.statusText === 'abort' ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tinvoke( this.initRequest, [ 'abort' ] );\n\t\tinvoke( this.searchRequest, [ 'abort' ] );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( prevProps.terms !== this.props.terms ) {\n\t\t\tthis.updateSelectedTerms( this.props.terms );\n\t\t}\n\t}\n\n\tfetchTerms( params = {} ) {\n\t\tconst { taxonomy } = this.props;\n\t\tconst query = { ...DEFAULT_QUERY, ...params };\n\t\tconst request = apiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/${ taxonomy.rest_base }`, query ),\n\t\t} );\n\t\trequest.then( ( terms ) => {\n\t\t\tthis.setState( ( state ) => ( {\n\t\t\t\tavailableTerms: state.availableTerms.concat(\n\t\t\t\t\tterms.filter( ( term ) => ! find( state.availableTerms, ( availableTerm ) => availableTerm.id === term.id ) )\n\t\t\t\t),\n\t\t\t} ) );\n\t\t\tthis.updateSelectedTerms( this.props.terms );\n\t\t} );\n\n\t\treturn request;\n\t}\n\n\tupdateSelectedTerms( terms = [] ) {\n\t\tconst selectedTerms = terms.reduce( ( result, termId ) => {\n\t\t\tconst termObject = find( this.state.availableTerms, ( term ) => term.id === termId );\n\t\t\tif ( termObject ) {\n\t\t\t\tresult.push( termObject.name );\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, [] );\n\t\tthis.setState( {\n\t\t\tselectedTerms,\n\t\t} );\n\t}\n\n\tfindOrCreateTerm( termName ) {\n\t\tconst { taxonomy } = this.props;\n\t\t// Tries to create a term or fetch it if it already exists.\n\t\treturn apiFetch( {\n\t\t\tpath: `/wp/v2/${ taxonomy.rest_base }`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: { name: termName },\n\t\t} ).catch( ( error ) => {\n\t\t\tconst errorCode = error.code;\n\t\t\tif ( errorCode === 'term_exists' ) {\n\t\t\t\t// If the terms exist, fetch it instead of creating a new one.\n\t\t\t\tthis.addRequest = apiFetch( {\n\t\t\t\t\tpath: addQueryArgs( `/wp/v2/${ taxonomy.rest_base }`, { ...DEFAULT_QUERY, search: termName } ),\n\t\t\t\t} );\n\t\t\t\treturn this.addRequest.then( ( searchResult ) => {\n\t\t\t\t\treturn find( searchResult, ( result ) => isSameTermName( result.name, termName ) );\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn Promise.reject( error );\n\t\t} );\n\t}\n\n\tonChange( termNames ) {\n\t\tconst uniqueTerms = uniqBy( termNames, ( term ) => term.toLowerCase() );\n\t\tthis.setState( { selectedTerms: uniqueTerms } );\n\t\tconst newTermNames = uniqueTerms.filter( ( termName ) =>\n\t\t\t! find( this.state.availableTerms, ( term ) => isSameTermName( term.name, termName ) )\n\t\t);\n\t\tconst termNamesToIds = ( names, availableTerms ) => {\n\t\t\treturn names\n\t\t\t\t.map( ( termName ) =>\n\t\t\t\t\tfind( availableTerms, ( term ) => isSameTermName( term.name, termName ) ).id\n\t\t\t\t);\n\t\t};\n\n\t\tif ( newTermNames.length === 0 ) {\n\t\t\treturn this.props.onUpdateTerms(\n\t\t\t\ttermNamesToIds( uniqueTerms, this.state.availableTerms ),\n\t\t\t\tthis.props.taxonomy.rest_base\n\t\t\t);\n\t\t}\n\t\tPromise\n\t\t\t.all( newTermNames.map( this.findOrCreateTerm ) )\n\t\t\t.then( ( newTerms ) => {\n\t\t\t\tconst newAvailableTerms = this.state.availableTerms.concat( newTerms );\n\t\t\t\tthis.setState( { availableTerms: newAvailableTerms } );\n\t\t\t\treturn this.props.onUpdateTerms(\n\t\t\t\t\ttermNamesToIds( uniqueTerms, newAvailableTerms ),\n\t\t\t\t\tthis.props.taxonomy.rest_base\n\t\t\t\t);\n\t\t\t} );\n\t}\n\n\tsearchTerms( search = '' ) {\n\t\tinvoke( this.searchRequest, [ 'abort' ] );\n\t\tthis.searchRequest = this.fetchTerms( { search } );\n\t}\n\n\trender() {\n\t\tconst { slug, taxonomy, hasAssignAction } = this.props;\n\n\t\tif ( ! hasAssignAction ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { loading, availableTerms, selectedTerms } = this.state;\n\t\tconst termNames = availableTerms.map( ( term ) => term.name );\n\t\tconst newTermLabel = get(\n\t\t\ttaxonomy,\n\t\t\t[ 'data', 'labels', 'add_new_item' ],\n\t\t\tslug === 'post_tag' ? __( 'Add New Tag' ) : __( 'Add New Term' )\n\t\t);\n\t\tconst singularName = get(\n\t\t\ttaxonomy,\n\t\t\t[ 'data', 'labels', 'singular_name' ],\n\t\t\tslug === 'post_tag' ? __( 'Tag' ) : __( 'Term' )\n\t\t);\n\t\tconst termAddedLabel = sprintf( _x( '%s added', 'term' ), singularName );\n\t\tconst termRemovedLabel = sprintf( _x( '%s removed', 'term' ), singularName );\n\t\tconst removeTermLabel = sprintf( _x( 'Remove %s', 'term' ), singularName );\n\n\t\treturn (\n\t\t\t<FormTokenField\n\t\t\t\tvalue={ selectedTerms }\n\t\t\t\tdisplayTransform={ unescapeString }\n\t\t\t\tsuggestions={ termNames }\n\t\t\t\tonChange={ this.onChange }\n\t\t\t\tonInputChange={ this.searchTerms }\n\t\t\t\tmaxSuggestions={ MAX_TERMS_SUGGESTIONS }\n\t\t\t\tdisabled={ loading }\n\t\t\t\tlabel={ newTermLabel }\n\t\t\t\tmessages={ {\n\t\t\t\t\tadded: termAddedLabel,\n\t\t\t\t\tremoved: termRemovedLabel,\n\t\t\t\t\tremove: removeTermLabel,\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, { slug } ) => {\n\t\tconst { getCurrentPost } = select( 'core/editor' );\n\t\tconst { getTaxonomy } = select( 'core' );\n\t\tconst taxonomy = getTaxonomy( slug );\n\t\treturn {\n\t\t\thasCreateAction: taxonomy ? get( getCurrentPost(), [ '_links', 'wp:action-create-' + taxonomy.rest_base ], false ) : false,\n\t\t\thasAssignAction: taxonomy ? get( getCurrentPost(), [ '_links', 'wp:action-assign-' + taxonomy.rest_base ], false ) : false,\n\t\t\tterms: taxonomy ? select( 'core/editor' ).getEditedPostAttribute( taxonomy.rest_base ) : [],\n\t\t\ttaxonomy,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\treturn {\n\t\t\tonUpdateTerms( terms, restBase ) {\n\t\t\t\tdispatch( 'core/editor' ).editPost( { [ restBase ]: terms } );\n\t\t\t},\n\t\t};\n\t} ),\n\twithFilters( 'editor.PostTaxonomyType' ),\n)( FlatTermSelector );\n","/**\n * External dependencies\n */\nimport { get, unescape as unescapeString, without, find, some, invoke } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __, _x, _n, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { TreeSelect, withSpokenMessages, withFilters, Button } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { buildTermsTree } from '../../utils/terms';\n\n/**\n * Module Constants\n */\nconst DEFAULT_QUERY = {\n\tper_page: -1,\n\torderby: 'name',\n\torder: 'asc',\n\t_fields: 'id,name,parent',\n};\n\nconst MIN_TERMS_COUNT_FOR_FILTER = 8;\n\nclass HierarchicalTermSelector extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.findTerm = this.findTerm.bind( this );\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onChangeFormName = this.onChangeFormName.bind( this );\n\t\tthis.onChangeFormParent = this.onChangeFormParent.bind( this );\n\t\tthis.onAddTerm = this.onAddTerm.bind( this );\n\t\tthis.onToggleForm = this.onToggleForm.bind( this );\n\t\tthis.setFilterValue = this.setFilterValue.bind( this );\n\t\tthis.sortBySelected = this.sortBySelected.bind( this );\n\t\tthis.state = {\n\t\t\tloading: true,\n\t\t\tavailableTermsTree: [],\n\t\t\tavailableTerms: [],\n\t\t\tadding: false,\n\t\t\tformName: '',\n\t\t\tformParent: '',\n\t\t\tshowForm: false,\n\t\t\tfilterValue: '',\n\t\t\tfilteredTermsTree: [],\n\t\t};\n\t}\n\n\tonChange( event ) {\n\t\tconst { onUpdateTerms, terms = [], taxonomy } = this.props;\n\t\tconst termId = parseInt( event.target.value, 10 );\n\t\tconst hasTerm = terms.indexOf( termId ) !== -1;\n\t\tconst newTerms = hasTerm ?\n\t\t\twithout( terms, termId ) :\n\t\t\t[ ...terms, termId ];\n\t\tonUpdateTerms( newTerms, taxonomy.rest_base );\n\t}\n\n\tonChangeFormName( event ) {\n\t\tconst newValue = event.target.value.trim() === '' ? '' : event.target.value;\n\t\tthis.setState( { formName: newValue } );\n\t}\n\n\tonChangeFormParent( newParent ) {\n\t\tthis.setState( { formParent: newParent } );\n\t}\n\n\tonToggleForm() {\n\t\tthis.setState( ( state ) => ( {\n\t\t\tshowForm: ! state.showForm,\n\t\t} ) );\n\t}\n\n\tfindTerm( terms, parent, name ) {\n\t\treturn find( terms, ( term ) => {\n\t\t\treturn ( ( ! term.parent && ! parent ) || parseInt( term.parent ) === parseInt( parent ) ) &&\n\t\t\t\tterm.name.toLowerCase() === name.toLowerCase();\n\t\t} );\n\t}\n\n\tonAddTerm( event ) {\n\t\tevent.preventDefault();\n\t\tconst { onUpdateTerms, taxonomy, terms, slug } = this.props;\n\t\tconst { formName, formParent, adding, availableTerms } = this.state;\n\t\tif ( formName === '' || adding ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// check if the term we are adding already exists\n\t\tconst existingTerm = this.findTerm( availableTerms, formParent, formName );\n\t\tif ( existingTerm ) {\n\t\t\t// if the term we are adding exists but is not selected select it\n\t\t\tif ( ! some( terms, ( term ) => term === existingTerm.id ) ) {\n\t\t\t\tonUpdateTerms( [ ...terms, existingTerm.id ], taxonomy.rest_base );\n\t\t\t}\n\t\t\tthis.setState( {\n\t\t\t\tformName: '',\n\t\t\t\tformParent: '',\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tadding: true,\n\t\t} );\n\t\tthis.addRequest = apiFetch( {\n\t\t\tpath: `/wp/v2/${ taxonomy.rest_base }`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: {\n\t\t\t\tname: formName,\n\t\t\t\tparent: formParent ? formParent : undefined,\n\t\t\t},\n\t\t} );\n\t\t// Tries to create a term or fetch it if it already exists\n\t\tconst findOrCreatePromise = this.addRequest\n\t\t\t.catch( ( error ) => {\n\t\t\t\tconst errorCode = error.code;\n\t\t\t\tif ( errorCode === 'term_exists' ) {\n\t\t\t\t\t// search the new category created since last fetch\n\t\t\t\t\tthis.addRequest = apiFetch( {\n\t\t\t\t\t\tpath: addQueryArgs(\n\t\t\t\t\t\t\t`/wp/v2/${ taxonomy.rest_base }`,\n\t\t\t\t\t\t\t{ ...DEFAULT_QUERY, parent: formParent || 0, search: formName }\n\t\t\t\t\t\t),\n\t\t\t\t\t} );\n\t\t\t\t\treturn this.addRequest\n\t\t\t\t\t\t.then( ( searchResult ) => {\n\t\t\t\t\t\t\treturn this.findTerm( searchResult, formParent, formName );\n\t\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn Promise.reject( error );\n\t\t\t} );\n\t\tfindOrCreatePromise\n\t\t\t.then( ( term ) => {\n\t\t\t\tconst hasTerm = !! find( this.state.availableTerms, ( availableTerm ) => availableTerm.id === term.id );\n\t\t\t\tconst newAvailableTerms = hasTerm ? this.state.availableTerms : [ term, ...this.state.availableTerms ];\n\t\t\t\tconst termAddedMessage = sprintf(\n\t\t\t\t\t_x( '%s added', 'term' ),\n\t\t\t\t\tget(\n\t\t\t\t\t\tthis.props.taxonomy,\n\t\t\t\t\t\t[ 'data', 'labels', 'singular_name' ],\n\t\t\t\t\t\tslug === 'category' ? __( 'Category' ) : __( 'Term' )\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tthis.props.speak( termAddedMessage, 'assertive' );\n\t\t\t\tthis.addRequest = null;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tadding: false,\n\t\t\t\t\tformName: '',\n\t\t\t\t\tformParent: '',\n\t\t\t\t\tavailableTerms: newAvailableTerms,\n\t\t\t\t\tavailableTermsTree: this.sortBySelected( buildTermsTree( newAvailableTerms ) ),\n\t\t\t\t} );\n\t\t\t\tonUpdateTerms( [ ...terms, term.id ], taxonomy.rest_base );\n\t\t\t}, ( xhr ) => {\n\t\t\t\tif ( xhr.statusText === 'abort' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.addRequest = null;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tadding: false,\n\t\t\t\t} );\n\t\t\t} );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.fetchTerms();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tinvoke( this.fetchRequest, [ 'abort' ] );\n\t\tinvoke( this.addRequest, [ 'abort' ] );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.taxonomy !== prevProps.taxonomy ) {\n\t\t\tthis.fetchTerms();\n\t\t}\n\t}\n\n\tfetchTerms() {\n\t\tconst { taxonomy } = this.props;\n\t\tif ( ! taxonomy ) {\n\t\t\treturn;\n\t\t}\n\t\tthis.fetchRequest = apiFetch( {\n\t\t\tpath: addQueryArgs( `/wp/v2/${ taxonomy.rest_base }`, DEFAULT_QUERY ),\n\t\t} );\n\t\tthis.fetchRequest.then(\n\t\t\t( terms ) => { // resolve\n\t\t\t\tconst availableTermsTree = this.sortBySelected( buildTermsTree( terms ) );\n\n\t\t\t\tthis.fetchRequest = null;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t\tavailableTermsTree,\n\t\t\t\t\tavailableTerms: terms,\n\t\t\t\t} );\n\t\t\t},\n\t\t\t( xhr ) => { // reject\n\t\t\t\tif ( xhr.statusText === 'abort' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.fetchRequest = null;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t} );\n\t\t\t}\n\t\t);\n\t}\n\n\tsortBySelected( termsTree ) {\n\t\tconst { terms } = this.props;\n\t\tconst treeHasSelection = ( termTree ) => {\n\t\t\tif ( terms.indexOf( termTree.id ) !== -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif ( undefined === termTree.children ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst anyChildIsSelected = termTree.children.map( treeHasSelection ).filter( ( child ) => child ).length > 0;\n\t\t\tif ( anyChildIsSelected ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst termOrChildIsSelected = ( termA, termB ) => {\n\t\t\tconst termASelected = treeHasSelection( termA );\n\t\t\tconst termBSelected = treeHasSelection( termB );\n\n\t\t\tif ( termASelected === termBSelected ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif ( termASelected && ! termBSelected ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif ( ! termASelected && termBSelected ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t};\n\t\ttermsTree.sort( termOrChildIsSelected );\n\t\treturn termsTree;\n\t}\n\n\tsetFilterValue( event ) {\n\t\tconst { availableTermsTree } = this.state;\n\t\tconst filterValue = event.target.value;\n\t\tconst filteredTermsTree = availableTermsTree.map( this.getFilterMatcher( filterValue ) ).filter( ( term ) => term );\n\t\tconst getResultCount = ( terms ) => {\n\t\t\tlet count = 0;\n\t\t\tfor ( let i = 0; i < terms.length; i++ ) {\n\t\t\t\tcount++;\n\t\t\t\tif ( undefined !== terms[ i ].children ) {\n\t\t\t\t\tcount += getResultCount( terms[ i ].children );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn count;\n\t\t};\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tfilterValue,\n\t\t\t\tfilteredTermsTree,\n\t\t\t}\n\t\t);\n\n\t\tconst resultCount = getResultCount( filteredTermsTree );\n\t\tconst resultsFoundMessage = sprintf(\n\t\t\t_n( '%d result found.', '%d results found.', resultCount, 'term' ),\n\t\t\tresultCount\n\t\t);\n\t\tthis.props.debouncedSpeak( resultsFoundMessage, 'assertive' );\n\t}\n\n\tgetFilterMatcher( filterValue ) {\n\t\tconst matchTermsForFilter = ( originalTerm ) => {\n\t\t\tif ( '' === filterValue ) {\n\t\t\t\treturn originalTerm;\n\t\t\t}\n\n\t\t\t// Shallow clone, because we'll be filtering the term's children and\n\t\t\t// don't want to modify the original term.\n\t\t\tconst term = { ...originalTerm };\n\n\t\t\t// Map and filter the children, recursive so we deal with grandchildren\n\t\t\t// and any deeper levels.\n\t\t\tif ( term.children.length > 0 ) {\n\t\t\t\tterm.children = term.children.map( matchTermsForFilter ).filter( ( child ) => child );\n\t\t\t}\n\n\t\t\t// If the term's name contains the filterValue, or it has children\n\t\t\t// (i.e. some child matched at some point in the tree) then return it.\n\t\t\tif ( -1 !== term.name.toLowerCase().indexOf( filterValue ) || term.children.length > 0 ) {\n\t\t\t\treturn term;\n\t\t\t}\n\n\t\t\t// Otherwise, return false. After mapping, the list of terms will need\n\t\t\t// to have false values filtered out.\n\t\t\treturn false;\n\t\t};\n\t\treturn matchTermsForFilter;\n\t}\n\n\trenderTerms( renderedTerms ) {\n\t\tconst { terms = [] } = this.props;\n\t\treturn renderedTerms.map( ( term ) => {\n\t\t\tconst id = `editor-post-taxonomies-hierarchical-term-${ term.id }`;\n\t\t\treturn (\n\t\t\t\t<div key={ term.id } className=\"editor-post-taxonomies__hierarchical-terms-choice\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tid={ id }\n\t\t\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-input\"\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tchecked={ terms.indexOf( term.id ) !== -1 }\n\t\t\t\t\t\tvalue={ term.id }\n\t\t\t\t\t\tonChange={ this.onChange }\n\t\t\t\t\t/>\n\t\t\t\t\t<label htmlFor={ id }>{ unescapeString( term.name ) }</label>\n\t\t\t\t\t{ !! term.children.length && (\n\t\t\t\t\t\t<div className=\"editor-post-taxonomies__hierarchical-terms-subchoices\">\n\t\t\t\t\t\t\t{ this.renderTerms( term.children ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t);\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { slug, taxonomy, instanceId, hasCreateAction, hasAssignAction } = this.props;\n\n\t\tif ( ! hasAssignAction ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { availableTermsTree, availableTerms, filteredTermsTree, formName, formParent, loading, showForm, filterValue } = this.state;\n\t\tconst labelWithFallback = ( labelProperty, fallbackIsCategory, fallbackIsNotCategory ) => get(\n\t\t\ttaxonomy,\n\t\t\t[ 'data', 'labels', labelProperty ],\n\t\t\tslug === 'category' ? fallbackIsCategory : fallbackIsNotCategory\n\t\t);\n\t\tconst newTermButtonLabel = labelWithFallback(\n\t\t\t'add_new_item',\n\t\t\t__( 'Add new category' ),\n\t\t\t__( 'Add new term' )\n\t\t);\n\t\tconst newTermLabel = labelWithFallback(\n\t\t\t'new_item_name',\n\t\t\t__( 'Add new category' ),\n\t\t\t__( 'Add new term' )\n\t\t);\n\t\tconst parentSelectLabel = labelWithFallback(\n\t\t\t'parent_item',\n\t\t\t__( 'Parent Category' ),\n\t\t\t__( 'Parent Term' )\n\t\t);\n\t\tconst noParentOption = ` ${ parentSelectLabel } `;\n\t\tconst newTermSubmitLabel = newTermButtonLabel;\n\t\tconst inputId = `editor-post-taxonomies__hierarchical-terms-input-${ instanceId }`;\n\t\tconst filterInputId = `editor-post-taxonomies__hierarchical-terms-filter-${ instanceId }`;\n\t\tconst filterLabel = sprintf(\n\t\t\t_x( 'Search %s', 'term' ),\n\t\t\tget(\n\t\t\t\tthis.props.taxonomy,\n\t\t\t\t[ 'name' ],\n\t\t\t\tslug === 'category' ? __( 'Categories' ) : __( 'Terms' )\n\t\t\t)\n\t\t);\n\t\tconst groupLabel = sprintf(\n\t\t\t_x( 'Available %s', 'term' ),\n\t\t\tget(\n\t\t\t\tthis.props.taxonomy,\n\t\t\t\t[ 'name' ],\n\t\t\t\tslug === 'category' ? __( 'Categories' ) : __( 'Terms' )\n\t\t\t)\n\t\t);\n\t\tconst showFilter = availableTerms.length >= MIN_TERMS_COUNT_FOR_FILTER;\n\n\t\treturn [\n\t\t\tshowFilter && <label\n\t\t\t\tkey=\"filter-label\"\n\t\t\t\thtmlFor={ filterInputId }>\n\t\t\t\t{ filterLabel }\n\t\t\t</label>,\n\t\t\tshowFilter && <input\n\t\t\t\ttype=\"search\"\n\t\t\t\tid={ filterInputId }\n\t\t\t\tvalue={ filterValue }\n\t\t\t\tonChange={ this.setFilterValue }\n\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-filter\"\n\t\t\t\tkey=\"term-filter-input\"\n\t\t\t/>,\n\t\t\t<div\n\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-list\"\n\t\t\t\tkey=\"term-list\"\n\t\t\t\ttabIndex=\"0\"\n\t\t\t\trole=\"group\"\n\t\t\t\taria-label={ groupLabel }\n\t\t\t>\n\t\t\t\t{ this.renderTerms( '' !== filterValue ? filteredTermsTree : availableTermsTree ) }\n\t\t\t</div>,\n\t\t\t! loading && hasCreateAction && (\n\t\t\t\t<Button\n\t\t\t\t\tkey=\"term-add-button\"\n\t\t\t\t\tonClick={ this.onToggleForm }\n\t\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-add\"\n\t\t\t\t\taria-expanded={ showForm }\n\t\t\t\t\tisLink\n\t\t\t\t>\n\t\t\t\t\t{ newTermButtonLabel }\n\t\t\t\t</Button>\n\t\t\t),\n\t\t\tshowForm && (\n\t\t\t\t<form onSubmit={ this.onAddTerm } key=\"hierarchical-terms-form\">\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor={ inputId }\n\t\t\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-label\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ newTermLabel }\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tid={ inputId }\n\t\t\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-input\"\n\t\t\t\t\t\tvalue={ formName }\n\t\t\t\t\t\tonChange={ this.onChangeFormName }\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t\t{ !! availableTerms.length &&\n\t\t\t\t\t\t<TreeSelect\n\t\t\t\t\t\t\tlabel={ parentSelectLabel }\n\t\t\t\t\t\t\tnoOptionLabel={ noParentOption }\n\t\t\t\t\t\t\tonChange={ this.onChangeFormParent }\n\t\t\t\t\t\t\tselectedId={ formParent }\n\t\t\t\t\t\t\ttree={ availableTermsTree }\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisDefault\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"editor-post-taxonomies__hierarchical-terms-submit\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ newTermSubmitLabel }\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t),\n\t\t];\n\t\t/* eslint-enable jsx-a11y/no-onchange */\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select, { slug } ) => {\n\t\tconst { getCurrentPost } = select( 'core/editor' );\n\t\tconst { getTaxonomy } = select( 'core' );\n\t\tconst taxonomy = getTaxonomy( slug );\n\t\treturn {\n\t\t\thasCreateAction: taxonomy ? get( getCurrentPost(), [ '_links', 'wp:action-create-' + taxonomy.rest_base ], false ) : false,\n\t\t\thasAssignAction: taxonomy ? get( getCurrentPost(), [ '_links', 'wp:action-assign-' + taxonomy.rest_base ], false ) : false,\n\t\t\tterms: taxonomy ? select( 'core/editor' ).getEditedPostAttribute( taxonomy.rest_base ) : [],\n\t\t\ttaxonomy,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\tonUpdateTerms( terms, restBase ) {\n\t\t\tdispatch( 'core/editor' ).editPost( { [ restBase ]: terms } );\n\t\t},\n\t} ) ),\n\twithSpokenMessages,\n\twithInstanceId,\n\twithFilters( 'editor.PostTaxonomyType' ),\n] )( HierarchicalTermSelector );\n","/**\n * External Dependencies\n */\nimport { filter, identity, includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport HierarchicalTermSelector from './hierarchical-term-selector';\nimport FlatTermSelector from './flat-term-selector';\n\nexport function PostTaxonomies( { postType, taxonomies, taxonomyWrapper = identity } ) {\n\tconst availableTaxonomies = filter( taxonomies, ( taxonomy ) => includes( taxonomy.types, postType ) );\n\tconst visibleTaxonomies = filter( availableTaxonomies, ( taxonomy ) => taxonomy.visibility.show_ui );\n\treturn visibleTaxonomies.map( ( taxonomy ) => {\n\t\tconst TaxonomyComponent = taxonomy.hierarchical ? HierarchicalTermSelector : FlatTermSelector;\n\t\treturn (\n\t\t\t<Fragment key={ `taxonomy-${ taxonomy.slug }` }>\n\t\t\t\t{\n\t\t\t\t\ttaxonomyWrapper(\n\t\t\t\t\t\t<TaxonomyComponent slug={ taxonomy.slug } />,\n\t\t\t\t\t\ttaxonomy\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Fragment>\n\t\t);\n\t} );\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\treturn {\n\t\t\tpostType: select( 'core/editor' ).getCurrentPostType(),\n\t\t\ttaxonomies: select( 'core' ).getTaxonomies( { per_page: -1 } ),\n\t\t};\n\t} ),\n] )( PostTaxonomies );\n\n","/**\n * External dependencies\n */\nimport Textarea from 'react-autosize-textarea';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { Component, Fragment } from '@wordpress/element';\nimport { parse } from '@wordpress/blocks';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { withInstanceId, compose } from '@wordpress/compose';\n\nexport class PostTextEditor extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.edit = this.edit.bind( this );\n\t\tthis.stopEditing = this.stopEditing.bind( this );\n\n\t\tthis.state = {};\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\tif ( state.isDirty ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\tvalue: props.value,\n\t\t\tisDirty: false,\n\t\t};\n\t}\n\n\t/**\n\t * Handles a textarea change event to notify the onChange prop callback and\n\t * reflect the new value in the component's own state. This marks the start\n\t * of the user's edits, if not already changed, preventing future props\n\t * changes to value from replacing the rendered value. This is expected to\n\t * be followed by a reset to dirty state via `stopEditing`.\n\t *\n\t * @see stopEditing\n\t *\n\t * @param {Event} event Change event.\n\t */\n\tedit( event ) {\n\t\tconst value = event.target.value;\n\t\tthis.props.onChange( value );\n\t\tthis.setState( { value, isDirty: true } );\n\t}\n\n\t/**\n\t * Function called when the user has completed their edits, responsible for\n\t * ensuring that changes, if made, are surfaced to the onPersist prop\n\t * callback and resetting dirty state.\n\t */\n\tstopEditing() {\n\t\tif ( this.state.isDirty ) {\n\t\t\tthis.props.onPersist( this.state.value );\n\t\t\tthis.setState( { isDirty: false } );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { value } = this.state;\n\t\tconst { placeholder, instanceId } = this.props;\n\t\tconst decodedPlaceholder = decodeEntities( placeholder );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<label htmlFor={ `post-content-${ instanceId }` } className=\"screen-reader-text\">\n\t\t\t\t\t{ decodedPlaceholder || __( 'Write your story' ) }\n\t\t\t\t</label>\n\t\t\t\t<Textarea\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tonChange={ this.edit }\n\t\t\t\t\tonBlur={ this.stopEditing }\n\t\t\t\t\tclassName=\"editor-post-text-editor\"\n\t\t\t\t\tid={ `post-content-${ instanceId }` }\n\t\t\t\t\tplaceholder={ decodedPlaceholder || __( 'Write your story' ) }\n\t\t\t\t/>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getEditedPostContent, getEditorSettings } = select( 'core/editor' );\n\t\tconst { bodyPlaceholder } = getEditorSettings();\n\t\treturn {\n\t\t\tvalue: getEditedPostContent(),\n\t\t\tplaceholder: bodyPlaceholder,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { editPost, resetBlocks } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonChange( content ) {\n\t\t\t\teditPost( { content } );\n\t\t\t},\n\t\t\tonPersist( content ) {\n\t\t\t\tresetBlocks( parse( content ) );\n\t\t\t},\n\t\t};\n\t} ),\n\twithInstanceId,\n] )( PostTextEditor );\n","/**\n * External dependencies\n */\nimport Textarea from 'react-autosize-textarea';\nimport classnames from 'classnames';\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { ENTER } from '@wordpress/keycodes';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { KeyboardShortcuts, withFocusOutside } from '@wordpress/components';\nimport { withInstanceId, compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport PostPermalink from '../post-permalink';\nimport PostTypeSupportCheck from '../post-type-support-check';\n\n/**\n * Constants\n */\nconst REGEXP_NEWLINES = /[\\r\\n]+/g;\n\nclass PostTitle extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onSelect = this.onSelect.bind( this );\n\t\tthis.onUnselect = this.onUnselect.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.redirectHistory = this.redirectHistory.bind( this );\n\n\t\tthis.state = {\n\t\t\tisSelected: false,\n\t\t};\n\t}\n\n\thandleFocusOutside() {\n\t\tthis.onUnselect();\n\t}\n\n\tonSelect() {\n\t\tthis.setState( { isSelected: true } );\n\t\tthis.props.clearSelectedBlock();\n\t}\n\n\tonUnselect() {\n\t\tthis.setState( { isSelected: false } );\n\t}\n\n\tonChange( event ) {\n\t\tconst newTitle = event.target.value.replace( REGEXP_NEWLINES, ' ' );\n\t\tthis.props.onUpdate( newTitle );\n\t}\n\n\tonKeyDown( event ) {\n\t\tif ( event.keyCode === ENTER ) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.props.onEnterPress();\n\t\t}\n\t}\n\n\t/**\n\t * Emulates behavior of an undo or redo on its corresponding key press\n\t * combination. This is a workaround to React's treatment of undo in a\n\t * controlled textarea where characters are updated one at a time.\n\t * Instead, leverage the store's undo handling of title changes.\n\t *\n\t * @see https://github.com/facebook/react/issues/8514\n\t *\n\t * @param {KeyboardEvent} event Key event.\n\t */\n\tredirectHistory( event ) {\n\t\tif ( event.shiftKey ) {\n\t\t\tthis.props.onRedo();\n\t\t} else {\n\t\t\tthis.props.onUndo();\n\t\t}\n\n\t\tevent.preventDefault();\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\thasFixedToolbar,\n\t\t\tisCleanNewPost,\n\t\t\tisFocusMode,\n\t\t\tisPostTypeViewable,\n\t\t\tinstanceId,\n\t\t\tplaceholder,\n\t\t\ttitle,\n\t\t} = this.props;\n\t\tconst { isSelected } = this.state;\n\t\tconst className = classnames( 'editor-post-title__block', {\n\t\t\t'is-selected': isSelected,\n\t\t\t'is-focus-mode': isFocusMode,\n\t\t\t'has-fixed-toolbar': hasFixedToolbar,\n\t\t} );\n\t\tconst decodedPlaceholder = decodeEntities( placeholder );\n\n\t\treturn (\n\t\t\t<PostTypeSupportCheck supportKeys=\"title\">\n\t\t\t\t<div className=\"editor-post-title\">\n\t\t\t\t\t<div className={ className }>\n\t\t\t\t\t\t<KeyboardShortcuts\n\t\t\t\t\t\t\tshortcuts={ {\n\t\t\t\t\t\t\t\t'mod+z': this.redirectHistory,\n\t\t\t\t\t\t\t\t'mod+shift+z': this.redirectHistory,\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<label htmlFor={ `post-title-${ instanceId }` } className=\"screen-reader-text\">\n\t\t\t\t\t\t\t\t{ decodedPlaceholder || __( 'Add title' ) }\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tid={ `post-title-${ instanceId }` }\n\t\t\t\t\t\t\t\tclassName=\"editor-post-title__input\"\n\t\t\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\t\t\tonChange={ this.onChange }\n\t\t\t\t\t\t\t\tplaceholder={ decodedPlaceholder || __( 'Add title' ) }\n\t\t\t\t\t\t\t\tonFocus={ this.onSelect }\n\t\t\t\t\t\t\t\tonKeyDown={ this.onKeyDown }\n\t\t\t\t\t\t\t\tonKeyPress={ this.onUnselect }\n\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\tOnly autofocus the title when the post is entirely empty.\n\t\t\t\t\t\t\t\t\tThis should only happen for a new post, which means we\n\t\t\t\t\t\t\t\t\tfocus the title on new post so the author can start typing\n\t\t\t\t\t\t\t\t\tright away, without needing to click anything.\n\t\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t\t\t/* eslint-disable jsx-a11y/no-autofocus */\n\t\t\t\t\t\t\t\tautoFocus={ isCleanNewPost }\n\t\t\t\t\t\t\t\t/* eslint-enable jsx-a11y/no-autofocus */\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</KeyboardShortcuts>\n\t\t\t\t\t\t{ isSelected && isPostTypeViewable && <PostPermalink /> }\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</PostTypeSupportCheck>\n\t\t);\n\t}\n}\n\nconst applyWithSelect = withSelect( ( select ) => {\n\tconst { getEditedPostAttribute, getEditorSettings, isCleanNewPost } = select( 'core/editor' );\n\tconst { getPostType } = select( 'core' );\n\tconst postType = getPostType( getEditedPostAttribute( 'type' ) );\n\tconst { titlePlaceholder, focusMode, hasFixedToolbar } = getEditorSettings();\n\n\treturn {\n\t\tisCleanNewPost: isCleanNewPost(),\n\t\ttitle: getEditedPostAttribute( 'title' ),\n\t\tisPostTypeViewable: get( postType, [ 'viewable' ], false ),\n\t\tplaceholder: titlePlaceholder,\n\t\tisFocusMode: focusMode,\n\t\thasFixedToolbar,\n\t};\n} );\n\nconst applyWithDispatch = withDispatch( ( dispatch ) => {\n\tconst {\n\t\tinsertDefaultBlock,\n\t\teditPost,\n\t\tclearSelectedBlock,\n\t\tundo,\n\t\tredo,\n\t} = dispatch( 'core/editor' );\n\n\treturn {\n\t\tonEnterPress() {\n\t\t\tinsertDefaultBlock( undefined, undefined, 0 );\n\t\t},\n\t\tonUpdate( title ) {\n\t\t\teditPost( { title } );\n\t\t},\n\t\tonUndo: undo,\n\t\tonRedo: redo,\n\t\tclearSelectedBlock,\n\t};\n} );\n\nexport default compose(\n\tapplyWithSelect,\n\tapplyWithDispatch,\n\twithInstanceId,\n\twithFocusOutside\n)( PostTitle );\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\nfunction PostTrashCheck( { isNew, postId, children } ) {\n\tif ( isNew || ! postId ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default withSelect( ( select ) => {\n\tconst { isEditedPostNew, getCurrentPostId } = select( 'core/editor' );\n\treturn {\n\t\tisNew: isEditedPostNew(),\n\t\tpostId: getCurrentPostId(),\n\t};\n} )( PostTrashCheck );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nfunction PostTrash( { isNew, postId, postType, ...props } ) {\n\tif ( isNew || ! postId ) {\n\t\treturn null;\n\t}\n\n\tconst onClick = () => props.trashPost( postId, postType );\n\n\treturn (\n\t\t<Button className=\"editor-post-trash button-link-delete\" onClick={ onClick } isDefault isLarge>\n\t\t\t{ __( 'Move to trash' ) }\n\t\t</Button>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tisEditedPostNew,\n\t\t\tgetCurrentPostId,\n\t\t\tgetCurrentPostType,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tisNew: isEditedPostNew(),\n\t\t\tpostId: getCurrentPostId(),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => ( {\n\t\ttrashPost: dispatch( 'core/editor' ).trashPost,\n\t} ) ),\n] )( PostTrash );\n","/**\n * External dependencies\n */\nimport { some, castArray } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * A component which renders its own children only if the current editor post\n * type supports one of the given `supportKeys` prop.\n *\n * @param {?Object}           props.postType    Current post type.\n * @param {WPElement}         props.children    Children to be rendered if post\n *                                              type supports.\n * @param {(string|string[])} props.supportKeys String or string array of keys\n *                                              to test.\n *\n * @return {WPElement} Rendered element.\n */\nexport function PostTypeSupportCheck( { postType, children, supportKeys } ) {\n\tlet isSupported = true;\n\tif ( postType ) {\n\t\tisSupported = some(\n\t\t\tcastArray( supportKeys ),\n\t\t\t( key ) => !! postType.supports[ key ]\n\t\t);\n\t}\n\n\tif ( ! isSupported ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getEditedPostAttribute } = select( 'core/editor' );\n\tconst { getPostType } = select( 'core' );\n\treturn {\n\t\tpostType: getPostType( getEditedPostAttribute( 'type' ) ),\n\t};\n} )( PostTypeSupportCheck );\n","/**\n * External dependencies\n */\nimport { get } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\n\nexport function PostVisibilityCheck( { hasPublishAction, render } ) {\n\tconst canEdit = hasPublishAction;\n\treturn render( { canEdit } );\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst { getCurrentPost, getCurrentPostType } = select( 'core/editor' );\n\t\treturn {\n\t\t\thasPublishAction: get( getCurrentPost(), [ '_links', 'wp:action-publish' ], false ),\n\t\t\tpostType: getCurrentPostType(),\n\t\t};\n\t} ),\n] )( PostVisibilityCheck );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { withInstanceId, compose } from '@wordpress/compose';\nimport { withSelect, withDispatch } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport { visibilityOptions } from './utils';\n\nexport class PostVisibility extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.setPublic = this.setPublic.bind( this );\n\t\tthis.setPrivate = this.setPrivate.bind( this );\n\t\tthis.setPasswordProtected = this.setPasswordProtected.bind( this );\n\t\tthis.updatePassword = this.updatePassword.bind( this );\n\n\t\tthis.state = {\n\t\t\thasPassword: !! props.password,\n\t\t};\n\t}\n\n\tsetPublic() {\n\t\tconst { visibility, onUpdateVisibility, status } = this.props;\n\n\t\tonUpdateVisibility( visibility === 'private' ? 'draft' : status );\n\t\tthis.setState( { hasPassword: false } );\n\t}\n\n\tsetPrivate() {\n\t\tif ( ! window.confirm( __( 'Would you like to privately publish this post now?' ) ) ) { // eslint-disable-line no-alert\n\t\t\treturn;\n\t\t}\n\n\t\tconst { onUpdateVisibility, onSave } = this.props;\n\n\t\tonUpdateVisibility( 'private' );\n\t\tthis.setState( { hasPassword: false } );\n\t\tonSave();\n\t}\n\n\tsetPasswordProtected() {\n\t\tconst { visibility, onUpdateVisibility, status, password } = this.props;\n\n\t\tonUpdateVisibility( visibility === 'private' ? 'draft' : status, password || '' );\n\t\tthis.setState( { hasPassword: true } );\n\t}\n\n\tupdatePassword( event ) {\n\t\tconst { status, onUpdateVisibility } = this.props;\n\t\tonUpdateVisibility( status, event.target.value );\n\t}\n\n\trender() {\n\t\tconst { visibility, password, instanceId } = this.props;\n\n\t\tconst visibilityHandlers = {\n\t\t\tpublic: {\n\t\t\t\tonSelect: this.setPublic,\n\t\t\t\tchecked: visibility === 'public' && ! this.state.hasPassword,\n\t\t\t},\n\t\t\tprivate: {\n\t\t\t\tonSelect: this.setPrivate,\n\t\t\t\tchecked: visibility === 'private',\n\t\t\t},\n\t\t\tpassword: {\n\t\t\t\tonSelect: this.setPasswordProtected,\n\t\t\t\tchecked: this.state.hasPassword,\n\t\t\t},\n\t\t};\n\n\t\treturn [\n\t\t\t<fieldset key=\"visibility-selector\" className=\"editor-post-visibility__dialog-fieldset\">\n\t\t\t\t<legend className=\"editor-post-visibility__dialog-legend\">\n\t\t\t\t\t{ __( 'Post Visibility' ) }\n\t\t\t\t</legend>\n\t\t\t\t{ visibilityOptions.map( ( { value, label, info } ) => (\n\t\t\t\t\t<div key={ value } className=\"editor-post-visibility__choice\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\tname={ `editor-post-visibility__setting-${ instanceId }` }\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tonChange={ visibilityHandlers[ value ].onSelect }\n\t\t\t\t\t\t\tchecked={ visibilityHandlers[ value ].checked }\n\t\t\t\t\t\t\tid={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\t\t\t\taria-describedby={ `editor-post-${ value }-${ instanceId }-description` }\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__dialog-radio\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\thtmlFor={ `editor-post-${ value }-${ instanceId }` }\n\t\t\t\t\t\t\tclassName=\"editor-post-visibility__dialog-label\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ label }\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t{ <p id={ `editor-post-${ value }-${ instanceId }-description` } className=\"editor-post-visibility__dialog-info\">{ info }</p> }\n\t\t\t\t\t</div>\n\t\t\t\t) ) }\n\t\t\t</fieldset>,\n\t\t\tthis.state.hasPassword && (\n\t\t\t\t<div className=\"editor-post-visibility__dialog-password\" key=\"password-selector\">\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor={ `editor-post-visibility__dialog-password-input-${ instanceId }` }\n\t\t\t\t\t\tclassName=\"screen-reader-text\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Create password' ) }\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tclassName=\"editor-post-visibility__dialog-password-input\"\n\t\t\t\t\t\tid={ `editor-post-visibility__dialog-password-input-${ instanceId }` }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonChange={ this.updatePassword }\n\t\t\t\t\t\tvalue={ password }\n\t\t\t\t\t\tplaceholder={ __( 'Use a secure password' ) }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t),\n\t\t];\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetEditedPostAttribute,\n\t\t\tgetEditedPostVisibility,\n\t\t} = select( 'core/editor' );\n\t\treturn {\n\t\t\tstatus: getEditedPostAttribute( 'status' ),\n\t\t\tvisibility: getEditedPostVisibility(),\n\t\t\tpassword: getEditedPostAttribute( 'password' ),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { savePost, editPost } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonSave: savePost,\n\t\t\tonUpdateVisibility( status, password = null ) {\n\t\t\t\teditPost( { status, password } );\n\t\t\t},\n\t\t};\n\t} ),\n\twithInstanceId,\n] )( PostVisibility );\n","/**\n * External dependencies\n */\nimport { find } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal Dependencies\n */\nimport { visibilityOptions } from './utils';\n\nfunction PostVisibilityLabel( { visibility } ) {\n\tconst getVisibilityLabel = () => find( visibilityOptions, { value: visibility } ).label;\n\n\treturn getVisibilityLabel( visibility );\n}\n\nexport default withSelect( ( select ) => ( {\n\tvisibility: select( 'core/editor' ).getEditedPostVisibility(),\n} ) )( PostVisibilityLabel );\n","/**\n * WordPress Dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nexport const visibilityOptions = [\n\t{\n\t\tvalue: 'public',\n\t\tlabel: __( 'Public' ),\n\t\tinfo: __( 'Visible to everyone.' ),\n\t},\n\t{\n\t\tvalue: 'private',\n\t\tlabel: __( 'Private' ),\n\t\tinfo: __( 'Only visible to site admins and editors.' ),\n\t},\n\t{\n\t\tvalue: 'password',\n\t\tlabel: __( 'Password Protected' ),\n\t\tinfo: __( 'Protected with a password you choose. Only those with the password can view this post.' ),\n\t},\n];\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport { getScrollContainer } from '@wordpress/dom';\n\n/**\n * Internal dependencies\n */\nimport { getBlockDOMNode } from '../../utils/dom';\n\n/**\n * Non-visual component which preserves offset of selected block within nearest\n * scrollable container while reordering.\n *\n * @example\n *\n * ```jsx\n * <PreserveScrollInReorder />\n * ```\n */\nclass PreserveScrollInReorder extends Component {\n\tgetSnapshotBeforeUpdate( prevProps ) {\n\t\tconst { blockOrder, selectionStart } = this.props;\n\t\tif ( blockOrder !== prevProps.blockOrder && selectionStart ) {\n\t\t\treturn this.getOffset( selectionStart );\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState, snapshot ) {\n\t\tif ( snapshot ) {\n\t\t\tthis.restorePreviousOffset( snapshot );\n\t\t}\n\t}\n\n\t/**\n\t * Given the block client ID of the start of the selection, saves the\n\t * block's top offset as an instance property before a reorder is to occur.\n\t *\n\t * @param {string} selectionStart Client ID of selected block.\n\t *\n\t * @return {number?} The scroll offset.\n\t */\n\tgetOffset( selectionStart ) {\n\t\tconst blockNode = getBlockDOMNode( selectionStart );\n\t\tif ( ! blockNode ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn blockNode.getBoundingClientRect().top;\n\t}\n\n\t/**\n\t * After a block reordering, restores the previous viewport top offset.\n\t *\n\t * @param {number} offset The scroll offset.\n\t */\n\trestorePreviousOffset( offset ) {\n\t\tconst { selectionStart } = this.props;\n\t\tconst blockNode = getBlockDOMNode( selectionStart );\n\t\tif ( blockNode ) {\n\t\t\tconst scrollContainer = getScrollContainer( blockNode );\n\t\t\tif ( scrollContainer ) {\n\t\t\t\tscrollContainer.scrollTop = scrollContainer.scrollTop +\n\t\t\t\t\tblockNode.getBoundingClientRect().top - offset;\n\t\t\t}\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\treturn {\n\t\tblockOrder: select( 'core/editor' ).getBlockOrder(),\n\t\tselectionStart: select( 'core/editor' ).getBlockSelectionStart(),\n\t};\n} )( PreserveScrollInReorder );\n","/**\n * External dependencies\n */\nimport { flow, map } from 'lodash';\n\n/**\n * WordPress Dependencies\n */\nimport { compose } from '@wordpress/compose';\nimport { createElement, Component } from '@wordpress/element';\nimport { DropZoneProvider, SlotFillProvider } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { traverse, wrap, urlRewrite, editorWidth } from '../../editor-styles';\n\nclass EditorProvider extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\n\t\t// Assume that we don't need to initialize in the case of an error recovery.\n\t\tif ( ! props.recovery ) {\n\t\t\tthis.props.updateEditorSettings( props.settings );\n\t\t\tthis.props.updatePostLock( props.settings.postLock );\n\t\t\tthis.props.setupEditor( props.post, props.settings.autosave );\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tif ( ! this.props.settings.styles ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmap( this.props.settings.styles, ( { css, baseURL } ) => {\n\t\t\tconst transforms = [\n\t\t\t\teditorWidth,\n\t\t\t\twrap( '.editor-block-list__block', [ '.wp-block' ] ),\n\t\t\t];\n\t\t\tif ( baseURL ) {\n\t\t\t\ttransforms.push( urlRewrite( baseURL ) );\n\t\t\t}\n\t\t\tconst updatedCSS = traverse( css, compose( transforms ) );\n\t\t\tif ( updatedCSS ) {\n\t\t\t\tconst node = document.createElement( 'style' );\n\t\t\t\tnode.innerHTML = updatedCSS;\n\t\t\t\tdocument.body.appendChild( node );\n\t\t\t}\n\t\t} );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tif ( this.props.settings !== prevProps.settings ) {\n\t\t\tthis.props.updateEditorSettings( this.props.settings );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tchildren,\n\t\t} = this.props;\n\n\t\tconst providers = [\n\t\t\t// Slot / Fill provider:\n\t\t\t//\n\t\t\t//  - context.getSlot\n\t\t\t//  - context.registerSlot\n\t\t\t//  - context.unregisterSlot\n\t\t\t[\n\t\t\t\tSlotFillProvider,\n\t\t\t],\n\n\t\t\t// DropZone provider:\n\t\t\t[\n\t\t\t\tDropZoneProvider,\n\t\t\t],\n\t\t];\n\n\t\tconst createEditorElement = flow(\n\t\t\tproviders.map( ( [ Provider, props ] ) => (\n\t\t\t\t( arg ) => createElement( Provider, props, arg )\n\t\t\t) )\n\t\t);\n\n\t\treturn createEditorElement( children );\n\t}\n}\n\nexport default withDispatch( ( dispatch ) => {\n\tconst {\n\t\tsetupEditor,\n\t\tupdateEditorSettings,\n\t\tupdatePostLock,\n\t} = dispatch( 'core/editor' );\n\treturn {\n\t\tsetupEditor,\n\t\tupdateEditorSettings,\n\t\tupdatePostLock,\n\t};\n} )( EditorProvider );\n","/**\n * External dependencies\n */\n\nimport {\n\tdifference,\n\tisEqual,\n\tisNil,\n\tkeys,\n\tpickBy,\n\tstartsWith,\n} from 'lodash';\n\nconst isAriaPropName = ( name ) =>\n\tstartsWith( name, 'aria-' );\n\nexport const pickAriaProps = ( props ) =>\n\tpickBy( props, ( value, key ) => isAriaPropName( key ) && ! isNil( value ) );\n\nexport const diffAriaProps = ( props, nextProps ) => {\n\tconst prevAriaKeys = keys( pickAriaProps( props ) );\n\tconst nextAriaKeys = keys( pickAriaProps( nextProps ) );\n\tconst removedKeys = difference( prevAriaKeys, nextAriaKeys );\n\tconst updatedKeys = nextAriaKeys.filter( ( key ) =>\n\t\t! isEqual( props[ key ], nextProps[ key ] ) );\n\treturn { removedKeys, updatedKeys };\n};\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport MediaUpload from '../../../media-upload';\n\nexport const name = 'core/image';\n\nconst ALLOWED_MEDIA_TYPES = [ 'image' ];\n\nexport const settings = {\n\tid: 'image',\n\n\ttitle: __( 'Inline Image' ),\n\n\ttype: 'image',\n\n\ticon: <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M4 16h10c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2zM4 5h10v9H4V5zm14 9v2h4v-2h-4zM2 20h20v-2H2v2zm6.4-8.8L7 9.4 5 12h8l-2.6-3.4-2 2.6z\" /></svg>,\n\n\tedit( { onSave } ) {\n\t\treturn (\n\t\t\t<MediaUpload\n\t\t\t\tallowedTypes={ ALLOWED_MEDIA_TYPES }\n\t\t\t\tonSelect={ ( media ) => onSave( media ) }\n\t\t\t\tonClose={ () => onSave( null ) }\n\t\t\t\trender={ ( { open } ) => {\n\t\t\t\t\topen();\n\t\t\t\t\treturn null;\n\t\t\t\t} }\n\t\t\t/>\n\t\t);\n\t},\n\n\tsave( { id, url, alt, width } ) {\n\t\treturn (\n\t\t\t<img\n\t\t\t\tclassName={ `wp-image-${ id }` }\n\t\t\t\t// set width in style attribute to prevent Block CSS from overriding it\n\t\t\t\tstyle={ { width: `${ Math.min( width, 150 ) }px` } }\n\t\t\t\tsrc={ url }\n\t\t\t\talt={ alt }\n\t\t\t/>\n\t\t);\n\t},\n};\n","/**\n * Internal dependencies\n */\nimport * as image from './image';\n\nexport { image };\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Toolbar } from '@wordpress/components';\nimport { rawShortcut } from '@wordpress/keycodes';\nimport { Component } from '@wordpress/element';\nimport {\n\tapplyFormat,\n\tremoveFormat,\n\tgetActiveFormat,\n\tgetTextContent,\n\tslice,\n} from '@wordpress/rich-text';\nimport { isURL } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { FORMATTING_CONTROLS } from '../formatting-controls';\nimport LinkContainer from './link-container';\nimport ToolbarContainer from './toolbar-container';\n\nclass FormatToolbar extends Component {\n\tconstructor( { toggleFormat, editor } ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.removeLink = this.removeLink.bind( this );\n\t\tthis.addLink = this.addLink.bind( this );\n\t\tthis.stopAddingLink = this.stopAddingLink.bind( this );\n\t\tthis.applyFormat = this.applyFormat.bind( this );\n\t\tthis.removeFormat = this.removeFormat.bind( this );\n\t\tthis.getActiveFormat = this.getActiveFormat.bind( this );\n\t\tthis.toggleFormat = this.toggleFormat.bind( this );\n\n\t\tthis.state = {\n\t\t\taddingLink: false,\n\t\t};\n\n\t\tif ( editor ) {\n\t\t\teditor.shortcuts.add( rawShortcut.primary( 'k' ), '', this.addLink );\n\t\t\teditor.shortcuts.add( rawShortcut.access( 'a' ), '', this.addLink );\n\t\t\teditor.shortcuts.add( rawShortcut.access( 's' ), '', this.removeLink );\n\t\t\teditor.shortcuts.add( rawShortcut.access( 'd' ), '', () => toggleFormat( { type: 'del' } ) );\n\t\t\teditor.shortcuts.add( rawShortcut.access( 'x' ), '', () => toggleFormat( { type: 'code' } ) );\n\t\t}\n\t}\n\n\tremoveLink() {\n\t\tthis.removeFormat( 'a' );\n\t}\n\n\taddLink() {\n\t\tconst text = getTextContent( slice( this.props.record ) );\n\n\t\tif ( text && isURL( text ) ) {\n\t\t\tthis.applyFormat( {\n\t\t\t\ttype: 'a',\n\t\t\t\tattributes: {\n\t\t\t\t\thref: text,\n\t\t\t\t},\n\t\t\t} );\n\t\t} else {\n\t\t\tthis.setState( { addingLink: true } );\n\t\t}\n\t}\n\n\tstopAddingLink() {\n\t\tthis.setState( { addingLink: false } );\n\t}\n\n\t/**\n\t * Apply a format with the current value and selection.\n\t *\n\t * @param {Object} format The format to apply.\n\t */\n\tapplyFormat( format ) {\n\t\tthis.props.onChange( applyFormat( this.props.record, format ) );\n\t}\n\n\t/**\n\t * Remove a format from the current value with the current selection.\n\t *\n\t * @param {string} formatType The type of format to remove.\n\t */\n\tremoveFormat( formatType ) {\n\t\tthis.props.onChange( removeFormat( this.props.record, formatType ) );\n\t}\n\n\t/**\n\t * Get the current format based on the selection\n\t *\n\t * @param {string} formatType The type of format to check.\n\t *\n\t * @return {boolean} Whether the format is active or not.\n\t */\n\tgetActiveFormat( formatType ) {\n\t\treturn getActiveFormat( this.props.record, formatType );\n\t}\n\n\t/**\n\t * Toggle a format based on the selection.\n\t *\n\t * @param {Object} format The format to toggle.\n\t */\n\ttoggleFormat( format ) {\n\t\tif ( this.getActiveFormat( format.type ) ) {\n\t\t\tthis.removeFormat( format.type );\n\t\t} else {\n\t\t\tthis.applyFormat( format );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst link = this.getActiveFormat( 'a' );\n\t\tconst toolbarControls = FORMATTING_CONTROLS\n\t\t\t.filter( ( control ) => this.props.enabledControls.indexOf( control.format ) !== -1 )\n\t\t\t.map( ( control ) => {\n\t\t\t\tif ( control.format === 'link' ) {\n\t\t\t\t\tconst linkIsActive = link !== undefined;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...control,\n\t\t\t\t\t\tshortcut: linkIsActive ? control.activeShortcut : control.shortcut,\n\t\t\t\t\t\ticon: linkIsActive ? 'editor-unlink' : 'admin-links', // TODO: Need proper unlink icon\n\t\t\t\t\t\ttitle: linkIsActive ? __( 'Unlink' ) : __( 'Link' ),\n\t\t\t\t\t\tonClick: linkIsActive ? this.removeLink : this.addLink,\n\t\t\t\t\t\tisActive: !! linkIsActive,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...control,\n\t\t\t\t\tonClick: () => this.toggleFormat( { type: control.selector } ),\n\t\t\t\t\tisActive: this.getActiveFormat( control.selector ) !== undefined,\n\t\t\t\t};\n\t\t\t} );\n\n\t\treturn (\n\t\t\t<ToolbarContainer>\n\t\t\t\t<Toolbar controls={ toolbarControls } />\n\t\t\t\t<LinkContainer\n\t\t\t\t\tlink={ link }\n\t\t\t\t\trecord={ this.props.record }\n\t\t\t\t\tonChange={ this.props.onChange }\n\t\t\t\t\tapplyFormat={ this.applyFormat }\n\t\t\t\t\tremoveFormat={ this.removeFormat }\n\t\t\t\t\tgetActiveFormat={ this.getActiveFormat }\n\t\t\t\t\ttoggleFormat={ this.toggleFormat }\n\t\t\t\t\taddingLink={ this.state.addingLink }\n\t\t\t\t\tstopAddingLink={ this.stopAddingLink }\n\t\t\t\t/>\n\t\t\t</ToolbarContainer>\n\t\t);\n\t}\n}\n\nexport default FormatToolbar;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, createRef } from '@wordpress/element';\nimport {\n\tExternalLink,\n\tFill,\n\tIconButton,\n\tToggleControl,\n\twithSpokenMessages,\n} from '@wordpress/components';\nimport { ESCAPE, LEFT, RIGHT, UP, DOWN, BACKSPACE, ENTER } from '@wordpress/keycodes';\nimport { prependHTTP, safeDecodeURI } from '@wordpress/url';\nimport {\n\tcreate,\n\tinsert,\n\tisCollapsed,\n\tapplyFormat,\n} from '@wordpress/rich-text';\n\n/**\n * Internal dependencies\n */\nimport PositionedAtSelection from './positioned-at-selection';\nimport URLInput from '../../url-input';\nimport { filterURLForDisplay } from '../../../utils/url';\nimport URLPopover from '../../url-popover';\n\nconst stopKeyPropagation = ( event ) => event.stopPropagation();\n\nfunction getLinkAttributesFromFormat( { attributes: { href = '', target } = {} } = {} ) {\n\treturn { href, target };\n}\n\nfunction createLinkFormat( { href, opensInNewWindow } ) {\n\tconst format = {\n\t\ttype: 'a',\n\t\tattributes: {\n\t\t\thref,\n\t\t},\n\t};\n\n\tif ( opensInNewWindow ) {\n\t\tformat.attributes.target = '_blank';\n\t\tformat.attributes.rel = 'noreferrer noopener';\n\t}\n\n\treturn format;\n}\n\nfunction isShowingInput( props, state ) {\n\treturn props.addingLink || state.editLink;\n}\n\nconst LinkEditor = ( { inputValue, onChangeInputValue, onKeyDown, submitLink, autocompleteRef } ) => (\n\t// Disable reason: KeyPress must be suppressed so the block doesn't hide the toolbar\n\t/* eslint-disable jsx-a11y/no-noninteractive-element-interactions */\n\t<form\n\t\tclassName=\"editor-format-toolbar__link-container-content\"\n\t\tonKeyPress={ stopKeyPropagation }\n\t\tonKeyDown={ onKeyDown }\n\t\tonSubmit={ submitLink }\n\t>\n\t\t<URLInput\n\t\t\tvalue={ inputValue }\n\t\t\tonChange={ onChangeInputValue }\n\t\t\tautocompleteRef={ autocompleteRef }\n\t\t/>\n\t\t<IconButton icon=\"editor-break\" label={ __( 'Apply' ) } type=\"submit\" />\n\t</form>\n\t/* eslint-enable jsx-a11y/no-noninteractive-element-interactions */\n);\n\nconst LinkViewer = ( { href, editLink } ) => (\n\t// Disable reason: KeyPress must be suppressed so the block doesn't hide the toolbar\n\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\t<div\n\t\tclassName=\"editor-format-toolbar__link-container-content\"\n\t\tonKeyPress={ stopKeyPropagation }\n\t>\n\t\t<ExternalLink\n\t\t\tclassName=\"editor-format-toolbar__link-container-value\"\n\t\t\thref={ href }\n\t\t>\n\t\t\t{ filterURLForDisplay( safeDecodeURI( href ) ) }\n\t\t</ExternalLink>\n\t\t<IconButton icon=\"edit\" label={ __( 'Edit' ) } onClick={ editLink } />\n\t</div>\n\t/* eslint-enable jsx-a11y/no-static-element-interactions */\n);\n\nclass LinkContainer extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.editLink = this.editLink.bind( this );\n\t\tthis.submitLink = this.submitLink.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.onChangeInputValue = this.onChangeInputValue.bind( this );\n\t\tthis.setLinkTarget = this.setLinkTarget.bind( this );\n\t\tthis.onClickOutside = this.onClickOutside.bind( this );\n\t\tthis.resetState = this.resetState.bind( this );\n\t\tthis.autocompleteRef = createRef();\n\n\t\tthis.state = {};\n\t}\n\n\tstatic getDerivedStateFromProps( props, state ) {\n\t\tconst { href, target } = getLinkAttributesFromFormat( props.link );\n\t\tconst opensInNewWindow = target === '_blank';\n\n\t\tif ( ! isShowingInput( props, state ) ) {\n\t\t\tif ( href !== state.inputValue ) {\n\t\t\t\treturn { inputValue: href };\n\t\t\t}\n\n\t\t\tif ( opensInNewWindow !== state.opensInNewWindow ) {\n\t\t\t\treturn { opensInNewWindow };\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tonKeyDown( event ) {\n\t\tif ( event.keyCode === ESCAPE ) {\n\t\t\tevent.stopPropagation();\n\t\t\tthis.resetState();\n\t\t}\n\n\t\tif ( [ LEFT, DOWN, RIGHT, UP, BACKSPACE, ENTER ].indexOf( event.keyCode ) > -1 ) {\n\t\t\t// Stop the key event from propagating up to maybeStartTyping in BlockListBlock.\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tonChangeInputValue( inputValue ) {\n\t\tthis.setState( { inputValue } );\n\t}\n\n\tsetLinkTarget( opensInNewWindow ) {\n\t\tthis.setState( { opensInNewWindow } );\n\n\t\t// Apply now if URL is not being edited.\n\t\tif ( ! isShowingInput( this.props, this.state ) ) {\n\t\t\tconst { href } = getLinkAttributesFromFormat( this.props.link );\n\t\t\tthis.props.applyFormat( createLinkFormat( { href, opensInNewWindow } ) );\n\t\t}\n\t}\n\n\teditLink( event ) {\n\t\tthis.setState( { editLink: true } );\n\t\tevent.preventDefault();\n\t}\n\n\tsubmitLink( event ) {\n\t\tconst { link, record } = this.props;\n\t\tconst { inputValue, opensInNewWindow } = this.state;\n\t\tconst href = prependHTTP( inputValue );\n\t\tconst format = createLinkFormat( { href, opensInNewWindow } );\n\n\t\tif ( isCollapsed( record ) && link === undefined ) {\n\t\t\tconst toInsert = applyFormat( create( { text: href } ), format, 0, href.length );\n\t\t\tthis.props.onChange( insert( record, toInsert ) );\n\t\t} else {\n\t\t\tthis.props.applyFormat( format );\n\t\t}\n\n\t\tthis.resetState();\n\n\t\tif ( ! link ) {\n\t\t\tthis.props.speak( __( 'Link added.' ), 'assertive' );\n\t\t}\n\n\t\tevent.preventDefault();\n\t}\n\n\tonClickOutside( event ) {\n\t\t// The autocomplete suggestions list renders in a separate popover (in a portal),\n\t\t// so onClickOutside fails to detect that a click on a suggestion occured in the\n\t\t// LinkContainer. Detect clicks on autocomplete suggestions using a ref here, and\n\t\t// return to avoid the popover being closed.\n\t\tconst autocompleteElement = this.autocompleteRef.current;\n\t\tif ( autocompleteElement && autocompleteElement.contains( event.target ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.resetState();\n\t}\n\n\tresetState() {\n\t\tthis.props.stopAddingLink();\n\t\tthis.setState( { editLink: false } );\n\t}\n\n\trender() {\n\t\tconst { link, addingLink, record } = this.props;\n\n\t\tif ( ! link && ! addingLink ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { inputValue, opensInNewWindow } = this.state;\n\t\tconst { href } = getLinkAttributesFromFormat( link );\n\t\tconst showInput = isShowingInput( this.props, this.state );\n\n\t\treturn (\n\t\t\t<Fill name=\"RichText.Siblings\">\n\t\t\t\t<PositionedAtSelection\n\t\t\t\t\tkey={ `${ record.start }${ record.end }` /* Used to force rerender on selection change */ }\n\t\t\t\t>\n\t\t\t\t\t<URLPopover\n\t\t\t\t\t\tonClickOutside={ this.onClickOutside }\n\t\t\t\t\t\tfocusOnMount={ showInput ? 'firstElement' : false }\n\t\t\t\t\t\trenderSettings={ () => (\n\t\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\t\tlabel={ __( 'Open in New Tab' ) }\n\t\t\t\t\t\t\t\tchecked={ opensInNewWindow }\n\t\t\t\t\t\t\t\tonChange={ this.setLinkTarget }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ showInput ? (\n\t\t\t\t\t\t\t<LinkEditor\n\t\t\t\t\t\t\t\tinputValue={ inputValue }\n\t\t\t\t\t\t\t\tonChangeInputValue={ this.onChangeInputValue }\n\t\t\t\t\t\t\t\tonKeyDown={ this.onKeyDown }\n\t\t\t\t\t\t\t\tsubmitLink={ this.submitLink }\n\t\t\t\t\t\t\t\tautocompleteRef={ this.autocompleteRef }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<LinkViewer\n\t\t\t\t\t\t\t\thref={ href }\n\t\t\t\t\t\t\t\teditLink={ this.editLink }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</URLPopover>\n\t\t\t\t</PositionedAtSelection>\n\t\t\t</Fill>\n\t\t);\n\t}\n}\n\nexport default withSpokenMessages( LinkContainer );\n","/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { getOffsetParent, getRectangleFromRange } from '@wordpress/dom';\n\n/**\n * Returns a style object for applying as `position: absolute` for an element\n * relative to the bottom-center of the current selection. Includes `top` and\n * `left` style properties.\n *\n * @return {Object} Style object.\n */\nfunction getCurrentCaretPositionStyle() {\n\tconst selection = window.getSelection();\n\n\t// Unlikely, but in the case there is no selection, return empty styles so\n\t// as to avoid a thrown error by `Selection#getRangeAt` on invalid index.\n\tif ( selection.rangeCount === 0 ) {\n\t\treturn {};\n\t}\n\n\t// Get position relative viewport.\n\tconst rect = getRectangleFromRange( selection.getRangeAt( 0 ) );\n\tlet top = rect.top + rect.height;\n\tlet left = rect.left + ( rect.width / 2 );\n\n\t// Offset by positioned parent, if one exists.\n\tconst offsetParent = getOffsetParent( selection.anchorNode );\n\tif ( offsetParent ) {\n\t\tconst parentRect = offsetParent.getBoundingClientRect();\n\t\ttop -= parentRect.top;\n\t\tleft -= parentRect.left;\n\t}\n\n\treturn { top, left };\n}\n\n/**\n * Component which renders itself positioned under the current caret selection.\n * The position is calculated at the time of the component being mounted, so it\n * should only be mounted after the desired selection has been made.\n *\n * @type {WPComponent}\n */\nclass PositionedAtSelection extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\tstyle: getCurrentCaretPositionStyle(),\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { children } = this.props;\n\t\tconst { style } = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"editor-format-toolbar__selection-position\" style={ style }>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default PositionedAtSelection;\n","const ToolbarContainer = ( props ) => (\n\t<div\n\t\tclassName=\"editor-format-toolbar\"\n\t>\n\t\t{ props.children }\n\t</div>\n);\nexport default ToolbarContainer;\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { displayShortcut } from '@wordpress/keycodes';\n\nexport const FORMATTING_CONTROLS = [\n\t{\n\t\ticon: 'editor-bold',\n\t\ttitle: __( 'Bold' ),\n\t\tshortcut: displayShortcut.primary( 'b' ),\n\t\tformat: 'bold',\n\t\tselector: 'strong',\n\t},\n\t{\n\t\ticon: 'editor-italic',\n\t\ttitle: __( 'Italic' ),\n\t\tshortcut: displayShortcut.primary( 'i' ),\n\t\tformat: 'italic',\n\t\tselector: 'em',\n\t},\n\t{\n\t\ticon: 'admin-links',\n\t\ttitle: __( 'Link' ),\n\t\tshortcut: displayShortcut.primary( 'k' ),\n\t\tactiveShortcut: displayShortcut.access( 's' ),\n\t\tformat: 'link',\n\t\tselector: 'a',\n\t},\n\t{\n\t\ticon: 'editor-strikethrough',\n\t\ttitle: __( 'Strikethrough' ),\n\t\tshortcut: displayShortcut.access( 'd' ),\n\t\tformat: 'strikethrough',\n\t\tselector: 'del',\n\t},\n];\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport {\n\tdefer,\n\tfind,\n\tidentity,\n\tisNil,\n\tnoop,\n\tisEqual,\n\tomit,\n} from 'lodash';\nimport memize from 'memize';\n\n/**\n * WordPress dependencies\n */\nimport { Component, Fragment, RawHTML, createRef } from '@wordpress/element';\nimport {\n\tisHorizontalEdge,\n\tgetRectangleFromRange,\n\tgetScrollContainer,\n} from '@wordpress/dom';\nimport { createBlobURL } from '@wordpress/blob';\nimport { BACKSPACE, DELETE, ENTER, LEFT, RIGHT, rawShortcut } from '@wordpress/keycodes';\nimport { Slot } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { rawHandler, children, getBlockTransforms, findTransform } from '@wordpress/blocks';\nimport { withInstanceId, withSafeTimeout, compose } from '@wordpress/compose';\nimport { isURL } from '@wordpress/url';\nimport {\n\tisEmpty,\n\tcreate,\n\tapply,\n\tapplyFormat,\n\tsplit,\n\ttoHTMLString,\n\tgetTextContent,\n\tinsert,\n\tisEmptyLine,\n\tunstableToDom,\n} from '@wordpress/rich-text';\nimport { decodeEntities } from '@wordpress/html-entities';\n\n/**\n * Internal dependencies\n */\nimport Autocomplete from '../autocomplete';\nimport BlockFormatControls from '../block-format-controls';\nimport { FORMATTING_CONTROLS } from './formatting-controls';\nimport FormatToolbar from './format-toolbar';\nimport TinyMCE from './tinymce';\nimport { pickAriaProps } from './aria';\nimport { getPatterns } from './patterns';\nimport { withBlockEditContext } from '../block-edit/context';\nimport TokenUI from './tokens/ui';\n\n/**\n * Browser dependencies\n */\n\nconst { Node, getSelection } = window;\n\n/**\n * Zero-width space character used by TinyMCE as a caret landing point for\n * inline boundary nodes.\n *\n * @see tinymce/src/core/main/ts/text/Zwsp.ts\n *\n * @type {string}\n */\nconst TINYMCE_ZWSP = '\\uFEFF';\n\nexport class RichText extends Component {\n\tconstructor( { value, onReplace, multiline } ) {\n\t\tsuper( ...arguments );\n\n\t\tif ( multiline === true || multiline === 'p' || multiline === 'li' ) {\n\t\t\tthis.multilineTag = multiline === true ? 'p' : multiline;\n\t\t}\n\n\t\tthis.onInit = this.onInit.bind( this );\n\t\tthis.getSettings = this.getSettings.bind( this );\n\t\tthis.onSetup = this.onSetup.bind( this );\n\t\tthis.onFocus = this.onFocus.bind( this );\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onNodeChange = this.onNodeChange.bind( this );\n\t\tthis.onDeleteKeyDown = this.onDeleteKeyDown.bind( this );\n\t\tthis.onHorizontalNavigationKeyDown = this.onHorizontalNavigationKeyDown.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.onKeyUp = this.onKeyUp.bind( this );\n\t\tthis.onPropagateUndo = this.onPropagateUndo.bind( this );\n\t\tthis.onPaste = this.onPaste.bind( this );\n\t\tthis.onCreateUndoLevel = this.onCreateUndoLevel.bind( this );\n\t\tthis.setFocusedElement = this.setFocusedElement.bind( this );\n\t\tthis.onInput = this.onInput.bind( this );\n\t\tthis.onSelectionChange = this.onSelectionChange.bind( this );\n\t\tthis.getRecord = this.getRecord.bind( this );\n\t\tthis.createRecord = this.createRecord.bind( this );\n\t\tthis.applyRecord = this.applyRecord.bind( this );\n\t\tthis.isEmpty = this.isEmpty.bind( this );\n\t\tthis.valueToFormat = this.valueToFormat.bind( this );\n\t\tthis.setRef = this.setRef.bind( this );\n\t\tthis.isActive = this.isActive.bind( this );\n\n\t\tthis.formatToValue = memize( this.formatToValue.bind( this ), { size: 1 } );\n\n\t\tthis.savedContent = value;\n\t\tthis.containerRef = createRef();\n\t\tthis.patterns = getPatterns( {\n\t\t\tonReplace,\n\t\t\tmultilineTag: this.multilineTag,\n\t\t\tvalueToFormat: this.valueToFormat,\n\t\t} );\n\t\tthis.enterPatterns = getBlockTransforms( 'from' ).filter( ( { type, trigger } ) =>\n\t\t\ttype === 'pattern' && trigger === 'enter'\n\t\t);\n\n\t\tthis.state = {};\n\n\t\tthis.usedDeprecatedChildrenSource = Array.isArray( value );\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener( 'selectionchange', this.onSelectionChange );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener( 'selectionchange', this.onSelectionChange );\n\t}\n\n\tsetRef( node ) {\n\t\tthis.editableRef = node;\n\t}\n\n\tisActive() {\n\t\treturn this.editableRef === document.activeElement;\n\t}\n\n\t/**\n\t * Retrieves the settings for this block.\n\t *\n\t * Allows passing in settings which will be overwritten.\n\t *\n\t * @param {Object} settings The settings to overwrite.\n\t * @return {Object} The settings for this block.\n\t */\n\tgetSettings( settings ) {\n\t\tsettings = {\n\t\t\t...settings,\n\t\t\tforced_root_block: this.multilineTag || false,\n\t\t\t// Allow TinyMCE to keep one undo level for comparing changes.\n\t\t\t// Prevent it otherwise from accumulating any history.\n\t\t\tcustom_undo_redo_levels: 1,\n\t\t};\n\n\t\tconst { unstableGetSettings } = this.props;\n\t\tif ( unstableGetSettings ) {\n\t\t\tsettings = unstableGetSettings( settings );\n\t\t}\n\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Handles the onSetup event for the TinyMCE component.\n\t *\n\t * Will setup event handlers for the TinyMCE instance.\n\t * An `onSetup` function in the props will be called if it is present.\n\t *\n\t * @param {tinymce} editor The editor instance as passed by TinyMCE.\n\t */\n\tonSetup( editor ) {\n\t\tthis.editor = editor;\n\n\t\teditor.on( 'init', this.onInit );\n\t\teditor.on( 'nodechange', this.onNodeChange );\n\t\teditor.on( 'keydown', this.onKeyDown );\n\t\teditor.on( 'keyup', this.onKeyUp );\n\t\teditor.on( 'BeforeExecCommand', this.onPropagateUndo );\n\t\teditor.on( 'focus', this.onFocus );\n\t\t// The change event in TinyMCE fires every time an undo level is added.\n\t\teditor.on( 'change', this.onCreateUndoLevel );\n\n\t\tconst { unstableOnSetup } = this.props;\n\t\tif ( unstableOnSetup ) {\n\t\t\tunstableOnSetup( editor );\n\t\t}\n\t}\n\n\tsetFocusedElement() {\n\t\tif ( this.props.setFocusedElement ) {\n\t\t\tthis.props.setFocusedElement( this.props.instanceId );\n\t\t}\n\t}\n\n\tonInit() {\n\t\tthis.editor.shortcuts.add( rawShortcut.primary( 'z' ), '', 'Undo' );\n\t\tthis.editor.shortcuts.add( rawShortcut.primaryShift( 'z' ), '', 'Redo' );\n\n\t\t// Remove TinyMCE Core shortcut for consistency with global editor\n\t\t// shortcuts. Also clashes with Mac browsers.\n\t\tthis.editor.shortcuts.remove( 'meta+y', '', 'Redo' );\n\t}\n\n\t/**\n\t * Handles an undo event from TinyMCE.\n\t *\n\t * @param {UndoEvent} event The undo event as triggered by TinyMCE.\n\t */\n\tonPropagateUndo( event ) {\n\t\tconst { onUndo, onRedo } = this.props;\n\t\tconst { command } = event;\n\n\t\tif ( command === 'Undo' && onUndo ) {\n\t\t\tdefer( onUndo );\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif ( command === 'Redo' && onRedo ) {\n\t\t\tdefer( onRedo );\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t/**\n\t * Get the current record (value and selection) from props and state.\n\t *\n\t * @return {Object} The current record (value and selection).\n\t */\n\tgetRecord() {\n\t\tconst { formats, text } = this.formatToValue( this.props.value );\n\t\tconst { start, end } = this.state;\n\n\t\treturn { formats, text, start, end };\n\t}\n\n\tcreateRecord() {\n\t\tconst range = window.getSelection().getRangeAt( 0 );\n\n\t\treturn create( {\n\t\t\telement: this.editableRef,\n\t\t\trange,\n\t\t\tmultilineTag: this.multilineTag,\n\t\t\tremoveNode: ( node ) => node.getAttribute( 'data-mce-bogus' ) === 'all',\n\t\t\tunwrapNode: ( node ) => !! node.getAttribute( 'data-mce-bogus' ),\n\t\t\tremoveAttribute: ( attribute ) => attribute.indexOf( 'data-mce-' ) === 0,\n\t\t\tfilterString: ( string ) => string.replace( TINYMCE_ZWSP, '' ),\n\t\t} );\n\t}\n\n\tapplyRecord( record ) {\n\t\tapply( record, this.editableRef, this.multilineTag );\n\t}\n\n\tisEmpty() {\n\t\treturn isEmpty( this.formatToValue( this.props.value ) );\n\t}\n\n\t/**\n\t * Handles a paste event from TinyMCE.\n\t *\n\t * Saves the pasted data as plain text in `pastedPlainText`.\n\t *\n\t * @param {PasteEvent} event The paste event as triggered by TinyMCE.\n\t */\n\tonPaste( event ) {\n\t\tconst clipboardData = event.clipboardData;\n\t\tlet { items, files } = clipboardData;\n\n\t\t// In Edge these properties can be null instead of undefined, so a more\n\t\t// rigorous test is required over using default values.\n\t\titems = isNil( items ) ? [] : items;\n\t\tfiles = isNil( files ) ? [] : files;\n\n\t\tconst item = find( [ ...items, ...files ], ( { type } ) => /^image\\/(?:jpe?g|png|gif)$/.test( type ) );\n\t\tlet plainText = '';\n\t\tlet html = '';\n\n\t\t// IE11 only supports `Text` as an argument for `getData` and will\n\t\t// otherwise throw an invalid argument error, so we try the standard\n\t\t// arguments first, then fallback to `Text` if they fail.\n\t\ttry {\n\t\t\tplainText = clipboardData.getData( 'text/plain' );\n\t\t\thtml = clipboardData.getData( 'text/html' );\n\t\t} catch ( error1 ) {\n\t\t\ttry {\n\t\t\t\thtml = clipboardData.getData( 'Text' );\n\t\t\t} catch ( error2 ) {\n\t\t\t\t// Some browsers like UC Browser paste plain text by default and\n\t\t\t\t// don't support clipboardData at all, so allow default\n\t\t\t\t// behaviour.\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\t// Allows us to ask for this information when we get a report.\n\t\twindow.console.log( 'Received HTML:\\n\\n', html );\n\t\twindow.console.log( 'Received plain text:\\n\\n', plainText );\n\n\t\t// Only process file if no HTML is present.\n\t\t// Note: a pasted file may have the URL as plain text.\n\t\tif ( item && ! html ) {\n\t\t\tconst file = item.getAsFile ? item.getAsFile() : item;\n\t\t\tconst content = rawHandler( {\n\t\t\t\tHTML: `<img src=\"${ createBlobURL( file ) }\">`,\n\t\t\t\tmode: 'BLOCKS',\n\t\t\t\ttagName: this.props.tagName,\n\t\t\t} );\n\t\t\tconst shouldReplace = this.props.onReplace && this.isEmpty();\n\n\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\twindow.console.log( 'Received item:\\n\\n', file );\n\n\t\t\tif ( shouldReplace ) {\n\t\t\t\t// Necessary to allow the paste bin to be removed without errors.\n\t\t\t\tthis.props.setTimeout( () => this.props.onReplace( content ) );\n\t\t\t} else if ( this.props.onSplit ) {\n\t\t\t\t// Necessary to get the right range.\n\t\t\t\t// Also done in the TinyMCE paste plugin.\n\t\t\t\tthis.props.setTimeout( () => this.splitContent( content ) );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// There is a selection, check if a URL is pasted.\n\t\tif ( ! this.editor.selection.isCollapsed() ) {\n\t\t\tconst pastedText = ( html || plainText ).replace( /<[^>]+>/g, '' ).trim();\n\n\t\t\t// A URL was pasted, turn the selection into a link\n\t\t\tif ( isURL( pastedText ) ) {\n\t\t\t\tthis.onChange( applyFormat( this.getRecord(), {\n\t\t\t\t\ttype: 'a',\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\thref: decodeEntities( pastedText ),\n\t\t\t\t\t},\n\t\t\t\t} ) );\n\n\t\t\t\t// Allows us to ask for this information when we get a report.\n\t\t\t\twindow.console.log( 'Created link:\\n\\n', pastedText );\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst shouldReplace = this.props.onReplace && this.isEmpty();\n\n\t\tlet mode = 'INLINE';\n\n\t\tif ( shouldReplace ) {\n\t\t\tmode = 'BLOCKS';\n\t\t} else if ( this.props.onSplit ) {\n\t\t\tmode = 'AUTO';\n\t\t}\n\n\t\tconst content = rawHandler( {\n\t\t\tHTML: html,\n\t\t\tplainText,\n\t\t\tmode,\n\t\t\ttagName: this.props.tagName,\n\t\t\tcanUserUseUnfilteredHTML: this.props.canUserUseUnfilteredHTML,\n\t\t} );\n\n\t\tif ( typeof content === 'string' ) {\n\t\t\tconst recordToInsert = create( { html: content } );\n\t\t\tthis.onChange( insert( this.getRecord(), recordToInsert ) );\n\t\t} else if ( this.props.onSplit ) {\n\t\t\tif ( ! content.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( shouldReplace ) {\n\t\t\t\tthis.props.onReplace( content );\n\t\t\t} else {\n\t\t\t\tthis.splitContent( content, { paste: true } );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handles a focus event on the contenteditable field, calling the\n\t * `unstableOnFocus` prop callback if one is defined. The callback does not\n\t * receive any arguments.\n\t *\n\t * This is marked as a private API and the `unstableOnFocus` prop is not\n\t * documented, as the current requirements where it is used are subject to\n\t * future refactoring following `isSelected` handling.\n\t *\n\t * In contrast with `setFocusedElement`, this is only triggered in response\n\t * to focus within the contenteditable field, whereas `setFocusedElement`\n\t * is triggered on focus within any `RichText` descendent element.\n\t *\n\t * @see setFocusedElement\n\t *\n\t * @private\n\t */\n\tonFocus() {\n\t\tconst { unstableOnFocus } = this.props;\n\t\tif ( unstableOnFocus ) {\n\t\t\tunstableOnFocus();\n\t\t}\n\t}\n\n\t/**\n\t * Handle input on the next selection change event.\n\t */\n\tonInput() {\n\t\tconst record = this.createRecord();\n\t\tconst transformed = this.patterns.reduce( ( accumlator, transform ) => transform( accumlator ), record );\n\n\t\t// Don't apply changes if there's no transform. Content will be up to\n\t\t// date. In the future we could always let it flow back in the live DOM\n\t\t// if there are no performance issues.\n\t\tthis.onChange( transformed, record === transformed );\n\t}\n\n\t/**\n\t * Handles the `selectionchange` event: sync the selection to local state.\n\t */\n\tonSelectionChange() {\n\t\t// Ensure it's the active element. This is a global event.\n\t\tif ( ! this.isActive() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { start, end } = this.createRecord();\n\n\t\tif ( start !== this.state.start || end !== this.state.end ) {\n\t\t\tthis.setState( { start, end } );\n\t\t}\n\t}\n\n\t/**\n\t * Sync the value to global state. The node tree and selection will also be\n\t * updated if differences are found.\n\t *\n\t * @param {Object}  record        The record to sync and apply.\n\t * @param {boolean} _withoutApply If true, the record won't be applied to\n\t *                                the live DOM.\n\t */\n\tonChange( record, _withoutApply ) {\n\t\tif ( ! _withoutApply ) {\n\t\t\tthis.applyRecord( record );\n\t\t}\n\n\t\tconst { start, end } = record;\n\n\t\tthis.savedContent = this.valueToFormat( record );\n\t\tthis.props.onChange( this.savedContent );\n\t\tthis.setState( { start, end } );\n\t}\n\n\tonCreateUndoLevel( event ) {\n\t\t// TinyMCE fires a `change` event when the first letter in an instance\n\t\t// is typed. This should not create a history record in Gutenberg.\n\t\t// https://github.com/tinymce/tinymce/blob/4.7.11/src/core/main/ts/api/UndoManager.ts#L116-L125\n\t\t// In other cases TinyMCE won't fire a `change` with at least a previous\n\t\t// record present, so this is a reliable check.\n\t\t// https://github.com/tinymce/tinymce/blob/4.7.11/src/core/main/ts/api/UndoManager.ts#L272-L275\n\t\tif ( event && event.lastLevel === null ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Always ensure the content is up-to-date. This is needed because e.g.\n\t\t// making something bold will trigger a TinyMCE change event but no\n\t\t// input event. Avoid dispatching an action if the original event is\n\t\t// blur because the content will already be up-to-date.\n\t\tif ( ! event || ! event.originalEvent || event.originalEvent.type !== 'blur' ) {\n\t\t\tthis.onChange( this.createRecord(), true );\n\t\t}\n\n\t\tthis.props.onCreateUndoLevel();\n\t}\n\n\t/**\n\t * Handles a delete keyDown event to handle merge or removal for collapsed\n\t * selection where caret is at directional edge: forward for a delete key,\n\t * reverse for a backspace key.\n\t *\n\t * @link https://en.wikipedia.org/wiki/Caret_navigation\n\t *\n\t * @param {tinymce.EditorEvent<KeyboardEvent>} event Keydown event.\n\t */\n\tonDeleteKeyDown( event ) {\n\t\tconst { onMerge, onRemove } = this.props;\n\t\tif ( ! onMerge && ! onRemove ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { keyCode } = event;\n\t\tconst isReverse = keyCode === BACKSPACE;\n\n\t\tconst { isCollapsed } = getSelection();\n\n\t\t// Only process delete if the key press occurs at uncollapsed edge.\n\t\tif ( ! isCollapsed ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst empty = this.isEmpty();\n\n\t\t// It is important to consider emptiness because an empty container\n\t\t// will include a bogus TinyMCE BR node _after_ the caret, so in a\n\t\t// forward deletion the isHorizontalEdge function will incorrectly\n\t\t// interpret the presence of the bogus node as not being at the edge.\n\t\tconst isEdge = ( empty || isHorizontalEdge( this.editableRef, isReverse ) );\n\n\t\tif ( ! isEdge ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( onMerge ) {\n\t\t\tonMerge( ! isReverse );\n\t\t}\n\n\t\t// Only handle remove on Backspace. This serves dual-purpose of being\n\t\t// an intentional user interaction distinguishing between Backspace and\n\t\t// Delete to remove the empty field, but also to avoid merge & remove\n\t\t// causing destruction of two fields (merge, then removed merged).\n\t\tif ( onRemove && empty && isReverse ) {\n\t\t\tonRemove( ! isReverse );\n\t\t}\n\n\t\tevent.preventDefault();\n\n\t\t// Calling onMerge() or onRemove() will destroy the editor, so it's\n\t\t// important that we stop other handlers (e.g. ones registered by\n\t\t// TinyMCE) from also handling this event.\n\t\tevent.stopImmediatePropagation();\n\t}\n\n\t/**\n\t * Handles a horizontal navigation key down event to handle the case where\n\t * TinyMCE attempts to preventDefault when on the outside edge of an inline\n\t * boundary when arrowing _away_ from the boundary, not within it. Replaces\n\t * the TinyMCE event `preventDefault` behavior with a noop, such that those\n\t * relying on `defaultPrevented` are not misinformed about the arrow event.\n\t *\n\t * If TinyMCE#4476 is resolved, this handling may be removed.\n\t *\n\t * @see https://github.com/tinymce/tinymce/issues/4476\n\t *\n\t * @param {tinymce.EditorEvent<KeyboardEvent>} event Keydown event.\n\t */\n\tonHorizontalNavigationKeyDown( event ) {\n\t\tconst { focusNode } = getSelection();\n\t\tconst { nodeType, nodeValue } = focusNode;\n\n\t\tif ( nodeType !== Node.TEXT_NODE ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nodeValue.length !== 1 || nodeValue[ 0 ] !== TINYMCE_ZWSP ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { keyCode } = event;\n\n\t\t// Consider to be moving away from inline boundary based on:\n\t\t//\n\t\t// 1. Within a text fragment consisting only of ZWSP.\n\t\t// 2. If in reverse, there is no previous sibling. If forward, there is\n\t\t//    no next sibling (i.e. end of node).\n\t\tconst isReverse = keyCode === LEFT;\n\t\tconst edgeSibling = isReverse ? 'previousSibling' : 'nextSibling';\n\t\tif ( ! focusNode[ edgeSibling ] ) {\n\t\t\t// Note: This is not reassigning on the native event, rather the\n\t\t\t// \"fixed\" TinyMCE copy, which proxies its preventDefault to the\n\t\t\t// native event. By reassigning here, we're effectively preventing\n\t\t\t// the proxied call on the native event, but not otherwise mutating\n\t\t\t// the original event object.\n\t\t\tevent.preventDefault = noop;\n\t\t}\n\t}\n\n\t/**\n\t * Handles a keydown event from TinyMCE.\n\t *\n\t * @param {KeydownEvent} event The keydown event as triggered by TinyMCE.\n\t */\n\tonKeyDown( event ) {\n\t\tconst { keyCode } = event;\n\n\t\tconst isDelete = keyCode === DELETE || keyCode === BACKSPACE;\n\t\tif ( isDelete ) {\n\t\t\tthis.onDeleteKeyDown( event );\n\t\t}\n\n\t\tconst isHorizontalNavigation = keyCode === LEFT || keyCode === RIGHT;\n\t\tif ( isHorizontalNavigation ) {\n\t\t\tthis.onHorizontalNavigationKeyDown( event );\n\t\t}\n\n\t\t// If we click shift+Enter on inline RichTexts, we avoid creating two contenteditables\n\t\t// We also split the content and call the onSplit prop if provided.\n\t\tif ( keyCode === ENTER ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( this.props.onReplace ) {\n\t\t\t\tconst text = getTextContent( this.getRecord() );\n\t\t\t\tconst transformation = findTransform( this.enterPatterns, ( item ) => {\n\t\t\t\t\treturn item.regExp.test( text );\n\t\t\t\t} );\n\n\t\t\t\tif ( transformation ) {\n\t\t\t\t\t// Calling onReplace() will destroy the editor, so it's\n\t\t\t\t\t// important that we stop other handlers (e.g. ones\n\t\t\t\t\t// registered by TinyMCE) from also handling this event.\n\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\tthis.props.onReplace( [\n\t\t\t\t\t\ttransformation.transform( { content: text } ),\n\t\t\t\t\t] );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( this.multilineTag ) {\n\t\t\t\tconst record = this.getRecord();\n\n\t\t\t\tif ( this.props.onSplit && isEmptyLine( record ) ) {\n\t\t\t\t\tthis.props.onSplit( ...split( record ).map( this.valueToFormat ) );\n\t\t\t\t} else {\n\t\t\t\t\t// Character is used to separate lines in multiline values.\n\t\t\t\t\tthis.onChange( insert( record, '\\u2028' ) );\n\t\t\t\t}\n\t\t\t} else if ( event.shiftKey || ! this.props.onSplit ) {\n\t\t\t\tconst record = this.getRecord();\n\t\t\t\tconst text = getTextContent( record );\n\t\t\t\tconst length = text.length;\n\t\t\t\tlet toInsert = '\\n';\n\n\t\t\t\t// If the caret is at the end of the text, and there is no\n\t\t\t\t// trailing line break or no text at all, we have to insert two\n\t\t\t\t// line breaks in order to create a new line visually and place\n\t\t\t\t// the caret there.\n\t\t\t\tif ( record.end === length && (\n\t\t\t\t\ttext.charAt( length - 1 ) !== '\\n' || length === 0\n\t\t\t\t) ) {\n\t\t\t\t\ttoInsert = '\\n\\n';\n\t\t\t\t}\n\n\t\t\t\tthis.onChange( insert( this.getRecord(), toInsert ) );\n\t\t\t} else {\n\t\t\t\tthis.splitContent();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handles TinyMCE key up event.\n\t *\n\t * @param {number} keyCode The key code that has been pressed on the keyboard.\n\t */\n\tonKeyUp( { keyCode } ) {\n\t\t// The input event does not fire when the whole field is selected and\n\t\t// BACKSPACE is pressed.\n\t\tif ( keyCode === BACKSPACE ) {\n\t\t\tthis.onChange( this.createRecord(), true );\n\t\t}\n\n\t\t// `scrollToRect` is called on `nodechange`, whereas calling it on\n\t\t// `keyup` *when* moving to a new RichText element results in incorrect\n\t\t// scrolling. Though the following allows false positives, it results\n\t\t// in much smoother scrolling.\n\t\tif ( this.props.isViewportSmall && keyCode !== BACKSPACE && keyCode !== ENTER ) {\n\t\t\tthis.scrollToRect( getRectangleFromRange( this.editor.selection.getRng() ) );\n\t\t}\n\t}\n\n\tscrollToRect( rect ) {\n\t\tconst { top: caretTop } = rect;\n\t\tconst container = getScrollContainer( this.editableRef );\n\n\t\tif ( ! container ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// When scrolling, avoid positioning the caret at the very top of\n\t\t// the viewport, providing some \"air\" and some textual context for\n\t\t// the user, and avoiding toolbars.\n\t\tconst graceOffset = 100;\n\n\t\t// Avoid pointless scrolling by establishing a threshold under\n\t\t// which scrolling should be skipped;\n\t\tconst epsilon = 10;\n\t\tconst delta = caretTop - graceOffset;\n\n\t\tif ( Math.abs( delta ) > epsilon ) {\n\t\t\tcontainer.scrollTo(\n\t\t\t\tcontainer.scrollLeft,\n\t\t\t\tcontainer.scrollTop + delta,\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Splits the content at the location of the selection.\n\t *\n\t * Replaces the content of the editor inside this element with the contents\n\t * before the selection. Sends the elements after the selection to the `onSplit`\n\t * handler.\n\t *\n\t * @param {Array}  blocks  The blocks to add after the split point.\n\t * @param {Object} context The context for splitting.\n\t */\n\tsplitContent( blocks = [], context = {} ) {\n\t\tconst { onSplit } = this.props;\n\t\tconst record = this.createRecord();\n\n\t\tif ( ! onSplit ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet [ before, after ] = split( record );\n\n\t\t// In case split occurs at the trailing or leading edge of the field,\n\t\t// assume that the before/after values respectively reflect the current\n\t\t// value. This also provides an opportunity for the parent component to\n\t\t// determine whether the before/after value has changed using a trivial\n\t\t//  strict equality operation.\n\t\tif ( isEmpty( after ) ) {\n\t\t\tbefore = record;\n\t\t} else if ( isEmpty( before ) ) {\n\t\t\tafter = record;\n\t\t}\n\n\t\t// If pasting and the split would result in no content other than the\n\t\t// pasted blocks, remove the before and after blocks.\n\t\tif ( context.paste ) {\n\t\t\tbefore = isEmpty( before ) ? null : before;\n\t\t\tafter = isEmpty( after ) ? null : after;\n\t\t}\n\n\t\tif ( before ) {\n\t\t\tbefore = this.valueToFormat( before );\n\t\t}\n\n\t\tif ( after ) {\n\t\t\tafter = this.valueToFormat( after );\n\t\t}\n\n\t\tonSplit( before, after, ...blocks );\n\t}\n\n\tonNodeChange( { parents } ) {\n\t\tif ( ! this.isActive() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.props.isViewportSmall ) {\n\t\t\tlet rect;\n\t\t\tconst selectedAnchor = find( parents, ( node ) => node.tagName === 'A' );\n\t\t\tif ( selectedAnchor ) {\n\t\t\t\t// If we selected a link, position the Link UI below the link\n\t\t\t\trect = selectedAnchor.getBoundingClientRect();\n\t\t\t} else {\n\t\t\t\t// Otherwise, position the Link UI below the cursor or text selection\n\t\t\t\trect = getRectangleFromRange( this.editor.selection.getRng() );\n\t\t\t}\n\n\t\t\t// Originally called on `focusin`, that hook turned out to be\n\t\t\t// premature. On `nodechange` we can work with the finalized TinyMCE\n\t\t\t// instance and scroll to proper position.\n\t\t\tthis.scrollToRect( rect );\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { tagName, value } = this.props;\n\n\t\tif (\n\t\t\ttagName === prevProps.tagName &&\n\t\t\tvalue !== prevProps.value &&\n\t\t\tvalue !== this.savedContent\n\t\t) {\n\t\t\t// Handle deprecated `children` and `node` sources.\n\t\t\t// The old way of passing a value with the `node` matcher required\n\t\t\t// the value to be mapped first, creating a new array each time, so\n\t\t\t// a shallow check wouldn't work. We need to check deep equality.\n\t\t\t// This is only executed for a deprecated API and will eventually be\n\t\t\t// removed.\n\t\t\tif ( Array.isArray( value ) && isEqual( value, this.savedContent ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst record = this.formatToValue( value );\n\n\t\t\tif ( this.isActive() ) {\n\t\t\t\tconst prevRecord = this.formatToValue( prevProps.value );\n\t\t\t\tconst length = getTextContent( prevRecord ).length;\n\t\t\t\trecord.start = length;\n\t\t\t\trecord.end = length;\n\t\t\t}\n\n\t\t\tthis.applyRecord( record );\n\t\t\tthis.savedContent = value;\n\t\t}\n\t}\n\n\tformatToValue( value ) {\n\t\t// Handle deprecated `children` and `node` sources.\n\t\tif ( Array.isArray( value ) ) {\n\t\t\treturn create( {\n\t\t\t\thtml: children.toHTML( value ),\n\t\t\t\tmultilineTag: this.multilineTag,\n\t\t\t} );\n\t\t}\n\n\t\tif ( this.props.format === 'string' ) {\n\t\t\treturn create( {\n\t\t\t\thtml: value,\n\t\t\t\tmultilineTag: this.multilineTag,\n\t\t\t} );\n\t\t}\n\n\t\t// Guard for blocks passing `null` in onSplit callbacks. May be removed\n\t\t// if onSplit is revised to not pass a `null` value.\n\t\tif ( value === null ) {\n\t\t\treturn create();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tvalueToFormat( { formats, text } ) {\n\t\t// Handle deprecated `children` and `node` sources.\n\t\tif ( this.usedDeprecatedChildrenSource ) {\n\t\t\treturn children.fromDOM( unstableToDom( { formats, text }, this.multilineTag ).body.childNodes );\n\t\t}\n\n\t\tif ( this.props.format === 'string' ) {\n\t\t\treturn toHTMLString( { formats, text }, this.multilineTag );\n\t\t}\n\n\t\treturn { formats, text };\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\ttagName: Tagname = 'div',\n\t\t\tstyle,\n\t\t\tvalue,\n\t\t\twrapperClassName,\n\t\t\tclassName,\n\t\t\tinlineToolbar = false,\n\t\t\tformattingControls,\n\t\t\tplaceholder,\n\t\t\tkeepPlaceholderOnFocus = false,\n\t\t\tisSelected,\n\t\t\tautocompleters,\n\t\t} = this.props;\n\n\t\tconst MultilineTag = this.multilineTag;\n\t\tconst ariaProps = pickAriaProps( this.props );\n\n\t\t// Generating a key that includes `tagName` ensures that if the tag\n\t\t// changes, we unmount and destroy the previous TinyMCE element, then\n\t\t// mount and initialize a new child element in its place.\n\t\tconst key = [ 'editor', Tagname ].join();\n\t\tconst isPlaceholderVisible = placeholder && ( ! isSelected || keepPlaceholderOnFocus ) && this.isEmpty();\n\t\tconst classes = classnames( wrapperClassName, 'editor-rich-text' );\n\t\tconst record = this.getRecord();\n\n\t\tconst formatToolbar = this.editor && (\n\t\t\t<FormatToolbar\n\t\t\t\trecord={ record }\n\t\t\t\tonChange={ this.onChange }\n\t\t\t\tenabledControls={ formattingControls }\n\t\t\t\teditor={ this.editor }\n\t\t\t/>\n\t\t);\n\n\t\treturn (\n\t\t\t<div className={ classes }\n\t\t\t\tref={ this.containerRef }\n\t\t\t\tonFocus={ this.setFocusedElement }\n\t\t\t>\n\t\t\t\t{ isSelected && ! inlineToolbar && (\n\t\t\t\t\t<BlockFormatControls>\n\t\t\t\t\t\t{ formatToolbar }\n\t\t\t\t\t</BlockFormatControls>\n\t\t\t\t) }\n\t\t\t\t{ isSelected && inlineToolbar && (\n\t\t\t\t\t<div className=\"editor-rich-text__inline-toolbar\">\n\t\t\t\t\t\t{ formatToolbar }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t\t{ isSelected &&\n\t\t\t\t\t<TokenUI\n\t\t\t\t\t\teditor={ this.editor }\n\t\t\t\t\t\tcontainerRef={ this.containerRef }\n\t\t\t\t\t/>\n\t\t\t\t}\n\n\t\t\t\t<Autocomplete\n\t\t\t\t\tonReplace={ this.props.onReplace }\n\t\t\t\t\tcompleters={ autocompleters }\n\t\t\t\t\trecord={ record }\n\t\t\t\t\tonChange={ this.onChange }\n\t\t\t\t>\n\t\t\t\t\t{ ( { isExpanded, listBoxId, activeId } ) => (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TinyMCE\n\t\t\t\t\t\t\t\ttagName={ Tagname }\n\t\t\t\t\t\t\t\tgetSettings={ this.getSettings }\n\t\t\t\t\t\t\t\tonSetup={ this.onSetup }\n\t\t\t\t\t\t\t\tstyle={ style }\n\t\t\t\t\t\t\t\tdefaultValue={ value }\n\t\t\t\t\t\t\t\tisPlaceholderVisible={ isPlaceholderVisible }\n\t\t\t\t\t\t\t\taria-label={ placeholder }\n\t\t\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\t\t\taria-expanded={ isExpanded }\n\t\t\t\t\t\t\t\taria-owns={ listBoxId }\n\t\t\t\t\t\t\t\taria-activedescendant={ activeId }\n\t\t\t\t\t\t\t\t{ ...ariaProps }\n\t\t\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\t\t\tonPaste={ this.onPaste }\n\t\t\t\t\t\t\t\tonInput={ this.onInput }\n\t\t\t\t\t\t\t\tmultilineTag={ this.multilineTag }\n\t\t\t\t\t\t\t\tsetRef={ this.setRef }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ isPlaceholderVisible &&\n\t\t\t\t\t\t\t\t<Tagname\n\t\t\t\t\t\t\t\t\tclassName={ classnames( 'editor-rich-text__tinymce', className ) }\n\t\t\t\t\t\t\t\t\tstyle={ style }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ MultilineTag ? <MultilineTag>{ placeholder }</MultilineTag> : placeholder }\n\t\t\t\t\t\t\t\t</Tagname>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{ isSelected && <Slot name=\"RichText.Siblings\" /> }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) }\n\t\t\t\t</Autocomplete>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nRichText.defaultProps = {\n\tformattingControls: FORMATTING_CONTROLS.map( ( { format } ) => format ),\n\tformat: 'string',\n\tvalue: '',\n};\n\nconst RichTextContainer = compose( [\n\twithInstanceId,\n\twithBlockEditContext( ( context, ownProps ) => {\n\t\t// When explicitly set as not selected, do nothing.\n\t\tif ( ownProps.isSelected === false ) {\n\t\t\treturn {};\n\t\t}\n\t\t// When explicitly set as selected, use the value stored in the context instead.\n\t\tif ( ownProps.isSelected === true ) {\n\t\t\treturn {\n\t\t\t\tisSelected: context.isSelected,\n\t\t\t};\n\t\t}\n\n\t\t// Ensures that only one RichText component can be focused.\n\t\treturn {\n\t\t\tisSelected: context.isSelected && context.focusedElement === ownProps.instanceId,\n\t\t\tsetFocusedElement: context.setFocusedElement,\n\t\t};\n\t} ),\n\twithSelect( ( select ) => {\n\t\tconst { isViewportMatch = identity } = select( 'core/viewport' ) || {};\n\t\tconst { canUserUseUnfilteredHTML } = select( 'core/editor' );\n\n\t\treturn {\n\t\t\tisViewportSmall: isViewportMatch( '< small' ),\n\t\t\tcanUserUseUnfilteredHTML: canUserUseUnfilteredHTML(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst {\n\t\t\tcreateUndoLevel,\n\t\t\tredo,\n\t\t\tundo,\n\t\t} = dispatch( 'core/editor' );\n\n\t\treturn {\n\t\t\tonCreateUndoLevel: createUndoLevel,\n\t\t\tonRedo: redo,\n\t\t\tonUndo: undo,\n\t\t};\n\t} ),\n\twithSafeTimeout,\n] )( RichText );\n\nRichTextContainer.Content = ( { value, tagName: Tag, multiline, ...props } ) => {\n\tlet html = value;\n\tlet MultilineTag;\n\n\tif ( multiline === true || multiline === 'p' || multiline === 'li' ) {\n\t\tMultilineTag = multiline === true ? 'p' : multiline;\n\t}\n\n\t// Handle deprecated `children` and `node` sources.\n\tif ( Array.isArray( value ) ) {\n\t\thtml = children.toHTML( value );\n\t}\n\n\tif ( ! html && MultilineTag ) {\n\t\thtml = `<${ MultilineTag }></${ MultilineTag }>`;\n\t}\n\n\tconst content = <RawHTML>{ html }</RawHTML>;\n\n\tif ( Tag ) {\n\t\treturn <Tag { ...omit( props, [ 'format' ] ) }>{ content }</Tag>;\n\t}\n\n\treturn content;\n};\n\nRichTextContainer.isEmpty = ( value = '' ) => {\n\t// Handle deprecated `children` and `node` sources.\n\tif ( Array.isArray( value ) ) {\n\t\treturn ! value || value.length === 0;\n\t}\n\n\treturn value.length === 0;\n};\n\nRichTextContainer.Content.defaultProps = {\n\tformat: 'string',\n\tvalue: '',\n};\n\nexport default RichTextContainer;\n","/**\n * External dependencies\n */\nimport { filter } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { getBlockTransforms, findTransform } from '@wordpress/blocks';\nimport { remove, applyFormat, getTextContent } from '@wordpress/rich-text';\n\nexport function getPatterns( { onReplace, multiline, valueToFormat } ) {\n\tconst patterns = filter( getBlockTransforms( 'from' ), ( { type, trigger } ) => {\n\t\treturn type === 'pattern' && trigger === undefined;\n\t} );\n\n\treturn [\n\t\t( record ) => {\n\t\t\tif ( ! onReplace ) {\n\t\t\t\treturn record;\n\t\t\t}\n\n\t\t\tconst text = getTextContent( record );\n\t\t\tconst transformation = findTransform( patterns, ( item ) => {\n\t\t\t\treturn item.regExp.test( text );\n\t\t\t} );\n\n\t\t\tif ( ! transformation ) {\n\t\t\t\treturn record;\n\t\t\t}\n\n\t\t\tconst result = text.match( transformation.regExp );\n\n\t\t\tconst block = transformation.transform( {\n\t\t\t\tcontent: valueToFormat( remove( record, 0, result[ 0 ].length ) ),\n\t\t\t\tmatch: result,\n\t\t\t} );\n\n\t\t\tonReplace( [ block ] );\n\n\t\t\treturn record;\n\t\t},\n\t\t( record ) => {\n\t\t\tif ( multiline ) {\n\t\t\t\treturn record;\n\t\t\t}\n\n\t\t\tconst text = getTextContent( record );\n\n\t\t\t// Quick check the text for the necessary character.\n\t\t\tif ( text.indexOf( '`' ) === -1 ) {\n\t\t\t\treturn record;\n\t\t\t}\n\n\t\t\tconst match = text.match( /`([^`]+)`/ );\n\n\t\t\tif ( ! match ) {\n\t\t\t\treturn record;\n\t\t\t}\n\n\t\t\tconst start = match.index;\n\t\t\tconst end = start + match[ 1 ].length;\n\n\t\t\trecord = remove( record, start, start + 1 );\n\t\t\trecord = remove( record, end, end + 1 );\n\t\t\trecord = applyFormat( record, { type: 'code' }, start, end );\n\n\t\t\treturn record;\n\t\t},\n\t];\n}\n","/**\n * External dependencies\n */\nimport tinymce from 'tinymce';\nimport { isEqual } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Component, createElement } from '@wordpress/element';\nimport { BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { toHTMLString } from '@wordpress/rich-text';\nimport { children } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { diffAriaProps, pickAriaProps } from './aria';\n\n/**\n * Determines whether we need a fix to provide `input` events for contenteditable.\n *\n * @param {Element} editorNode The root editor node.\n *\n * @return {boolean} A boolean indicating whether the fix is needed.\n */\nfunction needsInternetExplorerInputFix( editorNode ) {\n\treturn (\n\t\t// Rely on userAgent in the absence of a reasonable feature test for contenteditable `input` events.\n\t\t/Trident/.test( window.navigator.userAgent ) &&\n\t\t// IE11 dispatches input events for `<input>` and `<textarea>`.\n\t\t! /input/i.test( editorNode.tagName ) &&\n\t\t! /textarea/i.test( editorNode.tagName )\n\t);\n}\n\n/**\n * Applies a fix that provides `input` events for contenteditable in Internet Explorer.\n *\n * @param {Element} editorNode The root editor node.\n *\n * @return {Function} A function to remove the fix (for cleanup).\n */\nfunction applyInternetExplorerInputFix( editorNode ) {\n\t/**\n\t * Dispatches `input` events in response to `textinput` events.\n\t *\n\t * IE provides a `textinput` event that is similar to an `input` event,\n\t * and we use it to manually dispatch an `input` event.\n\t * `textinput` is dispatched for text entry but for not deletions.\n\t *\n\t * @param {Event} textInputEvent An Internet Explorer `textinput` event.\n\t */\n\tfunction mapTextInputEvent( textInputEvent ) {\n\t\ttextInputEvent.stopImmediatePropagation();\n\n\t\tconst inputEvent = document.createEvent( 'Event' );\n\t\tinputEvent.initEvent( 'input', true, false );\n\t\tinputEvent.data = textInputEvent.data;\n\t\ttextInputEvent.target.dispatchEvent( inputEvent );\n\t}\n\n\t/**\n\t * Dispatches `input` events in response to Delete and Backspace keyup.\n\t *\n\t * It would be better dispatch an `input` event after each deleting\n\t * `keydown` because the DOM is updated after each, but it is challenging\n\t * to determine the right time to dispatch `input` since propagation of\n\t * `keydown` can be stopped at any point.\n\t *\n\t * It's easier to listen for `keyup` in the capture phase and dispatch\n\t * `input` before `keyup` propagates further. It's not perfect, but should\n\t * be good enough.\n\t *\n\t * @param {KeyboardEvent} keyUp\n\t * @param {Node}          keyUp.target  The event target.\n\t * @param {number}        keyUp.keyCode The key code.\n\t */\n\tfunction mapDeletionKeyUpEvents( { target, keyCode } ) {\n\t\tconst isDeletion = BACKSPACE === keyCode || DELETE === keyCode;\n\n\t\tif ( isDeletion && editorNode.contains( target ) ) {\n\t\t\tconst inputEvent = document.createEvent( 'Event' );\n\t\t\tinputEvent.initEvent( 'input', true, false );\n\t\t\tinputEvent.data = null;\n\t\t\ttarget.dispatchEvent( inputEvent );\n\t\t}\n\t}\n\n\teditorNode.addEventListener( 'textinput', mapTextInputEvent );\n\tdocument.addEventListener( 'keyup', mapDeletionKeyUpEvents, true );\n\treturn function removeInternetExplorerInputFix() {\n\t\teditorNode.removeEventListener( 'textinput', mapTextInputEvent );\n\t\tdocument.removeEventListener( 'keyup', mapDeletionKeyUpEvents, true );\n\t};\n}\n\nconst IS_PLACEHOLDER_VISIBLE_ATTR_NAME = 'data-is-placeholder-visible';\nexport default class TinyMCE extends Component {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.bindEditorNode = this.bindEditorNode.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.initialize();\n\t}\n\n\tshouldComponentUpdate() {\n\t\t// We must prevent rerenders because TinyMCE will modify the DOM, thus\n\t\t// breaking React's ability to reconcile changes.\n\t\t//\n\t\t// See: https://github.com/facebook/react/issues/6802\n\t\treturn false;\n\t}\n\n\tcomponentWillReceiveProps( nextProps ) {\n\t\tthis.configureIsPlaceholderVisible( nextProps.isPlaceholderVisible );\n\n\t\tif ( ! isEqual( this.props.style, nextProps.style ) ) {\n\t\t\tthis.editorNode.setAttribute( 'style', '' );\n\t\t\tObject.assign( this.editorNode.style, nextProps.style );\n\t\t}\n\n\t\tif ( ! isEqual( this.props.className, nextProps.className ) ) {\n\t\t\tthis.editorNode.className = classnames( nextProps.className, 'editor-rich-text__tinymce' );\n\t\t}\n\n\t\tconst { removedKeys, updatedKeys } = diffAriaProps( this.props, nextProps );\n\t\tremovedKeys.forEach( ( key ) =>\n\t\t\tthis.editorNode.removeAttribute( key ) );\n\t\tupdatedKeys.forEach( ( key ) =>\n\t\t\tthis.editorNode.setAttribute( key, nextProps[ key ] ) );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tif ( ! this.editor ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.editor.destroy();\n\t\tdelete this.editor;\n\t}\n\n\tconfigureIsPlaceholderVisible( isPlaceholderVisible ) {\n\t\tconst isPlaceholderVisibleString = String( !! isPlaceholderVisible );\n\t\tif ( this.editorNode.getAttribute( IS_PLACEHOLDER_VISIBLE_ATTR_NAME ) !== isPlaceholderVisibleString ) {\n\t\t\tthis.editorNode.setAttribute( IS_PLACEHOLDER_VISIBLE_ATTR_NAME, isPlaceholderVisibleString );\n\t\t}\n\t}\n\n\tinitialize() {\n\t\tconst settings = this.props.getSettings( {\n\t\t\ttheme: false,\n\t\t\tinline: true,\n\t\t\ttoolbar: false,\n\t\t\tbrowser_spellcheck: true,\n\t\t\tentity_encoding: 'raw',\n\t\t\tconvert_urls: false,\n\t\t\tinline_boundaries_selector: 'a[href],code,b,i,strong,em,del,ins,sup,sub',\n\t\t\tplugins: [],\n\t\t} );\n\n\t\ttinymce.init( {\n\t\t\t...settings,\n\t\t\ttarget: this.editorNode,\n\t\t\tsetup: ( editor ) => {\n\t\t\t\tthis.editor = editor;\n\t\t\t\tthis.props.onSetup( editor );\n\t\t\t},\n\t\t} );\n\t}\n\n\tbindEditorNode( editorNode ) {\n\t\tthis.editorNode = editorNode;\n\n\t\tif ( this.props.setRef ) {\n\t\t\tthis.props.setRef( editorNode );\n\t\t}\n\n\t\t/**\n\t\t * A ref function can be used for cleanup because React calls it with\n\t\t * `null` when unmounting.\n\t\t */\n\t\tif ( this.removeInternetExplorerInputFix ) {\n\t\t\tthis.removeInternetExplorerInputFix();\n\t\t\tthis.removeInternetExplorerInputFix = null;\n\t\t}\n\n\t\tif ( editorNode && needsInternetExplorerInputFix( editorNode ) ) {\n\t\t\tthis.removeInternetExplorerInputFix = applyInternetExplorerInputFix( editorNode );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst ariaProps = pickAriaProps( this.props );\n\t\tconst {\n\t\t\ttagName = 'div',\n\t\t\tstyle,\n\t\t\tdefaultValue,\n\t\t\tclassName,\n\t\t\tisPlaceholderVisible,\n\t\t\tonPaste,\n\t\t\tonInput,\n\t\t\tmultilineTag,\n\t\t} = this.props;\n\n\t\t/*\n\t\t * The role=textbox and aria-multiline=true must always be used together\n\t\t * as TinyMCE always behaves like a sort of textarea where text wraps in\n\t\t * multiple lines. Only the table block editable element is excluded.\n\t\t */\n\t\tif ( tagName !== 'table' ) {\n\t\t\tariaProps.role = 'textbox';\n\t\t\tariaProps[ 'aria-multiline' ] = true;\n\t\t}\n\n\t\t// If a default value is provided, render it into the DOM even before\n\t\t// TinyMCE finishes initializing. This avoids a short delay by allowing\n\t\t// us to show and focus the content before it's truly ready to edit.\n\t\tlet initialHTML = defaultValue;\n\n\t\t// Guard for blocks passing `null` in onSplit callbacks. May be removed\n\t\t// if onSplit is revised to not pass a `null` value.\n\t\tif ( defaultValue === null ) {\n\t\t\tinitialHTML = '';\n\t\t// Handle deprecated `children` and `node` sources.\n\t\t} else if ( Array.isArray( defaultValue ) ) {\n\t\t\tinitialHTML = children.toHTML( defaultValue );\n\t\t} else if ( typeof defaultValue !== 'string' ) {\n\t\t\tinitialHTML = toHTMLString( defaultValue, multilineTag );\n\t\t}\n\n\t\treturn createElement( tagName, {\n\t\t\t...ariaProps,\n\t\t\tclassName: classnames( className, 'editor-rich-text__tinymce' ),\n\t\t\tcontentEditable: true,\n\t\t\t[ IS_PLACEHOLDER_VISIBLE_ATTR_NAME ]: isPlaceholderVisible,\n\t\t\tref: this.bindEditorNode,\n\t\t\tstyle,\n\t\t\tsuppressContentEditableWarning: true,\n\t\t\tdangerouslySetInnerHTML: { __html: initialHTML },\n\t\t\tonPaste,\n\t\t\tonInput,\n\t\t} );\n\t}\n}\n","/**\n * External dependencies\n */\nimport { has, isFunction } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { isValidIcon, normalizeIconObject } from '@wordpress/blocks';\nimport { applyFilters } from '@wordpress/hooks';\n\n/**\n * Browser dependencies\n */\nconst { error } = window.console;\n\n/**\n * Validates the token settings object.\n *\n * @param {string} name     Token name.\n * @param {Object} settings Token settings.\n * @param {Object} state    core/editor state.\n *\n * @return {Object} Validated token settings.\n */\nexport function validateTokenSettings( name, settings, state ) {\n\tif ( typeof name !== 'string' ) {\n\t\terror(\n\t\t\t'Token names must be strings.'\n\t\t);\n\t\treturn;\n\t}\n\n\tif ( ! /^[a-z][a-z0-9-]*\\/[a-z][a-z0-9-]*$/.test( name ) ) {\n\t\terror(\n\t\t\t'Token names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-token'\n\t\t);\n\t\treturn;\n\t}\n\n\tif ( has( state, [ name ] ) ) {\n\t\terror(\n\t\t\t'Token \"' + name + '\" is already registered.'\n\t\t);\n\t\treturn;\n\t}\n\n\tsettings = applyFilters( 'editor.registerToken', settings, name );\n\n\tif ( ! settings || ! isFunction( settings.save ) ) {\n\t\terror(\n\t\t\t'The \"save\" property must be specified and must be a valid function.'\n\t\t);\n\t\treturn;\n\t}\n\n\tif ( has( settings, [ 'edit' ] ) && ! isFunction( settings.edit ) ) {\n\t\terror(\n\t\t\t'The \"edit\" property must be a valid function.'\n\t\t);\n\t\treturn;\n\t}\n\n\tif ( has( settings, [ 'keywords' ] ) && settings.keywords.length > 3 ) {\n\t\terror(\n\t\t\t'The token \"' + name + '\" can have a maximum of 3 keywords.'\n\t\t);\n\t\treturn;\n\t}\n\n\tif ( ! has( settings, [ 'title' ] ) || settings.title === '' ) {\n\t\terror(\n\t\t\t'The token \"' + name + '\" must have a title.'\n\t\t);\n\t\treturn;\n\t}\n\n\tif ( typeof settings.title !== 'string' ) {\n\t\terror(\n\t\t\t'Token titles must be strings.'\n\t\t);\n\t\treturn;\n\t}\n\n\tsettings.icon = normalizeIconObject( settings.icon );\n\n\tif ( ! isValidIcon( settings.icon.src ) ) {\n\t\terror(\n\t\t\t'The icon passed is invalid. ' +\n\t\t\t'The icon should be a string, an element, a function, or an object following the specifications documented in https://wordpress.org/gutenberg/handbook/block-api/#icon-optional'\n\t\t);\n\t\treturn;\n\t}\n\n\treturn settings;\n}\n","/**\n * WordPress dependencies\n */\nimport { Component, Fragment, renderToString } from '@wordpress/element';\nimport { getRectangleFromRange } from '@wordpress/dom';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { InserterResultsPortal } from '../../../inserter';\n\nclass TokenUI extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onHover = this.onHover.bind( this );\n\t\tthis.onSelect = this.onSelect.bind( this );\n\t\tthis.onSave = this.onSave.bind( this );\n\n\t\tthis.state = {\n\t\t\tselected: null,\n\t\t\thovered: null,\n\t\t};\n\t}\n\n\tgetInsertPosition() {\n\t\tconst { containerRef, editor } = this.props;\n\n\t\t// The container is relatively positioned.\n\t\tconst containerPosition = containerRef.current.getBoundingClientRect();\n\t\tconst rect = getRectangleFromRange( editor.selection.getRng() );\n\n\t\treturn {\n\t\t\ttop: rect.top - containerPosition.top,\n\t\t\tleft: rect.right - containerPosition.left,\n\t\t\theight: rect.height,\n\t\t};\n\t}\n\n\tonSave( { save } ) {\n\t\treturn ( attributes ) => {\n\t\t\tconst { editor } = this.props;\n\n\t\t\tif ( attributes ) {\n\t\t\t\teditor.insertContent( renderToString( save( attributes ) ) );\n\t\t\t}\n\n\t\t\tthis.setState( { selected: null } );\n\t\t};\n\t}\n\n\tonHover( settings ) {\n\t\tthis.setState( { hovered: !! settings } );\n\t}\n\n\tonSelect( settings ) {\n\t\tthis.setState( { selected: settings } );\n\t}\n\n\trender() {\n\t\tconst { hovered, selected } = this.state;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<InserterResultsPortal\n\t\t\t\t\ttitle={ __( 'Inline Elements' ) }\n\t\t\t\t\titems={ this.props.items }\n\t\t\t\t\tonSelect={ this.onSelect }\n\t\t\t\t\tonHover={ this.onHover }\n\t\t\t\t\tinitialOpen={ false }\n\t\t\t\t/>\n\t\t\t\t{ hovered &&\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={ { position: 'absolute', ...this.getInsertPosition() } }\n\t\t\t\t\t\tclassName=\"blocks-inline-insertion-point\"\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\t{ selected &&\n\t\t\t\t\t<selected.edit onSave={ this.onSave( selected ) } />\n\t\t\t\t}\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getTokenSettings } = select( 'core/editor' );\n\n\treturn {\n\t\titems: Object.values( getTokenSettings() ),\n\t};\n} )( TokenUI );\n","/**\n * WordPress dependencies.\n */\nimport { ServerSideRender } from '@wordpress/components';\nimport { select } from '@wordpress/data';\n\nexport default function( { urlQueryArgs = {}, ...props } ) {\n\tconst { getCurrentPostId } = select( 'core/editor' );\n\n\turlQueryArgs = {\n\t\tpost_id: getCurrentPostId(),\n\t\t...urlQueryArgs,\n\t};\n\n\treturn (\n\t\t<ServerSideRender urlQueryArgs={ urlQueryArgs } { ...props } />\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\n\n/**\n * Internal Dependencies\n */\nimport { getBlockFocusableWrapper } from '../../utils/dom';\n\nconst SkipToSelectedBlock = ( { selectedBlockClientId } ) => {\n\tconst onClick = () => {\n\t\tconst selectedBlockElement = getBlockFocusableWrapper( selectedBlockClientId );\n\t\tselectedBlockElement.focus();\n\t};\n\n\treturn (\n\t\tselectedBlockClientId &&\n\t\t<Button isDefault type=\"button\" className=\"editor-skip-to-selected-block\" onClick={ onClick }>\n\t\t\t{ __( 'Skip to the selected block' ) }\n\t\t</Button>\n\t);\n};\n\nexport default withSelect( ( select ) => {\n\treturn {\n\t\tselectedBlockClientId: select( 'core/editor' ).getBlockSelectionStart(),\n\t};\n} )( SkipToSelectedBlock );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Dropdown, IconButton } from '@wordpress/components';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport TableOfContentsPanel from './panel';\n\nfunction TableOfContents( { hasBlocks } ) {\n\treturn (\n\t\t<Dropdown\n\t\t\tposition=\"bottom\"\n\t\t\tclassName=\"table-of-contents\"\n\t\t\tcontentClassName=\"table-of-contents__popover\"\n\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t<IconButton\n\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\ticon=\"info-outline\"\n\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\tlabel={ __( 'Content structure' ) }\n\t\t\t\t\tdisabled={ ! hasBlocks }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\trenderContent={ () => <TableOfContentsPanel /> }\n\t\t/>\n\t);\n}\n\nexport default withSelect( ( select ) => {\n\treturn {\n\t\thasBlocks: !! select( 'core/editor' ).getBlockCount(),\n\t};\n} )( TableOfContents );\n","/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport WordCount from '../word-count';\nimport DocumentOutline from '../document-outline';\n\nfunction TableOfContentsPanel( { headingCount, paragraphCount, numberOfBlocks } ) {\n\treturn (\n\t\t<Fragment>\n\t\t\t<div\n\t\t\t\tclassName=\"table-of-contents__counts\"\n\t\t\t\trole=\"note\"\n\t\t\t\taria-label={ __( 'Document Statistics' ) }\n\t\t\t\ttabIndex=\"0\"\n\t\t\t>\n\t\t\t\t<div className=\"table-of-contents__count\">\n\t\t\t\t\t{ __( 'Words' ) }\n\t\t\t\t\t<WordCount />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"table-of-contents__count\">\n\t\t\t\t\t{ __( 'Headings' ) }\n\t\t\t\t\t<span className=\"table-of-contents__number\">\n\t\t\t\t\t\t{ headingCount }\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"table-of-contents__count\">\n\t\t\t\t\t{ __( 'Paragraphs' ) }\n\t\t\t\t\t<span className=\"table-of-contents__number\">\n\t\t\t\t\t\t{ paragraphCount }\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"table-of-contents__count\">\n\t\t\t\t\t{ __( 'Blocks' ) }\n\t\t\t\t\t<span className=\"table-of-contents__number\">\n\t\t\t\t\t\t{ numberOfBlocks }\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{ headingCount > 0 && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<hr />\n\t\t\t\t\t<span className=\"table-of-contents__title\">\n\t\t\t\t\t\t{ __( 'Document Outline' ) }\n\t\t\t\t\t</span>\n\t\t\t\t\t<DocumentOutline />\n\t\t\t\t</Fragment>\n\t\t\t) }\n\t\t</Fragment>\n\t);\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getGlobalBlockCount } = select( 'core/editor' );\n\treturn {\n\t\theadingCount: getGlobalBlockCount( 'core/heading' ),\n\t\tparagraphCount: getGlobalBlockCount( 'core/paragraph' ),\n\t\tnumberOfBlocks: getGlobalBlockCount(),\n\t};\n} )( TableOfContentsPanel );\n","/**\n * WordPress dependencies\n */\nimport { Notice, Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\nfunction TemplateValidationNotice( { isValid, ...props } ) {\n\tif ( isValid ) {\n\t\treturn null;\n\t}\n\n\tconst confirmSynchronization = () => {\n\t\t// eslint-disable-next-line no-alert\n\t\tif ( window.confirm( __( 'Resetting the template may result in loss of content, do you want to continue?' ) ) ) {\n\t\t\tprops.synchronizeTemplate();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Notice className=\"editor-template-validation-notice\" isDismissible={ false } status=\"warning\">\n\t\t\t<p>{ __( 'The content of your post doesnt match the template assigned to your post type.' ) }</p>\n\t\t\t<div>\n\t\t\t\t<Button isDefault onClick={ props.resetTemplateValidity }>{ __( 'Keep it as is' ) }</Button>\n\t\t\t\t<Button onClick={ confirmSynchronization } isPrimary>{ __( 'Reset the template' ) }</Button>\n\t\t\t</div>\n\t\t</Notice>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select ) => ( {\n\t\tisValid: select( 'core/editor' ).isValidTemplate(),\n\t} ) ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { setTemplateValidity, synchronizeTemplate } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tresetTemplateValidity: () => setTemplateValidity( true ),\n\t\t\tsynchronizeTemplate,\n\t\t};\n\t} ),\n] )( TemplateValidationNotice );\n","/**\n * External dependencies\n */\nimport {\n\tcastArray,\n\tincludes,\n\tisArray,\n\tget,\n\tsome,\n} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\n\nexport function ThemeSupportCheck( { themeSupports, children, postType, supportKeys } ) {\n\tconst isSupported = some(\n\t\tcastArray( supportKeys ), ( key ) => {\n\t\t\tconst supported = get( themeSupports, [ key ], false );\n\t\t\t// 'post-thumbnails' can be boolean or an array of post types.\n\t\t\t// In the latter case, we need to verify `postType` exists\n\t\t\t// within `supported`. If `postType` isn't passed, then the check\n\t\t\t// should fail.\n\t\t\tif ( 'post-thumbnails' === key && isArray( supported ) ) {\n\t\t\t\treturn includes( supported, postType );\n\t\t\t}\n\t\t\treturn supported;\n\t\t}\n\t);\n\n\tif ( ! isSupported ) {\n\t\treturn null;\n\t}\n\n\treturn children;\n}\n\nexport default withSelect( ( select ) => {\n\tconst { getThemeSupports } = select( 'core' );\n\tconst { getEditedPostAttribute } = select( 'core/editor' );\n\treturn {\n\t\tpostType: getEditedPostAttribute( 'type' ),\n\t\tthemeSupports: getThemeSupports(),\n\t};\n} )( ThemeSupportCheck );\n","/**\n * External dependencies\n */\nimport { stubFalse } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { withSelect } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\nclass UnsavedChangesWarning extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.warnIfUnsavedChanges = this.warnIfUnsavedChanges.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener( 'beforeunload', this.warnIfUnsavedChanges );\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener( 'beforeunload', this.warnIfUnsavedChanges );\n\t}\n\n\t/**\n\t * Warns the user if there are unsaved changes before leaving the editor.\n\t *\n\t * @param {Event} event `beforeunload` event.\n\t *\n\t * @return {?string} Warning prompt message, if unsaved changes exist.\n\t */\n\twarnIfUnsavedChanges( event ) {\n\t\tconst { isDirty, forceIsDirty = stubFalse } = this.props;\n\n\t\t// For deprecation, infer explicitly provided if not assigned to\n\t\t// fallback value.\n\t\tif ( forceIsDirty !== stubFalse ) {\n\t\t\tdeprecated( 'UnsavedChangesWarning forceIsDirty prop', {\n\t\t\t\tplugin: 'Gutenberg',\n\t\t\t\tversion: '4.2',\n\t\t\t} );\n\t\t}\n\n\t\tif ( isDirty || forceIsDirty() ) {\n\t\t\tevent.returnValue = __( 'You have unsaved changes. If you proceed, they will be lost.' );\n\t\t\treturn event.returnValue;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default withSelect( ( select ) => ( {\n\tisDirty: select( 'core/editor' ).isEditedPostDirty(),\n} ) )( UnsavedChangesWarning );\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { IconButton } from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport URLInput from './';\n\nclass URLInputButton extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.toggle = this.toggle.bind( this );\n\t\tthis.submitLink = this.submitLink.bind( this );\n\t\tthis.state = {\n\t\t\texpanded: false,\n\t\t};\n\t}\n\n\ttoggle() {\n\t\tthis.setState( { expanded: ! this.state.expanded } );\n\t}\n\n\tsubmitLink( event ) {\n\t\tevent.preventDefault();\n\t\tthis.toggle();\n\t}\n\n\trender() {\n\t\tconst { url, onChange } = this.props;\n\t\tconst { expanded } = this.state;\n\t\tconst buttonLabel = url ? __( 'Edit Link' ) : __( 'Insert Link' );\n\n\t\treturn (\n\t\t\t<div className=\"editor-url-input__button\">\n\t\t\t\t<IconButton\n\t\t\t\t\ticon=\"admin-links\"\n\t\t\t\t\tlabel={ buttonLabel }\n\t\t\t\t\tonClick={ this.toggle }\n\t\t\t\t\tclassName={ classnames( 'components-toolbar__control', {\n\t\t\t\t\t\t'is-active': url,\n\t\t\t\t\t} ) }\n\t\t\t\t/>\n\t\t\t\t{ expanded &&\n\t\t\t\t\t<form\n\t\t\t\t\t\tclassName=\"editor-url-input__button-modal\"\n\t\t\t\t\t\tonSubmit={ this.submitLink }\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"editor-url-input__button-modal-line\">\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName=\"editor-url-input__back\"\n\t\t\t\t\t\t\t\ticon=\"arrow-left-alt\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Close' ) }\n\t\t\t\t\t\t\t\tonClick={ this.toggle }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<URLInput value={ url || '' } onChange={ onChange } />\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\ticon=\"editor-break\"\n\t\t\t\t\t\t\t\tlabel={ __( 'Submit' ) }\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default URLInputButton;\n","/**\n * External dependencies\n */\nimport { throttle } from 'lodash';\nimport classnames from 'classnames';\nimport scrollIntoView from 'dom-scroll-into-view';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { Component, Fragment, createRef } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { UP, DOWN, ENTER } from '@wordpress/keycodes';\nimport { Spinner, withSpokenMessages, Popover } from '@wordpress/components';\nimport { withInstanceId } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { addQueryArgs } from '@wordpress/url';\n\n// Since URLInput is rendered in the context of other inputs, but should be\n// considered a separate modal node, prevent keyboard events from propagating\n// as being considered from the input.\nconst stopEventPropagation = ( event ) => event.stopPropagation();\n\nclass URLInput extends Component {\n\tconstructor( { autocompleteRef } ) {\n\t\tsuper( ...arguments );\n\n\t\tthis.onChange = this.onChange.bind( this );\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.autocompleteRef = autocompleteRef || createRef();\n\t\tthis.updateSuggestions = throttle( this.updateSuggestions.bind( this ), 200 );\n\n\t\tthis.suggestionNodes = [];\n\n\t\tthis.state = {\n\t\t\tposts: [],\n\t\t\tshowSuggestions: false,\n\t\t\tselectedSuggestion: null,\n\t\t};\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst { showSuggestions, selectedSuggestion } = this.state;\n\t\t// only have to worry about scrolling selected suggestion into view\n\t\t// when already expanded\n\t\tif ( showSuggestions && selectedSuggestion !== null && ! this.scrollingIntoView ) {\n\t\t\tthis.scrollingIntoView = true;\n\t\t\tscrollIntoView( this.suggestionNodes[ selectedSuggestion ], this.autocompleteRef.current, {\n\t\t\t\tonlyScrollIfNeeded: true,\n\t\t\t} );\n\n\t\t\tsetTimeout( () => {\n\t\t\t\tthis.scrollingIntoView = false;\n\t\t\t}, 100 );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdelete this.suggestionsRequest;\n\t}\n\n\tbindSuggestionNode( index ) {\n\t\treturn ( ref ) => {\n\t\t\tthis.suggestionNodes[ index ] = ref;\n\t\t};\n\t}\n\n\tupdateSuggestions( value ) {\n\t\t// Show the suggestions after typing at least 2 characters\n\t\t// and also for URLs\n\t\tif ( value.length < 2 || /^https?:/.test( value ) ) {\n\t\t\tthis.setState( {\n\t\t\t\tshowSuggestions: false,\n\t\t\t\tselectedSuggestion: null,\n\t\t\t\tloading: false,\n\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tshowSuggestions: true,\n\t\t\tselectedSuggestion: null,\n\t\t\tloading: true,\n\t\t} );\n\n\t\tconst request = apiFetch( {\n\t\t\tpath: addQueryArgs( '/wp/v2/search', {\n\t\t\t\tsearch: value,\n\t\t\t\tper_page: 20,\n\t\t\t\ttype: 'post',\n\t\t\t} ),\n\t\t} );\n\n\t\trequest.then( ( posts ) => {\n\t\t\t// A fetch Promise doesn't have an abort option. It's mimicked by\n\t\t\t// comparing the request reference in on the instance, which is\n\t\t\t// reset or deleted on subsequent requests or unmounting.\n\t\t\tif ( this.suggestionsRequest !== request ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setState( {\n\t\t\t\tposts,\n\t\t\t\tloading: false,\n\t\t\t} );\n\n\t\t\tif ( !! posts.length ) {\n\t\t\t\tthis.props.debouncedSpeak( sprintf( _n(\n\t\t\t\t\t'%d result found, use up and down arrow keys to navigate.',\n\t\t\t\t\t'%d results found, use up and down arrow keys to navigate.',\n\t\t\t\t\tposts.length\n\t\t\t\t), posts.length ), 'assertive' );\n\t\t\t} else {\n\t\t\t\tthis.props.debouncedSpeak( __( 'No results.' ), 'assertive' );\n\t\t\t}\n\t\t} ).catch( () => {\n\t\t\tif ( this.suggestionsRequest === request ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tloading: false,\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\tthis.suggestionsRequest = request;\n\t}\n\n\tonChange( event ) {\n\t\tconst inputValue = event.target.value;\n\t\tthis.props.onChange( inputValue );\n\t\tthis.updateSuggestions( inputValue );\n\t}\n\n\tonKeyDown( event ) {\n\t\tconst { showSuggestions, selectedSuggestion, posts, loading } = this.state;\n\t\t// If the suggestions are not shown or loading, we shouldn't handle the arrow keys\n\t\t// We shouldn't preventDefault to allow block arrow keys navigation\n\t\tif ( ! showSuggestions || ! posts.length || loading ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase UP: {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst previousIndex = ! selectedSuggestion ? posts.length - 1 : selectedSuggestion - 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: previousIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase DOWN: {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tevent.preventDefault();\n\t\t\t\tconst nextIndex = selectedSuggestion === null || ( selectedSuggestion === posts.length - 1 ) ? 0 : selectedSuggestion + 1;\n\t\t\t\tthis.setState( {\n\t\t\t\t\tselectedSuggestion: nextIndex,\n\t\t\t\t} );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ENTER: {\n\t\t\t\tif ( this.state.selectedSuggestion !== null ) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tconst post = this.state.posts[ this.state.selectedSuggestion ];\n\t\t\t\t\tthis.selectLink( post );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tselectLink( post ) {\n\t\tthis.props.onChange( post.url, post );\n\t\tthis.setState( {\n\t\t\tselectedSuggestion: null,\n\t\t\tshowSuggestions: false,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst { value = '', autoFocus = true, instanceId } = this.props;\n\t\tconst { showSuggestions, posts, selectedSuggestion, loading } = this.state;\n\t\t/* eslint-disable jsx-a11y/no-autofocus */\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"editor-url-input\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tautoFocus={ autoFocus }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\taria-label={ __( 'URL' ) }\n\t\t\t\t\t\trequired\n\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\tonChange={ this.onChange }\n\t\t\t\t\t\tonInput={ stopEventPropagation }\n\t\t\t\t\t\tplaceholder={ __( 'Paste URL or type to search' ) }\n\t\t\t\t\t\tonKeyDown={ this.onKeyDown }\n\t\t\t\t\t\trole=\"combobox\"\n\t\t\t\t\t\taria-expanded={ showSuggestions }\n\t\t\t\t\t\taria-autocomplete=\"list\"\n\t\t\t\t\t\taria-owns={ `editor-url-input-suggestions-${ instanceId }` }\n\t\t\t\t\t\taria-activedescendant={ selectedSuggestion !== null ? `editor-url-input-suggestion-${ instanceId }-${ selectedSuggestion }` : undefined }\n\t\t\t\t\t/>\n\n\t\t\t\t\t{ ( loading ) && <Spinner /> }\n\t\t\t\t</div>\n\n\t\t\t\t{ showSuggestions && !! posts.length &&\n\t\t\t\t\t<Popover position=\"bottom\" noArrow focusOnMount={ false }>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"editor-url-input__suggestions\"\n\t\t\t\t\t\t\tid={ `editor-url-input-suggestions-${ instanceId }` }\n\t\t\t\t\t\t\tref={ this.autocompleteRef }\n\t\t\t\t\t\t\trole=\"listbox\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ posts.map( ( post, index ) => (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tkey={ post.id }\n\t\t\t\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\t\t\t\ttabIndex=\"-1\"\n\t\t\t\t\t\t\t\t\tid={ `editor-url-input-suggestion-${ instanceId }-${ index }` }\n\t\t\t\t\t\t\t\t\tref={ this.bindSuggestionNode( index ) }\n\t\t\t\t\t\t\t\t\tclassName={ classnames( 'editor-url-input__suggestion', {\n\t\t\t\t\t\t\t\t\t\t'is-selected': index === selectedSuggestion,\n\t\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t\t\tonClick={ () => this.selectLink( post ) }\n\t\t\t\t\t\t\t\t\taria-selected={ index === selectedSuggestion }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ decodeEntities( post.title ) || __( '(no title)' ) }\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Popover>\n\t\t\t\t}\n\t\t\t</Fragment>\n\t\t);\n\t\t/* eslint-enable jsx-a11y/no-autofocus */\n\t}\n}\n\nexport default withSpokenMessages( withInstanceId( URLInput ) );\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport {\n\tPopover,\n\tIconButton,\n} from '@wordpress/components';\n\nclass URLPopover extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.toggleSettingsVisibility = this.toggleSettingsVisibility.bind( this );\n\n\t\tthis.state = {\n\t\t\tisSettingsExpanded: false,\n\t\t};\n\t}\n\n\ttoggleSettingsVisibility() {\n\t\tthis.setState( {\n\t\t\tisSettingsExpanded: ! this.state.isSettingsExpanded,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tchildren,\n\t\t\trenderSettings,\n\t\t\tonClose,\n\t\t\tonClickOutside,\n\t\t\tposition = 'bottom center',\n\t\t\tfocusOnMount = 'firstElement',\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\tisSettingsExpanded,\n\t\t} = this.state;\n\n\t\tconst showSettings = !! renderSettings && isSettingsExpanded;\n\n\t\treturn (\n\t\t\t<Popover\n\t\t\t\tclassName=\"editor-url-popover\"\n\t\t\t\tfocusOnMount={ focusOnMount }\n\t\t\t\tposition={ position }\n\t\t\t\tonClose={ onClose }\n\t\t\t\tonClickOutside={ onClickOutside }\n\t\t\t>\n\t\t\t\t<div className=\"editor-url-popover__row\">\n\t\t\t\t\t{ children }\n\t\t\t\t\t{ !! renderSettings && (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName=\"editor-url-popover__settings-toggle\"\n\t\t\t\t\t\t\ticon=\"ellipsis\"\n\t\t\t\t\t\t\tlabel={ __( 'Link Settings' ) }\n\t\t\t\t\t\t\tonClick={ this.toggleSettingsVisibility }\n\t\t\t\t\t\t\taria-expanded={ isSettingsExpanded }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ showSettings && (\n\t\t\t\t\t<div className=\"editor-url-popover__row editor-url-popover__settings\">\n\t\t\t\t\t\t{ renderSettings() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Popover>\n\t\t);\n\t}\n}\n\nexport default URLPopover;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Children } from '@wordpress/element';\nimport { Dropdown, IconButton, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\nfunction Warning( { className, actions, children, secondaryActions } ) {\n\treturn (\n\t\t<div className={ classnames( className, 'editor-warning' ) }>\n\t\t\t<div className=\"editor-warning__contents\">\n\t\t\t\t<p className=\"editor-warning__message\">{ children }</p>\n\n\t\t\t\t{ Children.count( actions ) > 0 && (\n\t\t\t\t\t<div className=\"editor-warning__actions\">\n\t\t\t\t\t\t{ Children.map( actions, ( action, i ) => (\n\t\t\t\t\t\t\t<span key={ i } className=\"editor-warning__action\">\n\t\t\t\t\t\t\t\t{ action }\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t) ) }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t{ secondaryActions && (\n\t\t\t\t<Dropdown\n\t\t\t\t\tclassName=\"editor-warning__secondary\"\n\t\t\t\t\tposition=\"bottom left\"\n\t\t\t\t\trenderToggle={ ( { isOpen, onToggle } ) => (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\ticon=\"ellipsis\"\n\t\t\t\t\t\t\tlabel={ __( 'More options' ) }\n\t\t\t\t\t\t\tonClick={ onToggle }\n\t\t\t\t\t\t\taria-expanded={ isOpen }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<MenuGroup label={ __( 'More options' ) }>\n\t\t\t\t\t\t\t{ secondaryActions.map( ( item, pos ) =>\n\t\t\t\t\t\t\t\t<MenuItem onClick={ item.onClick } key={ pos }>\n\t\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default Warning;\n","/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { count as wordCount } from '@wordpress/wordcount';\n\nfunction WordCount( { content } ) {\n\treturn (\n\t\t<span className=\"word-count\">{ wordCount( content, 'words' ) }</span>\n\t);\n}\n\nexport default withSelect( ( select ) => {\n\treturn {\n\t\tcontent: select( 'core/editor' ).getEditedPostAttribute( 'content' ),\n\t};\n} )( WordCount );\n","/**\n * External dependencies\n */\nimport { overEvery, find, findLast, reverse, first, last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Component } from '@wordpress/element';\nimport {\n\tcomputeCaretRect,\n\tfocus,\n\tisHorizontalEdge,\n\tisTextField,\n\tisVerticalEdge,\n\tplaceCaretAtHorizontalEdge,\n\tplaceCaretAtVerticalEdge,\n\tisEntirelySelected,\n} from '@wordpress/dom';\nimport { UP, DOWN, LEFT, RIGHT, isKeyboardEvent } from '@wordpress/keycodes';\nimport { withSelect, withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport {\n\tisBlockFocusStop,\n\tisInSameBlock,\n\thasInnerBlocksContext,\n} from '../../utils/dom';\n\n/**\n * Browser constants\n */\n\nconst { getSelection } = window;\n\n/**\n * Given an element, returns true if the element is a tabbable text field, or\n * false otherwise.\n *\n * @param {Element} element Element to test.\n *\n * @return {boolean} Whether element is a tabbable text field.\n */\nconst isTabbableTextField = overEvery( [\n\tisTextField,\n\tfocus.tabbable.isTabbableIndex,\n] );\n\n/**\n * Returns true if the element should consider edge navigation upon a keyboard\n * event of the given directional key code, or false otherwise.\n *\n * @param {Element} element     HTML element to test.\n * @param {number}  keyCode     KeyboardEvent keyCode to test.\n * @param {boolean} hasModifier Whether a modifier is pressed.\n *\n * @return {boolean} Whether element should consider edge navigation.\n */\nexport function isNavigationCandidate( element, keyCode, hasModifier ) {\n\tconst isVertical = ( keyCode === UP || keyCode === DOWN );\n\n\t// Currently, all elements support unmodified vertical navigation.\n\tif ( isVertical && ! hasModifier ) {\n\t\treturn true;\n\t}\n\n\t// Native inputs should not navigate horizontally.\n\tconst { tagName } = element;\n\treturn tagName !== 'INPUT' && tagName !== 'TEXTAREA';\n}\n\nclass WritingFlow extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.onKeyDown = this.onKeyDown.bind( this );\n\t\tthis.bindContainer = this.bindContainer.bind( this );\n\t\tthis.clearVerticalRect = this.clearVerticalRect.bind( this );\n\t\tthis.focusLastTextField = this.focusLastTextField.bind( this );\n\n\t\t/**\n\t\t * Here a rectangle is stored while moving the caret vertically so\n\t\t * vertical position of the start position can be restored.\n\t\t * This is to recreate browser behaviour across blocks.\n\t\t *\n\t\t * @type {?DOMRect}\n\t\t */\n\t\tthis.verticalRect = null;\n\t}\n\n\tbindContainer( ref ) {\n\t\tthis.container = ref;\n\t}\n\n\tclearVerticalRect() {\n\t\tthis.verticalRect = null;\n\t}\n\n\t/**\n\t * Returns the optimal tab target from the given focused element in the\n\t * desired direction. A preference is made toward text fields, falling back\n\t * to the block focus stop if no other candidates exist for the block.\n\t *\n\t * @param {Element} target    Currently focused text field.\n\t * @param {boolean} isReverse True if considering as the first field.\n\t *\n\t * @return {?Element} Optimal tab target, if one exists.\n\t */\n\tgetClosestTabbable( target, isReverse ) {\n\t\t// Since the current focus target is not guaranteed to be a text field,\n\t\t// find all focusables. Tabbability is considered later.\n\t\tlet focusableNodes = focus.focusable.find( this.container );\n\n\t\tif ( isReverse ) {\n\t\t\tfocusableNodes = reverse( focusableNodes );\n\t\t}\n\n\t\t// Consider as candidates those focusables after the current target.\n\t\t// It's assumed this can only be reached if the target is focusable\n\t\t// (on its keydown event), so no need to verify it exists in the set.\n\t\tfocusableNodes = focusableNodes.slice( focusableNodes.indexOf( target ) + 1 );\n\n\t\tfunction isTabCandidate( node, i, array ) {\n\t\t\t// Not a candidate if the node is not tabbable.\n\t\t\tif ( ! focus.tabbable.isTabbableIndex( node ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Prefer text fields...\n\t\t\tif ( isTextField( node ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// ...but settle for block focus stop.\n\t\t\tif ( ! isBlockFocusStop( node ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// If element contains inner blocks, stop immediately at its focus\n\t\t\t// wrapper.\n\t\t\tif ( hasInnerBlocksContext( node ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// If navigating out of a block (in reverse), don't consider its\n\t\t\t// block focus stop.\n\t\t\tif ( node.contains( target ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// In case of block focus stop, check to see if there's a better\n\t\t\t// text field candidate within.\n\t\t\tfor ( let offset = 1, nextNode; ( nextNode = array[ i + offset ] ); offset++ ) {\n\t\t\t\t// Abort if no longer testing descendents of focus stop.\n\t\t\t\tif ( ! node.contains( nextNode ) ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Apply same tests by recursion. This is important to consider\n\t\t\t\t// nestable blocks where we don't want to settle for the inner\n\t\t\t\t// block focus stop.\n\t\t\t\tif ( isTabCandidate( nextNode, i + offset, array ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn find( focusableNodes, isTabCandidate );\n\t}\n\n\texpandSelection( isReverse ) {\n\t\tconst {\n\t\t\tselectedBlockClientId,\n\t\t\tselectionStartClientId,\n\t\t\tselectionBeforeEndClientId,\n\t\t\tselectionAfterEndClientId,\n\t\t} = this.props;\n\n\t\tconst nextSelectionEndClientId = isReverse ?\n\t\t\tselectionBeforeEndClientId :\n\t\t\tselectionAfterEndClientId;\n\n\t\tif ( nextSelectionEndClientId ) {\n\t\t\tthis.props.onMultiSelect(\n\t\t\t\tselectionStartClientId || selectedBlockClientId,\n\t\t\t\tnextSelectionEndClientId\n\t\t\t);\n\t\t}\n\t}\n\n\tmoveSelection( isReverse ) {\n\t\tconst { selectedFirstClientId, selectedLastClientId } = this.props;\n\n\t\tconst focusedBlockClientId = isReverse ? selectedFirstClientId : selectedLastClientId;\n\n\t\tif ( focusedBlockClientId ) {\n\t\t\tthis.props.onSelectBlock( focusedBlockClientId );\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if the given target field is the last in its block which\n\t * can be considered for tab transition. For example, in a block with two\n\t * text fields, this would return true when reversing from the first of the\n\t * two fields, but false when reversing from the second.\n\t *\n\t * @param {Element} target    Currently focused text field.\n\t * @param {boolean} isReverse True if considering as the first field.\n\t *\n\t * @return {boolean} Whether field is at edge for tab transition.\n\t */\n\tisTabbableEdge( target, isReverse ) {\n\t\tconst closestTabbable = this.getClosestTabbable( target, isReverse );\n\t\treturn ! closestTabbable || ! isInSameBlock( target, closestTabbable );\n\t}\n\n\tonKeyDown( event ) {\n\t\tconst { hasMultiSelection, onMultiSelect, blocks } = this.props;\n\n\t\tconst { keyCode, target } = event;\n\t\tconst isUp = keyCode === UP;\n\t\tconst isDown = keyCode === DOWN;\n\t\tconst isLeft = keyCode === LEFT;\n\t\tconst isRight = keyCode === RIGHT;\n\t\tconst isReverse = isUp || isLeft;\n\t\tconst isHorizontal = isLeft || isRight;\n\t\tconst isVertical = isUp || isDown;\n\t\tconst isNav = isHorizontal || isVertical;\n\t\tconst isShift = event.shiftKey;\n\t\tconst hasModifier = isShift || event.ctrlKey || event.altKey || event.metaKey;\n\t\tconst isNavEdge = isVertical ? isVerticalEdge : isHorizontalEdge;\n\n\t\t// This logic inside this condition needs to be checked before\n\t\t// the check for event.nativeEvent.defaultPrevented.\n\t\t// The logic handles meta+a keypress and this event is default prevented by TinyMCE.\n\t\tif ( ! isNav ) {\n\t\t\t// Set immediately before the meta+a combination can be pressed.\n\t\t\tif ( isKeyboardEvent.primary( event ) ) {\n\t\t\t\tthis.isEntirelySelected = isEntirelySelected( target );\n\t\t\t}\n\n\t\t\tif ( isKeyboardEvent.primary( event, 'a' ) ) {\n\t\t\t\t// When the target is contentEditable, selection will already\n\t\t\t\t// have been set by TinyMCE earlier in this call stack. We need\n\t\t\t\t// check the previous result, otherwise all blocks will be\n\t\t\t\t// selected right away.\n\t\t\t\tif ( target.isContentEditable ? this.isEntirelySelected : isEntirelySelected( target ) ) {\n\t\t\t\t\tonMultiSelect( first( blocks ), last( blocks ) );\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\n\t\t\t\t// Set in case the meta key doesn't get released.\n\t\t\t\tthis.isEntirelySelected = isEntirelySelected( target );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Abort if navigation has already been handled (e.g. TinyMCE inline\n\t\t// boundaries).\n\t\tif ( event.nativeEvent.defaultPrevented ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Abort if our current target is not a candidate for navigation (e.g.\n\t\t// preserve native input behaviors).\n\t\tif ( ! isNavigationCandidate( target, keyCode, hasModifier ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! isVertical ) {\n\t\t\tthis.verticalRect = null;\n\t\t} else if ( ! this.verticalRect ) {\n\t\t\tthis.verticalRect = computeCaretRect( target );\n\t\t}\n\n\t\tif ( isShift && ( hasMultiSelection || (\n\t\t\tthis.isTabbableEdge( target, isReverse ) &&\n\t\t\tisNavEdge( target, isReverse )\n\t\t) ) ) {\n\t\t\t// Shift key is down, and there is multi selection or we're at the end of the current block.\n\t\t\tthis.expandSelection( isReverse );\n\t\t\tevent.preventDefault();\n\t\t} else if ( hasMultiSelection ) {\n\t\t\t// Moving from block multi-selection to single block selection\n\t\t\tthis.moveSelection( isReverse );\n\t\t\tevent.preventDefault();\n\t\t} else if ( isVertical && isVerticalEdge( target, isReverse ) ) {\n\t\t\tconst closestTabbable = this.getClosestTabbable( target, isReverse );\n\n\t\t\tif ( closestTabbable ) {\n\t\t\t\tplaceCaretAtVerticalEdge( closestTabbable, isReverse, this.verticalRect );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t} else if ( isHorizontal && getSelection().isCollapsed && isHorizontalEdge( target, isReverse ) ) {\n\t\t\tconst closestTabbable = this.getClosestTabbable( target, isReverse );\n\t\t\tplaceCaretAtHorizontalEdge( closestTabbable, isReverse );\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t/**\n\t * Sets focus to the end of the last tabbable text field, if one exists.\n\t */\n\tfocusLastTextField() {\n\t\tconst focusableNodes = focus.focusable.find( this.container );\n\t\tconst target = findLast( focusableNodes, isTabbableTextField );\n\t\tif ( target ) {\n\t\t\tplaceCaretAtHorizontalEdge( target, true );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { children } = this.props;\n\n\t\t// Disable reason: Wrapper itself is non-interactive, but must capture\n\t\t// bubbling events from children to determine focus transition intents.\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\t\treturn (\n\t\t\t<div className=\"editor-writing-flow\">\n\t\t\t\t<div\n\t\t\t\t\tref={ this.bindContainer }\n\t\t\t\t\tonKeyDown={ this.onKeyDown }\n\t\t\t\t\tonMouseDown={ this.clearVerticalRect }\n\t\t\t\t>\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\taria-hidden\n\t\t\t\t\ttabIndex={ -1 }\n\t\t\t\t\tonClick={ this.focusLastTextField }\n\t\t\t\t\tclassName=\"editor-writing-flow__click-redirect\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t\t/* eslint-disable jsx-a11y/no-static-element-interactions */\n\t}\n}\n\nexport default compose( [\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetMultiSelectedBlocksStartClientId,\n\t\t\tgetMultiSelectedBlocksEndClientId,\n\t\t\tgetPreviousBlockClientId,\n\t\t\tgetNextBlockClientId,\n\t\t\tgetFirstMultiSelectedBlockClientId,\n\t\t\tgetLastMultiSelectedBlockClientId,\n\t\t\thasMultiSelection,\n\t\t\tgetBlockOrder,\n\t\t} = select( 'core/editor' );\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst selectionStartClientId = getMultiSelectedBlocksStartClientId();\n\t\tconst selectionEndClientId = getMultiSelectedBlocksEndClientId();\n\n\t\treturn {\n\t\t\tselectedBlockClientId,\n\t\t\tselectionStartClientId,\n\t\t\tselectionBeforeEndClientId: getPreviousBlockClientId( selectionEndClientId || selectedBlockClientId ),\n\t\t\tselectionAfterEndClientId: getNextBlockClientId( selectionEndClientId || selectedBlockClientId ),\n\t\t\tselectedFirstClientId: getFirstMultiSelectedBlockClientId(),\n\t\t\tselectedLastClientId: getLastMultiSelectedBlockClientId(),\n\t\t\thasMultiSelection: hasMultiSelection(),\n\t\t\tblocks: getBlockOrder(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { multiSelect, selectBlock } = dispatch( 'core/editor' );\n\t\treturn {\n\t\t\tonMultiSelect: multiSelect,\n\t\t\tonSelectBlock: selectBlock,\n\t\t};\n\t} ),\n] )( WritingFlow );\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\nexport { default as parse } from './parse';\nexport { default as stringify } from './stringify';\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n// http://www.w3.org/TR/CSS21/grammar.htm\n// https://github.com/visionmedia/css-parse/pull/49#issuecomment-30088027\nconst commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\n\nexport default function( css, options ) {\n\toptions = options || {};\n\n\t/**\n   * Positional.\n   */\n\n\tlet lineno = 1;\n\tlet column = 1;\n\n\t/**\n   * Update lineno and column based on `str`.\n   */\n\n\tfunction updatePosition( str ) {\n\t\tconst lines = str.match( /\\n/g );\n\t\tif ( lines ) {\n\t\t\tlineno += lines.length;\n\t\t}\n\t\tconst i = str.lastIndexOf( '\\n' );\n\t\t// eslint-disable-next-line no-bitwise\n\t\tcolumn = ~i ? str.length - i : column + str.length;\n\t}\n\n\t/**\n   * Mark position and patch `node.position`.\n   */\n\n\tfunction position() {\n\t\tconst start = { line: lineno, column: column };\n\t\treturn function( node ) {\n\t\t\tnode.position = new Position( start );\n\t\t\twhitespace();\n\t\t\treturn node;\n\t\t};\n\t}\n\n\t/**\n   * Store position information for a node\n   */\n\n\tfunction Position( start ) {\n\t\tthis.start = start;\n\t\tthis.end = { line: lineno, column: column };\n\t\tthis.source = options.source;\n\t}\n\n\t/**\n   * Non-enumerable source string\n   */\n\n\tPosition.prototype.content = css;\n\n\t/**\n   * Error `msg`.\n   */\n\n\tconst errorsList = [];\n\n\tfunction error( msg ) {\n\t\tconst err = new Error( options.source + ':' + lineno + ':' + column + ': ' + msg );\n\t\terr.reason = msg;\n\t\terr.filename = options.source;\n\t\terr.line = lineno;\n\t\terr.column = column;\n\t\terr.source = css;\n\n\t\tif ( options.silent ) {\n\t\t\terrorsList.push( err );\n\t\t} else {\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/**\n   * Parse stylesheet.\n   */\n\n\tfunction stylesheet() {\n\t\tconst rulesList = rules();\n\n\t\treturn {\n\t\t\ttype: 'stylesheet',\n\t\t\tstylesheet: {\n\t\t\t\tsource: options.source,\n\t\t\t\trules: rulesList,\n\t\t\t\tparsingErrors: errorsList,\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n   * Opening brace.\n   */\n\n\tfunction open() {\n\t\treturn match( /^{\\s*/ );\n\t}\n\n\t/**\n   * Closing brace.\n   */\n\n\tfunction close() {\n\t\treturn match( /^}/ );\n\t}\n\n\t/**\n   * Parse ruleset.\n   */\n\n\tfunction rules() {\n\t\tlet node;\n\t\tconst accumulator = [];\n\t\twhitespace();\n\t\tcomments( accumulator );\n\t\twhile ( css.length && css.charAt( 0 ) !== '}' && ( node = atrule() || rule() ) ) {\n\t\t\tif ( node !== false ) {\n\t\t\t\taccumulator.push( node );\n\t\t\t\tcomments( accumulator );\n\t\t\t}\n\t\t}\n\t\treturn accumulator;\n\t}\n\n\t/**\n   * Match `re` and return captures.\n   */\n\n\tfunction match( re ) {\n\t\tconst m = re.exec( css );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst str = m[ 0 ];\n\t\tupdatePosition( str );\n\t\tcss = css.slice( str.length );\n\t\treturn m;\n\t}\n\n\t/**\n   * Parse whitespace.\n   */\n\n\tfunction whitespace() {\n\t\tmatch( /^\\s*/ );\n\t}\n\n\t/**\n   * Parse comments;\n   */\n\n\tfunction comments( accumulator ) {\n\t\tlet c;\n\t\taccumulator = accumulator || [];\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( c = comment() ) {\n\t\t\tif ( c !== false ) {\n\t\t\t\taccumulator.push( c );\n\t\t\t}\n\t\t}\n\t\treturn accumulator;\n\t}\n\n\t/**\n   * Parse comment.\n   */\n\n\tfunction comment() {\n\t\tconst pos = position();\n\t\tif ( '/' !== css.charAt( 0 ) || '*' !== css.charAt( 1 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet i = 2;\n\t\twhile ( '' !== css.charAt( i ) && ( '*' !== css.charAt( i ) || '/' !== css.charAt( i + 1 ) ) ) {\n\t\t\t++i;\n\t\t}\n\t\ti += 2;\n\n\t\tif ( '' === css.charAt( i - 1 ) ) {\n\t\t\treturn error( 'End of comment missing' );\n\t\t}\n\n\t\tconst str = css.slice( 2, i - 2 );\n\t\tcolumn += 2;\n\t\tupdatePosition( str );\n\t\tcss = css.slice( i );\n\t\tcolumn += 2;\n\n\t\treturn pos( {\n\t\t\ttype: 'comment',\n\t\t\tcomment: str,\n\t\t} );\n\t}\n\n\t/**\n   * Parse selector.\n   */\n\n\tfunction selector() {\n\t\tconst m = match( /^([^{]+)/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\t/* @fix Remove all comments from selectors\n     * http://ostermiller.org/findcomment.html */\n\t\treturn trim( m[ 0 ] )\n\t\t\t.replace( /\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '' )\n\t\t\t.replace( /\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function( matched ) {\n\t\t\t\treturn matched.replace( /,/g, '\\u200C' );\n\t\t\t} )\n\t\t\t.split( /\\s*(?![^(]*\\)),\\s*/ )\n\t\t\t.map( function( s ) {\n\t\t\t\treturn s.replace( /\\u200C/g, ',' );\n\t\t\t} );\n\t}\n\n\t/**\n   * Parse declaration.\n   */\n\n\tfunction declaration() {\n\t\tconst pos = position();\n\n\t\t// prop\n\t\tlet prop = match( /^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/ );\n\t\tif ( ! prop ) {\n\t\t\treturn;\n\t\t}\n\t\tprop = trim( prop[ 0 ] );\n\n\t\t// :\n\t\tif ( ! match( /^:\\s*/ ) ) {\n\t\t\treturn error( \"property missing ':'\" );\n\t\t}\n\n\t\t// val\n\t\tconst val = match( /^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/ );\n\n\t\tconst ret = pos( {\n\t\t\ttype: 'declaration',\n\t\t\tproperty: prop.replace( commentre, '' ),\n\t\t\tvalue: val ? trim( val[ 0 ] ).replace( commentre, '' ) : '',\n\t\t} );\n\n\t\t// ;\n\t\tmatch( /^[;\\s]*/ );\n\n\t\treturn ret;\n\t}\n\n\t/**\n   * Parse declarations.\n   */\n\n\tfunction declarations() {\n\t\tconst decls = [];\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"missing '{'\" );\n\t\t}\n\t\tcomments( decls );\n\n\t\t// declarations\n\t\tlet decl;\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( decl = declaration() ) {\n\t\t\tif ( decl !== false ) {\n\t\t\t\tdecls.push( decl );\n\t\t\t\tcomments( decls );\n\t\t\t}\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"missing '}'\" );\n\t\t}\n\t\treturn decls;\n\t}\n\n\t/**\n   * Parse keyframe.\n   */\n\n\tfunction keyframe() {\n\t\tlet m;\n\t\tconst vals = [];\n\t\tconst pos = position();\n\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( m = match( /^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/ ) ) {\n\t\t\tvals.push( m[ 1 ] );\n\t\t\tmatch( /^,\\s*/ );\n\t\t}\n\n\t\tif ( ! vals.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'keyframe',\n\t\t\tvalues: vals,\n\t\t\tdeclarations: declarations(),\n\t\t} );\n\t}\n\n\t/**\n   * Parse keyframes.\n   */\n\n\tfunction atkeyframes() {\n\t\tconst pos = position();\n\t\tlet m = match( /^@([-\\w]+)?keyframes\\s*/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst vendor = m[ 1 ];\n\n\t\t// identifier\n\t\tm = match( /^([-\\w]+)\\s*/ );\n\t\tif ( ! m ) {\n\t\t\treturn error( '@keyframes missing name' );\n\t\t}\n\t\tconst name = m[ 1 ];\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@keyframes missing '{'\" );\n\t\t}\n\n\t\tlet frame;\n\t\tlet frames = comments();\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( frame = keyframe() ) {\n\t\t\tframes.push( frame );\n\t\t\tframes = frames.concat( comments() );\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@keyframes missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'keyframes',\n\t\t\tname: name,\n\t\t\tvendor: vendor,\n\t\t\tkeyframes: frames,\n\t\t} );\n\t}\n\n\t/**\n   * Parse supports.\n   */\n\n\tfunction atsupports() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@supports *([^{]+)/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst supports = trim( m[ 1 ] );\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@supports missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@supports missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'supports',\n\t\t\tsupports: supports,\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n   * Parse host.\n   */\n\n\tfunction athost() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@host\\s*/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@host missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@host missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'host',\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n   * Parse media.\n   */\n\n\tfunction atmedia() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@media *([^{]+)/ );\n\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\t\tconst media = trim( m[ 1 ] );\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@media missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@media missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'media',\n\t\t\tmedia: media,\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n   * Parse custom-media.\n   */\n\n\tfunction atcustommedia() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'custom-media',\n\t\t\tname: trim( m[ 1 ] ),\n\t\t\tmedia: trim( m[ 2 ] ),\n\t\t} );\n\t}\n\n\t/**\n   * Parse paged media.\n   */\n\n\tfunction atpage() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@page */ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst sel = selector() || [];\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@page missing '{'\" );\n\t\t}\n\t\tlet decls = comments();\n\n\t\t// declarations\n\t\tlet decl;\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( decl = declaration() ) {\n\t\t\tdecls.push( decl );\n\t\t\tdecls = decls.concat( comments() );\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@page missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'page',\n\t\t\tselectors: sel,\n\t\t\tdeclarations: decls,\n\t\t} );\n\t}\n\n\t/**\n   * Parse document.\n   */\n\n\tfunction atdocument() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@([-\\w]+)?document *([^{]+)/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst vendor = trim( m[ 1 ] );\n\t\tconst doc = trim( m[ 2 ] );\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@document missing '{'\" );\n\t\t}\n\n\t\tconst style = comments().concat( rules() );\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@document missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'document',\n\t\t\tdocument: doc,\n\t\t\tvendor: vendor,\n\t\t\trules: style,\n\t\t} );\n\t}\n\n\t/**\n   * Parse font-face.\n   */\n\n\tfunction atfontface() {\n\t\tconst pos = position();\n\t\tconst m = match( /^@font-face\\s*/ );\n\t\tif ( ! m ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! open() ) {\n\t\t\treturn error( \"@font-face missing '{'\" );\n\t\t}\n\t\tlet decls = comments();\n\n\t\t// declarations\n\t\tlet decl;\n\t\t// eslint-disable-next-line no-cond-assign\n\t\twhile ( decl = declaration() ) {\n\t\t\tdecls.push( decl );\n\t\t\tdecls = decls.concat( comments() );\n\t\t}\n\n\t\tif ( ! close() ) {\n\t\t\treturn error( \"@font-face missing '}'\" );\n\t\t}\n\n\t\treturn pos( {\n\t\t\ttype: 'font-face',\n\t\t\tdeclarations: decls,\n\t\t} );\n\t}\n\n\t/**\n   * Parse import\n   */\n\n\tconst atimport = _compileAtrule( 'import' );\n\n\t/**\n   * Parse charset\n   */\n\n\tconst atcharset = _compileAtrule( 'charset' );\n\n\t/**\n   * Parse namespace\n   */\n\n\tconst atnamespace = _compileAtrule( 'namespace' );\n\n\t/**\n   * Parse non-block at-rules\n   */\n\n\tfunction _compileAtrule( name ) {\n\t\tconst re = new RegExp( '^@' + name + '\\\\s*([^;]+);' );\n\t\treturn function() {\n\t\t\tconst pos = position();\n\t\t\tconst m = match( re );\n\t\t\tif ( ! m ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst ret = { type: name };\n\t\t\tret[ name ] = m[ 1 ].trim();\n\t\t\treturn pos( ret );\n\t\t};\n\t}\n\n\t/**\n   * Parse at rule.\n   */\n\n\tfunction atrule() {\n\t\tif ( css[ 0 ] !== '@' ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn atkeyframes() ||\n      atmedia() ||\n      atcustommedia() ||\n      atsupports() ||\n      atimport() ||\n      atcharset() ||\n      atnamespace() ||\n      atdocument() ||\n      atpage() ||\n      athost() ||\n      atfontface();\n\t}\n\n\t/**\n   * Parse rule.\n   */\n\n\tfunction rule() {\n\t\tconst pos = position();\n\t\tconst sel = selector();\n\n\t\tif ( ! sel ) {\n\t\t\treturn error( 'selector missing' );\n\t\t}\n\t\tcomments();\n\n\t\treturn pos( {\n\t\t\ttype: 'rule',\n\t\t\tselectors: sel,\n\t\t\tdeclarations: declarations(),\n\t\t} );\n\t}\n\n\treturn addParent( stylesheet() );\n}\n\n/**\n * Trim `str`.\n */\n\nfunction trim( str ) {\n\treturn str ? str.replace( /^\\s+|\\s+$/g, '' ) : '';\n}\n\n/**\n * Adds non-enumerable parent node reference to each node.\n */\n\nfunction addParent( obj, parent ) {\n\tconst isNode = obj && typeof obj.type === 'string';\n\tconst childParent = isNode ? obj : parent;\n\n\tfor ( const k in obj ) {\n\t\tconst value = obj[ k ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\tvalue.forEach( function( v ) {\n\t\t\t\taddParent( v, childParent );\n\t\t\t} );\n\t\t} else if ( value && typeof value === 'object' ) {\n\t\t\taddParent( value, childParent );\n\t\t}\n\t}\n\n\tif ( isNode ) {\n\t\tObject.defineProperty( obj, 'parent', {\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tenumerable: false,\n\t\t\tvalue: parent || null,\n\t\t} );\n\t}\n\n\treturn obj;\n}\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * Expose `Compiler`.\n */\n\nexport default Compiler;\n\n/**\n * Initialize a compiler.\n *\n * @param {Type} name\n * @return {Type}\n * @api public\n */\n\nfunction Compiler( opts ) {\n\tthis.options = opts || {};\n}\n\n/**\n * Emit `str`\n */\n\nCompiler.prototype.emit = function( str ) {\n\treturn str;\n};\n\n/**\n * Visit `node`.\n */\n\nCompiler.prototype.visit = function( node ) {\n\treturn this[ node.type ]( node );\n};\n\n/**\n * Map visit over array of `nodes`, optionally using a `delim`\n */\n\nCompiler.prototype.mapVisit = function( nodes, delim ) {\n\tlet buf = '';\n\tdelim = delim || '';\n\n\tfor ( let i = 0, length = nodes.length; i < length; i++ ) {\n\t\tbuf += this.visit( nodes[ i ] );\n\t\tif ( delim && i < length - 1 ) {\n\t\t\tbuf += this.emit( delim );\n\t\t}\n\t}\n\n\treturn buf;\n};\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * External dependencies\n */\nimport inherits from 'inherits';\n\n/**\n * Internal dependencies\n */\nimport Base from './compiler';\n\n/**\n * Expose compiler.\n */\n\nexport default Compiler;\n\n/**\n * Initialize a new `Compiler`.\n */\n\nfunction Compiler( options ) {\n\tBase.call( this, options );\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\ninherits( Compiler, Base );\n\n/**\n * Compile `node`.\n */\n\nCompiler.prototype.compile = function( node ) {\n\treturn node.stylesheet\n\t\t.rules.map( this.visit, this )\n\t\t.join( '' );\n};\n\n/**\n * Visit comment node.\n */\n\nCompiler.prototype.comment = function( node ) {\n\treturn this.emit( '', node.position );\n};\n\n/**\n * Visit import node.\n */\n\nCompiler.prototype.import = function( node ) {\n\treturn this.emit( '@import ' + node.import + ';', node.position );\n};\n\n/**\n * Visit media node.\n */\n\nCompiler.prototype.media = function( node ) {\n\treturn this.emit( '@media ' + node.media, node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.rules ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit document node.\n */\n\nCompiler.prototype.document = function( node ) {\n\tconst doc = '@' + ( node.vendor || '' ) + 'document ' + node.document;\n\n\treturn this.emit( doc, node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.rules ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit charset node.\n */\n\nCompiler.prototype.charset = function( node ) {\n\treturn this.emit( '@charset ' + node.charset + ';', node.position );\n};\n\n/**\n * Visit namespace node.\n */\n\nCompiler.prototype.namespace = function( node ) {\n\treturn this.emit( '@namespace ' + node.namespace + ';', node.position );\n};\n\n/**\n * Visit supports node.\n */\n\nCompiler.prototype.supports = function( node ) {\n\treturn this.emit( '@supports ' + node.supports, node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.rules ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit keyframes node.\n */\n\nCompiler.prototype.keyframes = function( node ) {\n\treturn this.emit( '@' +\n    ( node.vendor || '' ) +\n    'keyframes ' +\n    node.name, node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.keyframes ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit keyframe node.\n */\n\nCompiler.prototype.keyframe = function( node ) {\n\tconst decls = node.declarations;\n\n\treturn this.emit( node.values.join( ',' ), node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( decls ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit page node.\n */\n\nCompiler.prototype.page = function( node ) {\n\tconst sel = node.selectors.length ?\n\t\tnode.selectors.join( ', ' ) :\n\t\t'';\n\n\treturn this.emit( '@page ' + sel, node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.declarations ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit font-face node.\n */\n\nCompiler.prototype[ 'font-face' ] = function( node ) {\n\treturn this.emit( '@font-face', node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.declarations ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit host node.\n */\n\nCompiler.prototype.host = function( node ) {\n\treturn this.emit( '@host', node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( node.rules ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit custom-media node.\n */\n\nCompiler.prototype[ 'custom-media' ] = function( node ) {\n\treturn this.emit( '@custom-media ' + node.name + ' ' + node.media + ';', node.position );\n};\n\n/**\n * Visit rule node.\n */\n\nCompiler.prototype.rule = function( node ) {\n\tconst decls = node.declarations;\n\tif ( ! decls.length ) {\n\t\treturn '';\n\t}\n\n\treturn this.emit( node.selectors.join( ',' ), node.position ) +\n    this.emit( '{' ) +\n    this.mapVisit( decls ) +\n    this.emit( '}' );\n};\n\n/**\n * Visit declaration node.\n */\n\nCompiler.prototype.declaration = function( node ) {\n\treturn this.emit( node.property + ':' + node.value, node.position ) + this.emit( ';' );\n};\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * External dependencies\n */\nimport inherits from 'inherits';\n\n/**\n * Internal dependencies\n */\nimport Base from './compiler';\n\n/**\n * Expose compiler.\n */\n\nexport default Compiler;\n\n/**\n * Initialize a new `Compiler`.\n */\n\nfunction Compiler( options ) {\n\toptions = options || {};\n\tBase.call( this, options );\n\tthis.indentation = options.indent;\n}\n\n/**\n * Inherit from `Base.prototype`.\n */\n\ninherits( Compiler, Base );\n\n/**\n * Compile `node`.\n */\n\nCompiler.prototype.compile = function( node ) {\n\treturn this.stylesheet( node );\n};\n\n/**\n * Visit stylesheet node.\n */\n\nCompiler.prototype.stylesheet = function( node ) {\n\treturn this.mapVisit( node.stylesheet.rules, '\\n\\n' );\n};\n\n/**\n * Visit comment node.\n */\n\nCompiler.prototype.comment = function( node ) {\n\treturn this.emit( this.indent() + '/*' + node.comment + '*/', node.position );\n};\n\n/**\n * Visit import node.\n */\n\nCompiler.prototype.import = function( node ) {\n\treturn this.emit( '@import ' + node.import + ';', node.position );\n};\n\n/**\n * Visit media node.\n */\n\nCompiler.prototype.media = function( node ) {\n\treturn (\n\t\tthis.emit( '@media ' + node.media, node.position ) +\n\t\tthis.emit(\n\t\t\t' {\\n' + this.indent( 1 )\n\t\t) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit(\n\t\t\tthis.indent( -1 ) +\n\t\t\t'\\n}'\n\t\t)\n\t);\n};\n\n/**\n * Visit document node.\n */\n\nCompiler.prototype.document = function( node ) {\n\tconst doc = '@' + ( node.vendor || '' ) + 'document ' + node.document;\n\n\treturn (\n\t\tthis.emit( doc, node.position ) +\n\t\tthis.emit(\n\t\t\t' ' +\n\t\t\t' {\\n' +\n\t\t\tthis.indent( 1 )\n\t\t) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit(\n\t\t\tthis.indent( -1 ) +\n\t\t\t'\\n}'\n\t\t)\n\t);\n};\n\n/**\n * Visit charset node.\n */\n\nCompiler.prototype.charset = function( node ) {\n\treturn this.emit( '@charset ' + node.charset + ';', node.position );\n};\n\n/**\n * Visit namespace node.\n */\n\nCompiler.prototype.namespace = function( node ) {\n\treturn this.emit( '@namespace ' + node.namespace + ';', node.position );\n};\n\n/**\n * Visit supports node.\n */\n\nCompiler.prototype.supports = function( node ) {\n\treturn (\n\t\tthis.emit( '@supports ' + node.supports, node.position ) +\n\t\tthis.emit(\n\t\t\t' {\\n' +\n\t\t\tthis.indent( 1 )\n\t\t) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit(\n\t\t\tthis.indent( -1 ) +\n\t\t\t'\\n}'\n\t\t)\n\t);\n};\n\n/**\n * Visit keyframes node.\n */\n\nCompiler.prototype.keyframes = function( node ) {\n\treturn (\n\t\tthis.emit( '@' + ( node.vendor || '' ) + 'keyframes ' + node.name, node.position ) +\n\t\tthis.emit(\n\t\t\t' {\\n' +\n\t\t\tthis.indent( 1 )\n\t\t) +\n\t\tthis.mapVisit( node.keyframes, '\\n' ) +\n\t\tthis.emit(\n\t\t\tthis.indent( -1 ) +\n\t\t\t'}'\n\t\t)\n\t);\n};\n\n/**\n * Visit keyframe node.\n */\n\nCompiler.prototype.keyframe = function( node ) {\n\tconst decls = node.declarations;\n\n\treturn (\n\t\tthis.emit( this.indent() ) +\n\t\tthis.emit( node.values.join( ', ' ), node.position ) +\n\t\tthis.emit(\n\t\t\t' {\\n' +\n\t\t\tthis.indent( 1 )\n\t\t) +\n\t\tthis.mapVisit( decls, '\\n' ) +\n\t\tthis.emit(\n\t\t\tthis.indent( -1 ) +\n\t\t\t'\\n' +\n\t\t\tthis.indent() + '}\\n'\n\t\t)\n\t);\n};\n\n/**\n * Visit page node.\n */\n\nCompiler.prototype.page = function( node ) {\n\tconst sel = node.selectors.length ?\n\t\tnode.selectors.join( ', ' ) + ' ' :\n\t\t'';\n\n\treturn this.emit( '@page ' + sel, node.position ) +\n    this.emit( '{\\n' ) +\n    this.emit( this.indent( 1 ) ) +\n    this.mapVisit( node.declarations, '\\n' ) +\n    this.emit( this.indent( -1 ) ) +\n    this.emit( '\\n}' );\n};\n\n/**\n * Visit font-face node.\n */\n\nCompiler.prototype[ 'font-face' ] = function( node ) {\n\treturn this.emit( '@font-face ', node.position ) +\n    this.emit( '{\\n' ) +\n    this.emit( this.indent( 1 ) ) +\n    this.mapVisit( node.declarations, '\\n' ) +\n    this.emit( this.indent( -1 ) ) +\n    this.emit( '\\n}' );\n};\n\n/**\n * Visit host node.\n */\n\nCompiler.prototype.host = function( node ) {\n\treturn (\n\t\tthis.emit( '@host', node.position ) +\n\t\tthis.emit(\n\t\t\t' {\\n' +\n\t\t\tthis.indent( 1 )\n\t\t) +\n\t\tthis.mapVisit( node.rules, '\\n\\n' ) +\n\t\tthis.emit(\n\t\t\tthis.indent( -1 ) +\n\t\t\t'\\n}'\n\t\t)\n\t);\n};\n\n/**\n * Visit custom-media node.\n */\n\nCompiler.prototype[ 'custom-media' ] = function( node ) {\n\treturn this.emit( '@custom-media ' + node.name + ' ' + node.media + ';', node.position );\n};\n\n/**\n * Visit rule node.\n */\n\nCompiler.prototype.rule = function( node ) {\n\tconst indent = this.indent();\n\tconst decls = node.declarations;\n\tif ( ! decls.length ) {\n\t\treturn '';\n\t}\n\n\treturn this.emit( node.selectors.map( function( s ) {\n\t\treturn indent + s;\n\t} ).join( ',\\n' ), node.position ) +\n    this.emit( ' {\\n' ) +\n    this.emit( this.indent( 1 ) ) +\n    this.mapVisit( decls, '\\n' ) +\n    this.emit( this.indent( -1 ) ) +\n    this.emit( '\\n' + this.indent() + '}' );\n};\n\n/**\n * Visit declaration node.\n */\n\nCompiler.prototype.declaration = function( node ) {\n\treturn this.emit( this.indent() ) +\n    this.emit( node.property + ': ' + node.value, node.position ) +\n    this.emit( ';' );\n};\n\n/**\n * Increase, decrease or return current indentation.\n */\n\nCompiler.prototype.indent = function( level ) {\n\tthis.level = this.level || 1;\n\n\tif ( null !== level ) {\n\t\tthis.level += level;\n\t\treturn '';\n\t}\n\n\treturn Array( this.level ).join( this.indentation || '  ' );\n};\n","// Adapted from https://github.com/reworkcss/css\n// because we needed to remove source map support.\n\n/**\n * Internal dependencies.\n */\nimport Compressed from './compress';\nimport Identity from './identity';\n\n/**\n * Stringfy the given AST `node`.\n *\n * Options:\n *\n *  - `compress` space-optimized output\n *  - `sourcemap` return an object with `.code` and `.map`\n *\n * @param {Object} node\n * @param {Object} [options]\n * @return {String}\n * @api public\n */\n\nexport default function( node, options ) {\n\toptions = options || {};\n\n\tconst compiler = options.compress ?\n\t\tnew Compressed( options ) :\n\t\tnew Identity( options );\n\n\tconst code = compiler.compile( node );\n\treturn code;\n}\n","export { default as traverse } from './traverse';\nexport { default as urlRewrite } from './transforms/url-rewrite';\nexport { default as wrap } from './transforms/wrap';\nexport { default as editorWidth } from './transforms/editor-width';\n","/**\n * External dependencies\n */\nimport { find } from 'lodash';\n\nexport const getEditorWidthRules = ( width ) => {\n\treturn {\n\t\ttype: 'rule',\n\t\tselectors: [\n\t\t\t'body.block-editor-page .editor-post-title__block',\n\t\t\t'body.block-editor-page .editor-default-block-appender',\n\t\t\t'body.block-editor-page .editor-block-list__block',\n\t\t],\n\t\tdeclarations: [\n\t\t\t{\n\t\t\t\ttype: 'declaration',\n\t\t\t\tproperty: 'max-width',\n\t\t\t\tvalue: width,\n\t\t\t},\n\t\t],\n\t};\n};\n\nconst editorWidth = ( node ) => {\n\tif (\n\t\tnode.type === 'rule' &&\n\t\tfind( node.selectors, ( selector ) => selector.trim() === '.wp-block' )\n\t) {\n\t\tconst widthDeclaration = find(\n\t\t\tnode.declarations,\n\t\t\t( declaration ) => declaration.property === 'width'\n\t\t);\n\n\t\tif ( widthDeclaration ) {\n\t\t\treturn getEditorWidthRules( widthDeclaration.value );\n\t\t}\n\t}\n\n\treturn node;\n};\n\nexport default editorWidth;\n","/**\n * External dependencies\n */\nimport { parse, resolve } from 'url';\n\n/**\n * Return `true` if the given path is http/https.\n *\n * @param  {string}  filePath path\n *\n * @return {boolean} is remote path.\n */\nfunction isRemotePath( filePath ) {\n\treturn /^(?:https?:)?\\/\\//.test( filePath );\n}\n\n/**\n * Return `true` if the given filePath is an absolute url.\n *\n * @param  {string}  filePath path\n *\n * @return {boolean} is absolute path.\n */\nfunction isAbsolutePath( filePath ) {\n\treturn /^\\/(?!\\/)/.test( filePath );\n}\n\n/**\n * Whether or not the url should be inluded.\n *\n * @param  {Object} meta url meta info\n *\n * @return {boolean} is valid.\n */\nfunction isValidURL( meta ) {\n\t// ignore hashes or data uris\n\tif ( meta.value.indexOf( 'data:' ) === 0 || meta.value.indexOf( '#' ) === 0 ) {\n\t\treturn false;\n\t}\n\n\tif ( isAbsolutePath( meta.value ) ) {\n\t\treturn false;\n\t}\n\n\t// do not handle the http/https urls if `includeRemote` is false\n\tif ( isRemotePath( meta.value ) ) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n/**\n * Get the absolute path of the url, relative to the basePath\n *\n * @param  {string} str          the url\n * @param  {string} baseURL      base URL\n * @param  {string} absolutePath the absolute path\n *\n * @return {string}              the full path to the file\n */\nfunction getResourcePath( str, baseURL ) {\n\tconst pathname = parse( str ).pathname;\n\tconst filePath = resolve( baseURL, pathname );\n\n\treturn filePath;\n}\n\n/**\n * Process the single `url()` pattern\n *\n * @param  {string} baseURL  the base URL for relative URLs\n * @return {Promise}         the Promise\n */\nfunction processURL( baseURL ) {\n\treturn function( meta ) {\n\t\tconst URL = getResourcePath( meta.value, baseURL );\n\t\treturn {\n\t\t\t...meta,\n\t\t\tnewUrl:\n\t\t\t\t'url(' +\n\t\t\t\tmeta.before +\n\t\t\t\tmeta.quote +\n\t\t\t\tURL +\n\t\t\t\tmeta.quote +\n\t\t\t\tmeta.after +\n\t\t\t\t')',\n\t\t};\n\t};\n}\n\n/**\n * Get all `url()`s, and return the meta info\n *\n * @param  {string} value decl.value\n *\n * @return {Array}        the urls\n */\nfunction getURLs( value ) {\n\tconst reg = /url\\((\\s*)(['\"]?)(.+?)\\2(\\s*)\\)/g;\n\tlet match;\n\tconst URLs = [];\n\n\twhile ( ( match = reg.exec( value ) ) !== null ) {\n\t\tconst meta = {\n\t\t\tsource: match[ 0 ],\n\t\t\tbefore: match[ 1 ],\n\t\t\tquote: match[ 2 ],\n\t\t\tvalue: match[ 3 ],\n\t\t\tafter: match[ 4 ],\n\t\t};\n\t\tif ( isValidURL( meta ) ) {\n\t\t\tURLs.push( meta );\n\t\t}\n\t}\n\treturn URLs;\n}\n\n/**\n * Replace the raw value's `url()` segment to the new value\n *\n * @param  {string} raw  the raw value\n * @param  {Array}  URLs the URLs to replace\n *\n * @return {string}     the new value\n */\nfunction replaceURLs( raw, URLs ) {\n\tURLs.forEach( ( item ) => {\n\t\traw = raw.replace( item.source, item.newUrl );\n\t} );\n\n\treturn raw;\n}\n\nconst rewrite = ( rootURL ) => ( node ) => {\n\tif ( node.type === 'declaration' ) {\n\t\tconst updatedURLs = getURLs( node.value ).map( processURL( rootURL ) );\n\t\treturn {\n\t\t\t...node,\n\t\t\tvalue: replaceURLs( node.value, updatedURLs ),\n\t\t};\n\t}\n\n\treturn node;\n};\n\nexport default rewrite;\n","/**\n * External dependencies\n */\nimport { includes } from 'lodash';\n\n/**\n * @const string IS_ROOT_TAG Regex to check if the selector is a root tag selector.\n */\nconst IS_ROOT_TAG = /^(body|html).*$/;\n\nconst wrap = ( namespace, ignore = [] ) => ( node ) => {\n\tconst updateSelector = ( selector ) => {\n\t\tif ( includes( ignore, selector.trim() ) ) {\n\t\t\treturn selector;\n\t\t}\n\n\t\t// Anything other than a root tag is always prefixed.\n\t\t{if ( ! selector.match( IS_ROOT_TAG ) ) {\n\t\t\treturn namespace + ' ' + selector;\n\t\t}}\n\n\t\t// HTML and Body elements cannot be contained within our container so lets extract their styles.\n\t\treturn selector.replace( /^(body|html)/, namespace );\n\t};\n\n\tif ( node.type === 'rule' ) {\n\t\treturn {\n\t\t\t...node,\n\t\t\tselectors: node.selectors.map( updateSelector ),\n\t\t};\n\t}\n\n\treturn node;\n};\n\nexport default wrap;\n","/**\n * External dependencies\n */\nimport { parse, stringify } from './ast';\nimport traverse from 'traverse';\n\nfunction traverseCSS( css, callback ) {\n\ttry {\n\t\tconst parsed = parse( css );\n\n\t\tconst updated = traverse.map( parsed, function( node ) {\n\t\t\tif ( ! node ) {\n\t\t\t\treturn node;\n\t\t\t}\n\t\t\tconst updatedNode = callback( node );\n\t\t\treturn this.update( updatedNode );\n\t\t} );\n\n\t\treturn stringify( updated );\n\t} catch ( err ) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.warn( 'Error while traversing the CSS: ' + err );\n\n\t\treturn null;\n\t}\n}\n\nexport default traverseCSS;\n","/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { assign, get, has, includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport, getBlockSupport, getBlockType } from '@wordpress/blocks';\n\n/**\n * Internal dependencies\n */\nimport { BlockControls, BlockAlignmentToolbar } from '../components';\n\n/**\n * Filters registered block settings, extending attributes to include `align`.\n *\n * @param  {Object} settings Original block settings\n * @return {Object}          Filtered block settings\n */\nexport function addAttribute( settings ) {\n\t// allow blocks to specify their own attribute definition with default values if needed.\n\tif ( has( settings.attributes, [ 'align', 'type' ] ) ) {\n\t\treturn settings;\n\t}\n\tif ( hasBlockSupport( settings, 'align' ) ) {\n\t\t// Use Lodash's assign to gracefully handle if attributes are undefined\n\t\tsettings.attributes = assign( settings.attributes, {\n\t\t\talign: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Returns an array of valid alignments for a block type depending on its\n * defined supports. Returns an empty array if block does not support align.\n *\n * @param  {string}   blockName Block name to check\n * @return {string[]}           Valid alignments for block\n */\nexport function getBlockValidAlignments( blockName ) {\n\t// Explicitly defined array set of valid alignments\n\tconst blockAlign = getBlockSupport( blockName, 'align' );\n\tif ( Array.isArray( blockAlign ) ) {\n\t\treturn blockAlign;\n\t}\n\n\tconst validAlignments = [];\n\tif ( true === blockAlign ) {\n\t\t// `true` includes all alignments...\n\t\tvalidAlignments.push( 'left', 'center', 'right' );\n\n\t\tif ( hasBlockSupport( blockName, 'alignWide', true ) ) {\n\t\t\tvalidAlignments.push( 'wide', 'full' );\n\t\t}\n\t}\n\n\treturn validAlignments;\n}\n\n/**\n * Override the default edit UI to include new toolbar controls for block\n * alignment, if block defines support.\n *\n * @param  {Function} BlockEdit Original component\n * @return {Function}           Wrapped component\n */\nexport const withToolbarControls = createHigherOrderComponent( ( BlockEdit ) => {\n\treturn ( props ) => {\n\t\tconst validAlignments = getBlockValidAlignments( props.name );\n\n\t\tconst updateAlignment = ( nextAlign ) => {\n\t\t\tif ( ! nextAlign ) {\n\t\t\t\tconst blockType = getBlockType( props.name );\n\t\t\t\tconst blockDefaultAlign = get( blockType, [ 'attributes', 'align', 'default' ] );\n\t\t\t\tif ( blockDefaultAlign ) {\n\t\t\t\t\tnextAlign = '';\n\t\t\t\t}\n\t\t\t}\n\t\t\tprops.setAttributes( { align: nextAlign } );\n\t\t};\n\n\t\treturn [\n\t\t\tvalidAlignments.length > 0 && props.isSelected && (\n\t\t\t\t<BlockControls key=\"align-controls\">\n\t\t\t\t\t<BlockAlignmentToolbar\n\t\t\t\t\t\tvalue={ props.attributes.align }\n\t\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\t\tcontrols={ validAlignments }\n\t\t\t\t\t/>\n\t\t\t\t</BlockControls>\n\t\t\t),\n\t\t\t<BlockEdit key=\"edit\" { ...props } />,\n\t\t];\n\t};\n}, 'withToolbarControls' );\n\n/**\n * Override the default block element to add alignment wrapper props.\n *\n * @param  {Function} BlockListBlock Original component\n * @return {Function}                Wrapped component\n */\nexport const withDataAlign = createHigherOrderComponent( ( BlockListBlock ) => {\n\treturn ( props ) => {\n\t\tconst { align } = props.block.attributes;\n\t\tconst validAlignments = getBlockValidAlignments( props.block.name );\n\n\t\tlet wrapperProps = props.wrapperProps;\n\t\tif ( includes( validAlignments, align ) ) {\n\t\t\twrapperProps = { ...wrapperProps, 'data-align': align };\n\t\t}\n\n\t\treturn <BlockListBlock { ...props } wrapperProps={ wrapperProps } />;\n\t};\n}, 'withDataAlign' );\n\n/**\n * Override props assigned to save component to inject alignment class name if\n * block supports it.\n *\n * @param  {Object} props      Additional props applied to save element\n * @param  {Object} blockType  Block type\n * @param  {Object} attributes Block attributes\n * @return {Object}            Filtered props applied to save element\n */\nexport function addAssignedAlign( props, blockType, attributes ) {\n\tconst { align } = attributes;\n\n\tif ( includes( getBlockValidAlignments( blockType ), align ) ) {\n\t\tprops.className = classnames( `align${ align }`, props.className );\n\t}\n\n\treturn props;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/align/addAttribute', addAttribute );\naddFilter( 'editor.BlockListBlock', 'core/editor/align/with-data-align', withDataAlign );\naddFilter( 'editor.BlockEdit', 'core/editor/align/with-toolbar-controls', withToolbarControls );\naddFilter( 'blocks.getSaveContent.extraProps', 'core/align/addAssignedAlign', addAssignedAlign );\n\n","/**\n * External dependencies\n */\nimport { assign } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport { TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { hasBlockSupport } from '@wordpress/blocks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { InspectorAdvancedControls } from '../components';\n\n/**\n * Regular expression matching invalid anchor characters for replacement.\n *\n * @type {RegExp}\n */\nconst ANCHOR_REGEX = /[\\s#]/g;\n\n/**\n * Filters registered block settings, extending attributes with anchor using ID\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( hasBlockSupport( settings, 'anchor' ) ) {\n\t\t// Use Lodash's assign to gracefully handle if attributes are undefined\n\t\tsettings.attributes = assign( settings.attributes, {\n\t\t\tanchor: {\n\t\t\t\ttype: 'string',\n\t\t\t\tsource: 'attribute',\n\t\t\t\tattribute: 'id',\n\t\t\t\tselector: '*',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the anchor ID, if block supports anchor.\n *\n * @param {function|Component} BlockEdit Original component.\n *\n * @return {string} Wrapped component.\n */\nexport const withInspectorControl = createHigherOrderComponent( ( BlockEdit ) => {\n\treturn ( props ) => {\n\t\tconst hasAnchor = hasBlockSupport( props.name, 'anchor' );\n\n\t\tif ( hasAnchor && props.isSelected ) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'HTML Anchor' ) }\n\t\t\t\t\t\t\thelp={ __( 'Anchors lets you link directly to a section on a page.' ) }\n\t\t\t\t\t\t\tvalue={ props.attributes.anchor || '' }\n\t\t\t\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\t\t\t\tnextValue = nextValue.replace( ANCHOR_REGEX, '-' );\n\t\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\t\tanchor: nextValue,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} } />\n\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\treturn <BlockEdit { ...props } />;\n\t};\n}, 'withInspectorControl' );\n\n/**\n * Override props assigned to save component to inject anchor ID, if block\n * supports anchor. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'anchor' ) ) {\n\t\textraProps.id = attributes.anchor;\n\t}\n\n\treturn extraProps;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/anchor/attribute', addAttribute );\naddFilter( 'editor.BlockEdit', 'core/editor/anchor/with-inspector-control', withInspectorControl );\naddFilter( 'blocks.getSaveContent.extraProps', 'core/anchor/save-props', addSaveProps );\n","/**\n * External dependencies\n */\nimport { assign, difference, omit } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Fragment } from '@wordpress/element';\nimport { addFilter } from '@wordpress/hooks';\nimport { TextControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport {\n\thasBlockSupport,\n\tparseWithAttributeSchema,\n\tgetSaveContent,\n} from '@wordpress/blocks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { InspectorAdvancedControls } from '../components';\n\n/**\n * Filters registered block settings, extending attributes with anchor using ID\n * of the first node.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\tif ( hasBlockSupport( settings, 'customClassName', true ) ) {\n\t\t// Use Lodash's assign to gracefully handle if attributes are undefined\n\t\tsettings.attributes = assign( settings.attributes, {\n\t\t\tclassName: {\n\t\t\t\ttype: 'string',\n\t\t\t},\n\t\t} );\n\t}\n\n\treturn settings;\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the custom class name, if block supports custom class name.\n *\n * @param {function|Component} BlockEdit Original component.\n *\n * @return {string} Wrapped component.\n */\nexport const withInspectorControl = createHigherOrderComponent( ( BlockEdit ) => {\n\treturn ( props ) => {\n\t\tconst hasCustomClassName = hasBlockSupport( props.name, 'customClassName', true );\n\t\tif ( hasCustomClassName && props.isSelected ) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<BlockEdit { ...props } />\n\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __( 'Additional CSS Class' ) }\n\t\t\t\t\t\t\tvalue={ props.attributes.className || '' }\n\t\t\t\t\t\t\tonChange={ ( nextValue ) => {\n\t\t\t\t\t\t\t\tprops.setAttributes( {\n\t\t\t\t\t\t\t\t\tclassName: nextValue,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\treturn <BlockEdit { ...props } />;\n\t};\n}, 'withInspectorControl' );\n\n/**\n * Override props assigned to save component to inject anchor ID, if block\n * supports anchor. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tif ( hasBlockSupport( blockType, 'customClassName', true ) && attributes.className ) {\n\t\textraProps.className = classnames( extraProps.className, attributes.className );\n\t}\n\n\treturn extraProps;\n}\n\n/**\n * Given an HTML string, returns an array of class names assigned to the root\n * element in the markup.\n *\n * @param {string} innerHTML Markup string from which to extract classes.\n *\n * @return {string[]} Array of class names assigned to the root element.\n */\nexport function getHTMLRootElementClasses( innerHTML ) {\n\tinnerHTML = `<div data-custom-class-name>${ innerHTML }</div>`;\n\n\tconst parsed = parseWithAttributeSchema( innerHTML, {\n\t\ttype: 'string',\n\t\tsource: 'attribute',\n\t\tselector: '[data-custom-class-name] > *',\n\t\tattribute: 'class',\n\t} );\n\n\treturn parsed ? parsed.trim().split( /\\s+/ ) : [];\n}\n\n/**\n * Given a parsed set of block attributes, if the block supports custom class\n * names and an unknown class (per the block's serialization behavior) is\n * found, the unknown classes are treated as custom classes. This prevents the\n * block from being considered as invalid.\n *\n * @param {Object} blockAttributes Original block attributes.\n * @param {Object} blockType       Block type settings.\n * @param {string} innerHTML       Original block markup.\n *\n * @return {Object} Filtered block attributes.\n */\nexport function addParsedDifference( blockAttributes, blockType, innerHTML ) {\n\tif ( hasBlockSupport( blockType, 'customClassName', true ) ) {\n\t\t// To determine difference, serialize block given the known set of\n\t\t// attributes, with the exception of `className`. This will determine\n\t\t// the default set of classes. From there, any difference in innerHTML\n\t\t// can be considered as custom classes.\n\t\tconst attributesSansClassName = omit( blockAttributes, [ 'className' ] );\n\t\tconst serialized = getSaveContent( blockType, attributesSansClassName );\n\t\tconst defaultClasses = getHTMLRootElementClasses( serialized );\n\t\tconst actualClasses = getHTMLRootElementClasses( innerHTML );\n\t\tconst customClasses = difference( actualClasses, defaultClasses );\n\n\t\tif ( customClasses.length ) {\n\t\t\tblockAttributes.className = customClasses.join( ' ' );\n\t\t} else if ( serialized ) {\n\t\t\tdelete blockAttributes.className;\n\t\t}\n\t}\n\n\treturn blockAttributes;\n}\n\naddFilter( 'blocks.registerBlockType', 'core/custom-class-name/attribute', addAttribute );\naddFilter( 'editor.BlockEdit', 'core/editor/custom-class-name/with-inspector-control', withInspectorControl );\naddFilter( 'blocks.getSaveContent.extraProps', 'core/custom-class-name/save-props', addSaveProps );\naddFilter( 'blocks.getBlockAttributes', 'core/custom-class-name/addParsedDifference', addParsedDifference );\n","/**\n * External dependencies\n */\nimport { clone, once } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { getDefaultBlockName } from '@wordpress/blocks';\nimport { dispatch } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport { blockAutocompleter, userAutocompleter } from '../components';\n\nconst defaultAutocompleters = [ userAutocompleter ];\n\nconst fetchReusableBlocks = once( () => dispatch( 'core/editor' ).fetchReusableBlocks() );\n\nfunction setDefaultCompleters( completers, blockName ) {\n\tif ( ! completers ) {\n\t\t// Provide copies so filters may directly modify them.\n\t\tcompleters = defaultAutocompleters.map( clone );\n\t\t// Add blocks autocompleter for Paragraph block\n\t\tif ( blockName === getDefaultBlockName() ) {\n\t\t\tcompleters.push( clone( blockAutocompleter ) );\n\n\t\t\t/*\n\t\t\t * NOTE: This is a hack to help ensure reusable blocks are loaded\n\t\t\t * so they may be included in the block completer. It can be removed\n\t\t\t * once we have a way for completers to Promise options while\n\t\t\t * store-based data dependencies are being resolved.\n\t\t\t */\n\t\t\tfetchReusableBlocks();\n\t\t}\n\t}\n\treturn completers;\n}\n\naddFilter(\n\t'editor.Autocomplete.completers',\n\t'editor/autocompleters/set-default-completers',\n\tsetDefaultCompleters\n);\n","/**\n * External dependencies\n */\nimport { uniq } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\nimport { hasBlockSupport, getBlockDefaultClassName } from '@wordpress/blocks';\n\n/**\n * Override props assigned to save component to inject generated className if\n * block supports it. This is only applied if the block's save result is an\n * element and not a markup string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addGeneratedClassName( extraProps, blockType ) {\n\t// Adding the generated className\n\tif ( hasBlockSupport( blockType, 'className', true ) ) {\n\t\tif ( typeof extraProps.className === 'string' ) {\n\t\t\t// We have some extra classes and want to add the default classname\n\t\t\t// We use uniq to prevent duplicate classnames\n\n\t\t\textraProps.className = uniq( [\n\t\t\t\tgetBlockDefaultClassName( blockType.name ),\n\t\t\t\t...extraProps.className.split( ' ' ),\n\t\t\t] ).join( ' ' ).trim();\n\t\t} else {\n\t\t\t// There is no string in the className variable,\n\t\t\t// so we just dump the default name in there\n\t\t\textraProps.className = getBlockDefaultClassName( blockType.name );\n\t\t}\n\t}\n\treturn extraProps;\n}\n\naddFilter( 'blocks.getSaveContent.extraProps', 'core/generated-class-name/save-props', addGeneratedClassName );\n","/**\n * Internal dependencies\n */\nimport './align';\nimport './anchor';\nimport './custom-class-name';\nimport './default-autocompleters';\nimport './generated-class-name';\nimport './layout';\n","/**\n * External dependencies\n */\nimport { assign, compact, get, without } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { addFilter } from '@wordpress/hooks';\n\n/**\n * Filters registered block settings, extending attributes with layout.\n *\n * @param {Object} settings Original block settings.\n *\n * @return {Object} Filtered block settings.\n */\nexport function addAttribute( settings ) {\n\t// Use Lodash's assign to gracefully handle if attributes are undefined\n\tsettings.attributes = assign( settings.attributes, {\n\t\tlayout: {\n\t\t\ttype: 'string',\n\t\t},\n\t} );\n\n\treturn settings;\n}\n\n/**\n * Override props assigned to save component to inject layout class. This is\n * only applied if the block's save result is an element and not a markup\n * string.\n *\n * @param {Object} extraProps Additional props applied to save element.\n * @param {Object} blockType  Block type.\n * @param {Object} attributes Current block attributes.\n *\n * @return {Object} Filtered props applied to save element.\n */\nexport function addSaveProps( extraProps, blockType, attributes ) {\n\tconst { layout } = attributes;\n\tif ( layout ) {\n\t\textraProps.className = compact( [\n\t\t\textraProps.className,\n\t\t\t'layout-' + layout,\n\t\t] ).join( ' ' );\n\t}\n\n\treturn extraProps;\n}\n\n/**\n * Given a transformed block, assigns the layout from the original block. Since\n * layout is a \"global\" attribute implemented via hooks, the individual block\n * transforms are not expected to handle this themselves, and a transform would\n * otherwise lose assigned layout.\n *\n * @param {Object} transformedBlock Original transformed block.\n * @param {Object} blocks           Blocks on which transform was applied.\n *\n * @return {Object} Modified transformed block, with layout preserved.\n */\nfunction preserveLayoutAttribute( transformedBlock, blocks ) {\n\t// Since block transforms are many-to-many, use the layout attribute from\n\t// the first of the source blocks.\n\tconst layout = get( blocks, [ 0, 'attributes', 'layout' ] );\n\n\ttransformedBlock.attributes.layout = layout;\n\n\treturn transformedBlock;\n}\n\n/**\n * Excludes the layout from the list of attributes to check\n * when determining if a block is unmodified or not.\n *\n * @param  {Object} attributeKeys  Attribute keys to check\n *\n * @return {Object}                Modified list of attribute keys\n */\nfunction excludeLayoutFromUnmodifiedBlockCheck( attributeKeys ) {\n\treturn without( attributeKeys, 'layout' );\n}\n\naddFilter( 'blocks.registerBlockType', 'core/layout/attribute', addAttribute );\naddFilter( 'blocks.getSaveContent.extraProps', 'core/layout/save-props', addSaveProps );\naddFilter( 'blocks.switchToBlockType.transformedBlock', 'core/layout/preserve-layout', preserveLayoutAttribute );\naddFilter( 'blocks.isUnmodifiedDefaultBlock.attributes', 'core/layout/exclude-layout-attribute-check', excludeLayoutFromUnmodifiedBlockCheck );\n","/**\n * WordPress dependencies\n */\nimport '@wordpress/blocks';\nimport '@wordpress/core-data';\nimport '@wordpress/nux';\nimport '@wordpress/viewport';\n\n/**\n * Internal dependencies\n */\nimport './store';\nimport './hooks';\n\nexport * from './components';\nexport * from './utils';\n","/**\n * External Dependencies\n */\nimport uuid from 'uuid/v4';\nimport { partial, castArray } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tgetDefaultBlockName,\n\tcreateBlock,\n} from '@wordpress/blocks';\n\n/**\n * Returns an action object used in signalling that editor has initialized with\n * the specified post object and editor settings.\n *\n * @param {Object}  post           Post object.\n * @param {Object}  autosaveStatus The Post's autosave status.\n *\n * @return {Object} Action object.\n */\nexport function setupEditor( post, autosaveStatus ) {\n\treturn {\n\t\ttype: 'SETUP_EDITOR',\n\t\tautosave: autosaveStatus,\n\t\tpost,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the latest version of the\n * post has been received, either by initialization or save.\n *\n * @param {Object} post Post object.\n *\n * @return {Object} Action object.\n */\nexport function resetPost( post ) {\n\treturn {\n\t\ttype: 'RESET_POST',\n\t\tpost,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the latest autosave of the\n * post has been received, by initialization or autosave.\n *\n * @param {Object} post Autosave post object.\n *\n * @return {Object} Action object.\n */\nexport function resetAutosave( post ) {\n\treturn {\n\t\ttype: 'RESET_AUTOSAVE',\n\t\tpost,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a patch of updates for the\n * latest version of the post have been received.\n *\n * @param {Object} edits Updated post fields.\n *\n * @return {Object} Action object.\n */\nexport function updatePost( edits ) {\n\treturn {\n\t\ttype: 'UPDATE_POST',\n\t\tedits,\n\t};\n}\n\n/**\n * Returns an action object used to setup the editor state when first opening an editor.\n *\n * @param {Object}  post            Post object.\n * @param {Array}   blocks          Array of blocks.\n * @param {Object}  edits           Initial edited attributes object.\n *\n * @return {Object} Action object.\n */\nexport function setupEditorState( post, blocks, edits ) {\n\treturn {\n\t\ttype: 'SETUP_EDITOR_STATE',\n\t\tpost,\n\t\tblocks,\n\t\tedits,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that blocks state should be\n * reset to the specified array of blocks, taking precedence over any other\n * content reflected as an edit in state.\n *\n * @param {Array} blocks Array of blocks.\n *\n * @return {Object} Action object.\n */\nexport function resetBlocks( blocks ) {\n\treturn {\n\t\ttype: 'RESET_BLOCKS',\n\t\tblocks,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that blocks have been received.\n * Unlike resetBlocks, these should be appended to the existing known set, not\n * replacing.\n *\n * @param {Object[]} blocks Array of block objects.\n *\n * @return {Object} Action object.\n */\nexport function receiveBlocks( blocks ) {\n\treturn {\n\t\ttype: 'RECEIVE_BLOCKS',\n\t\tblocks,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the block attributes with\n * the specified client ID has been updated.\n *\n * @param {string} clientId   Block client ID.\n * @param {Object} attributes Block attributes to be merged.\n *\n * @return {Object} Action object.\n */\nexport function updateBlockAttributes( clientId, attributes ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_ATTRIBUTES',\n\t\tclientId,\n\t\tattributes,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been updated.\n *\n * @param {string} clientId Block client ID.\n * @param {Object} updates  Block attributes to be merged.\n *\n * @return {Object} Action object.\n */\nexport function updateBlock( clientId, updates ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK',\n\t\tclientId,\n\t\tupdates,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID has been selected, optionally accepting a position\n * value reflecting its selection directionality. An initialPosition of -1\n * reflects a reverse selection.\n *\n * @param {string}  clientId        Block client ID.\n * @param {?number} initialPosition Optional initial position. Pass as -1 to\n *                                  reflect reverse selection.\n *\n * @return {Object} Action object.\n */\nexport function selectBlock( clientId, initialPosition = null ) {\n\treturn {\n\t\ttype: 'SELECT_BLOCK',\n\t\tinitialPosition,\n\t\tclientId,\n\t};\n}\n\nexport function startMultiSelect() {\n\treturn {\n\t\ttype: 'START_MULTI_SELECT',\n\t};\n}\n\nexport function stopMultiSelect() {\n\treturn {\n\t\ttype: 'STOP_MULTI_SELECT',\n\t};\n}\n\nexport function multiSelect( start, end ) {\n\treturn {\n\t\ttype: 'MULTI_SELECT',\n\t\tstart,\n\t\tend,\n\t};\n}\n\nexport function clearSelectedBlock() {\n\treturn {\n\t\ttype: 'CLEAR_SELECTED_BLOCK',\n\t};\n}\n\n/**\n * Returns an action object that enables or disables block selection.\n *\n * @param {boolean} [isSelectionEnabled=true] Whether block selection should\n *                                            be enabled.\n\n * @return {Object} Action object.\n */\nexport function toggleSelection( isSelectionEnabled = true ) {\n\treturn {\n\t\ttype: 'TOGGLE_SELECTION',\n\t\tisSelectionEnabled,\n\t};\n}\n\n/**\n * Returns an action object signalling that a blocks should be replaced with\n * one or more replacement blocks.\n *\n * @param {(string|string[])} clientIds Block client ID(s) to replace.\n * @param {(Object|Object[])} blocks    Replacement block(s).\n *\n * @return {Object} Action object.\n */\nexport function replaceBlocks( clientIds, blocks ) {\n\treturn {\n\t\ttype: 'REPLACE_BLOCKS',\n\t\tclientIds: castArray( clientIds ),\n\t\tblocks: castArray( blocks ),\n\t\ttime: Date.now(),\n\t};\n}\n\n/**\n * Returns an action object signalling that a single block should be replaced\n * with one or more replacement blocks.\n *\n * @param {(string|string[])} clientId Block client ID to replace.\n * @param {(Object|Object[])} block    Replacement block(s).\n *\n * @return {Object} Action object.\n */\nexport function replaceBlock( clientId, block ) {\n\treturn replaceBlocks( clientId, block );\n}\n\n/**\n * Higher-order action creator which, given the action type to dispatch creates\n * an action creator for managing block movement.\n *\n * @param {string} type Action type to dispatch.\n *\n * @return {Function} Action creator.\n */\nfunction createOnMove( type ) {\n\treturn ( clientIds, rootClientId ) => {\n\t\treturn {\n\t\t\tclientIds: castArray( clientIds ),\n\t\t\ttype,\n\t\t\trootClientId,\n\t\t};\n\t};\n}\n\nexport const moveBlocksDown = createOnMove( 'MOVE_BLOCKS_DOWN' );\nexport const moveBlocksUp = createOnMove( 'MOVE_BLOCKS_UP' );\n\n/**\n * Returns an action object signalling that an indexed block should be moved\n * to a new index.\n *\n * @param  {?string} clientId         The client ID of the block.\n * @param  {?string} fromRootClientId Root client ID source.\n * @param  {?string} toRootClientId   Root client ID destination.\n * @param  {?string} layout           Layout to move the block into.\n * @param  {number}  index            The index to move the block into.\n *\n * @return {Object} Action object.\n */\nexport function moveBlockToPosition( clientId, fromRootClientId, toRootClientId, layout, index ) {\n\treturn {\n\t\ttype: 'MOVE_BLOCK_TO_POSITION',\n\t\tfromRootClientId,\n\t\ttoRootClientId,\n\t\tclientId,\n\t\tindex,\n\t\tlayout,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a single block should be\n * inserted, optionally at a specific index respective a root block list.\n *\n * @param {Object}  block        Block object to insert.\n * @param {?number} index        Index at which block should be inserted.\n * @param {?string} rootClientId Optional root client ID of block list on which\n *                               to insert.\n *\n * @return {Object} Action object.\n */\nexport function insertBlock( block, index, rootClientId ) {\n\treturn insertBlocks( [ block ], index, rootClientId );\n}\n\n/**\n * Returns an action object used in signalling that an array of blocks should\n * be inserted, optionally at a specific index respective a root block list.\n *\n * @param {Object[]} blocks       Block objects to insert.\n * @param {?number}  index        Index at which block should be inserted.\n * @param {?string}  rootClientId Optional root cliente ID of block list on\n *                                which to insert.\n *\n * @return {Object} Action object.\n */\nexport function insertBlocks( blocks, index, rootClientId ) {\n\treturn {\n\t\ttype: 'INSERT_BLOCKS',\n\t\tblocks: castArray( blocks ),\n\t\tindex,\n\t\trootClientId,\n\t\ttime: Date.now(),\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the insertion point should\n * be shown.\n *\n * @return {Object} Action object.\n */\nexport function showInsertionPoint() {\n\treturn {\n\t\ttype: 'SHOW_INSERTION_POINT',\n\t};\n}\n\n/**\n * Returns an action object hiding the insertion point.\n *\n * @return {Object} Action object.\n */\nexport function hideInsertionPoint() {\n\treturn {\n\t\ttype: 'HIDE_INSERTION_POINT',\n\t};\n}\n\n/**\n * Returns an action object resetting the template validity.\n *\n * @param {boolean}  isValid  template validity flag.\n *\n * @return {Object} Action object.\n */\nexport function setTemplateValidity( isValid ) {\n\treturn {\n\t\ttype: 'SET_TEMPLATE_VALIDITY',\n\t\tisValid,\n\t};\n}\n\n/**\n * Returns an action object synchronize the template with the list of blocks\n *\n * @return {Object} Action object.\n */\nexport function synchronizeTemplate() {\n\treturn {\n\t\ttype: 'SYNCHRONIZE_TEMPLATE',\n\t};\n}\n\nexport function editPost( edits ) {\n\treturn {\n\t\ttype: 'EDIT_POST',\n\t\tedits,\n\t};\n}\n\n/**\n * Returns an action object to save the post.\n *\n * @param {Object}  options          Options for the save.\n * @param {boolean} options.autosave Perform an autosave if true.\n *\n * @return {Object} Action object.\n */\nexport function savePost( options = {} ) {\n\treturn {\n\t\ttype: 'REQUEST_POST_UPDATE',\n\t\toptions,\n\t};\n}\n\nexport function refreshPost() {\n\treturn {\n\t\ttype: 'REFRESH_POST',\n\t};\n}\n\nexport function trashPost( postId, postType ) {\n\treturn {\n\t\ttype: 'TRASH_POST',\n\t\tpostId,\n\t\tpostType,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that two blocks should be merged\n *\n * @param {string} firstBlockClientId  Client ID of the first block to merge.\n * @param {string} secondBlockClientId Client ID of the second block to merge.\n *\n * @return {Object} Action object.\n */\nexport function mergeBlocks( firstBlockClientId, secondBlockClientId ) {\n\treturn {\n\t\ttype: 'MERGE_BLOCKS',\n\t\tblocks: [ firstBlockClientId, secondBlockClientId ],\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the post should autosave.\n *\n * @return {Object} Action object.\n */\nexport function autosave() {\n\treturn savePost( { autosave: true } );\n}\n\n/**\n * Returns an action object used in signalling that undo history should\n * restore last popped state.\n *\n * @return {Object} Action object.\n */\nexport function redo() {\n\treturn { type: 'REDO' };\n}\n\n/**\n * Returns an action object used in signalling that undo history should pop.\n *\n * @return {Object} Action object.\n */\nexport function undo() {\n\treturn { type: 'UNDO' };\n}\n\n/**\n * Returns an action object used in signalling that undo history record should\n * be created.\n *\n * @return {Object} Action object.\n */\nexport function createUndoLevel() {\n\treturn { type: 'CREATE_UNDO_LEVEL' };\n}\n\n/**\n * Returns an action object used in signalling that the blocks corresponding to\n * the set of specified client IDs are to be removed.\n *\n * @param {string|string[]} clientIds      Client IDs of blocks to remove.\n * @param {boolean}         selectPrevious True if the previous block should be\n *                                         selected when a block is removed.\n *\n * @return {Object} Action object.\n */\nexport function removeBlocks( clientIds, selectPrevious = true ) {\n\treturn {\n\t\ttype: 'REMOVE_BLOCKS',\n\t\tclientIds: castArray( clientIds ),\n\t\tselectPrevious,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the block with the\n * specified client ID is to be removed.\n *\n * @param {string}  clientId       Client ID of block to remove.\n * @param {boolean} selectPrevious True if the previous block should be\n *                                 selected when a block is removed.\n *\n * @return {Object} Action object.\n */\nexport function removeBlock( clientId, selectPrevious ) {\n\treturn removeBlocks( [ clientId ], selectPrevious );\n}\n\n/**\n * Returns an action object used to toggle the block editing mode between\n * visual and HTML modes.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Action object.\n */\nexport function toggleBlockMode( clientId ) {\n\treturn {\n\t\ttype: 'TOGGLE_BLOCK_MODE',\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has begun to type.\n *\n * @return {Object} Action object.\n */\nexport function startTyping() {\n\treturn {\n\t\ttype: 'START_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has stopped typing.\n *\n * @return {Object} Action object.\n */\nexport function stopTyping() {\n\treturn {\n\t\ttype: 'STOP_TYPING',\n\t};\n}\n\n/**\n * Returns an action object used to create a notice.\n *\n * @param {string}    status  The notice status.\n * @param {WPElement} content The notice content.\n * @param {?Object}   options The notice options.  Available options:\n *                              `id` (string; default auto-generated)\n *                              `isDismissible` (boolean; default `true`).\n *\n * @return {Object} Action object.\n */\nexport function createNotice( status, content, options = {} ) {\n\tconst {\n\t\tid = uuid(),\n\t\tisDismissible = true,\n\t\tspokenMessage,\n\t} = options;\n\treturn {\n\t\ttype: 'CREATE_NOTICE',\n\t\tnotice: {\n\t\t\tid,\n\t\t\tstatus,\n\t\t\tcontent,\n\t\t\tisDismissible,\n\t\t\tspokenMessage,\n\t\t},\n\t};\n}\n\n/**\n * Returns an action object used to remove a notice.\n *\n * @param {string} id The notice id.\n *\n * @return {Object} Action object.\n */\nexport function removeNotice( id ) {\n\treturn {\n\t\ttype: 'REMOVE_NOTICE',\n\t\tnoticeId: id,\n\t};\n}\n\n/**\n * Returns an action object used to lock the editor.\n *\n * @param {Object}  lock Details about the post lock status, user, and nonce.\n *\n * @return {Object} Action object.\n */\nexport function updatePostLock( lock ) {\n\treturn {\n\t\ttype: 'UPDATE_POST_LOCK',\n\t\tlock,\n\t};\n}\n\nexport const createSuccessNotice = partial( createNotice, 'success' );\nexport const createInfoNotice = partial( createNotice, 'info' );\nexport const createErrorNotice = partial( createNotice, 'error' );\nexport const createWarningNotice = partial( createNotice, 'warning' );\n\n/**\n * Returns an action object used to fetch a single reusable block or all\n * reusable blocks from the REST API into the store.\n *\n * @param {?string} id If given, only a single reusable block with this ID will\n *                     be fetched.\n *\n * @return {Object} Action object.\n */\nexport function fetchReusableBlocks( id ) {\n\treturn {\n\t\ttype: 'FETCH_REUSABLE_BLOCKS',\n\t\tid,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that reusable blocks have been\n * received. `results` is an array of objects containing:\n *  - `reusableBlock` - Details about how the reusable block is persisted.\n *  - `parsedBlock` - The original block.\n *\n * @param {Object[]} results Reusable blocks received.\n *\n * @return {Object} Action object.\n */\nexport function receiveReusableBlocks( results ) {\n\treturn {\n\t\ttype: 'RECEIVE_REUSABLE_BLOCKS',\n\t\tresults,\n\t};\n}\n\n/**\n * Returns an action object used to save a reusable block that's in the store to\n * the REST API.\n *\n * @param {Object} id The ID of the reusable block to save.\n *\n * @return {Object} Action object.\n */\nexport function saveReusableBlock( id ) {\n\treturn {\n\t\ttype: 'SAVE_REUSABLE_BLOCK',\n\t\tid,\n\t};\n}\n\n/**\n * Returns an action object used to delete a reusable block via the REST API.\n *\n * @param {number} id The ID of the reusable block to delete.\n *\n * @return {Object} Action object.\n */\nexport function deleteReusableBlock( id ) {\n\treturn {\n\t\ttype: 'DELETE_REUSABLE_BLOCK',\n\t\tid,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that a reusable block's title is\n * to be updated.\n *\n * @param {number} id    The ID of the reusable block to update.\n * @param {string} title The new title.\n *\n * @return {Object} Action object.\n */\nexport function updateReusableBlockTitle( id, title ) {\n\treturn {\n\t\ttype: 'UPDATE_REUSABLE_BLOCK_TITLE',\n\t\tid,\n\t\ttitle,\n\t};\n}\n\n/**\n * Returns an action object used to convert a reusable block into a static block.\n *\n * @param {string} clientId The client ID of the block to attach.\n *\n * @return {Object} Action object.\n */\nexport function convertBlockToStatic( clientId ) {\n\treturn {\n\t\ttype: 'CONVERT_BLOCK_TO_STATIC',\n\t\tclientId,\n\t};\n}\n\n/**\n * Returns an action object used to convert a static block into a reusable block.\n *\n * @param {string} clientIds The client IDs of the block to detach.\n *\n * @return {Object} Action object.\n */\nexport function convertBlockToReusable( clientIds ) {\n\treturn {\n\t\ttype: 'CONVERT_BLOCK_TO_REUSABLE',\n\t\tclientIds: castArray( clientIds ),\n\t};\n}\n/**\n * Returns an action object used in signalling that a new block of the default\n * type should be added to the block list.\n *\n * @param {?Object} attributes   Optional attributes of the block to assign.\n * @param {?string} rootClientId Optional root client ID of block list on which\n *                               to append.\n * @param {?number} index        Optional index where to insert the default block\n *\n * @return {Object} Action object\n */\nexport function insertDefaultBlock( attributes, rootClientId, index ) {\n\tconst block = createBlock( getDefaultBlockName(), attributes );\n\n\treturn insertBlock( block, index, rootClientId );\n}\n\n/**\n * Returns an action object that changes the nested settings of a given block.\n *\n * @param {string} clientId Client ID of the block whose nested setting are\n *                          being received.\n * @param {Object} settings Object with the new settings for the nested block.\n *\n * @return {Object} Action object\n */\nexport function updateBlockListSettings( clientId, settings ) {\n\treturn {\n\t\ttype: 'UPDATE_BLOCK_LIST_SETTINGS',\n\t\tclientId,\n\t\tsettings,\n\t};\n}\n\n/*\n * Returns an action object used in signalling that the editor settings have been updated.\n *\n * @param {Object} settings Updated settings\n *\n * @return {Object} Action object\n */\nexport function updateEditorSettings( settings ) {\n\treturn {\n\t\ttype: 'UPDATE_EDITOR_SETTINGS',\n\t\tsettings,\n\t};\n}\n\nexport function registerToken( name, settings ) {\n\treturn {\n\t\ttype: 'REGISTER_TOKEN',\n\t\tname,\n\t\tsettings,\n\t};\n}\n\nexport function unregisterToken( name ) {\n\treturn {\n\t\ttype: 'UNREGISTER_TOKEN',\n\t\tname,\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has enabled the publish sidebar.\n *\n * @return {Object} Action object\n */\nexport function enablePublishSidebar() {\n\treturn {\n\t\ttype: 'ENABLE_PUBLISH_SIDEBAR',\n\t};\n}\n\n/**\n * Returns an action object used in signalling that the user has disabled the publish sidebar.\n *\n * @return {Object} Action object\n */\nexport function disablePublishSidebar() {\n\treturn {\n\t\ttype: 'DISABLE_PUBLISH_SIDEBAR',\n\t};\n}\n","/**\n * External dependencies\n */\nimport { castArray } from 'lodash';\n\n/**\n * Insert one or multiple elements into a given position of an array.\n *\n * @param {Array}  array    Source array.\n * @param {*}      elements Elements to insert.\n * @param {number} index    Insert Position.\n *\n * @return {Array}          Result.\n */\nexport function insertAt( array, elements, index ) {\n\treturn [\n\t\t...array.slice( 0, index ),\n\t\t...castArray( elements ),\n\t\t...array.slice( index ),\n\t];\n}\n\n/**\n * Moves an element in an array.\n *\n * @param {Array}  array Source array.\n * @param {number} from  Source index.\n * @param {number} to    Destination index.\n * @param {number} count Number of elements to move.\n *\n * @return {Array}       Result.\n */\nexport function moveTo( array, from, to, count = 1 ) {\n\tconst withoutMovedElements = [ ...array ];\n\twithoutMovedElements.splice( from, count );\n\treturn insertAt(\n\t\twithoutMovedElements,\n\t\tarray.slice( from, from + count ),\n\t\tto,\n\t);\n}\n","/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\n\nexport const PREFERENCES_DEFAULTS = {\n\tinsertUsage: {},\n\tisPublishSidebarEnabled: true,\n};\n\n/**\n * The default editor settings\n *\n *  alignWide         boolean        Enable/Disable Wide/Full Alignments\n *  colors            Array          Palette colors\n *  fontSizes         Array          Available font sizes\n *  maxWidth          number         Max width to constraint resizing\n *  blockTypes        boolean|Array  Allowed block types\n *  hasFixedToolbar   boolean        Whether or not the editor toolbar is fixed\n *  focusMode         boolean        Whether the focus mode is enabled or not\n */\nexport const EDITOR_SETTINGS_DEFAULTS = {\n\talignWide: false,\n\tcolors: [\n\t\t{\n\t\t\tname: __( 'Pale pink' ),\n\t\t\tslug: 'pale-pink',\n\t\t\tcolor: '#f78da7',\n\t\t},\n\t\t{\tname: __( 'Vivid red' ),\n\t\t\tslug: 'vivid-red',\n\t\t\tcolor: '#cf2e2e',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid orange' ),\n\t\t\tslug: 'luminous-vivid-orange',\n\t\t\tcolor: '#ff6900',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Luminous vivid amber' ),\n\t\t\tslug: 'luminous-vivid-amber',\n\t\t\tcolor: '#fcb900',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Light green cyan' ),\n\t\t\tslug: 'light-green-cyan',\n\t\t\tcolor: '#7bdcb5',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid green cyan' ),\n\t\t\tslug: 'vivid-green-cyan',\n\t\t\tcolor: '#00d084',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Pale cyan blue' ),\n\t\t\tslug: 'pale-cyan-blue',\n\t\t\tcolor: '#8ed1fc',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Vivid cyan blue' ),\n\t\t\tslug: 'vivid-cyan-blue',\n\t\t\tcolor: '#0693e3',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Very light gray' ),\n\t\t\tslug: 'very-light-gray',\n\t\t\tcolor: '#eeeeee',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Cyan bluish gray' ),\n\t\t\tslug: 'cyan-bluish-gray',\n\t\t\tcolor: '#abb8c3',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Very dark gray' ),\n\t\t\tslug: 'very-dark-gray',\n\t\t\tcolor: '#313131',\n\t\t},\n\t],\n\n\tfontSizes: [\n\t\t{\n\t\t\tname: __( 'Small' ),\n\t\t\tsize: 13,\n\t\t\tslug: 'small',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Normal' ),\n\t\t\tsize: 16,\n\t\t\tslug: 'normal',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Medium' ),\n\t\t\tsize: 20,\n\t\t\tslug: 'medium',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Large' ),\n\t\t\tsize: 36,\n\t\t\tslug: 'large',\n\t\t},\n\t\t{\n\t\t\tname: __( 'Huge' ),\n\t\t\tsize: 48,\n\t\t\tslug: 'huge',\n\t\t},\n\t],\n\n\t// This is current max width of the block inner area\n\t// It's used to constraint image resizing and this value could be overridden later by themes\n\tmaxWidth: 580,\n\n\t// Allowed block types for the editor, defaulting to true (all supported).\n\tallowedBlockTypes: true,\n\n\t// Maximum upload size in bytes allowed for the site.\n\tmaxUploadFileSize: 0,\n\n\t// List of allowed mime types and file extensions.\n\tallowedMimeTypes: null,\n};\n","/**\n * External dependencies\n */\nimport { compact, last } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tparse,\n\tgetBlockType,\n\tswitchToBlockType,\n\tdoBlocksMatchTemplate,\n\tsynchronizeBlocksWithTemplate,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\nimport { speak } from '@wordpress/a11y';\n\n/**\n * Internal dependencies\n */\nimport {\n\tsetupEditorState,\n\treplaceBlocks,\n\tcreateWarningNotice,\n\tselectBlock,\n\tresetBlocks,\n\tsetTemplateValidity,\n\tinsertDefaultBlock,\n} from './actions';\nimport {\n\tgetBlock,\n\tgetBlockRootClientId,\n\tgetBlocks,\n\tgetBlockCount,\n\tgetPreviousBlockClientId,\n\tgetSelectedBlock,\n\tgetTemplate,\n\tgetTemplateLock,\n\tisValidTemplate,\n} from './selectors';\nimport {\n\tfetchReusableBlocks,\n\tsaveReusableBlocks,\n\tdeleteReusableBlocks,\n\tconvertBlockToReusable,\n\tconvertBlockToStatic,\n\treceiveReusableBlocks,\n} from './effects/reusable-blocks';\nimport {\n\trequestPostUpdate,\n\trequestPostUpdateSuccess,\n\trequestPostUpdateFailure,\n\ttrashPost,\n\ttrashPostFailure,\n\trefreshPost,\n\tAUTOSAVE_POST_NOTICE_ID,\n} from './effects/posts';\n\n/**\n * Block validity is a function of blocks state (at the point of a\n * reset) and the template setting. As a compromise to its placement\n * across distinct parts of state, it is implemented here as a side-\n * effect of the block reset action.\n *\n * @param {Object} action RESET_BLOCKS action.\n * @param {Object} store  Store instance.\n *\n * @return {?Object} New validity set action if validity has changed.\n */\nexport function validateBlocksToTemplate( action, store ) {\n\tconst state = store.getState();\n\tconst template = getTemplate( state );\n\tconst templateLock = getTemplateLock( state );\n\n\t// Unlocked templates are considered always valid because they act\n\t// as default values only.\n\tconst isBlocksValidToTemplate = (\n\t\t! template ||\n\t\ttemplateLock !== 'all' ||\n\t\tdoBlocksMatchTemplate( action.blocks, template )\n\t);\n\n\t// Update if validity has changed.\n\tif ( isBlocksValidToTemplate !== isValidTemplate( state ) ) {\n\t\treturn setTemplateValidity( isBlocksValidToTemplate );\n\t}\n}\n\n/**\n * Effect handler which will return a block select action to select the block\n * occurring before the selected block in the previous state, unless it is the\n * same block or the action includes a falsey `selectPrevious` option flag.\n *\n * @param {Object} action Action which had initiated the effect handler.\n * @param {Object} store  Store instance.\n *\n * @return {?Object} Block select action to select previous, if applicable.\n */\nexport function selectPreviousBlock( action, store ) {\n\t// if the action says previous block should not be selected don't do anything.\n\tif ( ! action.selectPrevious ) {\n\t\treturn;\n\t}\n\n\tconst firstRemovedBlockClientId = action.clientIds[ 0 ];\n\tconst state = store.getState();\n\tconst currentSelectedBlock = getSelectedBlock( state );\n\n\t// recreate the state before the block was removed.\n\tconst previousState = { ...state, editor: { present: last( state.editor.past ) } };\n\n\t// rootClientId of the removed block.\n\tconst rootClientId = getBlockRootClientId( previousState, firstRemovedBlockClientId );\n\n\t// Client ID of the block that was before the removed block or the\n\t// rootClientId if the removed block was first amongst its siblings.\n\tconst blockClientIdToSelect = getPreviousBlockClientId( previousState, firstRemovedBlockClientId ) || rootClientId;\n\n\t// Dispatch select block action if the currently selected block\n\t// is not already the block we want to be selected.\n\tif ( blockClientIdToSelect !== currentSelectedBlock ) {\n\t\treturn selectBlock( blockClientIdToSelect, -1 );\n\t}\n}\n\n/**\n * Effect handler which will return a default block insertion action if there\n * are no other blocks at the root of the editor. This is expected to be used\n * in actions which may result in no blocks remaining in the editor (removal,\n * replacement, etc).\n *\n * @param {Object} action Action which had initiated the effect handler.\n * @param {Object} store  Store instance.\n *\n * @return {?Object} Default block insert action, if no other blocks exist.\n */\nexport function ensureDefaultBlock( action, store ) {\n\tif ( ! getBlockCount( store.getState() ) ) {\n\t\treturn insertDefaultBlock();\n\t}\n}\n\nexport default {\n\tREQUEST_POST_UPDATE: ( action, store ) => {\n\t\trequestPostUpdate( action, store );\n\t},\n\tREQUEST_POST_UPDATE_SUCCESS: requestPostUpdateSuccess,\n\tREQUEST_POST_UPDATE_FAILURE: requestPostUpdateFailure,\n\tTRASH_POST: ( action, store ) => {\n\t\ttrashPost( action, store );\n\t},\n\tTRASH_POST_FAILURE: trashPostFailure,\n\tREFRESH_POST: ( action, store ) => {\n\t\trefreshPost( action, store );\n\t},\n\tMERGE_BLOCKS( action, store ) {\n\t\tconst { dispatch } = store;\n\t\tconst state = store.getState();\n\t\tconst [ firstBlockClientId, secondBlockClientId ] = action.blocks;\n\t\tconst blockA = getBlock( state, firstBlockClientId );\n\t\tconst blockB = getBlock( state, secondBlockClientId );\n\t\tconst blockType = getBlockType( blockA.name );\n\n\t\t// Only focus the previous block if it's not mergeable\n\t\tif ( ! blockType.merge ) {\n\t\t\tdispatch( selectBlock( blockA.clientId ) );\n\t\t\treturn;\n\t\t}\n\n\t\t// We can only merge blocks with similar types\n\t\t// thus, we transform the block to merge first\n\t\tconst blocksWithTheSameType = blockA.name === blockB.name ?\n\t\t\t[ blockB ] :\n\t\t\tswitchToBlockType( blockB, blockA.name );\n\n\t\t// If the block types can not match, do nothing\n\t\tif ( ! blocksWithTheSameType || ! blocksWithTheSameType.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Calling the merge to update the attributes and remove the block to be merged\n\t\tconst updatedAttributes = blockType.merge(\n\t\t\tblockA.attributes,\n\t\t\tblocksWithTheSameType[ 0 ].attributes\n\t\t);\n\n\t\tdispatch( selectBlock( blockA.clientId, -1 ) );\n\t\tdispatch( replaceBlocks(\n\t\t\t[ blockA.clientId, blockB.clientId ],\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t...blockA,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\t...blockA.attributes,\n\t\t\t\t\t\t...updatedAttributes,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...blocksWithTheSameType.slice( 1 ),\n\t\t\t]\n\t\t) );\n\t},\n\tSETUP_EDITOR( action, store ) {\n\t\tconst { post, autosave } = action;\n\t\tconst state = store.getState();\n\n\t\t// Parse content as blocks\n\t\tlet blocks = parse( post.content.raw );\n\n\t\t// Apply a template for new posts only, if exists.\n\t\tconst isNewPost = post.status === 'auto-draft';\n\t\tconst template = getTemplate( state );\n\t\tif ( isNewPost && template ) {\n\t\t\tblocks = synchronizeBlocksWithTemplate( blocks, template );\n\t\t}\n\n\t\t// Include auto draft title in edits while not flagging post as dirty\n\t\tconst edits = {};\n\t\tif ( isNewPost ) {\n\t\t\tedits.title = post.title.raw;\n\t\t}\n\n\t\t// Check the auto-save status\n\t\tlet autosaveAction;\n\t\tif ( autosave ) {\n\t\t\tconst noticeMessage = __( 'There is an autosave of this post that is more recent than the version below.' );\n\t\t\tautosaveAction = createWarningNotice(\n\t\t\t\t<p>\n\t\t\t\t\t{ noticeMessage }\n\t\t\t\t\t{ ' ' }\n\t\t\t\t\t<a href={ autosave.editLink }>{ __( 'View the autosave' ) }</a>\n\t\t\t\t</p>,\n\t\t\t\t{\n\t\t\t\t\tid: AUTOSAVE_POST_NOTICE_ID,\n\t\t\t\t\tspokenMessage: noticeMessage,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tconst setupAction = setupEditorState( post, blocks, edits );\n\n\t\treturn compact( [\n\t\t\tsetupAction,\n\t\t\tautosaveAction,\n\n\t\t\t// TODO: This is temporary, necessary only so long as editor setup\n\t\t\t// is a separate action from block resetting.\n\t\t\t//\n\t\t\t// See: https://github.com/WordPress/gutenberg/pull/9403\n\t\t\tvalidateBlocksToTemplate( setupAction, store ),\n\t\t] );\n\t},\n\tRESET_BLOCKS: [\n\t\tvalidateBlocksToTemplate,\n\t],\n\tSYNCHRONIZE_TEMPLATE( action, { getState } ) {\n\t\tconst state = getState();\n\t\tconst blocks = getBlocks( state );\n\t\tconst template = getTemplate( state );\n\t\tconst updatedBlockList = synchronizeBlocksWithTemplate( blocks, template );\n\n\t\treturn resetBlocks( updatedBlockList );\n\t},\n\tFETCH_REUSABLE_BLOCKS: ( action, store ) => {\n\t\tfetchReusableBlocks( action, store );\n\t},\n\tSAVE_REUSABLE_BLOCK: ( action, store ) => {\n\t\tsaveReusableBlocks( action, store );\n\t},\n\tDELETE_REUSABLE_BLOCK: ( action, store ) => {\n\t\tdeleteReusableBlocks( action, store );\n\t},\n\tRECEIVE_REUSABLE_BLOCKS: receiveReusableBlocks,\n\tCONVERT_BLOCK_TO_STATIC: convertBlockToStatic,\n\tCONVERT_BLOCK_TO_REUSABLE: convertBlockToReusable,\n\tCREATE_NOTICE( { notice: { content, spokenMessage } } ) {\n\t\tconst message = spokenMessage || content;\n\t\tspeak( message, 'assertive' );\n\t},\n\tREMOVE_BLOCKS: [\n\t\tselectPreviousBlock,\n\t\tensureDefaultBlock,\n\t],\n\tREPLACE_BLOCKS: [\n\t\tensureDefaultBlock,\n\t],\n};\n","/**\n * External dependencies\n */\nimport { BEGIN, COMMIT, REVERT } from 'redux-optimist';\nimport { pick, includes } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { __ } from '@wordpress/i18n';\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport {\n\tresetAutosave,\n\tresetPost,\n\tupdatePost,\n\tremoveNotice,\n\tcreateSuccessNotice,\n\tcreateErrorNotice,\n} from '../actions';\nimport {\n\tgetCurrentPost,\n\tgetPostEdits,\n\tgetEditedPostContent,\n\tgetAutosave,\n\tgetCurrentPostType,\n\tisEditedPostAutosaveable,\n\tisEditedPostSaveable,\n\tisEditedPostNew,\n\tPOST_UPDATE_TRANSACTION_ID,\n} from '../selectors';\nimport { resolveSelector } from './utils';\n\n/**\n * Module Constants\n */\nconst SAVE_POST_NOTICE_ID = 'SAVE_POST_NOTICE_ID';\nexport const AUTOSAVE_POST_NOTICE_ID = 'AUTOSAVE_POST_NOTICE_ID';\nconst TRASH_POST_NOTICE_ID = 'TRASH_POST_NOTICE_ID';\n\n/**\n * Request Post Update Effect handler\n *\n * @param {Object} action  the fetchReusableBlocks action object.\n * @param {Object} store   Redux Store.\n */\nexport const requestPostUpdate = async ( action, store ) => {\n\tconst { dispatch, getState } = store;\n\tconst state = getState();\n\tconst post = getCurrentPost( state );\n\tconst isAutosave = !! action.options.autosave;\n\n\t// Prevent save if not saveable.\n\tconst isSaveable = isAutosave ? isEditedPostAutosaveable : isEditedPostSaveable;\n\n\tif ( ! isSaveable( state ) ) {\n\t\treturn;\n\t}\n\n\tlet edits = getPostEdits( state );\n\tif ( isAutosave ) {\n\t\tedits = pick( edits, [ 'title', 'content', 'excerpt' ] );\n\t}\n\n\t// New posts (with auto-draft status) must be explicitly assigned draft\n\t// status if there is not already a status assigned in edits (publish).\n\t// Otherwise, they are wrongly left as auto-draft. Status is not always\n\t// respected for autosaves, so it cannot simply be included in the pick\n\t// above. This behavior relies on an assumption that an auto-draft post\n\t// would never be saved by anyone other than the owner of the post, per\n\t// logic within autosaves REST controller to save status field only for\n\t// draft/auto-draft by current user.\n\t//\n\t// See: https://core.trac.wordpress.org/ticket/43316#comment:88\n\t// See: https://core.trac.wordpress.org/ticket/43316#comment:89\n\tif ( isEditedPostNew( state ) ) {\n\t\tedits = { status: 'draft', ...edits };\n\t}\n\n\tlet toSend = {\n\t\t...edits,\n\t\tcontent: getEditedPostContent( state ),\n\t\tid: post.id,\n\t};\n\n\tconst postType = await resolveSelector( 'core', 'getPostType', getCurrentPostType( state ) );\n\n\tdispatch( {\n\t\ttype: 'REQUEST_POST_UPDATE_START',\n\t\toptimist: { type: BEGIN, id: POST_UPDATE_TRANSACTION_ID },\n\t\tisAutosave,\n\t} );\n\n\t// Optimistically apply updates under the assumption that the post\n\t// will be updated. See below logic in success resolution for revert\n\t// if the autosave is applied as a revision.\n\tdispatch( {\n\t\t...updatePost( toSend ),\n\t\toptimist: { id: POST_UPDATE_TRANSACTION_ID },\n\t} );\n\n\tlet request;\n\tif ( isAutosave ) {\n\t\t// Ensure autosaves contain all expected fields, using autosave or\n\t\t// post values as fallback if not otherwise included in edits.\n\t\ttoSend = {\n\t\t\t...pick( post, [ 'title', 'content', 'excerpt' ] ),\n\t\t\t...getAutosave( state ),\n\t\t\t...toSend,\n\t\t\tparent: post.id,\n\t\t};\n\n\t\trequest = apiFetch( {\n\t\t\tpath: `/wp/v2/${ postType.rest_base }/${ post.id }/autosaves`,\n\t\t\tmethod: 'POST',\n\t\t\tdata: toSend,\n\t\t} );\n\t} else {\n\t\tdispatch( removeNotice( SAVE_POST_NOTICE_ID ) );\n\t\tdispatch( removeNotice( AUTOSAVE_POST_NOTICE_ID ) );\n\n\t\trequest = apiFetch( {\n\t\t\tpath: `/wp/v2/${ postType.rest_base }/${ post.id }`,\n\t\t\tmethod: 'PUT',\n\t\t\tdata: toSend,\n\t\t} );\n\t}\n\n\ttry {\n\t\tconst newPost = await request;\n\t\tconst reset = isAutosave ? resetAutosave : resetPost;\n\t\tdispatch( reset( newPost ) );\n\n\t\t// An autosave may be processed by the server as a regular save\n\t\t// when its update is requested by the author and the post was\n\t\t// draft or auto-draft.\n\t\tconst isRevision = newPost.id !== post.id;\n\n\t\tdispatch( {\n\t\t\ttype: 'REQUEST_POST_UPDATE_SUCCESS',\n\t\t\tpreviousPost: post,\n\t\t\tpost: newPost,\n\t\t\toptimist: {\n\t\t\t\t// Note: REVERT is not a failure case here. Rather, it\n\t\t\t\t// is simply reversing the assumption that the updates\n\t\t\t\t// were applied to the post proper, such that the post\n\t\t\t\t// treated as having unsaved changes.\n\t\t\t\ttype: isRevision ? REVERT : COMMIT,\n\t\t\t\tid: POST_UPDATE_TRANSACTION_ID,\n\t\t\t},\n\t\t\tisAutosave,\n\t\t\tpostType,\n\t\t} );\n\t} catch ( error ) {\n\t\tdispatch( {\n\t\t\ttype: 'REQUEST_POST_UPDATE_FAILURE',\n\t\t\toptimist: { type: REVERT, id: POST_UPDATE_TRANSACTION_ID },\n\t\t\tpost,\n\t\t\tedits,\n\t\t\terror,\n\t\t} );\n\t}\n};\n\n/**\n * Request Post Update Success Effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const requestPostUpdateSuccess = ( action, store ) => {\n\tconst { previousPost, post, isAutosave, postType } = action;\n\tconst { dispatch, getState } = store;\n\n\t// TEMPORARY: If edits remain after a save completes, the user must be\n\t// prompted about unsaved changes. This should be refactored as part of\n\t// the `isEditedPostDirty` selector instead.\n\t//\n\t// See: https://github.com/WordPress/gutenberg/issues/7409\n\tif ( Object.keys( getPostEdits( getState() ) ).length ) {\n\t\tdispatch( { type: 'DIRTY_ARTIFICIALLY' } );\n\t}\n\n\t// Autosaves are neither shown a notice nor redirected.\n\tif ( isAutosave ) {\n\t\treturn;\n\t}\n\n\tconst publishStatus = [ 'publish', 'private', 'future' ];\n\tconst isPublished = includes( publishStatus, previousPost.status );\n\tconst willPublish = includes( publishStatus, post.status );\n\n\tlet noticeMessage;\n\tlet shouldShowLink = true;\n\n\tif ( ! isPublished && ! willPublish ) {\n\t\t// If saving a non-published post, don't show notice.\n\t\tnoticeMessage = null;\n\t} else if ( isPublished && ! willPublish ) {\n\t\t// If undoing publish status, show specific notice\n\t\tnoticeMessage = postType.labels.item_reverted_to_draft;\n\t\tshouldShowLink = false;\n\t} else if ( ! isPublished && willPublish ) {\n\t\t// If publishing or scheduling a post, show the corresponding\n\t\t// publish message\n\t\tnoticeMessage = {\n\t\t\tpublish: postType.labels.item_published,\n\t\t\tprivate: postType.labels.item_published_privately,\n\t\t\tfuture: postType.labels.item_scheduled,\n\t\t}[ post.status ];\n\t} else {\n\t\t// Generic fallback notice\n\t\tnoticeMessage = postType.labels.item_updated;\n\t}\n\n\tif ( noticeMessage ) {\n\t\tdispatch( createSuccessNotice(\n\t\t\t<p>\n\t\t\t\t{ noticeMessage }\n\t\t\t\t{ ' ' }\n\t\t\t\t{ shouldShowLink && <a href={ post.link }>{ postType.labels.view_item }</a> }\n\t\t\t</p>,\n\t\t\t{ id: SAVE_POST_NOTICE_ID, spokenMessage: noticeMessage }\n\t\t) );\n\t}\n};\n\n/**\n * Request Post Update Failure Effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const requestPostUpdateFailure = ( action, store ) => {\n\tconst { post, edits, error } = action;\n\n\tif ( error && 'rest_autosave_no_changes' === error.code ) {\n\t\t// Autosave requested a new autosave, but there were no changes. This shouldn't\n\t\t// result in an error notice for the user.\n\t\treturn;\n\t}\n\n\tconst { dispatch } = store;\n\n\tconst publishStatus = [ 'publish', 'private', 'future' ];\n\tconst isPublished = publishStatus.indexOf( post.status ) !== -1;\n\t// If the post was being published, we show the corresponding publish error message\n\t// Unless we publish an \"updating failed\" message\n\tconst messages = {\n\t\tpublish: __( 'Publishing failed' ),\n\t\tprivate: __( 'Publishing failed' ),\n\t\tfuture: __( 'Scheduling failed' ),\n\t};\n\tconst noticeMessage = ! isPublished && publishStatus.indexOf( edits.status ) !== -1 ?\n\t\tmessages[ edits.status ] :\n\t\t__( 'Updating failed' );\n\n\tconst cloudflareDetailsLink = addQueryArgs(\n\t\t'post.php',\n\t\t{\n\t\t\tpost: post.id,\n\t\t\taction: 'edit',\n\t\t\t'classic-editor': '',\n\t\t\t'cloudflare-error': '',\n\t\t} );\n\n\tconst cloudflaredMessage = error && 'cloudflare_error' === error.code ?\n\t\t<p>\n\t\t\t{ noticeMessage }\n\t\t\t<br />\n\t\t\t{ __( 'Cloudflare is blocking REST API requests.' ) }\n\t\t\t{ ' ' }\n\t\t\t<a href={ cloudflareDetailsLink }>{ __( 'Learn More' ) } </a>\n\t\t</p> :\n\t\tnoticeMessage;\n\n\tdispatch( createErrorNotice( cloudflaredMessage, { id: SAVE_POST_NOTICE_ID } ) );\n};\n\n/**\n * Trash Post Effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const trashPost = async ( action, store ) => {\n\tconst { dispatch, getState } = store;\n\tconst { postId } = action;\n\tconst postTypeSlug = getCurrentPostType( getState() );\n\tconst postType = await resolveSelector( 'core', 'getPostType', postTypeSlug );\n\n\tdispatch( removeNotice( TRASH_POST_NOTICE_ID ) );\n\ttry {\n\t\tawait apiFetch( { path: `/wp/v2/${ postType.rest_base }/${ postId }`, method: 'DELETE' } );\n\t\tconst post = getCurrentPost( getState() );\n\n\t\t// TODO: This should be an updatePost action (updating subsets of post properties),\n\t\t// But right now editPost is tied with change detection.\n\t\tdispatch( resetPost( { ...post, status: 'trash' } ) );\n\t} catch ( error ) {\n\t\tdispatch( {\n\t\t\t...action,\n\t\t\ttype: 'TRASH_POST_FAILURE',\n\t\t\terror,\n\t\t} );\n\t}\n};\n\n/**\n * Trash Post Failure Effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const trashPostFailure = ( action, store ) => {\n\tconst message = action.error.message && action.error.code !== 'unknown_error' ? action.error.message : __( 'Trashing failed' );\n\tstore.dispatch( createErrorNotice( message, { id: TRASH_POST_NOTICE_ID } ) );\n};\n\n/**\n * Refresh Post Effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const refreshPost = async ( action, store ) => {\n\tconst { dispatch, getState } = store;\n\n\tconst state = getState();\n\tconst post = getCurrentPost( state );\n\tconst postTypeSlug = getCurrentPostType( getState() );\n\tconst postType = await resolveSelector( 'core', 'getPostType', postTypeSlug );\n\tconst newPost = await apiFetch( {\n\t\tpath: `/wp/v2/${ postType.rest_base }/${ post.id }`,\n\t\tdata: { context: 'edit' },\n\t} );\n\tdispatch( resetPost( newPost ) );\n};\n","/**\n * External dependencies\n */\nimport { castArray, map, uniqueId } from 'lodash';\nimport { BEGIN, COMMIT, REVERT } from 'redux-optimist';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport {\n\tparse,\n\tserialize,\n\tcreateBlock,\n\tisReusableBlock,\n\tcloneBlock,\n} from '@wordpress/blocks';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { resolveSelector } from './utils';\nimport {\n\treceiveReusableBlocks as receiveReusableBlocksAction,\n\tcreateSuccessNotice,\n\tcreateErrorNotice,\n\tremoveBlocks,\n\treplaceBlocks,\n\treceiveBlocks,\n\tsaveReusableBlock,\n} from '../actions';\nimport {\n\tgetReusableBlock,\n\tgetBlock,\n\tgetBlocks,\n\tgetBlocksByClientId,\n} from '../selectors';\nimport { getPostRawValue } from '../reducer';\n\n/**\n * Module Constants\n */\nconst REUSABLE_BLOCK_NOTICE_ID = 'REUSABLE_BLOCK_NOTICE_ID';\n\n/**\n * Fetch Reusable Blocks Effect Handler.\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const fetchReusableBlocks = async ( action, store ) => {\n\tconst { id } = action;\n\tconst { dispatch } = store;\n\n\t// TODO: these are potentially undefined, this fix is in place\n\t// until there is a filter to not use reusable blocks if undefined\n\tconst postType = await resolveSelector( 'core', 'getPostType', 'wp_block' );\n\tif ( ! postType ) {\n\t\treturn;\n\t}\n\n\tlet result;\n\tif ( id ) {\n\t\tresult = apiFetch( { path: `/wp/v2/${ postType.rest_base }/${ id }?context=edit` } );\n\t} else {\n\t\tresult = apiFetch( { path: `/wp/v2/${ postType.rest_base }?per_page=-1&context=edit` } );\n\t}\n\n\ttry {\n\t\tconst reusableBlockOrBlocks = await result;\n\t\tdispatch( receiveReusableBlocksAction( map(\n\t\t\tcastArray( reusableBlockOrBlocks ),\n\t\t\t( post ) => {\n\t\t\t\tconst parsedBlocks = parse( post.content.raw );\n\t\t\t\treturn {\n\t\t\t\t\treusableBlock: {\n\t\t\t\t\t\tid: post.id,\n\t\t\t\t\t\ttitle: getPostRawValue( post.title ),\n\t\t\t\t\t},\n\t\t\t\t\tparsedBlock: parsedBlocks.length === 1 ?\n\t\t\t\t\t\tparsedBlocks[ 0 ] :\n\t\t\t\t\t\tcreateBlock( 'core/template', {}, parsedBlocks ),\n\t\t\t\t};\n\t\t\t}\n\t\t) ) );\n\n\t\tdispatch( {\n\t\t\ttype: 'FETCH_REUSABLE_BLOCKS_SUCCESS',\n\t\t\tid,\n\t\t} );\n\t} catch ( error ) {\n\t\tdispatch( {\n\t\t\ttype: 'FETCH_REUSABLE_BLOCKS_FAILURE',\n\t\t\tid,\n\t\t\terror,\n\t\t} );\n\t}\n};\n\n/**\n * Save Reusable Blocks Effect Handler.\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const saveReusableBlocks = async ( action, store ) => {\n\t// TODO: these are potentially undefined, this fix is in place\n\t// until there is a filter to not use reusable blocks if undefined\n\tconst postType = await resolveSelector( 'core', 'getPostType', 'wp_block' );\n\tif ( ! postType ) {\n\t\treturn;\n\t}\n\n\tconst { id } = action;\n\tconst { dispatch } = store;\n\tconst state = store.getState();\n\tconst { clientId, title, isTemporary } = getReusableBlock( state, id );\n\tconst reusableBlock = getBlock( state, clientId );\n\tconst content = serialize( reusableBlock.name === 'core/template' ? reusableBlock.innerBlocks : reusableBlock );\n\n\tconst data = isTemporary ? { title, content, status: 'publish' } : { id, title, content, status: 'publish' };\n\tconst path = isTemporary ? `/wp/v2/${ postType.rest_base }` : `/wp/v2/${ postType.rest_base }/${ id }`;\n\tconst method = isTemporary ? 'POST' : 'PUT';\n\n\ttry {\n\t\tconst updatedReusableBlock = await apiFetch( { path, data, method } );\n\t\tdispatch( {\n\t\t\ttype: 'SAVE_REUSABLE_BLOCK_SUCCESS',\n\t\t\tupdatedId: updatedReusableBlock.id,\n\t\t\tid,\n\t\t} );\n\t\tconst message = isTemporary ? __( 'Block created.' ) : __( 'Block updated.' );\n\t\tdispatch( createSuccessNotice( message, { id: REUSABLE_BLOCK_NOTICE_ID } ) );\n\t} catch ( error ) {\n\t\tdispatch( { type: 'SAVE_REUSABLE_BLOCK_FAILURE', id } );\n\t\tdispatch( createErrorNotice( error.message, {\n\t\t\tid: REUSABLE_BLOCK_NOTICE_ID,\n\t\t\tspokenMessage: error.message,\n\t\t} ) );\n\t}\n};\n\n/**\n * Delete Reusable Blocks Effect Handler.\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const deleteReusableBlocks = async ( action, store ) => {\n\t// TODO: these are potentially undefined, this fix is in place\n\t// until there is a filter to not use reusable blocks if undefined\n\tconst postType = await resolveSelector( 'core', 'getPostType', 'wp_block' );\n\tif ( ! postType ) {\n\t\treturn;\n\t}\n\n\tconst { id } = action;\n\tconst { getState, dispatch } = store;\n\n\t// Don't allow a reusable block with a temporary ID to be deleted\n\tconst reusableBlock = getReusableBlock( getState(), id );\n\tif ( ! reusableBlock || reusableBlock.isTemporary ) {\n\t\treturn;\n\t}\n\n\t// Remove any other blocks that reference this reusable block\n\tconst allBlocks = getBlocks( getState() );\n\tconst associatedBlocks = allBlocks.filter( ( block ) => isReusableBlock( block ) && block.attributes.ref === id );\n\tconst associatedBlockClientIds = associatedBlocks.map( ( block ) => block.clientId );\n\n\tconst transactionId = uniqueId();\n\n\tdispatch( {\n\t\ttype: 'REMOVE_REUSABLE_BLOCK',\n\t\tid,\n\t\toptimist: { type: BEGIN, id: transactionId },\n\t} );\n\n\t// Remove the parsed block.\n\tdispatch( removeBlocks( [\n\t\t...associatedBlockClientIds,\n\t\treusableBlock.clientId,\n\t] ) );\n\n\ttry {\n\t\tawait apiFetch( {\n\t\t\tpath: `/wp/v2/${ postType.rest_base }/${ id }`,\n\t\t\tmethod: 'DELETE',\n\t\t} );\n\t\tdispatch( {\n\t\t\ttype: 'DELETE_REUSABLE_BLOCK_SUCCESS',\n\t\t\tid,\n\t\t\toptimist: { type: COMMIT, id: transactionId },\n\t\t} );\n\t\tconst message = __( 'Block deleted.' );\n\t\tdispatch( createSuccessNotice( message, { id: REUSABLE_BLOCK_NOTICE_ID } ) );\n\t} catch ( error ) {\n\t\tdispatch( {\n\t\t\ttype: 'DELETE_REUSABLE_BLOCK_FAILURE',\n\t\t\tid,\n\t\t\toptimist: { type: REVERT, id: transactionId },\n\t\t} );\n\t\tdispatch( createErrorNotice( error.message, {\n\t\t\tid: REUSABLE_BLOCK_NOTICE_ID,\n\t\t\tspokenMessage: error.message,\n\t\t} ) );\n\t}\n};\n\n/**\n * Receive Reusable Blocks Effect Handler.\n *\n * @param {Object} action  action object.\n * @return {Object} receive blocks action\n */\nexport const receiveReusableBlocks = ( action ) => {\n\treturn receiveBlocks( map( action.results, 'parsedBlock' ) );\n};\n\n/**\n * Convert a reusable block to a static block effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const convertBlockToStatic = ( action, store ) => {\n\tconst state = store.getState();\n\tconst oldBlock = getBlock( state, action.clientId );\n\tconst reusableBlock = getReusableBlock( state, oldBlock.attributes.ref );\n\tconst referencedBlock = getBlock( state, reusableBlock.clientId );\n\tlet newBlocks;\n\tif ( referencedBlock.name === 'core/template' ) {\n\t\tnewBlocks = referencedBlock.innerBlocks.map( ( innerBlock ) => cloneBlock( innerBlock ) );\n\t} else {\n\t\tnewBlocks = [ createBlock( referencedBlock.name, referencedBlock.attributes ) ];\n\t}\n\tstore.dispatch( replaceBlocks( oldBlock.clientId, newBlocks ) );\n};\n\n/**\n * Convert a static block to a reusable block effect handler\n *\n * @param {Object} action  action object.\n * @param {Object} store   Redux Store.\n */\nexport const convertBlockToReusable = ( action, store ) => {\n\tconst { getState, dispatch } = store;\n\tlet parsedBlock;\n\tif ( action.clientIds.length === 1 ) {\n\t\tparsedBlock = getBlock( getState(), action.clientIds[ 0 ] );\n\t} else {\n\t\tparsedBlock = createBlock(\n\t\t\t'core/template',\n\t\t\t{},\n\t\t\tgetBlocksByClientId( getState(), action.clientIds )\n\t\t);\n\n\t\t// This shouldn't be necessary but at the moment\n\t\t// we expect the content of the shared blocks to live in the blocks state.\n\t\tdispatch( receiveBlocks( [ parsedBlock ] ) );\n\t}\n\n\tconst reusableBlock = {\n\t\tid: uniqueId( 'reusable' ),\n\t\tclientId: parsedBlock.clientId,\n\t\ttitle: __( 'Untitled Reusable Block' ),\n\t};\n\n\tdispatch( receiveReusableBlocksAction( [ {\n\t\treusableBlock,\n\t\tparsedBlock,\n\t} ] ) );\n\n\tdispatch( saveReusableBlock( reusableBlock.id ) );\n\n\tdispatch( replaceBlocks(\n\t\taction.clientIds,\n\t\tcreateBlock( 'core/block', {\n\t\t\tref: reusableBlock.id,\n\t\t\tlayout: parsedBlock.attributes.layout,\n\t\t} )\n\t) );\n\n\t// Re-add the original block to the store, since replaceBlock() will have removed it\n\tdispatch( receiveBlocks( [ parsedBlock ] ) );\n};\n","/**\n * WordPress dependencies\n */\nimport { select, subscribe } from '@wordpress/data';\n\n/**\n * Waits for the resolution of a selector before returning the selector's value.\n *\n * @param {string} namespace    Store namespace.\n * @param {string} selectorName Selector name.\n * @param {Array} args          Selector args.\n *\n * @return {Promise} Selector result.\n */\nexport function resolveSelector( namespace, selectorName, ...args ) {\n\treturn new Promise( ( resolve ) => {\n\t\tconst hasFinished = () => select( 'core/data' ).hasFinishedResolution( namespace, selectorName, args );\n\t\tconst getResult = () => select( namespace )[ selectorName ].apply( null, args );\n\n\t\t// We need to trigger the selector (to trigger the resolver)\n\t\tconst result = getResult();\n\t\tif ( hasFinished() ) {\n\t\t\treturn resolve( result );\n\t\t}\n\n\t\tconst unsubscribe = subscribe( () => {\n\t\t\tif ( hasFinished() ) {\n\t\t\t\tunsubscribe();\n\t\t\t\tresolve( getResult() );\n\t\t\t}\n\t\t} );\n\t} );\n}\n","/**\n * External Dependencies\n */\nimport { forOwn } from 'lodash';\n\n/**\n * WordPress Dependencies\n */\nimport { registerStore } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport reducer from './reducer';\nimport applyMiddlewares from './middlewares';\nimport * as selectors from './selectors';\nimport * as actions from './actions';\nimport * as tokens from '../components/rich-text/core-tokens';\nimport { validateTokenSettings } from '../components/rich-text/tokens';\n\n/**\n * Module Constants\n */\nconst MODULE_KEY = 'core/editor';\n\nconst store = registerStore( MODULE_KEY, {\n\treducer,\n\tselectors,\n\tactions,\n\tpersist: [ 'preferences' ],\n} );\napplyMiddlewares( store );\n\nforOwn( tokens, ( { name, settings } ) => {\n\tsettings = validateTokenSettings( name, settings, store.getState() );\n\n\tif ( settings ) {\n\t\tstore.dispatch( actions.registerToken( name, settings ) );\n\t}\n} );\n\nexport default store;\n","/**\n * External dependencies\n */\nimport refx from 'refx';\nimport multi from 'redux-multi';\nimport { flowRight } from 'lodash';\n\n/**\n * Internal dependencies\n */\nimport effects from './effects';\n\n/**\n * Applies the custom middlewares used specifically in the editor module.\n *\n * @param {Object} store Store Object.\n *\n * @return {Object} Update Store Object.\n */\nfunction applyMiddlewares( store ) {\n\tconst middlewares = [\n\t\trefx( effects ),\n\t\tmulti,\n\t];\n\n\tlet enhancedDispatch = () => {\n\t\tthrow new Error(\n\t\t\t'Dispatching while constructing your middleware is not allowed. ' +\n\t\t\t'Other middleware would not be applied to this dispatch.'\n\t\t);\n\t};\n\tlet chain = [];\n\n\tconst middlewareAPI = {\n\t\tgetState: store.getState,\n\t\tdispatch: ( ...args ) => enhancedDispatch( ...args ),\n\t};\n\tchain = middlewares.map( ( middleware ) => middleware( middlewareAPI ) );\n\tenhancedDispatch = flowRight( ...chain )( store.dispatch );\n\n\tstore.dispatch = enhancedDispatch;\n\treturn store;\n}\n\nexport default applyMiddlewares;\n","/**\n * External dependencies\n */\nimport optimist from 'redux-optimist';\nimport {\n\tflow,\n\treduce,\n\tfirst,\n\tlast,\n\tomit,\n\twithout,\n\tmapValues,\n\tfindIndex,\n\treject,\n\tomitBy,\n\tkeys,\n\tisEqual,\n\toverSome,\n\tget,\n} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { isReusableBlock } from '@wordpress/blocks';\nimport { combineReducers } from '@wordpress/data';\n\n/**\n * Internal dependencies\n */\nimport withHistory from '../utils/with-history';\nimport withChangeDetection from '../utils/with-change-detection';\nimport { PREFERENCES_DEFAULTS, EDITOR_SETTINGS_DEFAULTS } from './defaults';\nimport { insertAt, moveTo } from './array';\n\n/**\n * Returns a post attribute value, flattening nested rendered content using its\n * raw value in place of its original object form.\n *\n * @param {*} value Original value.\n *\n * @return {*} Raw value.\n */\nexport function getPostRawValue( value ) {\n\tif ( value && 'object' === typeof value && 'raw' in value ) {\n\t\treturn value.raw;\n\t}\n\n\treturn value;\n}\n\n/**\n * Given an array of blocks, returns an object where each key is a nesting\n * context, the value of which is an array of block client IDs existing within\n * that nesting context.\n *\n * @param {Array}   blocks       Blocks to map.\n * @param {?string} rootClientId Assumed root client ID.\n *\n * @return {Object} Block order map object.\n */\nfunction mapBlockOrder( blocks, rootClientId = '' ) {\n\tconst result = { [ rootClientId ]: [] };\n\n\tblocks.forEach( ( block ) => {\n\t\tconst { clientId, innerBlocks } = block;\n\n\t\tresult[ rootClientId ].push( clientId );\n\n\t\tObject.assign( result, mapBlockOrder( innerBlocks, clientId ) );\n\t} );\n\n\treturn result;\n}\n\n/**\n * Given an array of blocks, returns an object containing all blocks, recursing\n * into inner blocks. Keys correspond to the block client ID, the value of\n * which is the block object.\n *\n * @param {Array} blocks Blocks to flatten.\n *\n * @return {Object} Flattened blocks object.\n */\nfunction getFlattenedBlocks( blocks ) {\n\tconst flattenedBlocks = {};\n\n\tconst stack = [ ...blocks ];\n\twhile ( stack.length ) {\n\t\t// `innerBlocks` is redundant data which can fall out of sync, since\n\t\t// this is reflected in `blockOrder`, so exclude from appended block.\n\t\tconst { innerBlocks, ...block } = stack.shift();\n\n\t\tstack.push( ...innerBlocks );\n\n\t\tflattenedBlocks[ block.clientId ] = block;\n\t}\n\n\treturn flattenedBlocks;\n}\n\n/**\n * Returns true if the two object arguments have the same keys, or false\n * otherwise.\n *\n * @param {Object} a First object.\n * @param {Object} b Second object.\n *\n * @return {boolean} Whether the two objects have the same keys.\n */\nexport function hasSameKeys( a, b ) {\n\treturn isEqual( keys( a ), keys( b ) );\n}\n\n/**\n * Returns true if, given the currently dispatching action and the previously\n * dispatched action, the two actions are updating the same block attribute, or\n * false otherwise.\n *\n * @param {Object} action         Currently dispatching action.\n * @param {Object} previousAction Previously dispatched action.\n *\n * @return {boolean} Whether actions are updating the same block attribute.\n */\nexport function isUpdatingSameBlockAttribute( action, previousAction ) {\n\treturn (\n\t\taction.type === 'UPDATE_BLOCK_ATTRIBUTES' &&\n\t\taction.clientId === previousAction.clientId &&\n\t\thasSameKeys( action.attributes, previousAction.attributes )\n\t);\n}\n\n/**\n * Returns true if, given the currently dispatching action and the previously\n * dispatched action, the two actions are editing the same post property, or\n * false otherwise.\n *\n * @param {Object} action         Currently dispatching action.\n * @param {Object} previousAction Previously dispatched action.\n *\n * @return {boolean} Whether actions are updating the same post property.\n */\nexport function isUpdatingSamePostProperty( action, previousAction ) {\n\treturn (\n\t\taction.type === 'EDIT_POST' &&\n\t\thasSameKeys( action.edits, previousAction.edits )\n\t);\n}\n\n/**\n * Returns true if, given the currently dispatching action and the previously\n * dispatched action, the two actions are modifying the same property such that\n * undo history should be batched.\n *\n * @param {Object} action         Currently dispatching action.\n * @param {Object} previousAction Previously dispatched action.\n *\n * @return {boolean} Whether to overwrite present state.\n */\nexport function shouldOverwriteState( action, previousAction ) {\n\tif ( ! previousAction || action.type !== previousAction.type ) {\n\t\treturn false;\n\t}\n\n\treturn overSome( [\n\t\tisUpdatingSameBlockAttribute,\n\t\tisUpdatingSamePostProperty,\n\t] )( action, previousAction );\n}\n\n/**\n * Higher-order reducer targeting the combined editor reducer, augmenting\n * block client IDs in remove action to include cascade of inner blocks.\n *\n * @param {Function} reducer Original reducer function.\n *\n * @return {Function} Enhanced reducer function.\n */\nconst withInnerBlocksRemoveCascade = ( reducer ) => ( state, action ) => {\n\tif ( state && action.type === 'REMOVE_BLOCKS' ) {\n\t\tconst clientIds = [ ...action.clientIds ];\n\n\t\t// For each removed client ID, include its inner blocks to remove,\n\t\t// recursing into those so long as inner blocks exist.\n\t\tfor ( let i = 0; i < clientIds.length; i++ ) {\n\t\t\tclientIds.push( ...state.blockOrder[ clientIds[ i ] ] );\n\t\t}\n\n\t\taction = { ...action, clientIds };\n\t}\n\n\treturn reducer( state, action );\n};\n\n/**\n * Undoable reducer returning the editor post state, including blocks parsed\n * from current HTML markup.\n *\n * Handles the following state keys:\n *  - edits: an object describing changes to be made to the current post, in\n *           the format accepted by the WP REST API\n *  - blocksByClientId: post content blocks keyed by client ID\n *  - blockOrder: object where each key is a client ID, its value an array of\n *                client IDs representing the order of its inner blocks\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @returns {Object} Updated state.\n */\nexport const editor = flow( [\n\tcombineReducers,\n\n\twithInnerBlocksRemoveCascade,\n\n\t// Track undo history, starting at editor initialization.\n\twithHistory( {\n\t\tresetTypes: [ 'SETUP_EDITOR_STATE' ],\n\t\tignoreTypes: [ 'RECEIVE_BLOCKS', 'RESET_POST', 'UPDATE_POST' ],\n\t\tshouldOverwriteState,\n\t} ),\n\n\t// Track whether changes exist, resetting at each post save. Relies on\n\t// editor initialization firing post reset as an effect.\n\twithChangeDetection( {\n\t\tresetTypes: [ 'SETUP_EDITOR_STATE', 'REQUEST_POST_UPDATE_START' ],\n\t\tignoreTypes: [ 'RECEIVE_BLOCKS', 'RESET_POST', 'UPDATE_POST' ],\n\t} ),\n] )( {\n\tedits( state = {}, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'EDIT_POST':\n\t\t\tcase 'SETUP_EDITOR_STATE':\n\t\t\t\treturn reduce( action.edits, ( result, value, key ) => {\n\t\t\t\t\t// Only assign into result if not already same value\n\t\t\t\t\tif ( value !== state[ key ] ) {\n\t\t\t\t\t\t// Avoid mutating original state by creating shallow\n\t\t\t\t\t\t// clone. Should only occur once per reduce.\n\t\t\t\t\t\tif ( result === state ) {\n\t\t\t\t\t\t\tresult = { ...state };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult[ key ] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t}, state );\n\n\t\t\tcase 'RESET_BLOCKS':\n\t\t\t\tif ( 'content' in state ) {\n\t\t\t\t\treturn omit( state, 'content' );\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\n\t\t\tcase 'DIRTY_ARTIFICIALLY':\n\t\t\t\treturn { ...state };\n\n\t\t\tcase 'UPDATE_POST':\n\t\t\tcase 'RESET_POST':\n\t\t\t\tconst getCanonicalValue = action.type === 'UPDATE_POST' ?\n\t\t\t\t\t( key ) => action.edits[ key ] :\n\t\t\t\t\t( key ) => getPostRawValue( action.post[ key ] );\n\n\t\t\t\treturn reduce( state, ( result, value, key ) => {\n\t\t\t\t\tif ( value !== getCanonicalValue( key ) ) {\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( state === result ) {\n\t\t\t\t\t\tresult = { ...state };\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete result[ key ];\n\t\t\t\t\treturn result;\n\t\t\t\t}, state );\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tblocksByClientId( state = {}, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RESET_BLOCKS':\n\t\t\tcase 'SETUP_EDITOR_STATE':\n\t\t\t\treturn getFlattenedBlocks( action.blocks );\n\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t...getFlattenedBlocks( action.blocks ),\n\t\t\t\t};\n\n\t\t\tcase 'UPDATE_BLOCK_ATTRIBUTES':\n\t\t\t\t// Ignore updates if block isn't known\n\t\t\t\tif ( ! state[ action.clientId ] ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\t// Consider as updates only changed values\n\t\t\t\tconst nextAttributes = reduce( action.attributes, ( result, value, key ) => {\n\t\t\t\t\tif ( value !== result[ key ] ) {\n\t\t\t\t\t\t// Avoid mutating original block by creating shallow clone\n\t\t\t\t\t\tif ( result === state[ action.clientId ].attributes ) {\n\t\t\t\t\t\t\tresult = { ...result };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresult[ key ] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t}, state[ action.clientId ].attributes );\n\n\t\t\t\t// Skip update if nothing has been changed. The reference will\n\t\t\t\t// match the original block if `reduce` had no changed values.\n\t\t\t\tif ( nextAttributes === state[ action.clientId ].attributes ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\t// Otherwise merge attributes into state\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ action.clientId ]: {\n\t\t\t\t\t\t...state[ action.clientId ],\n\t\t\t\t\t\tattributes: nextAttributes,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\tcase 'MOVE_BLOCK_TO_POSITION':\n\t\t\t\t// Avoid creating a new instance if the layout didn't change.\n\t\t\t\tif ( state[ action.clientId ].attributes.layout === action.layout ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ action.clientId ]: {\n\t\t\t\t\t\t...state[ action.clientId ],\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...state[ action.clientId ].attributes,\n\t\t\t\t\t\t\tlayout: action.layout,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\tcase 'UPDATE_BLOCK':\n\t\t\t\t// Ignore updates if block isn't known\n\t\t\t\tif ( ! state[ action.clientId ] ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ action.clientId ]: {\n\t\t\t\t\t\t...state[ action.clientId ],\n\t\t\t\t\t\t...action.updates,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\tcase 'INSERT_BLOCKS':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t...getFlattenedBlocks( action.blocks ),\n\t\t\t\t};\n\n\t\t\tcase 'REPLACE_BLOCKS':\n\t\t\t\tif ( ! action.blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...omit( state, action.clientIds ),\n\t\t\t\t\t...getFlattenedBlocks( action.blocks ),\n\t\t\t\t};\n\n\t\t\tcase 'REMOVE_BLOCKS':\n\t\t\t\treturn omit( state, action.clientIds );\n\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_SUCCESS': {\n\t\t\t\tconst { id, updatedId } = action;\n\n\t\t\t\t// If a temporary reusable block is saved, we swap the temporary id with the final one\n\t\t\t\tif ( id === updatedId ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn mapValues( state, ( block ) => {\n\t\t\t\t\tif ( block.name === 'core/block' && block.attributes.ref === id ) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...block,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t...block.attributes,\n\t\t\t\t\t\t\t\tref: updatedId,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn block;\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tblockOrder( state = {}, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RESET_BLOCKS':\n\t\t\tcase 'SETUP_EDITOR_STATE':\n\t\t\t\treturn mapBlockOrder( action.blocks );\n\n\t\t\tcase 'RECEIVE_BLOCKS':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t...omit( mapBlockOrder( action.blocks ), '' ),\n\t\t\t\t};\n\n\t\t\tcase 'INSERT_BLOCKS': {\n\t\t\t\tconst { rootClientId = '', blocks } = action;\n\t\t\t\tconst subState = state[ rootClientId ] || [];\n\t\t\t\tconst mappedBlocks = mapBlockOrder( blocks, rootClientId );\n\t\t\t\tconst { index = subState.length } = action;\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t...mappedBlocks,\n\t\t\t\t\t[ rootClientId ]: insertAt( subState, mappedBlocks[ rootClientId ], index ),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCK_TO_POSITION': {\n\t\t\t\tconst { fromRootClientId = '', toRootClientId = '', clientId } = action;\n\t\t\t\tconst { index = state[ toRootClientId ].length } = action;\n\n\t\t\t\t// Moving inside the same parent block\n\t\t\t\tif ( fromRootClientId === toRootClientId ) {\n\t\t\t\t\tconst subState = state[ toRootClientId ];\n\t\t\t\t\tconst fromIndex = subState.indexOf( clientId );\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...state,\n\t\t\t\t\t\t[ toRootClientId ]: moveTo( state[ toRootClientId ], fromIndex, index ),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Moving from a parent block to another\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ fromRootClientId ]: without( state[ fromRootClientId ], clientId ),\n\t\t\t\t\t[ toRootClientId ]: insertAt( state[ toRootClientId ], clientId, index ),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_UP': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = first( clientIds );\n\t\t\t\tconst subState = state[ rootClientId ];\n\n\t\t\t\tif ( ! subState.length || firstClientId === first( subState ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ rootClientId ]: moveTo( subState, firstIndex, firstIndex - 1, clientIds.length ),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'MOVE_BLOCKS_DOWN': {\n\t\t\t\tconst { clientIds, rootClientId = '' } = action;\n\t\t\t\tconst firstClientId = first( clientIds );\n\t\t\t\tconst lastClientId = last( clientIds );\n\t\t\t\tconst subState = state[ rootClientId ];\n\n\t\t\t\tif ( ! subState.length || lastClientId === last( subState ) ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst firstIndex = subState.indexOf( firstClientId );\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ rootClientId ]: moveTo( subState, firstIndex, firstIndex + 1, clientIds.length ),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'REPLACE_BLOCKS': {\n\t\t\t\tconst { blocks, clientIds } = action;\n\t\t\t\tif ( ! blocks ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst mappedBlocks = mapBlockOrder( blocks );\n\n\t\t\t\treturn flow( [\n\t\t\t\t\t( nextState ) => omit( nextState, clientIds ),\n\t\t\t\t\t( nextState ) => ( {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\t...omit( mappedBlocks, '' ),\n\t\t\t\t\t} ),\n\t\t\t\t\t( nextState ) => mapValues( nextState, ( subState ) => (\n\t\t\t\t\t\treduce( subState, ( result, clientId ) => {\n\t\t\t\t\t\t\tif ( clientId === clientIds[ 0 ] ) {\n\t\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t\t...result,\n\t\t\t\t\t\t\t\t\t...mappedBlocks[ '' ],\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( clientIds.indexOf( clientId ) === -1 ) {\n\t\t\t\t\t\t\t\tresult.push( clientId );\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}, [] )\n\t\t\t\t\t) ),\n\t\t\t\t] )( state );\n\t\t\t}\n\n\t\t\tcase 'REMOVE_BLOCKS':\n\t\t\t\treturn flow( [\n\t\t\t\t\t// Remove inner block ordering for removed blocks\n\t\t\t\t\t( nextState ) => omit( nextState, action.clientIds ),\n\n\t\t\t\t\t// Remove deleted blocks from other blocks' orderings\n\t\t\t\t\t( nextState ) => mapValues( nextState, ( subState ) => (\n\t\t\t\t\t\twithout( subState, ...action.clientIds )\n\t\t\t\t\t) ),\n\t\t\t\t] )( state );\n\t\t}\n\n\t\treturn state;\n\t},\n} );\n\n/**\n * Reducer returning the last-known state of the current post, in the format\n * returned by the WP REST API.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function currentPost( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SETUP_EDITOR_STATE':\n\t\tcase 'RESET_POST':\n\t\tcase 'UPDATE_POST':\n\t\t\tlet post;\n\t\t\tif ( action.post ) {\n\t\t\t\tpost = action.post;\n\t\t\t} else if ( action.edits ) {\n\t\t\t\tpost = {\n\t\t\t\t\t...state,\n\t\t\t\t\t...action.edits,\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn mapValues( post, getPostRawValue );\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning typing state.\n *\n * @param {boolean} state  Current state.\n * @param {Object}  action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function isTyping( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'START_TYPING':\n\t\t\treturn true;\n\n\t\tcase 'STOP_TYPING':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block selection's state.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function blockSelection( state = {\n\tstart: null,\n\tend: null,\n\tisMultiSelecting: false,\n\tisEnabled: true,\n\tinitialPosition: null,\n}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'CLEAR_SELECTED_BLOCK':\n\t\t\tif ( state.start === null && state.end === null && ! state.isMultiSelecting ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstart: null,\n\t\t\t\tend: null,\n\t\t\t\tisMultiSelecting: false,\n\t\t\t\tinitialPosition: null,\n\t\t\t};\n\t\tcase 'START_MULTI_SELECT':\n\t\t\tif ( state.isMultiSelecting ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMultiSelecting: true,\n\t\t\t\tinitialPosition: null,\n\t\t\t};\n\t\tcase 'STOP_MULTI_SELECT':\n\t\t\tif ( ! state.isMultiSelecting ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisMultiSelecting: false,\n\t\t\t\tinitialPosition: null,\n\t\t\t};\n\t\tcase 'MULTI_SELECT':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstart: action.start,\n\t\t\t\tend: action.end,\n\t\t\t\tinitialPosition: null,\n\t\t\t};\n\t\tcase 'SELECT_BLOCK':\n\t\t\tif ( action.clientId === state.start && action.clientId === state.end ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstart: action.clientId,\n\t\t\t\tend: action.clientId,\n\t\t\t\tinitialPosition: action.initialPosition,\n\t\t\t};\n\t\tcase 'INSERT_BLOCKS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstart: action.blocks[ 0 ].clientId,\n\t\t\t\tend: action.blocks[ 0 ].clientId,\n\t\t\t\tinitialPosition: null,\n\t\t\t\tisMultiSelecting: false,\n\t\t\t};\n\t\tcase 'REMOVE_BLOCKS':\n\t\t\tif ( ! action.clientIds || ! action.clientIds.length || action.clientIds.indexOf( state.start ) === -1 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstart: null,\n\t\t\t\tend: null,\n\t\t\t\tinitialPosition: null,\n\t\t\t\tisMultiSelecting: false,\n\t\t\t};\n\t\tcase 'REPLACE_BLOCKS':\n\t\t\tif ( action.clientIds.indexOf( state.start ) === -1 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\t// If there is replacement block(s), assign first's client ID as\n\t\t\t// the next selected block. If empty replacement, reset to null.\n\t\t\tconst nextSelectedBlockClientId = get( action.blocks, [ 0, 'clientId' ], null );\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tstart: nextSelectedBlockClientId,\n\t\t\t\tend: nextSelectedBlockClientId,\n\t\t\t\tinitialPosition: null,\n\t\t\t\tisMultiSelecting: false,\n\t\t\t};\n\t\tcase 'TOGGLE_SELECTION':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisEnabled: action.isSelectionEnabled,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\nexport function blocksMode( state = {}, action ) {\n\tif ( action.type === 'TOGGLE_BLOCK_MODE' ) {\n\t\tconst { clientId } = action;\n\t\treturn {\n\t\t\t...state,\n\t\t\t[ clientId ]: state[ clientId ] && state[ clientId ] === 'html' ? 'visual' : 'html',\n\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the block insertion point visibility, a boolean value\n * reflecting whether the insertion point should be shown.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function isInsertionPointVisible( state = false, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SHOW_INSERTION_POINT':\n\t\t\treturn true;\n\n\t\tcase 'HIDE_INSERTION_POINT':\n\t\t\treturn false;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning whether the post blocks match the defined template or not.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {boolean} Updated state.\n */\nexport function template( state = { isValid: true }, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'SET_TEMPLATE_VALIDITY':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisValid: action.isValid,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the editor setting.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function settings( state = EDITOR_SETTINGS_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_EDITOR_SETTINGS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...action.settings,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning the user preferences.\n *\n * @param {Object}  state                 Current state.\n * @param {Object}  action                Dispatched action.\n *\n * @return {string} Updated state.\n */\nexport function preferences( state = PREFERENCES_DEFAULTS, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'INSERT_BLOCKS':\n\t\tcase 'REPLACE_BLOCKS':\n\t\t\treturn action.blocks.reduce( ( prevState, block ) => {\n\t\t\t\tlet id = block.name;\n\t\t\t\tconst insert = { name: block.name };\n\t\t\t\tif ( isReusableBlock( block ) ) {\n\t\t\t\t\tinsert.ref = block.attributes.ref;\n\t\t\t\t\tid += '/' + block.attributes.ref;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...prevState,\n\t\t\t\t\tinsertUsage: {\n\t\t\t\t\t\t...prevState.insertUsage,\n\t\t\t\t\t\t[ id ]: {\n\t\t\t\t\t\t\ttime: action.time,\n\t\t\t\t\t\t\tcount: prevState.insertUsage[ id ] ? prevState.insertUsage[ id ].count + 1 : 1,\n\t\t\t\t\t\t\tinsert,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}, state );\n\n\t\tcase 'REMOVE_REUSABLE_BLOCK':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tinsertUsage: omitBy( state.insertUsage, ( { insert } ) => insert.ref === action.id ),\n\t\t\t};\n\n\t\tcase 'ENABLE_PUBLISH_SIDEBAR':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisPublishSidebarEnabled: true,\n\t\t\t};\n\n\t\tcase 'DISABLE_PUBLISH_SIDEBAR':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisPublishSidebarEnabled: false,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer returning current network request state (whether a request to\n * the WP REST API is in progress, successful, or failed).\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function saving( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'REQUEST_POST_UPDATE_START':\n\t\t\treturn {\n\t\t\t\trequesting: true,\n\t\t\t\tsuccessful: false,\n\t\t\t\terror: null,\n\t\t\t\tisAutosave: action.isAutosave,\n\t\t\t};\n\n\t\tcase 'REQUEST_POST_UPDATE_SUCCESS':\n\t\t\treturn {\n\t\t\t\trequesting: false,\n\t\t\t\tsuccessful: true,\n\t\t\t\terror: null,\n\t\t\t};\n\n\t\tcase 'REQUEST_POST_UPDATE_FAILURE':\n\t\t\treturn {\n\t\t\t\trequesting: false,\n\t\t\t\tsuccessful: false,\n\t\t\t\terror: action.error,\n\t\t\t};\n\t}\n\n\treturn state;\n}\n\nexport function notices( state = [], action ) {\n\tswitch ( action.type ) {\n\t\tcase 'CREATE_NOTICE':\n\t\t\treturn [\n\t\t\t\t...reject( state, { id: action.notice.id } ),\n\t\t\t\taction.notice,\n\t\t\t];\n\n\t\tcase 'REMOVE_NOTICE':\n\t\t\tconst { noticeId } = action;\n\t\t\tconst index = findIndex( state, { id: noticeId } );\n\t\t\tif ( index === -1 ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t...state.slice( 0, index ),\n\t\t\t\t...state.slice( index + 1 ),\n\t\t\t];\n\t}\n\n\treturn state;\n}\n\n/**\n * Post Lock State.\n *\n * @typedef {Object} PostLockState\n *\n * @property {boolean} isLocked       Whether the post is locked.\n * @property {?boolean} isTakeover     Whether the post editing has been taken over.\n * @property {?boolean} activePostLock Active post lock value.\n * @property {?Object}  user           User that took over the post.\n */\n\n/**\n * Reducer returning the post lock status.\n *\n * @param {PostLockState} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {PostLockState} Updated state.\n */\nexport function postLock( state = { isLocked: false }, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'UPDATE_POST_LOCK':\n\t\t\treturn action.lock;\n\t}\n\n\treturn state;\n}\n\nexport const reusableBlocks = combineReducers( {\n\tdata( state = {}, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'RECEIVE_REUSABLE_BLOCKS': {\n\t\t\t\treturn reduce( action.results, ( nextState, result ) => {\n\t\t\t\t\tconst { id, title } = result.reusableBlock;\n\t\t\t\t\tconst { clientId } = result.parsedBlock;\n\n\t\t\t\t\tconst value = { clientId, title };\n\n\t\t\t\t\tif ( ! isEqual( nextState[ id ], value ) ) {\n\t\t\t\t\t\tif ( nextState === state ) {\n\t\t\t\t\t\t\tnextState = { ...nextState };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnextState[ id ] = value;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn nextState;\n\t\t\t\t}, state );\n\t\t\t}\n\n\t\t\tcase 'UPDATE_REUSABLE_BLOCK_TITLE': {\n\t\t\t\tconst { id, title } = action;\n\n\t\t\t\tif ( ! state[ id ] || state[ id ].title === title ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ id ]: {\n\t\t\t\t\t\t...state[ id ],\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_SUCCESS': {\n\t\t\t\tconst { id, updatedId } = action;\n\n\t\t\t\t// If a temporary reusable block is saved, we swap the temporary id with the final one\n\t\t\t\tif ( id === updatedId ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tconst value = state[ id ];\n\t\t\t\treturn {\n\t\t\t\t\t...omit( state, id ),\n\t\t\t\t\t[ updatedId ]: value,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'REMOVE_REUSABLE_BLOCK': {\n\t\t\t\tconst { id } = action;\n\t\t\t\treturn omit( state, id );\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tisFetching( state = {}, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'FETCH_REUSABLE_BLOCKS': {\n\t\t\t\tconst { id } = action;\n\t\t\t\tif ( ! id ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ id ]: true,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tcase 'FETCH_REUSABLE_BLOCKS_SUCCESS':\n\t\t\tcase 'FETCH_REUSABLE_BLOCKS_FAILURE': {\n\t\t\t\tconst { id } = action;\n\t\t\t\treturn omit( state, id );\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n\n\tisSaving( state = {}, action ) {\n\t\tswitch ( action.type ) {\n\t\t\tcase 'SAVE_REUSABLE_BLOCK':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\t[ action.id ]: true,\n\t\t\t\t};\n\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_SUCCESS':\n\t\t\tcase 'SAVE_REUSABLE_BLOCK_FAILURE': {\n\t\t\t\tconst { id } = action;\n\t\t\t\treturn omit( state, id );\n\t\t\t}\n\t\t}\n\n\t\treturn state;\n\t},\n} );\n\n/**\n * Reducer returning an object where each key is a block client ID, its value\n * representing the settings for its nested blocks.\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport const blockListSettings = ( state = {}, action ) => {\n\tswitch ( action.type ) {\n\t\t// Even if the replaced blocks have the same client ID, our logic\n\t\t// should correct the state.\n\t\tcase 'REPLACE_BLOCKS' :\n\t\tcase 'REMOVE_BLOCKS': {\n\t\t\treturn omit( state, action.clientIds );\n\t\t}\n\t\tcase 'UPDATE_BLOCK_LIST_SETTINGS': {\n\t\t\tconst { clientId } = action;\n\t\t\tif ( ! action.settings ) {\n\t\t\t\tif ( state.hasOwnProperty( clientId ) ) {\n\t\t\t\t\treturn omit( state, clientId );\n\t\t\t\t}\n\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\tif ( isEqual( state[ clientId ], action.settings ) ) {\n\t\t\t\treturn state;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ clientId ]: action.settings,\n\t\t\t};\n\t\t}\n\t}\n\treturn state;\n};\n\n/**\n * Reducer returning the most recent autosave.\n *\n * @param  {Object} state  The autosave object.\n * @param  {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function autosave( state = null, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'RESET_AUTOSAVE':\n\t\t\tconst { post } = action;\n\t\t\tconst [ title, excerpt, content ] = [\n\t\t\t\t'title',\n\t\t\t\t'excerpt',\n\t\t\t\t'content',\n\t\t\t].map( ( field ) => getPostRawValue( post[ field ] ) );\n\n\t\t\treturn {\n\t\t\t\ttitle,\n\t\t\t\texcerpt,\n\t\t\t\tcontent,\n\t\t\t\tpreview_link: post.preview_link,\n\t\t\t};\n\n\t\tcase 'REQUEST_POST_UPDATE':\n\t\t\t// Invalidate known preview link when autosave starts.\n\t\t\tif ( state && action.options.autosave ) {\n\t\t\t\treturn omit( state, 'preview_link' );\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\treturn state;\n}\n\n/**\n * Reducer managing the block types\n *\n * @param {Object} state  Current state.\n * @param {Object} action Dispatched action.\n *\n * @return {Object} Updated state.\n */\nexport function tokens( state = {}, action ) {\n\tswitch ( action.type ) {\n\t\tcase 'REGISTER_TOKEN':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t[ action.name ]: action.settings,\n\t\t\t};\n\t\tcase 'UNREGISTER_TOKEN':\n\t\t\treturn omit( state, action.name );\n\t}\n\n\treturn state;\n}\n\nexport default optimist( combineReducers( {\n\teditor,\n\tcurrentPost,\n\tisTyping,\n\tblockSelection,\n\tblocksMode,\n\tblockListSettings,\n\tisInsertionPointVisible,\n\tpreferences,\n\tsaving,\n\tpostLock,\n\tnotices,\n\treusableBlocks,\n\ttemplate,\n\tautosave,\n\tsettings,\n\ttokens,\n} ) );\n","/**\n * External dependencies\n */\nimport {\n\tcastArray,\n\tflatMap,\n\tfind,\n\tfirst,\n\tget,\n\thas,\n\tincludes,\n\tisArray,\n\tisBoolean,\n\tlast,\n\tmap,\n\torderBy,\n\treduce,\n\tsize,\n\tsome,\n} from 'lodash';\nimport createSelector from 'rememo';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tserialize,\n\tgetBlockType,\n\tgetBlockTypes,\n\thasBlockSupport,\n\thasChildBlocksWithInserterSupport,\n\tgetFreeformContentHandlerName,\n\tisUnmodifiedDefaultBlock,\n} from '@wordpress/blocks';\nimport { moment } from '@wordpress/date';\nimport { removep } from '@wordpress/autop';\n\n/**\n * Dependencies\n */\nimport { PREFERENCES_DEFAULTS } from './defaults';\n\n/***\n * Module constants\n */\nexport const POST_UPDATE_TRANSACTION_ID = 'post-update';\nconst PERMALINK_POSTNAME_REGEX = /%(?:postname|pagename)%/;\nexport const INSERTER_UTILITY_HIGH = 3;\nexport const INSERTER_UTILITY_MEDIUM = 2;\nexport const INSERTER_UTILITY_LOW = 1;\nexport const INSERTER_UTILITY_NONE = 0;\nconst MILLISECONDS_PER_HOUR = 3600 * 1000;\nconst MILLISECONDS_PER_DAY = 24 * 3600 * 1000;\nconst MILLISECONDS_PER_WEEK = 7 * 24 * 3600 * 1000;\n\n/**\n * Shared reference to an empty array for cases where it is important to avoid\n * returning a new array reference on every invocation, as in a connected or\n * other pure component which performs `shouldComponentUpdate` check on props.\n * This should be used as a last resort, since the normalized data should be\n * maintained by the reducer result in state.\n *\n * @type {Array}\n */\nconst EMPTY_ARRAY = [];\n\n/**\n * Returns true if any past editor history snapshots exist, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether undo history exists.\n */\nexport function hasEditorUndo( state ) {\n\treturn state.editor.past.length > 0;\n}\n\n/**\n * Returns true if any future editor history snapshots exist, or false\n * otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether redo history exists.\n */\nexport function hasEditorRedo( state ) {\n\treturn state.editor.future.length > 0;\n}\n\n/**\n * Returns true if the currently edited post is yet to be saved, or false if\n * the post has been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post is new.\n */\nexport function isEditedPostNew( state ) {\n\treturn getCurrentPost( state ).status === 'auto-draft';\n}\n\n/**\n * Returns true if there are unsaved values for the current edit session, or\n * false if the editing state matches the saved or new post.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether unsaved values exist.\n */\nexport function isEditedPostDirty( state ) {\n\treturn state.editor.isDirty || inSomeHistory( state, isEditedPostDirty );\n}\n\n/**\n * Returns true if there are no unsaved values for the current edit session and\n * if the currently edited post is new (has never been saved before).\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether new post and unsaved values exist.\n */\nexport function isCleanNewPost( state ) {\n\treturn ! isEditedPostDirty( state ) && isEditedPostNew( state );\n}\n\n/**\n * Returns the post currently being edited in its last known saved state, not\n * including unsaved edits. Returns an object containing relevant default post\n * values if the post has not yet been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Post object.\n */\nexport function getCurrentPost( state ) {\n\treturn state.currentPost;\n}\n\n/**\n * Returns the post type of the post currently being edited.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Post type.\n */\nexport function getCurrentPostType( state ) {\n\treturn state.currentPost.type;\n}\n\n/**\n * Returns the ID of the post currently being edited, or null if the post has\n * not yet been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {?number} ID of current post.\n */\nexport function getCurrentPostId( state ) {\n\treturn getCurrentPost( state ).id || null;\n}\n\n/**\n * Returns the number of revisions of the post currently being edited.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of revisions.\n */\nexport function getCurrentPostRevisionsCount( state ) {\n\treturn get( getCurrentPost( state ), [ '_links', 'version-history', 0, 'count' ], 0 );\n}\n\n/**\n * Returns the last revision ID of the post currently being edited,\n * or null if the post has no revisions.\n *\n * @param {Object} state Global application state.\n *\n * @return {?number} ID of the last revision.\n */\nexport function getCurrentPostLastRevisionId( state ) {\n\treturn get( getCurrentPost( state ), [ '_links', 'predecessor-version', 0, 'id' ], null );\n}\n\n/**\n * Returns any post values which have been changed in the editor but not yet\n * been saved.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} Object of key value pairs comprising unsaved edits.\n */\nexport function getPostEdits( state ) {\n\treturn state.editor.present.edits;\n}\n\n/**\n * Returns an attribute value of the saved post.\n *\n * @param {Object} state         Global application state.\n * @param {string} attributeName Post attribute name.\n *\n * @return {*} Post attribute value.\n */\nexport function getCurrentPostAttribute( state, attributeName ) {\n\tconst post = getCurrentPost( state );\n\tif ( post.hasOwnProperty( attributeName ) ) {\n\t\treturn post[ attributeName ];\n\t}\n}\n\n/**\n * Returns a single attribute of the post being edited, preferring the unsaved\n * edit if one exists, but falling back to the attribute for the last known\n * saved state of the post.\n *\n * @param {Object} state         Global application state.\n * @param {string} attributeName Post attribute name.\n *\n * @return {*} Post attribute value.\n */\nexport function getEditedPostAttribute( state, attributeName ) {\n\tconst edits = getPostEdits( state );\n\n\t// Special cases\n\tswitch ( attributeName ) {\n\t\tcase 'content':\n\t\t\treturn getEditedPostContent( state );\n\t}\n\n\tif ( ! edits.hasOwnProperty( attributeName ) ) {\n\t\treturn getCurrentPostAttribute( state, attributeName );\n\t}\n\n\treturn edits[ attributeName ];\n}\n\n/**\n * Returns an attribute value of the current autosave revision for a post, or\n * null if there is no autosave for the post.\n *\n * @param {Object} state         Global application state.\n * @param {string} attributeName Autosave attribute name.\n *\n * @return {*} Autosave attribute value.\n */\nexport function getAutosaveAttribute( state, attributeName ) {\n\tif ( ! hasAutosave( state ) ) {\n\t\treturn null;\n\t}\n\n\tconst autosave = getAutosave( state );\n\tif ( autosave.hasOwnProperty( attributeName ) ) {\n\t\treturn autosave[ attributeName ];\n\t}\n}\n\n/**\n * Returns the current visibility of the post being edited, preferring the\n * unsaved value if different than the saved post. The return value is one of\n * \"private\", \"password\", or \"public\".\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Post visibility.\n */\nexport function getEditedPostVisibility( state ) {\n\tconst status = getEditedPostAttribute( state, 'status' );\n\tconst password = getEditedPostAttribute( state, 'password' );\n\n\tif ( status === 'private' ) {\n\t\treturn 'private';\n\t} else if ( password ) {\n\t\treturn 'password';\n\t}\n\treturn 'public';\n}\n\n/**\n * Returns true if post is pending review.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether current post is pending review.\n */\nexport function isCurrentPostPending( state ) {\n\treturn getCurrentPost( state ).status === 'pending';\n}\n\n/**\n * Return true if the current post has already been published.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post has been published.\n */\nexport function isCurrentPostPublished( state ) {\n\tconst post = getCurrentPost( state );\n\n\treturn [ 'publish', 'private' ].indexOf( post.status ) !== -1 ||\n\t\t( post.status === 'future' && moment( post.date ).isBefore( moment() ) );\n}\n\n/**\n * Returns true if post is already scheduled.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether current post is scheduled to be posted.\n */\nexport function isCurrentPostScheduled( state ) {\n\treturn getCurrentPost( state ).status === 'future' && ! isCurrentPostPublished( state );\n}\n\n/**\n * Return true if the post being edited can be published.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post can been published.\n */\nexport function isEditedPostPublishable( state ) {\n\tconst post = getCurrentPost( state );\n\n\t// TODO: Post being publishable should be superset of condition of post\n\t// being saveable. Currently this restriction is imposed at UI.\n\t//\n\t//  See: <PostPublishButton /> (`isButtonEnabled` assigned by `isSaveable`)\n\n\treturn isEditedPostDirty( state ) || [ 'publish', 'private', 'future' ].indexOf( post.status ) === -1;\n}\n\n/**\n * Returns true if the post can be saved, or false otherwise. A post must\n * contain a title, an excerpt, or non-empty content to be valid for save.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post can be saved.\n */\nexport function isEditedPostSaveable( state ) {\n\tif ( isSavingPost( state ) ) {\n\t\treturn false;\n\t}\n\n\t// TODO: Post should not be saveable if not dirty. Cannot be added here at\n\t// this time since posts where meta boxes are present can be saved even if\n\t// the post is not dirty. Currently this restriction is imposed at UI, but\n\t// should be moved here.\n\t//\n\t//  See: `isEditedPostPublishable` (includes `isEditedPostDirty` condition)\n\t//  See: <PostSavedState /> (`forceIsDirty` prop)\n\t//  See: <PostPublishButton /> (`forceIsDirty` prop)\n\t//  See: https://github.com/WordPress/gutenberg/pull/4184\n\n\treturn (\n\t\t!! getEditedPostAttribute( state, 'title' ) ||\n\t\t!! getEditedPostAttribute( state, 'excerpt' ) ||\n\t\t! isEditedPostEmpty( state )\n\t);\n}\n\n/**\n * Returns true if the edited post has content. A post has content if it has at\n * least one saveable block or otherwise has a non-empty content property\n * assigned.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether post has content.\n */\nexport function isEditedPostEmpty( state ) {\n\t// While the condition of truthy content string would be sufficient for\n\t// determining emptiness, testing saveable blocks length is a trivial\n\t// operation by comparison. Since this function can be called frequently,\n\t// optimize for the fast case where saveable blocks are non-empty.\n\treturn (\n\t\t! getBlocksForSerialization( state ).length &&\n\t\t! getEditedPostAttribute( state, 'content' )\n\t);\n}\n\n/**\n * Returns true if the post can be autosaved, or false otherwise.\n *\n * @param  {Object}  state Global application state.\n *\n * @return {boolean} Whether the post can be autosaved.\n */\nexport function isEditedPostAutosaveable( state ) {\n\t// A post must contain a title, an excerpt, or non-empty content to be valid for autosaving.\n\tif ( ! isEditedPostSaveable( state ) ) {\n\t\treturn false;\n\t}\n\n\t// If we don't already have an autosave, the post is autosaveable.\n\tif ( ! hasAutosave( state ) ) {\n\t\treturn true;\n\t}\n\n\t// If the title, excerpt or content has changed, the post is autosaveable.\n\tconst autosave = getAutosave( state );\n\treturn [ 'title', 'excerpt', 'content' ].some( ( field ) => (\n\t\tautosave[ field ] !== getEditedPostAttribute( state, field )\n\t) );\n}\n\n/**\n * Returns the current autosave, or null if one is not set (i.e. if the post\n * has yet to be autosaved, or has been saved or published since the last\n * autosave).\n *\n * @param {Object} state Editor state.\n *\n * @return {?Object} Current autosave, if exists.\n */\nexport function getAutosave( state ) {\n\treturn state.autosave;\n}\n\n/**\n * Returns the true if there is an existing autosave, otherwise false.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether there is an existing autosave.\n */\nexport function hasAutosave( state ) {\n\treturn !! getAutosave( state );\n}\n\n/**\n * Return true if the post being edited is being scheduled. Preferring the\n * unsaved status values.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post has been published.\n */\nexport function isEditedPostBeingScheduled( state ) {\n\tconst date = moment( getEditedPostAttribute( state, 'date' ) );\n\t// Adding 1 minute as an error threshold between the server and the client dates.\n\tconst now = moment().add( 1, 'minute' );\n\n\treturn date.isAfter( now );\n}\n\n/**\n * Returns whether the current post should be considered to have a \"floating\"\n * date (i.e. that it would publish \"Immediately\" rather than at a set time).\n *\n * Unlike in the PHP backend, the REST API returns a full date string for posts\n * where the 0000-00-00T00:00:00 placeholder is present in the database. To\n * infer that a post is set to publish \"Immediately\" we check whether the date\n * and modified date are the same.\n *\n * @param  {Object}  state Editor state.\n *\n * @return {boolean} Whether the edited post has a floating date value.\n */\nexport function isEditedPostDateFloating( state ) {\n\tconst date = getEditedPostAttribute( state, 'date' );\n\tconst modified = getEditedPostAttribute( state, 'modified' );\n\tconst status = getEditedPostAttribute( state, 'status' );\n\tif ( status === 'draft' || status === 'auto-draft' ) {\n\t\treturn date === modified;\n\t}\n\treturn false;\n}\n\n/**\n * Returns a new reference when the inner blocks of a given block client ID\n * change. This is used exclusively as a memoized selector dependant, relying\n * on this selector's shared return value and recursively those of its inner\n * blocks defined as dependencies. This abuses mechanics of the selector\n * memoization to return from the original selector function only when\n * dependants change.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {*} A value whose reference will change only when inner blocks of\n *             the given block client ID change.\n */\nexport const getBlockDependantsCacheBust = createSelector(\n\t() => [],\n\t( state, clientId ) => map(\n\t\tgetBlockOrder( state, clientId ),\n\t\t( innerBlockClientId ) => getBlock( state, innerBlockClientId ),\n\t),\n);\n\n/**\n * Returns a block's name given its client ID, or null if no block exists with\n * the client ID.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {string} Block name.\n */\nexport function getBlockName( state, clientId ) {\n\tconst block = state.editor.present.blocksByClientId[ clientId ];\n\treturn block ? block.name : null;\n}\n\n/**\n * Returns a block given its client ID. This is a parsed copy of the block,\n * containing its `blockName`, `clientId`, and current `attributes` state. This\n * is not the block's registration settings, which must be retrieved from the\n * blocks module registration store.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Parsed block object.\n */\nexport const getBlock = createSelector(\n\t( state, clientId ) => {\n\t\tconst block = state.editor.present.blocksByClientId[ clientId ];\n\t\tif ( ! block ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet { attributes } = block;\n\n\t\t// Inject custom source attribute values.\n\t\t//\n\t\t// TODO: Create generic external sourcing pattern, not explicitly\n\t\t// targeting meta attributes.\n\t\tconst type = getBlockType( block.name );\n\t\tif ( type ) {\n\t\t\tattributes = reduce( type.attributes, ( result, value, key ) => {\n\t\t\t\tif ( value.source === 'meta' ) {\n\t\t\t\t\tif ( result === attributes ) {\n\t\t\t\t\t\tresult = { ...result };\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[ key ] = getPostMeta( state, value.meta );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, attributes );\n\t\t}\n\n\t\treturn {\n\t\t\t...block,\n\t\t\tattributes,\n\t\t\tinnerBlocks: getBlocks( state, clientId ),\n\t\t};\n\t},\n\t( state, clientId ) => [\n\t\tstate.editor.present.blocksByClientId[ clientId ],\n\t\tgetBlockDependantsCacheBust( state, clientId ),\n\t\tstate.editor.present.edits.meta,\n\t\tstate.currentPost.meta,\n\t]\n);\n\nfunction getPostMeta( state, key ) {\n\treturn has( state, [ 'editor', 'present', 'edits', 'meta', key ] ) ?\n\t\tget( state, [ 'editor', 'present', 'edits', 'meta', key ] ) :\n\t\tget( state, [ 'currentPost', 'meta', key ] );\n}\n\n/**\n * Returns all block objects for the current post being edited as an array in\n * the order they appear in the post.\n *\n * Note: It's important to memoize this selector to avoid return a new instance\n * on each call\n *\n * @param {Object}  state        Editor state.\n * @param {?String} rootClientId Optional root client ID of block list.\n *\n * @return {Object[]} Post blocks.\n */\nexport const getBlocks = createSelector(\n\t( state, rootClientId ) => {\n\t\treturn map(\n\t\t\tgetBlockOrder( state, rootClientId ),\n\t\t\t( clientId ) => getBlock( state, clientId )\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t\tstate.editor.present.blocksByClientId,\n\t]\n);\n\n/**\n * Returns an array containing the clientIds of all descendants\n * of the blocks given.\n *\n * @param {Object} state Global application state.\n * @param {Array} clientIds Array of blocks to inspect.\n *\n * @return {Array} ids of descendants.\n */\nexport const getClientIdsOfDescendants = ( state, clientIds ) => flatMap( clientIds, ( clientId ) => {\n\tconst descendants = getBlockOrder( state, clientId );\n\treturn [ ...descendants, ...getClientIdsOfDescendants( state, descendants ) ];\n} );\n\n/**\n * Returns an array containing the clientIds of the top-level blocks\n * and their descendants of any depth (for nested blocks).\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} ids of top-level and descendant blocks.\n */\nexport const getClientIdsWithDescendants = createSelector(\n\t( state ) => {\n\t\tconst topLevelIds = getBlockOrder( state );\n\t\treturn [ ...topLevelIds, ...getClientIdsOfDescendants( state, topLevelIds ) ];\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t]\n);\n\n/**\n * Returns the total number of blocks, or the total number of blocks with a specific name in a post.\n * The number returned includes nested blocks.\n *\n * @param {Object}  state     Global application state.\n * @param {?String} blockName Optional block name, if specified only blocks of that type will be counted.\n *\n * @return {number} Number of blocks in the post, or number of blocks with name equal to blockName.\n */\nexport const getGlobalBlockCount = createSelector(\n\t( state, blockName ) => {\n\t\tif ( ! blockName ) {\n\t\t\treturn size( state.editor.present.blocksByClientId );\n\t\t}\n\t\treturn reduce(\n\t\t\tstate.editor.present.blocksByClientId,\n\t\t\t( count, block ) => block.name === blockName ? count + 1 : count,\n\t\t\t0\n\t\t);\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blocksByClientId,\n\t]\n);\n\n/**\n * Given an array of block client IDs, returns the corresponding array of block\n * objects.\n *\n * @param {Object}   state     Editor state.\n * @param {string[]} clientIds Client IDs for which blocks are to be returned.\n *\n * @return {WPBlock[]} Block objects.\n */\nexport const getBlocksByClientId = createSelector(\n\t( state, clientIds ) => map(\n\t\tcastArray( clientIds ),\n\t\t( clientId ) => getBlock( state, clientId )\n\t),\n\t( state ) => [\n\t\tstate.editor.present.blocksByClientId,\n\t\tstate.editor.present.blockOrder,\n\t\tstate.editor.present.edits.meta,\n\t\tstate.currentPost.meta,\n\t\tstate.editor.present.blocksByClientId,\n\t]\n);\n\n/**\n * Returns the number of blocks currently present in the post.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Number of blocks in the post.\n */\nexport function getBlockCount( state, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).length;\n}\n\n/**\n * Returns the current block selection start. This value may be null, and it\n * may represent either a singular block selection or multi-selection start.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection start.\n */\nexport function getBlockSelectionStart( state ) {\n\treturn state.blockSelection.start;\n}\n\n/**\n * Returns the current block selection end. This value may be null, and it\n * may represent either a singular block selection or multi-selection end.\n * A selection is singular if its start and end match.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Client ID of block selection end.\n */\nexport function getBlockSelectionEnd( state ) {\n\treturn state.blockSelection.end;\n}\n\n/**\n * Returns the number of blocks currently selected in the post.\n *\n * @param {Object} state Global application state.\n *\n * @return {number} Number of blocks selected in the post.\n */\nexport function getSelectedBlockCount( state ) {\n\tconst multiSelectedBlockCount = getMultiSelectedBlockClientIds( state ).length;\n\n\tif ( multiSelectedBlockCount ) {\n\t\treturn multiSelectedBlockCount;\n\t}\n\n\treturn state.blockSelection.start ? 1 : 0;\n}\n\n/**\n * Returns true if there is a single selected block, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether a single block is selected.\n */\nexport function hasSelectedBlock( state ) {\n\tconst { start, end } = state.blockSelection;\n\treturn !! start && start === end;\n}\n\n/**\n * Returns the currently selected block client ID, or null if there is no\n * selected block.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Selected block client ID.\n */\nexport function getSelectedBlockClientId( state ) {\n\tconst { start, end } = state.blockSelection;\n\treturn start === end && start ? start : null;\n}\n\n/**\n * Returns the currently selected block, or null if there is no selected block.\n *\n * @param {Object} state Global application state.\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlock( state ) {\n\tconst clientId = getSelectedBlockClientId( state );\n\treturn clientId ? getBlock( state, clientId ) : null;\n}\n\n/**\n * Given a block client ID, returns the root block from which the block is\n * nested, an empty string for top-level blocks, or null if the block does not\n * exist.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {?string} Root client ID, if exists\n */\nexport const getBlockRootClientId = createSelector(\n\t( state, clientId ) => {\n\t\tconst { blockOrder } = state.editor.present;\n\n\t\tfor ( const rootClientId in blockOrder ) {\n\t\t\tif ( includes( blockOrder[ rootClientId ], clientId ) ) {\n\t\t\t\treturn rootClientId;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t]\n);\n\n/**\n * Given a block client ID, returns the root of the hierarchy from which the block is nested, return the block itself for root level blocks.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block from which to find root client ID.\n *\n * @return {string} Root client ID\n */\nexport const getBlockHierarchyRootClientId = createSelector(\n\t( state, clientId ) => {\n\t\tlet rootClientId = clientId;\n\t\tlet current = clientId;\n\t\twhile ( rootClientId ) {\n\t\t\tcurrent = rootClientId;\n\t\t\trootClientId = getBlockRootClientId( state, current );\n\t\t}\n\n\t\treturn current;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t]\n);\n\n/**\n * Returns the client ID of the block adjacent one at the given reference\n * startClientId and modifier directionality. Defaults start startClientId to\n * the selected block, and direction as next block. Returns null if there is no\n * adjacent block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n * @param {?number} modifier      Directionality multiplier (1 next, -1\n *                                previous).\n *\n * @return {?string} Return the client ID of the block, or null if none exists.\n */\nexport function getAdjacentBlockClientId( state, startClientId, modifier = 1 ) {\n\t// Default to selected block.\n\tif ( startClientId === undefined ) {\n\t\tstartClientId = getSelectedBlockClientId( state );\n\t}\n\n\t// Try multi-selection starting at extent based on modifier.\n\tif ( startClientId === undefined ) {\n\t\tif ( modifier < 0 ) {\n\t\t\tstartClientId = getFirstMultiSelectedBlockClientId( state );\n\t\t} else {\n\t\t\tstartClientId = getLastMultiSelectedBlockClientId( state );\n\t\t}\n\t}\n\n\t// Validate working start client ID.\n\tif ( ! startClientId ) {\n\t\treturn null;\n\t}\n\n\t// Retrieve start block root client ID, being careful to allow the falsey\n\t// empty string top-level root by explicitly testing against null.\n\tconst rootClientId = getBlockRootClientId( state, startClientId );\n\tif ( rootClientId === null ) {\n\t\treturn null;\n\t}\n\n\tconst { blockOrder } = state.editor.present;\n\tconst orderSet = blockOrder[ rootClientId ];\n\tconst index = orderSet.indexOf( startClientId );\n\tconst nextIndex = ( index + ( 1 * modifier ) );\n\n\t// Block was first in set and we're attempting to get previous.\n\tif ( nextIndex < 0 ) {\n\t\treturn null;\n\t}\n\n\t// Block was last in set and we're attempting to get next.\n\tif ( nextIndex === orderSet.length ) {\n\t\treturn null;\n\t}\n\n\t// Assume incremented index is within the set.\n\treturn orderSet[ nextIndex ];\n}\n\n/**\n * Returns the previous block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no previous\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getPreviousBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, -1 );\n}\n\n/**\n * Returns the next block's client ID from the given reference start ID.\n * Defaults start to the selected block. Returns null if there is no next\n * block.\n *\n * @param {Object}  state         Editor state.\n * @param {?string} startClientId Optional client ID of block from which to\n *                                search.\n *\n * @return {?string} Adjacent block's client ID, or null if none exists.\n */\nexport function getNextBlockClientId( state, startClientId ) {\n\treturn getAdjacentBlockClientId( state, startClientId, 1 );\n}\n\n/**\n * Returns the initial caret position for the selected block.\n * This position is to used to position the caret properly when the selected block changes.\n *\n * @param {Object} state Global application state.\n *\n * @return {?Object} Selected block.\n */\nexport function getSelectedBlocksInitialCaretPosition( state ) {\n\tconst { start, end } = state.blockSelection;\n\tif ( start !== end || ! start ) {\n\t\treturn null;\n\t}\n\n\treturn state.blockSelection.initialPosition;\n}\n\n/**\n * Returns the current multi-selection set of block client IDs, or an empty\n * array if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block client IDs.\n */\nexport const getMultiSelectedBlockClientIds = createSelector(\n\t( state ) => {\n\t\tconst { start, end } = state.blockSelection;\n\t\tif ( start === end ) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// Retrieve root client ID to aid in retrieving relevant nested block\n\t\t// order, being careful to allow the falsey empty string top-level root\n\t\t// by explicitly testing against null.\n\t\tconst rootClientId = getBlockRootClientId( state, start );\n\t\tif ( rootClientId === null ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst blockOrder = getBlockOrder( state, rootClientId );\n\t\tconst startIndex = blockOrder.indexOf( start );\n\t\tconst endIndex = blockOrder.indexOf( end );\n\n\t\tif ( startIndex > endIndex ) {\n\t\t\treturn blockOrder.slice( endIndex, startIndex + 1 );\n\t\t}\n\n\t\treturn blockOrder.slice( startIndex, endIndex + 1 );\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t\tstate.blockSelection.start,\n\t\tstate.blockSelection.end,\n\t],\n);\n\n/**\n * Returns the current multi-selection set of blocks, or an empty array if\n * there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {Array} Multi-selected block objects.\n */\nexport const getMultiSelectedBlocks = createSelector(\n\t( state ) => {\n\t\tconst multiSelectedBlockClientIds = getMultiSelectedBlockClientIds( state );\n\t\tif ( ! multiSelectedBlockClientIds.length ) {\n\t\t\treturn EMPTY_ARRAY;\n\t\t}\n\n\t\treturn multiSelectedBlockClientIds.map( ( clientId ) => getBlock( state, clientId ) );\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t\tstate.blockSelection.start,\n\t\tstate.blockSelection.end,\n\t\tstate.editor.present.blocksByClientId,\n\t\tstate.editor.present.edits.meta,\n\t\tstate.currentPost.meta,\n\t]\n);\n\n/**\n * Returns the client ID of the first block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} First block client ID in the multi-selection set.\n */\nexport function getFirstMultiSelectedBlockClientId( state ) {\n\treturn first( getMultiSelectedBlockClientIds( state ) ) || null;\n}\n\n/**\n * Returns the client ID of the last block in the multi-selection set, or null\n * if there is no multi-selection.\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Last block client ID in the multi-selection set.\n */\nexport function getLastMultiSelectedBlockClientId( state ) {\n\treturn last( getMultiSelectedBlockClientIds( state ) ) || null;\n}\n\n/**\n * Returns true if a multi-selection exists, and the block corresponding to the\n * specified client ID is the first block of the multi-selection set, or false\n * otherwise.\n *\n * @param {Object} state      Editor state.\n * @param {string} clientId   Block client ID.\n *\n * @return {boolean} Whether block is first in mult-selection.\n */\nexport function isFirstMultiSelectedBlock( state, clientId ) {\n\treturn getFirstMultiSelectedBlockClientId( state ) === clientId;\n}\n\n/**\n * Returns true if the client ID occurs within the block multi-selection, or\n * false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is in multi-selection set.\n */\nexport function isBlockMultiSelected( state, clientId ) {\n\treturn getMultiSelectedBlockClientIds( state ).indexOf( clientId ) !== -1;\n}\n\n/**\n * Returns true if an ancestor of the block is multi-selected, or false\n * otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether an ancestor of the block is in multi-selection\n *                   set.\n */\nexport const isAncestorMultiSelected = createSelector(\n\t( state, clientId ) => {\n\t\tlet ancestorClientId = clientId;\n\t\tlet isMultiSelected = false;\n\t\twhile ( ancestorClientId && ! isMultiSelected ) {\n\t\t\tancestorClientId = getBlockRootClientId( state, ancestorClientId );\n\t\t\tisMultiSelected = isBlockMultiSelected( state, ancestorClientId );\n\t\t}\n\t\treturn isMultiSelected;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.blockOrder,\n\t\tstate.blockSelection.start,\n\t\tstate.blockSelection.end,\n\t],\n);\n/**\n * Returns the client ID of the block which begins the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the first client ID in the selection.\n *\n * @see getFirstMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block beginning multi-selection.\n */\nexport function getMultiSelectedBlocksStartClientId( state ) {\n\tconst { start, end } = state.blockSelection;\n\tif ( start === end ) {\n\t\treturn null;\n\t}\n\treturn start || null;\n}\n\n/**\n * Returns the client ID of the block which ends the multi-selection set, or\n * null if there is no multi-selection.\n *\n * This is not necessarily the last client ID in the selection.\n *\n * @see getLastMultiSelectedBlockClientId\n *\n * @param {Object} state Editor state.\n *\n * @return {?string} Client ID of block ending multi-selection.\n */\nexport function getMultiSelectedBlocksEndClientId( state ) {\n\tconst { start, end } = state.blockSelection;\n\tif ( start === end ) {\n\t\treturn null;\n\t}\n\treturn end || null;\n}\n\n/**\n * Returns an array containing all block client IDs in the editor in the order\n * they appear. Optionally accepts a root client ID of the block list for which\n * the order should be returned, defaulting to the top-level block order.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {Array} Ordered client IDs of editor blocks.\n */\nexport function getBlockOrder( state, rootClientId ) {\n\treturn state.editor.present.blockOrder[ rootClientId || '' ] || EMPTY_ARRAY;\n}\n\n/**\n * Returns the index at which the block corresponding to the specified client\n * ID occurs within the block order, or `-1` if the block does not exist.\n *\n * @param {Object}  state        Editor state.\n * @param {string}  clientId     Block client ID.\n * @param {?string} rootClientId Optional root client ID of block list.\n *\n * @return {number} Index at which block exists in order.\n */\nexport function getBlockIndex( state, clientId, rootClientId ) {\n\treturn getBlockOrder( state, rootClientId ).indexOf( clientId );\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected and no multi-selection exists, or false otherwise.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and multi-selection exists.\n */\nexport function isBlockSelected( state, clientId ) {\n\tconst { start, end } = state.blockSelection;\n\n\tif ( start !== end ) {\n\t\treturn false;\n\t}\n\n\treturn start === clientId;\n}\n\n/**\n * Returns true if one of the block's inner blocks is selected.\n *\n * @param {Object}  state    Editor state.\n * @param {string}  clientId Block client ID.\n * @param {boolean} deep     Perform a deep check.\n *\n * @return {boolean} Whether the block as an inner block selected\n */\nexport function hasSelectedInnerBlock( state, clientId, deep = false ) {\n\treturn some(\n\t\tgetBlockOrder( state, clientId ),\n\t\t( innerClientId ) => (\n\t\t\tisBlockSelected( state, innerClientId ) ||\n\t\t\tisBlockMultiSelected( state, innerClientId ) ||\n\t\t\t( deep && hasSelectedInnerBlock( state, innerClientId, deep ) )\n\t\t)\n\t);\n}\n\n/**\n * Returns true if the block corresponding to the specified client ID is\n * currently selected but isn't the last of the selected blocks. Here \"last\"\n * refers to the block sequence in the document, _not_ the sequence of\n * multi-selection, which is why `state.blockSelection.end` isn't used.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {boolean} Whether block is selected and not the last in the\n *                   selection.\n */\nexport function isBlockWithinSelection( state, clientId ) {\n\tif ( ! clientId ) {\n\t\treturn false;\n\t}\n\n\tconst clientIds = getMultiSelectedBlockClientIds( state );\n\tconst index = clientIds.indexOf( clientId );\n\treturn index > -1 && index < clientIds.length - 1;\n}\n\n/**\n * Returns true if a multi-selection has been made, or false otherwise.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether multi-selection has been made.\n */\nexport function hasMultiSelection( state ) {\n\tconst { start, end } = state.blockSelection;\n\treturn start !== end;\n}\n\n/**\n * Whether in the process of multi-selecting or not. This flag is only true\n * while the multi-selection is being selected (by mouse move), and is false\n * once the multi-selection has been settled.\n *\n * @see hasMultiSelection\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi-selecting, false if not.\n */\nexport function isMultiSelecting( state ) {\n\treturn state.blockSelection.isMultiSelecting;\n}\n\n/**\n * Whether is selection disable or not.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} True if multi is disable, false if not.\n */\nexport function isSelectionEnabled( state ) {\n\treturn state.blockSelection.isEnabled;\n}\n\n/**\n * Returns the block's editing mode, defaulting to \"visual\" if not explicitly\n * assigned.\n *\n * @param {Object} state    Editor state.\n * @param {string} clientId Block client ID.\n *\n * @return {Object} Block editing mode.\n */\nexport function getBlockMode( state, clientId ) {\n\treturn state.blocksMode[ clientId ] || 'visual';\n}\n\n/**\n * Returns true if the user is typing, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether user is typing.\n */\nexport function isTyping( state ) {\n\treturn state.isTyping;\n}\n\n/**\n * Returns the insertion point, the index at which the new inserted block would\n * be placed. Defaults to the last index.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} Insertion point object with `rootClientId`, `layout`,\n * `index`.\n */\nexport function getBlockInsertionPoint( state ) {\n\tlet rootClientId, layout, index;\n\n\tconst { end } = state.blockSelection;\n\tif ( end ) {\n\t\trootClientId = getBlockRootClientId( state, end ) || undefined;\n\n\t\tlayout = get( getBlock( state, end ), [ 'attributes', 'layout' ] );\n\t\tindex = getBlockIndex( state, end, rootClientId ) + 1;\n\t} else {\n\t\tindex = getBlockOrder( state ).length;\n\t}\n\n\treturn { rootClientId, layout, index };\n}\n\n/**\n * Returns true if we should show the block insertion point.\n *\n * @param {Object} state Global application state.\n *\n * @return {?boolean} Whether the insertion point is visible or not.\n */\nexport function isBlockInsertionPointVisible( state ) {\n\treturn state.isInsertionPointVisible;\n}\n\n/**\n * Returns whether the blocks matches the template or not.\n *\n * @param {boolean} state\n * @return {?boolean} Whether the template is valid or not.\n */\nexport function isValidTemplate( state ) {\n\treturn state.template.isValid;\n}\n\n/**\n * Returns the defined block template\n *\n * @param {boolean} state\n * @return {?Array}        Block Template\n */\nexport function getTemplate( state ) {\n\treturn state.settings.template;\n}\n\n/**\n * Returns the defined block template lock. Optionally accepts a root block\n * client ID as context, otherwise defaulting to the global context.\n *\n * @param {Object}  state        Editor state.\n * @param {?string} rootClientId Optional block root client ID.\n *\n * @return {?string} Block Template Lock\n */\nexport function getTemplateLock( state, rootClientId ) {\n\tif ( ! rootClientId ) {\n\t\treturn state.settings.templateLock;\n\t}\n\n\tconst blockListSettings = getBlockListSettings( state, rootClientId );\n\tif ( ! blockListSettings ) {\n\t\treturn null;\n\t}\n\n\treturn blockListSettings.templateLock;\n}\n\n/**\n * Returns true if the post is currently being saved, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether post is being saved.\n */\nexport function isSavingPost( state ) {\n\treturn state.saving.requesting;\n}\n\n/**\n * Returns true if a previous post save was attempted successfully, or false\n * otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post was saved successfully.\n */\nexport function didPostSaveRequestSucceed( state ) {\n\treturn state.saving.successful;\n}\n\n/**\n * Returns true if a previous post save was attempted but failed, or false\n * otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post save failed.\n */\nexport function didPostSaveRequestFail( state ) {\n\treturn !! state.saving.error;\n}\n\n/**\n * Returns true if the post is autosaving, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the post is autosaving.\n */\nexport function isAutosavingPost( state ) {\n\treturn isSavingPost( state ) && state.saving.isAutosave;\n}\n\n/**\n * Returns a suggested post format for the current post, inferred only if there\n * is a single block within the post and it is of a type known to match a\n * default post format. Returns null if the format cannot be determined.\n *\n * @param {Object} state Global application state.\n *\n * @return {?string} Suggested post format.\n */\nexport function getSuggestedPostFormat( state ) {\n\tconst blocks = getBlockOrder( state );\n\n\tlet name;\n\t// If there is only one block in the content of the post grab its name\n\t// so we can derive a suitable post format from it.\n\tif ( blocks.length === 1 ) {\n\t\tname = getBlock( state, blocks[ 0 ] ).name;\n\t}\n\n\t// If there are two blocks in the content and the last one is a text blocks\n\t// grab the name of the first one to also suggest a post format from it.\n\tif ( blocks.length === 2 ) {\n\t\tif ( getBlock( state, blocks[ 1 ] ).name === 'core/paragraph' ) {\n\t\t\tname = getBlock( state, blocks[ 0 ] ).name;\n\t\t}\n\t}\n\n\t// We only convert to default post formats in core.\n\tswitch ( name ) {\n\t\tcase 'core/image':\n\t\t\treturn 'image';\n\t\tcase 'core/quote':\n\t\tcase 'core/pullquote':\n\t\t\treturn 'quote';\n\t\tcase 'core/gallery':\n\t\t\treturn 'gallery';\n\t\tcase 'core/video':\n\t\tcase 'core-embed/youtube':\n\t\tcase 'core-embed/vimeo':\n\t\t\treturn 'video';\n\t\tcase 'core/audio':\n\t\tcase 'core-embed/spotify':\n\t\tcase 'core-embed/soundcloud':\n\t\t\treturn 'audio';\n\t}\n\n\treturn null;\n}\n\n/**\n * Returns a set of blocks which are to be used in consideration of the post's\n * generated save content.\n *\n * @param {Object} state Editor state.\n *\n * @return {WPBlock[]} Filtered set of blocks for save.\n */\nexport function getBlocksForSerialization( state ) {\n\tconst blocks = getBlocks( state );\n\n\t// A single unmodified default block is assumed to be equivalent to an\n\t// empty post.\n\tconst isSingleUnmodifiedDefaultBlock = (\n\t\tblocks.length === 1 &&\n\t\tisUnmodifiedDefaultBlock( blocks[ 0 ] )\n\t);\n\n\tif ( isSingleUnmodifiedDefaultBlock ) {\n\t\treturn [];\n\t}\n\n\treturn blocks;\n}\n\n/**\n * Returns the content of the post being edited, preferring raw string edit\n * before falling back to serialization of block state.\n *\n * @param {Object} state Global application state.\n *\n * @return {string} Post content.\n */\nexport const getEditedPostContent = createSelector(\n\t( state ) => {\n\t\tconst edits = getPostEdits( state );\n\t\tif ( 'content' in edits ) {\n\t\t\treturn edits.content;\n\t\t}\n\n\t\tconst blocks = getBlocksForSerialization( state );\n\t\tconst content = serialize( blocks );\n\n\t\t// For compatibility purposes, treat a post consisting of a single\n\t\t// freeform block as legacy content and downgrade to a pre-block-editor\n\t\t// removep'd content format.\n\t\tconst isSingleFreeformBlock = (\n\t\t\tblocks.length === 1 &&\n\t\t\tblocks[ 0 ].name === getFreeformContentHandlerName()\n\t\t);\n\n\t\tif ( isSingleFreeformBlock ) {\n\t\t\treturn removep( content );\n\t\t}\n\n\t\treturn content;\n\t},\n\t( state ) => [\n\t\tstate.editor.present.edits.content,\n\t\tstate.editor.present.blocksByClientId,\n\t\tstate.editor.present.blockOrder,\n\t],\n);\n\n/**\n * Returns the user notices array.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} List of notices.\n */\nexport function getNotices( state ) {\n\treturn state.notices;\n}\n\n/**\n * Determines if the given block type is allowed to be inserted, and, if\n * parentClientId is provided, whether it is allowed to be nested within the\n * given parent.\n *\n * @param {Object}  state          Editor state.\n * @param {string}  blockName      The name of the given block type, e.g.\n *                                 'core/paragraph'.\n * @param {?string} parentClientId The parent that the given block is to be\n *                                 nested within, or null.\n *\n * @return {boolean} Whether the given block type is allowed to be inserted.\n */\nexport const canInsertBlockType = createSelector(\n\t( state, blockName, parentClientId = null ) => {\n\t\tconst checkAllowList = ( list, item, defaultResult = null ) => {\n\t\t\tif ( isBoolean( list ) ) {\n\t\t\t\treturn list;\n\t\t\t}\n\t\t\tif ( isArray( list ) ) {\n\t\t\t\treturn includes( list, item );\n\t\t\t}\n\t\t\treturn defaultResult;\n\t\t};\n\n\t\tconst blockType = getBlockType( blockName );\n\t\tif ( ! blockType ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { allowedBlockTypes } = getEditorSettings( state );\n\n\t\tconst isBlockAllowedInEditor = checkAllowList( allowedBlockTypes, blockName, true );\n\t\tif ( ! isBlockAllowedInEditor ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isLocked = !! getTemplateLock( state, parentClientId );\n\t\tif ( isLocked ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst parentBlockListSettings = getBlockListSettings( state, parentClientId );\n\t\tconst parentAllowedBlocks = get( parentBlockListSettings, [ 'allowedBlocks' ] );\n\t\tconst hasParentAllowedBlock = checkAllowList( parentAllowedBlocks, blockName );\n\n\t\tconst blockAllowedParentBlocks = blockType.parent;\n\t\tconst parentName = getBlockName( state, parentClientId );\n\t\tconst hasBlockAllowedParent = checkAllowList( blockAllowedParentBlocks, parentName );\n\n\t\tif ( hasParentAllowedBlock !== null && hasBlockAllowedParent !== null ) {\n\t\t\treturn hasParentAllowedBlock || hasBlockAllowedParent;\n\t\t} else if ( hasParentAllowedBlock !== null ) {\n\t\t\treturn hasParentAllowedBlock;\n\t\t} else if ( hasBlockAllowedParent !== null ) {\n\t\t\treturn hasBlockAllowedParent;\n\t\t}\n\n\t\treturn true;\n\t},\n\t( state, blockName, parentClientId ) => [\n\t\tstate.blockListSettings[ parentClientId ],\n\t\tstate.editor.present.blocksByClientId[ parentClientId ],\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t],\n);\n\n/**\n * Returns information about how recently and frequently a block has been inserted.\n *\n * @param {Object} state Global application state.\n * @param {string} id    A string which identifies the insert, e.g. 'core/block/12'\n *\n * @return {?{ time: number, count: number }} An object containing `time` which is when the last\n *                                            insert occured as a UNIX epoch, and `count` which is\n *                                            the number of inserts that have occurred.\n */\nfunction getInsertUsage( state, id ) {\n\treturn state.preferences.insertUsage[ id ] || null;\n}\n\n/**\n * Determines the items that appear in the inserter. Includes both static\n * items (e.g. a regular block type) and dynamic items (e.g. a reusable block).\n *\n * Each item object contains what's necessary to display a button in the\n * inserter and handle its selection.\n *\n * The 'utility' property indicates how useful we think an item will be to the\n * user. There are 4 levels of utility:\n *\n * 1. Blocks that are contextually useful (utility = 3)\n * 2. Blocks that have been previously inserted (utility = 2)\n * 3. Blocks that are in the common category (utility = 1)\n * 4. All other blocks (utility = 0)\n *\n * The 'frecency' property is a heuristic (https://en.wikipedia.org/wiki/Frecency)\n * that combines block usage frequenty and recency.\n *\n * Items are returned ordered descendingly by their 'utility' and 'frecency'.\n *\n * @param {Object}  state          Editor state.\n * @param {?string} parentClientId The block we are inserting into, if any.\n *\n * @return {Editor.InserterItem[]} Items that appear in inserter.\n *\n * @typedef {Object} Editor.InserterItem\n * @property {string}   id                Unique identifier for the item.\n * @property {string}   name              The type of block to create.\n * @property {Object}   initialAttributes Attributes to pass to the newly created block.\n * @property {string}   title             Title of the item, as it appears in the inserter.\n * @property {string}   icon              Dashicon for the item, as it appears in the inserter.\n * @property {string}   category          Block category that the item is associated with.\n * @property {string[]} keywords          Keywords that can be searched to find this item.\n * @property {boolean}  isDisabled        Whether or not the user should be prevented from inserting\n *                                        this item.\n * @property {number}   utility           How useful we think this item is, between 0 and 3.\n * @property {number}   frecency          Hueristic that combines frequency and recency.\n */\nexport const getInserterItems = createSelector(\n\t( state, parentClientId = null ) => {\n\t\tconst calculateUtility = ( category, count, isContextual ) => {\n\t\t\tif ( isContextual ) {\n\t\t\t\treturn INSERTER_UTILITY_HIGH;\n\t\t\t} else if ( count > 0 ) {\n\t\t\t\treturn INSERTER_UTILITY_MEDIUM;\n\t\t\t} else if ( category === 'common' ) {\n\t\t\t\treturn INSERTER_UTILITY_LOW;\n\t\t\t}\n\t\t\treturn INSERTER_UTILITY_NONE;\n\t\t};\n\n\t\tconst calculateFrecency = ( time, count ) => {\n\t\t\tif ( ! time ) {\n\t\t\t\treturn count;\n\t\t\t}\n\n\t\t\t// The selector is cached, which means Date.now() is the last time that the\n\t\t\t// relevant state changed. This suits our needs.\n\t\t\tconst duration = Date.now() - time;\n\n\t\t\tswitch ( true ) {\n\t\t\t\tcase duration < MILLISECONDS_PER_HOUR:\n\t\t\t\t\treturn count * 4;\n\t\t\t\tcase duration < MILLISECONDS_PER_DAY:\n\t\t\t\t\treturn count * 2;\n\t\t\t\tcase duration < MILLISECONDS_PER_WEEK:\n\t\t\t\t\treturn count / 2;\n\t\t\t\tdefault:\n\t\t\t\t\treturn count / 4;\n\t\t\t}\n\t\t};\n\n\t\tconst shouldIncludeBlockType = ( blockType ) => {\n\t\t\tif ( ! hasBlockSupport( blockType, 'inserter', true ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn canInsertBlockType( state, blockType.name, parentClientId );\n\t\t};\n\n\t\tconst buildBlockTypeInserterItem = ( blockType ) => {\n\t\t\tconst id = blockType.name;\n\n\t\t\tlet isDisabled = false;\n\t\t\tif ( ! hasBlockSupport( blockType.name, 'multiple', true ) ) {\n\t\t\t\tisDisabled = some( getBlocksByClientId( state, getClientIdsWithDescendants( state ) ), { name: blockType.name } );\n\t\t\t}\n\n\t\t\tconst isContextual = isArray( blockType.parent );\n\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: blockType.name,\n\t\t\t\tinitialAttributes: {},\n\t\t\t\ttitle: blockType.title,\n\t\t\t\ticon: blockType.icon,\n\t\t\t\tcategory: blockType.category,\n\t\t\t\tkeywords: blockType.keywords,\n\t\t\t\tisDisabled,\n\t\t\t\tutility: calculateUtility( blockType.category, count, isContextual ),\n\t\t\t\tfrecency: calculateFrecency( time, count ),\n\t\t\t\thasChildBlocksWithInserterSupport: hasChildBlocksWithInserterSupport( blockType.name ),\n\t\t\t};\n\t\t};\n\n\t\tconst shouldIncludeReusableBlock = ( reusableBlock ) => {\n\t\t\tif ( ! canInsertBlockType( state, 'core/block', parentClientId ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst referencedBlock = getBlock( state, reusableBlock.clientId );\n\t\t\tif ( ! referencedBlock ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst referencedBlockType = getBlockType( referencedBlock.name );\n\t\t\tif ( ! referencedBlockType ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( ! canInsertBlockType( state, referencedBlockType.name, parentClientId ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t};\n\n\t\tconst buildReusableBlockInserterItem = ( reusableBlock ) => {\n\t\t\tconst id = `core/block/${ reusableBlock.id }`;\n\n\t\t\tconst referencedBlock = getBlock( state, reusableBlock.clientId );\n\t\t\tconst referencedBlockType = getBlockType( referencedBlock.name );\n\n\t\t\tconst { time, count = 0 } = getInsertUsage( state, id ) || {};\n\t\t\tconst utility = calculateUtility( 'reusable', count, false );\n\t\t\tconst frecency = calculateFrecency( time, count );\n\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\tname: 'core/block',\n\t\t\t\tinitialAttributes: { ref: reusableBlock.id },\n\t\t\t\ttitle: reusableBlock.title,\n\t\t\t\ticon: referencedBlockType.icon,\n\t\t\t\tcategory: 'reusable',\n\t\t\t\tkeywords: [],\n\t\t\t\tisDisabled: false,\n\t\t\t\tutility,\n\t\t\t\tfrecency,\n\t\t\t};\n\t\t};\n\n\t\tconst blockTypeInserterItems = getBlockTypes()\n\t\t\t.filter( shouldIncludeBlockType )\n\t\t\t.map( buildBlockTypeInserterItem );\n\n\t\tconst reusableBlockInserterItems = getReusableBlocks( state )\n\t\t\t.filter( shouldIncludeReusableBlock )\n\t\t\t.map( buildReusableBlockInserterItem );\n\n\t\treturn orderBy(\n\t\t\t[ ...blockTypeInserterItems, ...reusableBlockInserterItems ],\n\t\t\t[ 'utility', 'frecency' ],\n\t\t\t[ 'desc', 'desc' ]\n\t\t);\n\t},\n\t( state, parentClientId ) => [\n\t\tstate.blockListSettings[ parentClientId ],\n\t\tstate.editor.present.blockOrder,\n\t\tstate.editor.present.blocksByClientId,\n\t\tstate.preferences.insertUsage,\n\t\tstate.settings.allowedBlockTypes,\n\t\tstate.settings.templateLock,\n\t\tstate.reusableBlocks.data,\n\t\tgetBlockTypes(),\n\t],\n);\n\n/**\n * Returns the reusable block with the given ID.\n *\n * @param {Object}        state Global application state.\n * @param {number|string} ref   The reusable block's ID.\n *\n * @return {Object} The reusable block, or null if none exists.\n */\nexport const getReusableBlock = createSelector(\n\t( state, ref ) => {\n\t\tconst block = state.reusableBlocks.data[ ref ];\n\t\tif ( ! block ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isTemporary = isNaN( parseInt( ref ) );\n\n\t\treturn {\n\t\t\t...block,\n\t\t\tid: isTemporary ? ref : +ref,\n\t\t\tisTemporary,\n\t\t};\n\t},\n\t( state, ref ) => [\n\t\tstate.reusableBlocks.data[ ref ],\n\t],\n);\n\n/**\n * Returns whether or not the reusable block with the given ID is being saved.\n *\n * @param {Object} state Global application state.\n * @param {string} ref   The reusable block's ID.\n *\n * @return {boolean} Whether or not the reusable block is being saved.\n */\nexport function isSavingReusableBlock( state, ref ) {\n\treturn state.reusableBlocks.isSaving[ ref ] || false;\n}\n\n/**\n * Returns true if the reusable block with the given ID is being fetched, or\n * false otherwise.\n *\n * @param {Object} state Global application state.\n * @param {string} ref   The reusable block's ID.\n *\n * @return {boolean} Whether the reusable block is being fetched.\n */\nexport function isFetchingReusableBlock( state, ref ) {\n\treturn !! state.reusableBlocks.isFetching[ ref ];\n}\n\n/**\n * Returns an array of all reusable blocks.\n *\n * @param {Object} state Global application state.\n *\n * @return {Array} An array of all reusable blocks.\n */\nexport function getReusableBlocks( state ) {\n\treturn map( state.reusableBlocks.data, ( value, ref ) => getReusableBlock( state, ref ) );\n}\n\n/**\n * Returns state object prior to a specified optimist transaction ID, or `null`\n * if the transaction corresponding to the given ID cannot be found.\n *\n * @param {Object} state         Current global application state.\n * @param {Object} transactionId Optimist transaction ID.\n *\n * @return {Object} Global application state prior to transaction.\n */\nexport function getStateBeforeOptimisticTransaction( state, transactionId ) {\n\tconst transaction = find( state.optimist, ( entry ) => (\n\t\tentry.beforeState &&\n\t\tget( entry.action, [ 'optimist', 'id' ] ) === transactionId\n\t) );\n\n\treturn transaction ? transaction.beforeState : null;\n}\n\n/**\n * Returns true if the post is being published, or false otherwise.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether post is being published.\n */\nexport function isPublishingPost( state ) {\n\tif ( ! isSavingPost( state ) ) {\n\t\treturn false;\n\t}\n\n\t// Saving is optimistic, so assume that current post would be marked as\n\t// published if publishing\n\tif ( ! isCurrentPostPublished( state ) ) {\n\t\treturn false;\n\t}\n\n\t// Use post update transaction ID to retrieve the state prior to the\n\t// optimistic transaction\n\tconst stateBeforeRequest = getStateBeforeOptimisticTransaction(\n\t\tstate,\n\t\tPOST_UPDATE_TRANSACTION_ID\n\t);\n\n\t// Consider as publishing when current post prior to request was not\n\t// considered published\n\treturn !! stateBeforeRequest && ! isCurrentPostPublished( stateBeforeRequest );\n}\n\n/**\n * Returns whether the permalink is editable or not.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether or not the permalink is editable.\n */\nexport function isPermalinkEditable( state ) {\n\tconst permalinkTemplate = getEditedPostAttribute( state, 'permalink_template' );\n\n\treturn PERMALINK_POSTNAME_REGEX.test( permalinkTemplate );\n}\n\n/**\n * Returns the permalink for the post.\n *\n * @param {Object} state Editor state.\n *\n * @return {string} The permalink.\n */\nexport function getPermalink( state ) {\n\tconst { prefix, postName, suffix } = getPermalinkParts( state );\n\n\tif ( isPermalinkEditable( state ) ) {\n\t\treturn prefix + postName + suffix;\n\t}\n\n\treturn prefix;\n}\n\n/**\n * Returns the permalink for a post, split into it's three parts: the prefix, the postName, and the suffix.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The prefix, postName, and suffix for the permalink.\n */\nexport function getPermalinkParts( state ) {\n\tconst permalinkTemplate = getEditedPostAttribute( state, 'permalink_template' );\n\tconst postName = getEditedPostAttribute( state, 'slug' ) || getEditedPostAttribute( state, 'generated_slug' );\n\n\tconst [ prefix, suffix ] = permalinkTemplate.split( PERMALINK_POSTNAME_REGEX );\n\n\treturn {\n\t\tprefix,\n\t\tpostName,\n\t\tsuffix,\n\t};\n}\n\n/**\n * Returns true if an optimistic transaction is pending commit, for which the\n * before state satisfies the given predicate function.\n *\n * @param {Object}   state     Editor state.\n * @param {Function} predicate Function given state, returning true if match.\n *\n * @return {boolean} Whether predicate matches for some history.\n */\nexport function inSomeHistory( state, predicate ) {\n\tconst { optimist } = state;\n\n\t// In recursion, optimist state won't exist. Assume exhausted options.\n\tif ( ! optimist ) {\n\t\treturn false;\n\t}\n\n\treturn optimist.some( ( { beforeState } ) => (\n\t\tbeforeState && predicate( beforeState )\n\t) );\n}\n\n/**\n * Returns the Block List settings of a block, if any exist.\n *\n * @param {Object}  state    Editor state.\n * @param {?string} clientId Block client ID.\n *\n * @return {?Object} Block settings of the block if set.\n */\nexport function getBlockListSettings( state, clientId ) {\n\treturn state.blockListSettings[ clientId ];\n}\n\n/**\n * Returns the editor settings.\n *\n * @param {Object} state Editor state.\n *\n * @return {Object} The editor settings object.\n */\nexport function getEditorSettings( state ) {\n\treturn state.settings;\n}\n\n/**\n * Returns the token settings.\n *\n * @param {Object} state Editor state.\n * @param {?string} name Token name.\n *\n * @return {Object} Token settings object, or the named token settings object if set.\n */\nexport function getTokenSettings( state, name ) {\n\tif ( ! name ) {\n\t\treturn state.tokens;\n\t}\n\n\treturn state.tokens[ name ];\n}\n\n/**\n * Returns whether the post is locked.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Is locked.\n */\nexport function isPostLocked( state ) {\n\treturn state.postLock.isLocked;\n}\n\n/**\n * Returns whether the edition of the post has been taken over.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Is post lock takeover.\n */\nexport function isPostLockTakeover( state ) {\n\treturn state.postLock.isTakeover;\n}\n\n/**\n * Returns details about the post lock user.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} A user object.\n */\nexport function getPostLockUser( state ) {\n\treturn state.postLock.user;\n}\n\n/**\n * Returns the active post lock.\n *\n * @param {Object} state Global application state.\n *\n * @return {Object} The lock object.\n */\nexport function getActivePostLock( state ) {\n\treturn state.postLock.activePostLock;\n}\n\n/**\n * Returns whether or not the user has the unfiltered_html capability.\n *\n * @param {Object} state Editor state.\n *\n * @return {boolean} Whether the user can or can't post unfiltered HTML.\n */\nexport function canUserUseUnfilteredHTML( state ) {\n\treturn has( getCurrentPost( state ), [ '_links', 'wp:action-unfiltered-html' ] );\n}\n\n/**\n * Returns whether the pre-publish panel should be shown\n * or skipped when the user clicks the \"publish\" button.\n *\n * @param {Object} state Global application state.\n *\n * @return {boolean} Whether the pre-publish panel should be shown or not.\n */\nexport function isPublishSidebarEnabled( state ) {\n\tif ( state.preferences.hasOwnProperty( 'isPublishSidebarEnabled' ) ) {\n\t\treturn state.preferences.isPublishSidebarEnabled;\n\t}\n\treturn PREFERENCES_DEFAULTS.isPublishSidebarEnabled;\n}\n","/**\n * Given a block client ID, returns the corresponding DOM node for the block,\n * if exists. As much as possible, this helper should be avoided, and used only\n * in cases where isolated behaviors need remote access to a block node.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Element} Block DOM node.\n */\nexport function getBlockDOMNode( clientId ) {\n\treturn document.querySelector( '[data-block=\"' + clientId + '\"]' );\n}\n\n/**\n * Given a block client ID, returns the corresponding DOM node for the block\n * focusable wrapper, if exists. As much as possible, this helper should be\n * avoided, and used only in cases where isolated behaviors need remote access\n * to a block node.\n *\n * @param {string} clientId Block client ID.\n *\n * @return {Element} Block DOM node.\n */\nexport function getBlockFocusableWrapper( clientId ) {\n\treturn getBlockDOMNode( clientId ).closest( '.editor-block-list__block' );\n}\n\n/**\n * Returns true if the given HTMLElement is a block focus stop. Blocks without\n * their own text fields rely on the focus stop to be keyboard navigable.\n *\n * @param {HTMLElement} element Element to test.\n *\n * @return {boolean} Whether element is a block focus stop.\n */\nexport function isBlockFocusStop( element ) {\n\treturn element.classList.contains( 'editor-block-list__block' );\n}\n\n/**\n * Returns true if two elements are contained within the same block.\n *\n * @param {HTMLElement} a First element.\n * @param {HTMLElement} b Second element.\n *\n * @return {boolean} Whether elements are in the same block.\n */\nexport function isInSameBlock( a, b ) {\n\treturn a.closest( '[data-block]' ) === b.closest( '[data-block]' );\n}\n\n/**\n * Returns true if an elements is considered part of the block and not its children.\n *\n * @param {HTMLElement} blockElement Block container element.\n * @param {HTMLElement} element      Element.\n *\n * @return {boolean} Whether element is in the block Element but not its children.\n */\nexport function isInsideRootBlock( blockElement, element ) {\n\tconst innerBlocksContainer = blockElement.querySelector( '.editor-block-list__layout' );\n\treturn blockElement.contains( element ) && (\n\t\t! innerBlocksContainer || ! innerBlocksContainer.contains( element )\n\t);\n}\n\n/**\n * Returns true if the given HTMLElement contains inner blocks (an InnerBlocks\n * element).\n *\n * @param {HTMLElement} element Element to test.\n *\n * @return {boolean} Whether element contains inner blocks.\n */\nexport function hasInnerBlocksContext( element ) {\n\treturn !! element.querySelector( '.editor-block-list__layout' );\n}\n","/**\n * Internal dependencies\n */\nimport mediaUpload from './media-upload';\n\nexport { mediaUpload };\n","/**\n * External dependencies\n */\nimport { noop } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport { select } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { mediaUpload } from './media-upload';\n\n/**\n * Upload a media file when the file upload button is activated.\n * Wrapper around mediaUpload() that injects the current post ID.\n *\n * @param   {Object}   $0                   Parameters object passed to the function.\n * @param   {string}   $0.allowedTypes      Array with the types of media that can be uploaded, if unset all types are allowed.\n * @param   {Array}    $0.filesList         List of files.\n * @param   {?number}  $0.maxUploadFileSize Maximum upload size in bytes allowed for the site.\n * @param   {Function} $0.onError           Function called when an error happens.\n * @param   {Function} $0.onFileChange      Function called each time a file or a temporary representation of the file is available.\n */\nexport default function( {\n\tallowedTypes,\n\tfilesList,\n\tmaxUploadFileSize,\n\tonError = noop,\n\tonFileChange,\n\tallowedType,\n} ) {\n\tdeprecated( 'mediaDetails in object passed to onFileChange callback of wp.editor.mediaUpload', {\n\t\tversion: '4.2',\n\t\talternative: 'media_details property containing exactly the property as returned by the rest api',\n\t} );\n\n\tconst {\n\t\tgetCurrentPostId,\n\t\tgetEditorSettings,\n\t} = select( 'core/editor' );\n\tconst wpAllowedMimeTypes = getEditorSettings().allowedMimeTypes;\n\tmaxUploadFileSize = maxUploadFileSize || getEditorSettings().maxUploadFileSize;\n\n\tlet allowedTypesToUse = allowedTypes;\n\tif ( ! allowedTypes && allowedType ) {\n\t\tdeprecated( 'allowedType parameter property of wp.editor.mediaUpload', {\n\t\t\tversion: '4.2',\n\t\t\talternative: 'allowedTypes property containing an array with the allowedTypes or do not pass any property if all types are allowed',\n\t\t} );\n\t\tif ( allowedType === '*' ) {\n\t\t\tallowedTypesToUse = undefined;\n\t\t} else {\n\t\t\tallowedTypesToUse = [ allowedType ];\n\t\t}\n\t}\n\tmediaUpload( {\n\t\tallowedTypes: allowedTypesToUse,\n\t\tfilesList,\n\t\tonFileChange,\n\t\tadditionalData: {\n\t\t\tpost: getCurrentPostId(),\n\t\t},\n\t\tmaxUploadFileSize,\n\t\tonError: ( { message } ) => onError( message ),\n\t\twpAllowedMimeTypes,\n\t} );\n}\n","/**\n * External Dependencies\n */\nimport {\n\tcompact,\n\tflatMap,\n\tforEach,\n\tget,\n\thas,\n\tincludes,\n\tmap,\n\tnoop,\n\tomit,\n\tsome,\n\tstartsWith,\n} from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport apiFetch from '@wordpress/api-fetch';\nimport { createBlobURL, revokeBlobURL } from '@wordpress/blob';\nimport { __, sprintf } from '@wordpress/i18n';\n\n/**\n * Browsers may use unexpected mime types, and they differ from browser to browser.\n * This function computes a flexible array of mime types from the mime type structured provided by the server.\n * Converts { jpg|jpeg|jpe: \"image/jpeg\" } into [ \"image/jpeg\", \"image/jpg\", \"image/jpeg\", \"image/jpe\" ]\n * The computation of this array instead of directly using the object,\n * solves the problem in chrome where mp3 files have audio/mp3 as mime type instead of audio/mpeg.\n * https://bugs.chromium.org/p/chromium/issues/detail?id=227004\n *\n * @param {?Object} wpMimeTypesObject Mime type object received from the server.\n *                                    Extensions are keys separated by '|' and values are mime types associated with an extension.\n *\n * @return {?Array} An array of mime types or the parameter passed if it was \"falsy\".\n */\nexport function getMimeTypesArray( wpMimeTypesObject ) {\n\tif ( ! wpMimeTypesObject ) {\n\t\treturn wpMimeTypesObject;\n\t}\n\treturn flatMap( wpMimeTypesObject, ( mime, extensionsString ) => {\n\t\tconst [ type ] = mime.split( '/' );\n\t\tconst extensions = extensionsString.split( '|' );\n\t\treturn [ mime, ...map( extensions, ( extension ) => `${ type }/${ extension }` ) ];\n\t} );\n}\n\n/**\n *\tMedia Upload is used by audio, image, gallery, video, and file blocks to\n *\thandle uploading a media file when a file upload button is activated.\n *\n *\tTODO: future enhancement to add an upload indicator.\n *\n * @param   {Object}   $0                    Parameters object passed to the function.\n * @param   {?Array}   $0.allowedTypes       Array with the types of media that can be uploaded, if unset all types are allowed.\n * @param   {?Object}  $0.additionalData     Additional data to include in the request.\n * @param   {Array}    $0.filesList          List of files.\n * @param   {?number}  $0.maxUploadFileSize  Maximum upload size in bytes allowed for the site.\n * @param   {Function} $0.onError            Function called when an error happens.\n * @param   {Function} $0.onFileChange       Function called each time a file or a temporary representation of the file is available.\n * @param   {?Object}  $0.wpAllowedMimeTypes List of allowed mime types and file extensions.\n */\nexport function mediaUpload( {\n\tallowedTypes,\n\tadditionalData = {},\n\tfilesList,\n\tmaxUploadFileSize,\n\tonError = noop,\n\tonFileChange,\n\twpAllowedMimeTypes = null,\n} ) {\n\t// Cast filesList to array\n\tconst files = [ ...filesList ];\n\n\tconst filesSet = [];\n\tconst setAndUpdateFiles = ( idx, value ) => {\n\t\trevokeBlobURL( get( filesSet, [ idx, 'url' ] ) );\n\t\tfilesSet[ idx ] = value;\n\t\tonFileChange( compact( filesSet ) );\n\t};\n\n\t// Allowed type specified by consumer\n\tconst isAllowedType = ( fileType ) => {\n\t\tif ( ! allowedTypes ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn some(\n\t\t\tallowedTypes,\n\t\t\t( allowedType ) => {\n\t\t\t\t// If a complete mimetype is specified verify if it matches exactly the mime type of the file.\n\t\t\t\tif ( includes( allowedType, '/' ) ) {\n\t\t\t\t\treturn allowedType === fileType;\n\t\t\t\t}\n\t\t\t\t// Otherwise a general mime type is used and we should verify if the file mimetype starts with it.\n\t\t\t\treturn startsWith( fileType, `${ allowedType }/` );\n\t\t\t}\n\t\t);\n\t};\n\n\t// Allowed types for the current WP_User\n\tconst allowedMimeTypesForUser = getMimeTypesArray( wpAllowedMimeTypes );\n\tconst isAllowedMimeTypeForUser = ( fileType ) => {\n\t\treturn includes( allowedMimeTypesForUser, fileType );\n\t};\n\n\t// Build the error message including the filename\n\tconst triggerError = ( error ) => {\n\t\terror.message = [\n\t\t\t<strong key=\"filename\">{ error.file.name }</strong>,\n\t\t\t': ',\n\t\t\terror.message,\n\t\t];\n\n\t\tonError( error );\n\t};\n\n\tfiles.forEach( ( mediaFile, idx ) => {\n\t\t// verify if user is allowed to upload this mime type\n\t\tif ( allowedMimeTypesForUser && ! isAllowedMimeTypeForUser( mediaFile.type ) ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'MIME_TYPE_NOT_ALLOWED_FOR_USER',\n\t\t\t\tmessage: __( 'Sorry, this file type is not permitted for security reasons.' ),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\t// Check if the block supports this mime type\n\t\tif ( ! isAllowedType( mediaFile.type ) ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'MIME_TYPE_NOT_SUPPORTED',\n\t\t\t\tmessage: __( 'Sorry, this file type is not supported here.' ),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\t// verify if file is greater than the maximum file upload size allowed for the site.\n\t\tif ( maxUploadFileSize && mediaFile.size > maxUploadFileSize ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'SIZE_ABOVE_LIMIT',\n\t\t\t\tmessage: __( 'This file exceeds the maximum upload size for this site.' ),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\t// Don't allow empty files to be uploaded.\n\t\tif ( mediaFile.size <= 0 ) {\n\t\t\ttriggerError( {\n\t\t\t\tcode: 'EMPTY_FILE',\n\t\t\t\tmessage: __( 'This file is empty.' ),\n\t\t\t\tfile: mediaFile,\n\t\t\t} );\n\t\t\treturn;\n\t\t}\n\n\t\t// Set temporary URL to create placeholder media file, this is replaced\n\t\t// with final file from media gallery when upload is `done` below\n\t\tfilesSet.push( { url: createBlobURL( mediaFile ) } );\n\t\tonFileChange( filesSet );\n\n\t\treturn createMediaFromFile( mediaFile, additionalData )\n\t\t\t.then( ( savedMedia ) => {\n\t\t\t\tconst mediaObject = {\n\t\t\t\t\t...omit( savedMedia, [ 'alt_text', 'source_url' ] ),\n\t\t\t\t\talt: savedMedia.alt_text,\n\t\t\t\t\tcaption: get( savedMedia, [ 'caption', 'raw' ], '' ),\n\t\t\t\t\ttitle: savedMedia.title.raw,\n\t\t\t\t\turl: savedMedia.source_url,\n\t\t\t\t\tmediaDetails: {},\n\t\t\t\t};\n\t\t\t\tif ( has( savedMedia, [ 'media_details', 'sizes' ] ) ) {\n\t\t\t\t\tmediaObject.mediaDetails.sizes = get( savedMedia, [ 'media_details', 'sizes' ], {} );\n\t\t\t\t}\n\t\t\t\tsetAndUpdateFiles( idx, mediaObject );\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\t// Reset to empty on failure.\n\t\t\t\tsetAndUpdateFiles( idx, null );\n\t\t\t\tlet message;\n\t\t\t\tif ( has( error, [ 'message' ] ) ) {\n\t\t\t\t\tmessage = get( error, [ 'message' ] );\n\t\t\t\t} else {\n\t\t\t\t\tmessage = sprintf(\n\t\t\t\t\t\t// translators: %s: file name\n\t\t\t\t\t\t__( 'Error while uploading file %s to the media library.' ),\n\t\t\t\t\t\tmediaFile.name\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tonError( {\n\t\t\t\t\tcode: 'GENERAL',\n\t\t\t\t\tmessage,\n\t\t\t\t\tfile: mediaFile,\n\t\t\t\t} );\n\t\t\t} );\n\t} );\n}\n\n/**\n * @param {File}    file           Media File to Save.\n * @param {?Object} additionalData Additional data to include in the request.\n *\n * @return {Promise} Media Object Promise.\n */\nfunction createMediaFromFile( file, additionalData ) {\n\t// Create upload payload\n\tconst data = new window.FormData();\n\tdata.append( 'file', file, file.name || file.type.replace( '/', '.' ) );\n\tdata.append( 'title', file.name ? file.name.replace( /\\.[^.]+$/, '' ) : file.type.replace( '/', '.' ) );\n\tforEach( additionalData, ( ( value, key ) => data.append( key, value ) ) );\n\treturn apiFetch( {\n\t\tpath: '/wp/v2/media',\n\t\tbody: data,\n\t\tmethod: 'POST',\n\t} );\n}\n","/**\n * External dependencies\n */\nimport { groupBy } from 'lodash';\n\n/**\n * Returns terms in a tree form.\n *\n * @param {Array} flatTerms  Array of terms in flat format.\n *\n * @return {Array} Array of terms in tree format.\n */\nexport function buildTermsTree( flatTerms ) {\n\tconst termsByParent = groupBy( flatTerms, 'parent' );\n\tconst fillWithChildren = ( terms ) => {\n\t\treturn terms.map( ( term ) => {\n\t\t\tconst children = termsByParent[ term.id ];\n\t\t\treturn {\n\t\t\t\t...term,\n\t\t\t\tchildren: children && children.length ?\n\t\t\t\t\tfillWithChildren( children ) :\n\t\t\t\t\t[],\n\t\t\t};\n\t\t} );\n\t};\n\n\treturn fillWithChildren( termsByParent[ '0' ] || [] );\n}\n","/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Returns the URL of a WPAdmin Page.\n *\n * TODO: This should be moved to a module less specific to the editor.\n *\n * @param {string} page  Page to navigate to.\n * @param {Object} query Query Args.\n *\n * @return {string} WPAdmin URL.\n */\nexport function getWPAdminURL( page, query ) {\n\treturn addQueryArgs( page, query );\n}\n\n/**\n * Returns a URL for display.\n *\n * @param {string} url Original URL.\n *\n * @return {string} Displayed URL.\n */\nexport function filterURLForDisplay( url ) {\n\t// remove protocol and www prefixes\n\tconst filteredURL = url.replace( new RegExp( '^https?://(www\\.)?' ), '' );\n\n\t// ends with / and only has that single slash, strip it\n\tif ( filteredURL.match( '^[^/]+/$' ) ) {\n\t\treturn filteredURL.replace( '/', '' );\n\t}\n\n\treturn filteredURL;\n}\n","/**\n * External dependencies\n */\nimport { includes } from 'lodash';\n\n/**\n * Higher-order reducer creator for tracking changes to state over time. The\n * returned reducer will include a `isDirty` property on the object reflecting\n * whether the original reference of the reducer has changed.\n *\n * @param {?Object} options             Optional options.\n * @param {?Array}  options.ignoreTypes Action types upon which to skip check.\n * @param {?Array}  options.resetTypes  Action types upon which to reset dirty.\n *\n * @return {Function} Higher-order reducer.\n */\nconst withChangeDetection = ( options = {} ) => ( reducer ) => {\n\treturn ( state, action ) => {\n\t\tlet nextState = reducer( state, action );\n\n\t\t// Reset at:\n\t\t//  - Initial state\n\t\t//  - Reset types\n\t\tconst isReset = (\n\t\t\tstate === undefined ||\n\t\t\tincludes( options.resetTypes, action.type )\n\t\t);\n\n\t\tconst isChanging = state !== nextState;\n\n\t\t// If not intending to update dirty flag, return early and avoid clone.\n\t\tif ( ! isChanging && ! isReset ) {\n\t\t\treturn state;\n\t\t}\n\n\t\t// Avoid mutating state, unless it's already changing by original\n\t\t// reducer and not initial.\n\t\tif ( ! isChanging || state === undefined ) {\n\t\t\tnextState = { ...nextState };\n\t\t}\n\n\t\tconst isIgnored = includes( options.ignoreTypes, action.type );\n\n\t\tif ( isIgnored ) {\n\t\t\t// Preserve the original value if ignored.\n\t\t\tnextState.isDirty = state.isDirty;\n\t\t} else {\n\t\t\tnextState.isDirty = ! isReset && isChanging;\n\t\t}\n\n\t\treturn nextState;\n\t};\n};\n\nexport default withChangeDetection;\n","/**\n * External dependencies\n */\nimport { overSome, includes, first, last, drop, dropRight } from 'lodash';\n\n/**\n * Default options for withHistory reducer enhancer. Refer to withHistory\n * documentation for options explanation.\n *\n * @see withHistory\n *\n * @type {Object}\n */\nconst DEFAULT_OPTIONS = {\n\tresetTypes: [],\n\tignoreTypes: [],\n\tshouldOverwriteState: () => false,\n};\n\n/**\n * Higher-order reducer creator which transforms the result of the original\n * reducer into an object tracking its own history (past, present, future).\n *\n * @param {?Object}   options                      Optional options.\n * @param {?Array}    options.resetTypes           Action types upon which to\n *                                                 clear past.\n * @param {?Array}    options.ignoreTypes          Action types upon which to\n *                                                 avoid history tracking.\n * @param {?Function} options.shouldOverwriteState Function receiving last and\n *                                                 current actions, returning\n *                                                 boolean indicating whether\n *                                                 present should be merged,\n *                                                 rather than add undo level.\n *\n * @return {Function} Higher-order reducer.\n */\nconst withHistory = ( options = {} ) => ( reducer ) => {\n\toptions = { ...DEFAULT_OPTIONS, ...options };\n\n\t// `ignoreTypes` is simply a convenience for `shouldOverwriteState`\n\toptions.shouldOverwriteState = overSome( [\n\t\toptions.shouldOverwriteState,\n\t\t( action ) => includes( options.ignoreTypes, action.type ),\n\t] );\n\n\tconst initialState = {\n\t\tpast: [],\n\t\tpresent: reducer( undefined, {} ),\n\t\tfuture: [],\n\t\tlastAction: null,\n\t\tshouldCreateUndoLevel: false,\n\t};\n\n\tconst {\n\t\tresetTypes = [],\n\t\tshouldOverwriteState = () => false,\n\t} = options;\n\n\treturn ( state = initialState, action ) => {\n\t\tconst { past, present, future, lastAction, shouldCreateUndoLevel } = state;\n\t\tconst previousAction = lastAction;\n\n\t\tswitch ( action.type ) {\n\t\t\tcase 'UNDO':\n\t\t\t\t// Can't undo if no past.\n\t\t\t\tif ( ! past.length ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpast: dropRight( past ),\n\t\t\t\t\tpresent: last( past ),\n\t\t\t\t\tfuture: [ present, ...future ],\n\t\t\t\t\tlastAction: null,\n\t\t\t\t\tshouldCreateUndoLevel: false,\n\t\t\t\t};\n\t\t\tcase 'REDO':\n\t\t\t\t// Can't redo if no future.\n\t\t\t\tif ( ! future.length ) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\tpast: [ ...past, present ],\n\t\t\t\t\tpresent: first( future ),\n\t\t\t\t\tfuture: drop( future ),\n\t\t\t\t\tlastAction: null,\n\t\t\t\t\tshouldCreateUndoLevel: false,\n\t\t\t\t};\n\n\t\t\tcase 'CREATE_UNDO_LEVEL':\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tlastAction: null,\n\t\t\t\t\tshouldCreateUndoLevel: true,\n\t\t\t\t};\n\t\t}\n\n\t\tconst nextPresent = reducer( present, action );\n\n\t\tif ( includes( resetTypes, action.type ) ) {\n\t\t\treturn {\n\t\t\t\tpast: [],\n\t\t\t\tpresent: nextPresent,\n\t\t\t\tfuture: [],\n\t\t\t\tlastAction: null,\n\t\t\t\tshouldCreateUndoLevel: false,\n\t\t\t};\n\t\t}\n\n\t\tif ( present === nextPresent ) {\n\t\t\treturn state;\n\t\t}\n\n\t\tlet nextPast = past;\n\n\t\tif (\n\t\t\tshouldCreateUndoLevel ||\n\t\t\t! past.length ||\n\t\t\t! shouldOverwriteState( action, previousAction )\n\t\t) {\n\t\t\tnextPast = [ ...past, present ];\n\t\t}\n\n\t\treturn {\n\t\t\tpast: nextPast,\n\t\t\tpresent: nextPresent,\n\t\t\tfuture: [],\n\t\t\tshouldCreateUndoLevel: false,\n\t\t\tlastAction: action,\n\t\t};\n\t};\n};\n\nexport default withHistory;\n","/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// This code has been refactored for 140 bytes\n// You can see the original here: https://github.com/twolfson/computedStyle/blob/04cd1da2e30fa45844f95f5cb1ac898e9b9ef050/lib/computedStyle.js\nvar computedStyle = function (el, prop, getComputedStyle) {\n  getComputedStyle = window.getComputedStyle;\n\n  // In one fell swoop\n  return (\n    // If we have getComputedStyle\n    getComputedStyle ?\n      // Query it\n      // TODO: From CSS-Query notes, we might need (node, null) for FF\n      getComputedStyle(el) :\n\n    // Otherwise, we are in IE and use currentStyle\n      el.currentStyle\n  )[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })\n  ];\n};\n\nmodule.exports = computedStyle;\n","export function convertChangesToXML(changes) {\n  let ret = [];\n  for (let i = 0; i < changes.length; i++) {\n    let change = changes[i];\n    if (change.added) {\n      ret.push('<ins>');\n    } else if (change.removed) {\n      ret.push('<del>');\n    }\n\n    ret.push(escapeHTML(change.value));\n\n    if (change.added) {\n      ret.push('</ins>');\n    } else if (change.removed) {\n      ret.push('</del>');\n    }\n  }\n  return ret.join('');\n}\n\nfunction escapeHTML(s) {\n  let n = s;\n  n = n.replace(/&/g, '&amp;');\n  n = n.replace(/</g, '&lt;');\n  n = n.replace(/>/g, '&gt;');\n  n = n.replace(/\"/g, '&quot;');\n\n  return n;\n}\n","'use strict';\n\nvar util = require('./util');\n\nfunction scrollIntoView(elem, container, config) {\n  config = config || {};\n  // document  window\n  if (container.nodeType === 9) {\n    container = util.getWindow(container);\n  }\n\n  var allowHorizontalScroll = config.allowHorizontalScroll;\n  var onlyScrollIfNeeded = config.onlyScrollIfNeeded;\n  var alignWithTop = config.alignWithTop;\n  var alignWithLeft = config.alignWithLeft;\n  var offsetTop = config.offsetTop || 0;\n  var offsetLeft = config.offsetLeft || 0;\n  var offsetBottom = config.offsetBottom || 0;\n  var offsetRight = config.offsetRight || 0;\n\n  allowHorizontalScroll = allowHorizontalScroll === undefined ? true : allowHorizontalScroll;\n\n  var isWin = util.isWindow(container);\n  var elemOffset = util.offset(elem);\n  var eh = util.outerHeight(elem);\n  var ew = util.outerWidth(elem);\n  var containerOffset = undefined;\n  var ch = undefined;\n  var cw = undefined;\n  var containerScroll = undefined;\n  var diffTop = undefined;\n  var diffBottom = undefined;\n  var win = undefined;\n  var winScroll = undefined;\n  var ww = undefined;\n  var wh = undefined;\n\n  if (isWin) {\n    win = container;\n    wh = util.height(win);\n    ww = util.width(win);\n    winScroll = {\n      left: util.scrollLeft(win),\n      top: util.scrollTop(win)\n    };\n    // elem  container \n    diffTop = {\n      left: elemOffset.left - winScroll.left - offsetLeft,\n      top: elemOffset.top - winScroll.top - offsetTop\n    };\n    diffBottom = {\n      left: elemOffset.left + ew - (winScroll.left + ww) + offsetRight,\n      top: elemOffset.top + eh - (winScroll.top + wh) + offsetBottom\n    };\n    containerScroll = winScroll;\n  } else {\n    containerOffset = util.offset(container);\n    ch = container.clientHeight;\n    cw = container.clientWidth;\n    containerScroll = {\n      left: container.scrollLeft,\n      top: container.scrollTop\n    };\n    // elem  container \n    // , offset \n    diffTop = {\n      left: elemOffset.left - (containerOffset.left + (parseFloat(util.css(container, 'borderLeftWidth')) || 0)) - offsetLeft,\n      top: elemOffset.top - (containerOffset.top + (parseFloat(util.css(container, 'borderTopWidth')) || 0)) - offsetTop\n    };\n    diffBottom = {\n      left: elemOffset.left + ew - (containerOffset.left + cw + (parseFloat(util.css(container, 'borderRightWidth')) || 0)) + offsetRight,\n      top: elemOffset.top + eh - (containerOffset.top + ch + (parseFloat(util.css(container, 'borderBottomWidth')) || 0)) + offsetBottom\n    };\n  }\n\n  if (diffTop.top < 0 || diffBottom.top > 0) {\n    // \n    if (alignWithTop === true) {\n      util.scrollTop(container, containerScroll.top + diffTop.top);\n    } else if (alignWithTop === false) {\n      util.scrollTop(container, containerScroll.top + diffBottom.top);\n    } else {\n      // \n      if (diffTop.top < 0) {\n        util.scrollTop(container, containerScroll.top + diffTop.top);\n      } else {\n        util.scrollTop(container, containerScroll.top + diffBottom.top);\n      }\n    }\n  } else {\n    if (!onlyScrollIfNeeded) {\n      alignWithTop = alignWithTop === undefined ? true : !!alignWithTop;\n      if (alignWithTop) {\n        util.scrollTop(container, containerScroll.top + diffTop.top);\n      } else {\n        util.scrollTop(container, containerScroll.top + diffBottom.top);\n      }\n    }\n  }\n\n  if (allowHorizontalScroll) {\n    if (diffTop.left < 0 || diffBottom.left > 0) {\n      // \n      if (alignWithLeft === true) {\n        util.scrollLeft(container, containerScroll.left + diffTop.left);\n      } else if (alignWithLeft === false) {\n        util.scrollLeft(container, containerScroll.left + diffBottom.left);\n      } else {\n        // \n        if (diffTop.left < 0) {\n          util.scrollLeft(container, containerScroll.left + diffTop.left);\n        } else {\n          util.scrollLeft(container, containerScroll.left + diffBottom.left);\n        }\n      }\n    } else {\n      if (!onlyScrollIfNeeded) {\n        alignWithLeft = alignWithLeft === undefined ? true : !!alignWithLeft;\n        if (alignWithLeft) {\n          util.scrollLeft(container, containerScroll.left + diffTop.left);\n        } else {\n          util.scrollLeft(container, containerScroll.left + diffBottom.left);\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = scrollIntoView;","'use strict';\n\nmodule.exports = require('./dom-scroll-into-view');","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar RE_NUM = /[\\-+]?(?:\\d*\\.|)\\d+(?:[eE][\\-+]?\\d+|)/.source;\n\nfunction getClientPosition(elem) {\n  var box = undefined;\n  var x = undefined;\n  var y = undefined;\n  var doc = elem.ownerDocument;\n  var body = doc.body;\n  var docElem = doc && doc.documentElement;\n  //  GBS A-Grade Browsers  getBoundingClientRect \n  box = elem.getBoundingClientRect();\n\n  // jQuery  docElem.clientLeft/clientTop\n  //  html  body /\n  // ie6  html  margin  html  margin\n\n  x = box.left;\n  y = box.top;\n\n  // In IE, most of the time, 2 extra pixels are added to the top and left\n  // due to the implicit 2-pixel inset border.  In IE6/7 quirks mode and\n  // IE6 standards mode, this border can be overridden by setting the\n  // document element's border to zero -- thus, we cannot rely on the\n  // offset always being 2 pixels.\n\n  // In quirks mode, the offset can be determined by querying the body's\n  // clientLeft/clientTop, but in standards mode, it is found by querying\n  // the document element's clientLeft/clientTop.  Since we already called\n  // getClientBoundingRect we have already forced a reflow, so it is not\n  // too expensive just to query them all.\n\n  // ie  absolute \n  //  documentElement ,quirks  body\n  //  body  html   ie < 9 html  2px \n  //  ie body html  ,ie  html,body \n  //  ie  docElem.clientTop  border-top\n  // ie7 html  2\n  //  firefox/chrome/ie9  docElem.clientTop  border-top  0\n\n  x -= docElem.clientLeft || body.clientLeft || 0;\n  y -= docElem.clientTop || body.clientTop || 0;\n\n  return {\n    left: x,\n    top: y\n  };\n}\n\nfunction getScroll(w, top) {\n  var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n  var method = 'scroll' + (top ? 'Top' : 'Left');\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    // ie6,7,8 standard mode\n    ret = d.documentElement[method];\n    if (typeof ret !== 'number') {\n      // quirks mode\n      ret = d.body[method];\n    }\n  }\n  return ret;\n}\n\nfunction getScrollLeft(w) {\n  return getScroll(w);\n}\n\nfunction getScrollTop(w) {\n  return getScroll(w, true);\n}\n\nfunction getOffset(el) {\n  var pos = getClientPosition(el);\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScrollLeft(w);\n  pos.top += getScrollTop(w);\n  return pos;\n}\nfunction _getComputedStyle(elem, name, computedStyle_) {\n  var val = '';\n  var d = elem.ownerDocument;\n  var computedStyle = computedStyle_ || d.defaultView.getComputedStyle(elem, null);\n\n  // https://github.com/kissyteam/kissy/issues/61\n  if (computedStyle) {\n    val = computedStyle.getPropertyValue(name) || computedStyle[name];\n  }\n\n  return val;\n}\n\nvar _RE_NUM_NO_PX = new RegExp('^(' + RE_NUM + ')(?!px)[a-z%]+$', 'i');\nvar RE_POS = /^(top|right|bottom|left)$/;\nvar CURRENT_STYLE = 'currentStyle';\nvar RUNTIME_STYLE = 'runtimeStyle';\nvar LEFT = 'left';\nvar PX = 'px';\n\nfunction _getComputedStyleIE(elem, name) {\n  // currentStyle maybe null\n  // http://msdn.microsoft.com/en-us/library/ms535231.aspx\n  var ret = elem[CURRENT_STYLE] && elem[CURRENT_STYLE][name];\n\n  //  width/height  pixelLeft  width/height \n  // ! CUSTOM_STYLE.height,CUSTOM_STYLE.width ,cssHook @2011-08-19\n  //  ie  offset \n  // borderWidth  borderWidth \n\n  // From the awesome hack by Dean Edwards\n  // http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291\n  // If we're not dealing with a regular pixel number\n  // but a number that has a weird ending, we need to convert it to pixels\n  // exclude left right for relativity\n  if (_RE_NUM_NO_PX.test(ret) && !RE_POS.test(name)) {\n    // Remember the original values\n    var style = elem.style;\n    var left = style[LEFT];\n    var rsLeft = elem[RUNTIME_STYLE][LEFT];\n\n    // prevent flashing of content\n    elem[RUNTIME_STYLE][LEFT] = elem[CURRENT_STYLE][LEFT];\n\n    // Put in the new values to get a computed value out\n    style[LEFT] = name === 'fontSize' ? '1em' : ret || 0;\n    ret = style.pixelLeft + PX;\n\n    // Revert the changed values\n    style[LEFT] = left;\n\n    elem[RUNTIME_STYLE][LEFT] = rsLeft;\n  }\n  return ret === '' ? 'auto' : ret;\n}\n\nvar getComputedStyleX = undefined;\nif (typeof window !== 'undefined') {\n  getComputedStyleX = window.getComputedStyle ? _getComputedStyle : _getComputedStyleIE;\n}\n\nfunction each(arr, fn) {\n  for (var i = 0; i < arr.length; i++) {\n    fn(arr[i]);\n  }\n}\n\nfunction isBorderBoxFn(elem) {\n  return getComputedStyleX(elem, 'boxSizing') === 'border-box';\n}\n\nvar BOX_MODELS = ['margin', 'border', 'padding'];\nvar CONTENT_INDEX = -1;\nvar PADDING_INDEX = 2;\nvar BORDER_INDEX = 1;\nvar MARGIN_INDEX = 0;\n\nfunction swap(elem, options, callback) {\n  var old = {};\n  var style = elem.style;\n  var name = undefined;\n\n  // Remember the old values, and insert the new ones\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      old[name] = style[name];\n      style[name] = options[name];\n    }\n  }\n\n  callback.call(elem);\n\n  // Revert the old values\n  for (name in options) {\n    if (options.hasOwnProperty(name)) {\n      style[name] = old[name];\n    }\n  }\n}\n\nfunction getPBMWidth(elem, props, which) {\n  var value = 0;\n  var prop = undefined;\n  var j = undefined;\n  var i = undefined;\n  for (j = 0; j < props.length; j++) {\n    prop = props[j];\n    if (prop) {\n      for (i = 0; i < which.length; i++) {\n        var cssProp = undefined;\n        if (prop === 'border') {\n          cssProp = prop + which[i] + 'Width';\n        } else {\n          cssProp = prop + which[i];\n        }\n        value += parseFloat(getComputedStyleX(elem, cssProp)) || 0;\n      }\n    }\n  }\n  return value;\n}\n\n/**\n * A crude way of determining if an object is a window\n * @member util\n */\nfunction isWindow(obj) {\n  // must use == for ie8\n  /* eslint eqeqeq:0 */\n  return obj != null && obj == obj.window;\n}\n\nvar domUtils = {};\n\neach(['Width', 'Height'], function (name) {\n  domUtils['doc' + name] = function (refWin) {\n    var d = refWin.document;\n    return Math.max(\n    // firefox chrome documentElement.scrollHeight< body.scrollHeight\n    // ie standard mode : documentElement.scrollHeight> body.scrollHeight\n    d.documentElement['scroll' + name],\n    // quirks : documentElement.scrollHeight \n    d.body['scroll' + name], domUtils['viewport' + name](d));\n  };\n\n  domUtils['viewport' + name] = function (win) {\n    // pc browser includes scrollbar in window.innerWidth\n    var prop = 'client' + name;\n    var doc = win.document;\n    var body = doc.body;\n    var documentElement = doc.documentElement;\n    var documentElementProp = documentElement[prop];\n    //  documentElement\n    // backcompat  body\n    return doc.compatMode === 'CSS1Compat' && documentElementProp || body && body[prop] || documentElementProp;\n  };\n});\n\n/*\n \n @param elem\n @param name\n @param {String} [extra]  'padding' : (css width) + padding\n 'border' : (css width) + padding + border\n 'margin' : (css width) + padding + border + margin\n */\nfunction getWH(elem, name, extra) {\n  if (isWindow(elem)) {\n    return name === 'width' ? domUtils.viewportWidth(elem) : domUtils.viewportHeight(elem);\n  } else if (elem.nodeType === 9) {\n    return name === 'width' ? domUtils.docWidth(elem) : domUtils.docHeight(elem);\n  }\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n  var borderBoxValue = name === 'width' ? elem.offsetWidth : elem.offsetHeight;\n  var computedStyle = getComputedStyleX(elem);\n  var isBorderBox = isBorderBoxFn(elem, computedStyle);\n  var cssBoxValue = 0;\n  if (borderBoxValue == null || borderBoxValue <= 0) {\n    borderBoxValue = undefined;\n    // Fall back to computed then un computed css if necessary\n    cssBoxValue = getComputedStyleX(elem, name);\n    if (cssBoxValue == null || Number(cssBoxValue) < 0) {\n      cssBoxValue = elem.style[name] || 0;\n    }\n    // Normalize '', auto, and prepare for extra\n    cssBoxValue = parseFloat(cssBoxValue) || 0;\n  }\n  if (extra === undefined) {\n    extra = isBorderBox ? BORDER_INDEX : CONTENT_INDEX;\n  }\n  var borderBoxValueOrIsBorderBox = borderBoxValue !== undefined || isBorderBox;\n  var val = borderBoxValue || cssBoxValue;\n  if (extra === CONTENT_INDEX) {\n    if (borderBoxValueOrIsBorderBox) {\n      return val - getPBMWidth(elem, ['border', 'padding'], which, computedStyle);\n    }\n    return cssBoxValue;\n  }\n  if (borderBoxValueOrIsBorderBox) {\n    var padding = extra === PADDING_INDEX ? -getPBMWidth(elem, ['border'], which, computedStyle) : getPBMWidth(elem, ['margin'], which, computedStyle);\n    return val + (extra === BORDER_INDEX ? 0 : padding);\n  }\n  return cssBoxValue + getPBMWidth(elem, BOX_MODELS.slice(extra), which, computedStyle);\n}\n\nvar cssShow = {\n  position: 'absolute',\n  visibility: 'hidden',\n  display: 'block'\n};\n\n// fix #119 : https://github.com/kissyteam/kissy/issues/119\nfunction getWHIgnoreDisplay(elem) {\n  var val = undefined;\n  var args = arguments;\n  // in case elem is window\n  // elem.offsetWidth === undefined\n  if (elem.offsetWidth !== 0) {\n    val = getWH.apply(undefined, args);\n  } else {\n    swap(elem, cssShow, function () {\n      val = getWH.apply(undefined, args);\n    });\n  }\n  return val;\n}\n\nfunction css(el, name, v) {\n  var value = v;\n  if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {\n    for (var i in name) {\n      if (name.hasOwnProperty(i)) {\n        css(el, i, name[i]);\n      }\n    }\n    return undefined;\n  }\n  if (typeof value !== 'undefined') {\n    if (typeof value === 'number') {\n      value += 'px';\n    }\n    el.style[name] = value;\n    return undefined;\n  }\n  return getComputedStyleX(el, name);\n}\n\neach(['width', 'height'], function (name) {\n  var first = name.charAt(0).toUpperCase() + name.slice(1);\n  domUtils['outer' + first] = function (el, includeMargin) {\n    return el && getWHIgnoreDisplay(el, name, includeMargin ? MARGIN_INDEX : BORDER_INDEX);\n  };\n  var which = name === 'width' ? ['Left', 'Right'] : ['Top', 'Bottom'];\n\n  domUtils[name] = function (elem, val) {\n    if (val !== undefined) {\n      if (elem) {\n        var computedStyle = getComputedStyleX(elem);\n        var isBorderBox = isBorderBoxFn(elem);\n        if (isBorderBox) {\n          val += getPBMWidth(elem, ['padding', 'border'], which, computedStyle);\n        }\n        return css(elem, name, val);\n      }\n      return undefined;\n    }\n    return elem && getWHIgnoreDisplay(elem, name, CONTENT_INDEX);\n  };\n});\n\n//  elem  elem.ownerDocument \nfunction setOffset(elem, offset) {\n  // set position first, in-case top/left are set even on static elem\n  if (css(elem, 'position') === 'static') {\n    elem.style.position = 'relative';\n  }\n\n  var old = getOffset(elem);\n  var ret = {};\n  var current = undefined;\n  var key = undefined;\n\n  for (key in offset) {\n    if (offset.hasOwnProperty(key)) {\n      current = parseFloat(css(elem, key)) || 0;\n      ret[key] = current + offset[key] - old[key];\n    }\n  }\n  css(elem, ret);\n}\n\nmodule.exports = _extends({\n  getWindow: function getWindow(node) {\n    var doc = node.ownerDocument || node;\n    return doc.defaultView || doc.parentWindow;\n  },\n  offset: function offset(el, value) {\n    if (typeof value !== 'undefined') {\n      setOffset(el, value);\n    } else {\n      return getOffset(el);\n    }\n  },\n\n  isWindow: isWindow,\n  each: each,\n  css: css,\n  clone: function clone(obj) {\n    var ret = {};\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) {\n        ret[i] = obj[i];\n      }\n    }\n    var overflow = obj.overflow;\n    if (overflow) {\n      for (var i in obj) {\n        if (obj.hasOwnProperty(i)) {\n          ret.overflow[i] = obj.overflow[i];\n        }\n      }\n    }\n    return ret;\n  },\n  scrollLeft: function scrollLeft(w, v) {\n    if (isWindow(w)) {\n      if (v === undefined) {\n        return getScrollLeft(w);\n      }\n      window.scrollTo(v, getScrollTop(w));\n    } else {\n      if (v === undefined) {\n        return w.scrollLeft;\n      }\n      w.scrollLeft = v;\n    }\n  },\n  scrollTop: function scrollTop(w, v) {\n    if (isWindow(w)) {\n      if (v === undefined) {\n        return getScrollTop(w);\n      }\n      window.scrollTo(getScrollLeft(w), v);\n    } else {\n      if (v === undefined) {\n        return w.scrollTop;\n      }\n      w.scrollTop = v;\n    }\n  },\n\n  viewportWidth: 0,\n  viewportHeight: 0\n}, domUtils);","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","// Load in dependencies\nvar computedStyle = require('computed-style');\n\n/**\n * Calculate the `line-height` of a given node\n * @param {HTMLElement} node Element to calculate line height of. Must be in the DOM.\n * @returns {Number} `line-height` of the element in pixels\n */\nfunction lineHeight(node) {\n  // Grab the line-height via style\n  var lnHeightStr = computedStyle(node, 'line-height');\n  var lnHeight = parseFloat(lnHeightStr, 10);\n\n  // If the lineHeight did not contain a unit (i.e. it was numeric), convert it to ems (e.g. '2.3' === '2.3em')\n  if (lnHeightStr === lnHeight + '') {\n    // Save the old lineHeight style and update the em unit to the element\n    var _lnHeightStyle = node.style.lineHeight;\n    node.style.lineHeight = lnHeightStr + 'em';\n\n    // Calculate the em based height\n    lnHeightStr = computedStyle(node, 'line-height');\n    lnHeight = parseFloat(lnHeightStr, 10);\n\n    // Revert the lineHeight style\n    if (_lnHeightStyle) {\n      node.style.lineHeight = _lnHeightStyle;\n    } else {\n      delete node.style.lineHeight;\n    }\n  }\n\n  // If the lineHeight is in `pt`, convert it to pixels (4px for 3pt)\n  // DEV: `em` units are converted to `pt` in IE6\n  // Conversion ratio from https://developer.mozilla.org/en-US/docs/Web/CSS/length\n  if (lnHeightStr.indexOf('pt') !== -1) {\n    lnHeight *= 4;\n    lnHeight /= 3;\n  // Otherwise, if the lineHeight is in `mm`, convert it to pixels (96px for 25.4mm)\n  } else if (lnHeightStr.indexOf('mm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 25.4;\n  // Otherwise, if the lineHeight is in `cm`, convert it to pixels (96px for 2.54cm)\n  } else if (lnHeightStr.indexOf('cm') !== -1) {\n    lnHeight *= 96;\n    lnHeight /= 2.54;\n  // Otherwise, if the lineHeight is in `in`, convert it to pixels (96px for 1in)\n  } else if (lnHeightStr.indexOf('in') !== -1) {\n    lnHeight *= 96;\n  // Otherwise, if the lineHeight is in `pc`, convert it to pixels (12pt for 1pc)\n  } else if (lnHeightStr.indexOf('pc') !== -1) {\n    lnHeight *= 16;\n  }\n\n  // Continue our computation\n  lnHeight = Math.round(lnHeight);\n\n  // If the line-height is \"normal\", calculate by font-size\n  if (lnHeightStr === 'normal') {\n    // Create a temporary node\n    var nodeName = node.nodeName;\n    var _node = document.createElement(nodeName);\n    _node.innerHTML = '&nbsp;';\n\n    // If we have a text area, reset it to only 1 row\n    // https://github.com/twolfson/line-height/issues/4\n    if (nodeName.toUpperCase() === 'TEXTAREA') {\n      _node.setAttribute('rows', '1');\n    }\n\n    // Set the font-size of the element\n    var fontSizeStr = computedStyle(node, 'font-size');\n    _node.style.fontSize = fontSizeStr;\n\n    // Remove default padding/border which can affect offset height\n    // https://github.com/twolfson/line-height/issues/4\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetHeight\n    _node.style.padding = '0px';\n    _node.style.border = '0px';\n\n    // Append it to the body\n    var body = document.body;\n    body.appendChild(_node);\n\n    // Assume the line height of the element is the height\n    var height = _node.offsetHeight;\n    lnHeight = height;\n\n    // Remove our child from the DOM\n    body.removeChild(_node);\n  }\n\n  // Return the calculated height\n  return lnHeight;\n}\n\n// Export lineHeight\nmodule.exports = lineHeight;\n","module.exports = function memize( fn, options ) {\n\tvar size = 0,\n\t\tmaxSize, head, tail;\n\n\tif ( options && options.maxSize ) {\n\t\tmaxSize = options.maxSize;\n\t}\n\n\tfunction memoized( /* ...args */ ) {\n\t\tvar node = head,\n\t\t\tlen = arguments.length,\n\t\t\targs, i;\n\n\t\tsearchCache: while ( node ) {\n\t\t\t// Perform a shallow equality test to confirm that whether the node\n\t\t\t// under test is a candidate for the arguments passed. Two arrays\n\t\t\t// are shallowly equal if their length matches and each entry is\n\t\t\t// strictly equal between the two sets. Avoid abstracting to a\n\t\t\t// function which could incur an arguments leaking deoptimization.\n\n\t\t\t// Check whether node arguments match arguments length\n\t\t\tif ( node.args.length !== arguments.length ) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Check whether node arguments match arguments values\n\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\tif ( node.args[ i ] !== arguments[ i ] ) {\n\t\t\t\t\tnode = node.next;\n\t\t\t\t\tcontinue searchCache;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif ( node !== head ) {\n\t\t\t\t// As tail, shift to previous. Must only shift if not also\n\t\t\t\t// head, since if both head and tail, there is no previous.\n\t\t\t\tif ( node === tail ) {\n\t\t\t\t\ttail = node.prev;\n\t\t\t\t}\n\n\t\t\t\t// Adjust siblings to point to each other. If node was tail,\n\t\t\t\t// this also handles new tail's empty `next` assignment.\n\t\t\t\tnode.prev.next = node.next;\n\t\t\t\tif ( node.next ) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = head;\n\t\t\t\tnode.prev = null;\n\t\t\t\thead.prev = node;\n\t\t\t\thead = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\t// Create a copy of arguments (avoid leaking deoptimization)\n\t\targs = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tnode = {\n\t\t\targs: args,\n\n\t\t\t// Generate the result from original function\n\t\t\tval: fn.apply( null, args )\n\t\t};\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif ( head ) {\n\t\t\thead.prev = node;\n\t\t\tnode.next = head;\n\t\t} else {\n\t\t\t// If no head, follows that there's no tail (at initial or reset)\n\t\t\ttail = node;\n\t\t}\n\n\t\t// Trim tail if we're reached max size and are pending cache insertion\n\t\tif ( size === maxSize ) {\n\t\t\ttail = tail.prev;\n\t\t\ttail.next = null;\n\t\t} else {\n\t\t\tsize++;\n\t\t}\n\n\t\thead = node;\n\n\t\treturn node.val;\n\t}\n\n\tmemoized.clear = function() {\n\t\thead = null;\n\t\ttail = null;\n\t\tsize = 0;\n\t};\n\n\tif ( process.env.NODE_ENV === 'test' ) {\n\t\t// Cache is not exposed in the public API, but used in tests to ensure\n\t\t// expected list progression\n\t\tmemoized.getCache = function() {\n\t\t\treturn [ head, tail, size ];\n\t\t};\n\t}\n\n\treturn memoized;\n};\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n  var loggedTypeFailures = {};\n\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\n/**\n * Assert that the values match with the type specs.\n * Error messages are memorized and will only be shown once.\n *\n * @param {object} typeSpecs Map of name to a ReactPropType\n * @param {object} values Runtime values that need to be type-checked\n * @param {string} location e.g. \"prop\", \"context\", \"child context\"\n * @param {string} componentName Name of the component for error messages.\n * @param {?Function} getStack Returns the component stack.\n * @private\n */\nfunction checkPropTypes(typeSpecs, values, location, componentName, getStack) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var typeSpecName in typeSpecs) {\n      if (typeSpecs.hasOwnProperty(typeSpecName)) {\n        var error;\n        // Prop type validation may throw. In case they do, we don't want to\n        // fail the render phase where it didn't fail before. So we log it.\n        // After these have been cleaned up, we'll let them throw.\n        try {\n          // This is intentionally an invariant that gets caught. It's the same\n          // behavior as without this statement except with a better message.\n          if (typeof typeSpecs[typeSpecName] !== 'function') {\n            var err = Error(\n              (componentName || 'React class') + ': ' + location + ' type `' + typeSpecName + '` is invalid; ' +\n              'it must be a function, usually from the `prop-types` package, but received `' + typeof typeSpecs[typeSpecName] + '`.'\n            );\n            err.name = 'Invariant Violation';\n            throw err;\n          }\n          error = typeSpecs[typeSpecName](values, typeSpecName, componentName, location, null, ReactPropTypesSecret);\n        } catch (ex) {\n          error = ex;\n        }\n        if (error && !(error instanceof Error)) {\n          printWarning(\n            (componentName || 'React class') + ': type specification of ' +\n            location + ' `' + typeSpecName + '` is invalid; the type checker ' +\n            'function must return `null` or an `Error` but returned a ' + typeof error + '. ' +\n            'You may have forgotten to pass an argument to the type checker ' +\n            'creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and ' +\n            'shape all require an argument).'\n          )\n\n        }\n        if (error instanceof Error && !(error.message in loggedTypeFailures)) {\n          // Only monitor this failure once because there tends to be a lot of the\n          // same error.\n          loggedTypeFailures[error.message] = true;\n\n          var stack = getStack ? getStack() : '';\n\n          printWarning(\n            'Failed ' + location + ' type: ' + error.message + (stack != null ? stack : '')\n          );\n        }\n      }\n    }\n  }\n}\n\nmodule.exports = checkPropTypes;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar assign = require('object-assign');\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\nvar checkPropTypes = require('./checkPropTypes');\n\nvar printWarning = function() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  printWarning = function(text) {\n    var message = 'Warning: ' + text;\n    if (typeof console !== 'undefined') {\n      console.error(message);\n    }\n    try {\n      // --- Welcome to debugging React ---\n      // This error was thrown as a convenience so that you can use this stack\n      // to find the callsite that caused this warning to fire.\n      throw new Error(message);\n    } catch (x) {}\n  };\n}\n\nfunction emptyFunctionThatReturnsNull() {\n  return null;\n}\n\nmodule.exports = function(isValidElement, throwOnDirectAccess) {\n  /* global Symbol */\n  var ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator'; // Before Symbol spec.\n\n  /**\n   * Returns the iterator method function contained on the iterable object.\n   *\n   * Be sure to invoke the function with the iterable as context:\n   *\n   *     var iteratorFn = getIteratorFn(myIterable);\n   *     if (iteratorFn) {\n   *       var iterator = iteratorFn.call(myIterable);\n   *       ...\n   *     }\n   *\n   * @param {?object} maybeIterable\n   * @return {?function}\n   */\n  function getIteratorFn(maybeIterable) {\n    var iteratorFn = maybeIterable && (ITERATOR_SYMBOL && maybeIterable[ITERATOR_SYMBOL] || maybeIterable[FAUX_ITERATOR_SYMBOL]);\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  /**\n   * Collection of methods that allow declaration and validation of props that are\n   * supplied to React components. Example usage:\n   *\n   *   var Props = require('ReactPropTypes');\n   *   var MyArticle = React.createClass({\n   *     propTypes: {\n   *       // An optional string prop named \"description\".\n   *       description: Props.string,\n   *\n   *       // A required enum prop named \"category\".\n   *       category: Props.oneOf(['News','Photos']).isRequired,\n   *\n   *       // A prop named \"dialog\" that requires an instance of Dialog.\n   *       dialog: Props.instanceOf(Dialog).isRequired\n   *     },\n   *     render: function() { ... }\n   *   });\n   *\n   * A more formal specification of how these methods are used:\n   *\n   *   type := array|bool|func|object|number|string|oneOf([...])|instanceOf(...)\n   *   decl := ReactPropTypes.{type}(.isRequired)?\n   *\n   * Each and every declaration produces a function with the same signature. This\n   * allows the creation of custom validation functions. For example:\n   *\n   *  var MyLink = React.createClass({\n   *    propTypes: {\n   *      // An optional string or URI prop named \"href\".\n   *      href: function(props, propName, componentName) {\n   *        var propValue = props[propName];\n   *        if (propValue != null && typeof propValue !== 'string' &&\n   *            !(propValue instanceof URI)) {\n   *          return new Error(\n   *            'Expected a string or an URI for ' + propName + ' in ' +\n   *            componentName\n   *          );\n   *        }\n   *      }\n   *    },\n   *    render: function() {...}\n   *  });\n   *\n   * @internal\n   */\n\n  var ANONYMOUS = '<<anonymous>>';\n\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithThrowingShims.js`.\n  var ReactPropTypes = {\n    array: createPrimitiveTypeChecker('array'),\n    bool: createPrimitiveTypeChecker('boolean'),\n    func: createPrimitiveTypeChecker('function'),\n    number: createPrimitiveTypeChecker('number'),\n    object: createPrimitiveTypeChecker('object'),\n    string: createPrimitiveTypeChecker('string'),\n    symbol: createPrimitiveTypeChecker('symbol'),\n\n    any: createAnyTypeChecker(),\n    arrayOf: createArrayOfTypeChecker,\n    element: createElementTypeChecker(),\n    instanceOf: createInstanceTypeChecker,\n    node: createNodeChecker(),\n    objectOf: createObjectOfTypeChecker,\n    oneOf: createEnumTypeChecker,\n    oneOfType: createUnionTypeChecker,\n    shape: createShapeTypeChecker,\n    exact: createStrictShapeTypeChecker,\n  };\n\n  /**\n   * inlined Object.is polyfill to avoid requiring consumers ship their own\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   */\n  /*eslint-disable no-self-compare*/\n  function is(x, y) {\n    // SameValue algorithm\n    if (x === y) {\n      // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  }\n  /*eslint-enable no-self-compare*/\n\n  /**\n   * We use an Error-like object for backward compatibility as people may call\n   * PropTypes directly and inspect their output. However, we don't use real\n   * Errors anymore. We don't inspect their stack anyway, and creating them\n   * is prohibitively expensive if they are created too often, such as what\n   * happens in oneOfType() for any type before the one that matched.\n   */\n  function PropTypeError(message) {\n    this.message = message;\n    this.stack = '';\n  }\n  // Make `instanceof Error` still work for returned errors.\n  PropTypeError.prototype = Error.prototype;\n\n  function createChainableTypeChecker(validate) {\n    if (process.env.NODE_ENV !== 'production') {\n      var manualPropTypeCallCache = {};\n      var manualPropTypeWarningCount = 0;\n    }\n    function checkType(isRequired, props, propName, componentName, location, propFullName, secret) {\n      componentName = componentName || ANONYMOUS;\n      propFullName = propFullName || propName;\n\n      if (secret !== ReactPropTypesSecret) {\n        if (throwOnDirectAccess) {\n          // New behavior only for users of `prop-types` package\n          var err = new Error(\n            'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n            'Use `PropTypes.checkPropTypes()` to call them. ' +\n            'Read more at http://fb.me/use-check-prop-types'\n          );\n          err.name = 'Invariant Violation';\n          throw err;\n        } else if (process.env.NODE_ENV !== 'production' && typeof console !== 'undefined') {\n          // Old behavior for people using React.PropTypes\n          var cacheKey = componentName + ':' + propName;\n          if (\n            !manualPropTypeCallCache[cacheKey] &&\n            // Avoid spamming the console because they are often not actionable except for lib authors\n            manualPropTypeWarningCount < 3\n          ) {\n            printWarning(\n              'You are manually calling a React.PropTypes validation ' +\n              'function for the `' + propFullName + '` prop on `' + componentName  + '`. This is deprecated ' +\n              'and will throw in the standalone `prop-types` package. ' +\n              'You may be seeing this warning due to a third-party PropTypes ' +\n              'library. See https://fb.me/react-warning-dont-call-proptypes ' + 'for details.'\n            );\n            manualPropTypeCallCache[cacheKey] = true;\n            manualPropTypeWarningCount++;\n          }\n        }\n      }\n      if (props[propName] == null) {\n        if (isRequired) {\n          if (props[propName] === null) {\n            return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required ' + ('in `' + componentName + '`, but its value is `null`.'));\n          }\n          return new PropTypeError('The ' + location + ' `' + propFullName + '` is marked as required in ' + ('`' + componentName + '`, but its value is `undefined`.'));\n        }\n        return null;\n      } else {\n        return validate(props, propName, componentName, location, propFullName);\n      }\n    }\n\n    var chainedCheckType = checkType.bind(null, false);\n    chainedCheckType.isRequired = checkType.bind(null, true);\n\n    return chainedCheckType;\n  }\n\n  function createPrimitiveTypeChecker(expectedType) {\n    function validate(props, propName, componentName, location, propFullName, secret) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== expectedType) {\n        // `propValue` being instance of, say, date/regexp, pass the 'object'\n        // check, but we can offer a more precise error message here rather than\n        // 'of type `object`'.\n        var preciseType = getPreciseType(propValue);\n\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + preciseType + '` supplied to `' + componentName + '`, expected ') + ('`' + expectedType + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createAnyTypeChecker() {\n    return createChainableTypeChecker(emptyFunctionThatReturnsNull);\n  }\n\n  function createArrayOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside arrayOf.');\n      }\n      var propValue = props[propName];\n      if (!Array.isArray(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an array.'));\n      }\n      for (var i = 0; i < propValue.length; i++) {\n        var error = typeChecker(propValue, i, componentName, location, propFullName + '[' + i + ']', ReactPropTypesSecret);\n        if (error instanceof Error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createElementTypeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      if (!isValidElement(propValue)) {\n        var propType = getPropType(propValue);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected a single ReactElement.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createInstanceTypeChecker(expectedClass) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!(props[propName] instanceof expectedClass)) {\n        var expectedClassName = expectedClass.name || ANONYMOUS;\n        var actualClassName = getClassName(props[propName]);\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + actualClassName + '` supplied to `' + componentName + '`, expected ') + ('instance of `' + expectedClassName + '`.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createEnumTypeChecker(expectedValues) {\n    if (!Array.isArray(expectedValues)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOf, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      for (var i = 0; i < expectedValues.length; i++) {\n        if (is(propValue, expectedValues[i])) {\n          return null;\n        }\n      }\n\n      var valuesString = JSON.stringify(expectedValues);\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of value `' + propValue + '` ' + ('supplied to `' + componentName + '`, expected one of ' + valuesString + '.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createObjectOfTypeChecker(typeChecker) {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (typeof typeChecker !== 'function') {\n        return new PropTypeError('Property `' + propFullName + '` of component `' + componentName + '` has invalid PropType notation inside objectOf.');\n      }\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type ' + ('`' + propType + '` supplied to `' + componentName + '`, expected an object.'));\n      }\n      for (var key in propValue) {\n        if (propValue.hasOwnProperty(key)) {\n          var error = typeChecker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n          if (error instanceof Error) {\n            return error;\n          }\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createUnionTypeChecker(arrayOfTypeCheckers) {\n    if (!Array.isArray(arrayOfTypeCheckers)) {\n      process.env.NODE_ENV !== 'production' ? printWarning('Invalid argument supplied to oneOfType, expected an instance of array.') : void 0;\n      return emptyFunctionThatReturnsNull;\n    }\n\n    for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n      var checker = arrayOfTypeCheckers[i];\n      if (typeof checker !== 'function') {\n        printWarning(\n          'Invalid argument supplied to oneOfType. Expected an array of check functions, but ' +\n          'received ' + getPostfixForTypeWarning(checker) + ' at index ' + i + '.'\n        );\n        return emptyFunctionThatReturnsNull;\n      }\n    }\n\n    function validate(props, propName, componentName, location, propFullName) {\n      for (var i = 0; i < arrayOfTypeCheckers.length; i++) {\n        var checker = arrayOfTypeCheckers[i];\n        if (checker(props, propName, componentName, location, propFullName, ReactPropTypesSecret) == null) {\n          return null;\n        }\n      }\n\n      return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`.'));\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createNodeChecker() {\n    function validate(props, propName, componentName, location, propFullName) {\n      if (!isNode(props[propName])) {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` supplied to ' + ('`' + componentName + '`, expected a ReactNode.'));\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      for (var key in shapeTypes) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          continue;\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n    return createChainableTypeChecker(validate);\n  }\n\n  function createStrictShapeTypeChecker(shapeTypes) {\n    function validate(props, propName, componentName, location, propFullName) {\n      var propValue = props[propName];\n      var propType = getPropType(propValue);\n      if (propType !== 'object') {\n        return new PropTypeError('Invalid ' + location + ' `' + propFullName + '` of type `' + propType + '` ' + ('supplied to `' + componentName + '`, expected `object`.'));\n      }\n      // We need to check all keys in case some are required but missing from\n      // props.\n      var allKeys = assign({}, props[propName], shapeTypes);\n      for (var key in allKeys) {\n        var checker = shapeTypes[key];\n        if (!checker) {\n          return new PropTypeError(\n            'Invalid ' + location + ' `' + propFullName + '` key `' + key + '` supplied to `' + componentName + '`.' +\n            '\\nBad object: ' + JSON.stringify(props[propName], null, '  ') +\n            '\\nValid keys: ' +  JSON.stringify(Object.keys(shapeTypes), null, '  ')\n          );\n        }\n        var error = checker(propValue, key, componentName, location, propFullName + '.' + key, ReactPropTypesSecret);\n        if (error) {\n          return error;\n        }\n      }\n      return null;\n    }\n\n    return createChainableTypeChecker(validate);\n  }\n\n  function isNode(propValue) {\n    switch (typeof propValue) {\n      case 'number':\n      case 'string':\n      case 'undefined':\n        return true;\n      case 'boolean':\n        return !propValue;\n      case 'object':\n        if (Array.isArray(propValue)) {\n          return propValue.every(isNode);\n        }\n        if (propValue === null || isValidElement(propValue)) {\n          return true;\n        }\n\n        var iteratorFn = getIteratorFn(propValue);\n        if (iteratorFn) {\n          var iterator = iteratorFn.call(propValue);\n          var step;\n          if (iteratorFn !== propValue.entries) {\n            while (!(step = iterator.next()).done) {\n              if (!isNode(step.value)) {\n                return false;\n              }\n            }\n          } else {\n            // Iterator will provide entry [k,v] tuples rather than values.\n            while (!(step = iterator.next()).done) {\n              var entry = step.value;\n              if (entry) {\n                if (!isNode(entry[1])) {\n                  return false;\n                }\n              }\n            }\n          }\n        } else {\n          return false;\n        }\n\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  function isSymbol(propType, propValue) {\n    // Native Symbol.\n    if (propType === 'symbol') {\n      return true;\n    }\n\n    // 19.4.3.5 Symbol.prototype[@@toStringTag] === 'Symbol'\n    if (propValue['@@toStringTag'] === 'Symbol') {\n      return true;\n    }\n\n    // Fallback for non-spec compliant Symbols which are polyfilled.\n    if (typeof Symbol === 'function' && propValue instanceof Symbol) {\n      return true;\n    }\n\n    return false;\n  }\n\n  // Equivalent of `typeof` but with special handling for array and regexp.\n  function getPropType(propValue) {\n    var propType = typeof propValue;\n    if (Array.isArray(propValue)) {\n      return 'array';\n    }\n    if (propValue instanceof RegExp) {\n      // Old webkits (at least until Android 4.0) return 'function' rather than\n      // 'object' for typeof a RegExp. We'll normalize this here so that /bla/\n      // passes PropTypes.object.\n      return 'object';\n    }\n    if (isSymbol(propType, propValue)) {\n      return 'symbol';\n    }\n    return propType;\n  }\n\n  // This handles more types than `getPropType`. Only used for error messages.\n  // See `createPrimitiveTypeChecker`.\n  function getPreciseType(propValue) {\n    if (typeof propValue === 'undefined' || propValue === null) {\n      return '' + propValue;\n    }\n    var propType = getPropType(propValue);\n    if (propType === 'object') {\n      if (propValue instanceof Date) {\n        return 'date';\n      } else if (propValue instanceof RegExp) {\n        return 'regexp';\n      }\n    }\n    return propType;\n  }\n\n  // Returns a string that is postfixed to a warning about an invalid type.\n  // For example, \"undefined\" or \"of type array\"\n  function getPostfixForTypeWarning(value) {\n    var type = getPreciseType(value);\n    switch (type) {\n      case 'array':\n      case 'object':\n        return 'an ' + type;\n      case 'boolean':\n      case 'date':\n      case 'regexp':\n        return 'a ' + type;\n      default:\n        return type;\n    }\n  }\n\n  // Returns class name of the object, if any.\n  function getClassName(propValue) {\n    if (!propValue.constructor || !propValue.constructor.name) {\n      return ANONYMOUS;\n    }\n    return propValue.constructor.name;\n  }\n\n  ReactPropTypes.checkPropTypes = checkPropTypes;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nexports.__esModule = true;\nvar React = require(\"react\");\nvar PropTypes = require(\"prop-types\");\nvar autosize = require(\"autosize\");\nvar _getLineHeight = require(\"line-height\");\nvar getLineHeight = _getLineHeight;\nvar UPDATE = 'autosize:update';\nvar DESTROY = 'autosize:destroy';\nvar RESIZED = 'autosize:resized';\n/**\n * A light replacement for built-in textarea component\n * which automaticaly adjusts its height to match the content\n */\nvar TextareaAutosize = /** @class */ (function (_super) {\n    __extends(TextareaAutosize, _super);\n    function TextareaAutosize() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            lineHeight: null\n        };\n        _this.dispatchEvent = function (EVENT_TYPE) {\n            var event = document.createEvent('Event');\n            event.initEvent(EVENT_TYPE, true, false);\n            _this.textarea.dispatchEvent(event);\n        };\n        _this.updateLineHeight = function () {\n            _this.setState({\n                lineHeight: getLineHeight(_this.textarea)\n            });\n        };\n        _this.onChange = function (e) {\n            var onChange = _this.props.onChange;\n            _this.currentValue = e.currentTarget.value;\n            onChange && onChange(e);\n        };\n        _this.saveDOMNodeRef = function (ref) {\n            var innerRef = _this.props.innerRef;\n            if (innerRef) {\n                innerRef(ref);\n            }\n            _this.textarea = ref;\n        };\n        _this.getLocals = function () {\n            var _a = _this, _b = _a.props, onResize = _b.onResize, maxRows = _b.maxRows, onChange = _b.onChange, style = _b.style, innerRef = _b.innerRef, props = __rest(_b, [\"onResize\", \"maxRows\", \"onChange\", \"style\", \"innerRef\"]), lineHeight = _a.state.lineHeight, saveDOMNodeRef = _a.saveDOMNodeRef;\n            var maxHeight = maxRows && lineHeight ? lineHeight * maxRows : null;\n            return __assign({}, props, { saveDOMNodeRef: saveDOMNodeRef, style: maxHeight ? __assign({}, style, { maxHeight: maxHeight }) : style, onChange: _this.onChange });\n        };\n        return _this;\n    }\n    TextareaAutosize.prototype.componentDidMount = function () {\n        var _this = this;\n        var _a = this.props, onResize = _a.onResize, maxRows = _a.maxRows;\n        if (typeof maxRows === 'number') {\n            this.updateLineHeight();\n        }\n        /*\n          the defer is needed to:\n            - force \"autosize\" to activate the scrollbar when this.props.maxRows is passed\n            - support StyledComponents (see #71)\n        */\n        setTimeout(function () { return autosize(_this.textarea); });\n        if (onResize) {\n            this.textarea.addEventListener(RESIZED, onResize);\n        }\n    };\n    TextareaAutosize.prototype.componentWillUnmount = function () {\n        var onResize = this.props.onResize;\n        if (onResize) {\n            this.textarea.removeEventListener(RESIZED, onResize);\n        }\n        this.dispatchEvent(DESTROY);\n    };\n    TextareaAutosize.prototype.render = function () {\n        var _a = this.getLocals(), children = _a.children, saveDOMNodeRef = _a.saveDOMNodeRef, locals = __rest(_a, [\"children\", \"saveDOMNodeRef\"]);\n        return (React.createElement(\"textarea\", __assign({}, locals, { ref: saveDOMNodeRef }), children));\n    };\n    TextareaAutosize.prototype.componentDidUpdate = function (prevProps) {\n        if (this.props.value !== this.currentValue || this.props.rows !== prevProps.rows) {\n            this.dispatchEvent(UPDATE);\n        }\n    };\n    TextareaAutosize.defaultProps = {\n        rows: 1\n    };\n    TextareaAutosize.propTypes = {\n        rows: PropTypes.number,\n        maxRows: PropTypes.number,\n        onResize: PropTypes.func,\n        innerRef: PropTypes.func\n    };\n    return TextareaAutosize;\n}(React.Component));\nexports[\"default\"] = TextareaAutosize;\n","\"use strict\";\nexports.__esModule = true;\nvar TextareaAutosize_1 = require(\"./TextareaAutosize\");\nexports[\"default\"] = TextareaAutosize_1[\"default\"];\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Redux dispatch multiple actions\n */\n\nfunction multi(_ref) {\n  var dispatch = _ref.dispatch;\n\n  return function (next) {\n    return function (action) {\n      return Array.isArray(action) ? action.filter(Boolean).map(dispatch) : next(action);\n    };\n  };\n}\n\n/**\n * Exports\n */\n\nexports.default = multi;","module.exports = require('./lib/index.js');\n","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nvar BEGIN = 'BEGIN';\nvar COMMIT = 'COMMIT';\nvar REVERT = 'REVERT';\n// Array({transactionID: string or null, beforeState: {object}, action: {object}}\nvar INITIAL_OPTIMIST = [];\n\nmodule.exports = optimist;\nmodule.exports.BEGIN = BEGIN;\nmodule.exports.COMMIT = COMMIT;\nmodule.exports.REVERT = REVERT;\nfunction optimist(fn) {\n  function beginReducer(state, action) {\n    var _separateState = separateState(state);\n\n    var optimist = _separateState.optimist;\n    var innerState = _separateState.innerState;\n\n    optimist = optimist.concat([{ beforeState: innerState, action: action }]);\n    innerState = fn(innerState, action);\n    validateState(innerState, action);\n    return _extends({ optimist: optimist }, innerState);\n  }\n  function commitReducer(state, action) {\n    var _separateState2 = separateState(state);\n\n    var optimist = _separateState2.optimist;\n    var innerState = _separateState2.innerState;\n\n    var newOptimist = [],\n        started = false,\n        committed = false;\n    optimist.forEach(function (entry) {\n      if (started) {\n        if (entry.beforeState && matchesTransaction(entry.action, action.optimist.id)) {\n          committed = true;\n          newOptimist.push({ action: entry.action });\n        } else {\n          newOptimist.push(entry);\n        }\n      } else if (entry.beforeState && !matchesTransaction(entry.action, action.optimist.id)) {\n        started = true;\n        newOptimist.push(entry);\n      } else if (entry.beforeState && matchesTransaction(entry.action, action.optimist.id)) {\n        committed = true;\n      }\n    });\n    if (!committed) {\n      console.error('Cannot commit transaction with id \"' + action.optimist.id + '\" because it does not exist');\n    }\n    optimist = newOptimist;\n    return baseReducer(optimist, innerState, action);\n  }\n  function revertReducer(state, action) {\n    var _separateState3 = separateState(state);\n\n    var optimist = _separateState3.optimist;\n    var innerState = _separateState3.innerState;\n\n    var newOptimist = [],\n        started = false,\n        gotInitialState = false,\n        currentState = innerState;\n    optimist.forEach(function (entry) {\n      if (entry.beforeState && matchesTransaction(entry.action, action.optimist.id)) {\n        currentState = entry.beforeState;\n        gotInitialState = true;\n      }\n      if (!matchesTransaction(entry.action, action.optimist.id)) {\n        if (entry.beforeState) {\n          started = true;\n        }\n        if (started) {\n          if (gotInitialState && entry.beforeState) {\n            newOptimist.push({\n              beforeState: currentState,\n              action: entry.action\n            });\n          } else {\n            newOptimist.push(entry);\n          }\n        }\n        if (gotInitialState) {\n          currentState = fn(currentState, entry.action);\n          validateState(innerState, action);\n        }\n      }\n    });\n    if (!gotInitialState) {\n      console.error('Cannot revert transaction with id \"' + action.optimist.id + '\" because it does not exist');\n    }\n    optimist = newOptimist;\n    return baseReducer(optimist, currentState, action);\n  }\n  function baseReducer(optimist, innerState, action) {\n    if (optimist.length) {\n      optimist = optimist.concat([{ action: action }]);\n    }\n    innerState = fn(innerState, action);\n    validateState(innerState, action);\n    return _extends({ optimist: optimist }, innerState);\n  }\n  return function (state, action) {\n    if (action.optimist) {\n      switch (action.optimist.type) {\n        case BEGIN:\n          return beginReducer(state, action);\n        case COMMIT:\n          return commitReducer(state, action);\n        case REVERT:\n          return revertReducer(state, action);\n      }\n    }\n\n    var _separateState4 = separateState(state);\n\n    var optimist = _separateState4.optimist;\n    var innerState = _separateState4.innerState;\n\n    if (state && !optimist.length) {\n      var nextState = fn(innerState, action);\n      if (nextState === innerState) {\n        return state;\n      }\n      validateState(nextState, action);\n      return _extends({ optimist: optimist }, nextState);\n    }\n    return baseReducer(optimist, innerState, action);\n  };\n}\n\nfunction matchesTransaction(action, id) {\n  return action.optimist && action.optimist.id === id;\n}\n\nfunction validateState(newState, action) {\n  if (!newState || typeof newState !== 'object' || Array.isArray(newState)) {\n    throw new TypeError('Error while handling \"' + action.type + '\": Optimist requires that state is always a plain object.');\n  }\n}\n\nfunction separateState(state) {\n  if (!state) {\n    return { optimist: INITIAL_OPTIMIST, innerState: state };\n  } else {\n    var _state$optimist = state.optimist;\n\n    var _optimist = _state$optimist === undefined ? INITIAL_OPTIMIST : _state$optimist;\n\n    var innerState = _objectWithoutProperties(state, ['optimist']);\n\n    return { optimist: _optimist, innerState: innerState };\n  }\n}","'use strict';\n\nfunction flattenIntoMap( map, effects ) {\n\tvar i;\n\tif ( Array.isArray( effects ) ) {\n\t\tfor ( i = 0; i < effects.length; i++ ) {\n\t\t\tflattenIntoMap( map, effects[ i ] );\n\t\t}\n\t} else {\n\t\tfor ( i in effects ) {\n\t\t\tmap[ i ] = ( map[ i ] || [] ).concat( effects[ i ] );\n\t\t}\n\t}\n}\n\nfunction refx( effects ) {\n\tvar map = {},\n\t\tmiddleware;\n\n\tflattenIntoMap( map, effects );\n\n\tmiddleware = function( store ) {\n\t\treturn function( next ) {\n\t\t\treturn function( action ) {\n\t\t\t\tvar handlers = map[ action.type ],\n\t\t\t\t\tresult = next( action ),\n\t\t\t\t\ti, handlerAction;\n\n\t\t\t\tif ( handlers ) {\n\t\t\t\t\tfor ( i = 0; i < handlers.length; i++ ) {\n\t\t\t\t\t\thandlerAction = handlers[ i ]( action, store );\n\t\t\t\t\t\tif ( handlerAction ) {\n\t\t\t\t\t\t\tstore.dispatch( handlerAction );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t};\n\t\t};\n\t};\n\n\tmiddleware.effects = map;\n\n\treturn middleware;\n}\n\nmodule.exports = refx;\n","'use strict';\n\nvar LEAF_KEY, hasWeakMap;\n\n/**\n * Arbitrary value used as key for referencing cache object in WeakMap tree.\n *\n * @type {Object}\n */\nLEAF_KEY = {};\n\n/**\n * Whether environment supports WeakMap.\n *\n * @type {boolean}\n */\nhasWeakMap = typeof WeakMap !== 'undefined';\n\n/**\n * Returns the first argument as the sole entry in an array.\n *\n * @param {*} value Value to return.\n *\n * @return {Array} Value returned as entry in array.\n */\nfunction arrayOf( value ) {\n\treturn [ value ];\n}\n\n/**\n * Returns true if the value passed is object-like, or false otherwise. A value\n * is object-like if it can support property assignment, e.g. object or array.\n *\n * @param {*} value Value to test.\n *\n * @return {boolean} Whether value is object-like.\n */\nfunction isObjectLike( value ) {\n\treturn !! value && 'object' === typeof value;\n}\n\n/**\n * Creates and returns a new cache object.\n *\n * @return {Object} Cache object.\n */\nfunction createCache() {\n\tvar cache = {\n\t\tclear: function() {\n\t\t\tcache.head = null;\n\t\t},\n\t};\n\n\treturn cache;\n}\n\n/**\n * Returns true if entries within the two arrays are strictly equal by\n * reference from a starting index.\n *\n * @param {Array}  a         First array.\n * @param {Array}  b         Second array.\n * @param {number} fromIndex Index from which to start comparison.\n *\n * @return {boolean} Whether arrays are shallowly equal.\n */\nfunction isShallowEqual( a, b, fromIndex ) {\n\tvar i;\n\n\tif ( a.length !== b.length ) {\n\t\treturn false;\n\t}\n\n\tfor ( i = fromIndex; i < a.length; i++ ) {\n\t\tif ( a[ i ] !== b[ i ] ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * Returns a memoized selector function. The getDependants function argument is\n * called before the memoized selector and is expected to return an immutable\n * reference or array of references on which the selector depends for computing\n * its own return value. The memoize cache is preserved only as long as those\n * dependant references remain the same. If getDependants returns a different\n * reference(s), the cache is cleared and the selector value regenerated.\n *\n * @param {Function} selector      Selector function.\n * @param {Function} getDependants Dependant getter returning an immutable\n *                                 reference or array of reference used in\n *                                 cache bust consideration.\n *\n * @return {Function} Memoized selector.\n */\nexport default function( selector, getDependants ) {\n\tvar rootCache, getCache;\n\n\t// Use object source as dependant if getter not provided\n\tif ( ! getDependants ) {\n\t\tgetDependants = arrayOf;\n\t}\n\n\t/**\n\t * Returns the root cache. If WeakMap is supported, this is assigned to the\n\t * root WeakMap cache set, otherwise it is a shared instance of the default\n\t * cache object.\n\t *\n\t * @return {(WeakMap|Object)} Root cache object.\n\t */\n\tfunction getRootCache() {\n\t\treturn rootCache;\n\t}\n\n\t/**\n\t * Returns the cache for a given dependants array. When possible, a WeakMap\n\t * will be used to create a unique cache for each set of dependants. This\n\t * is feasible due to the nature of WeakMap in allowing garbage collection\n\t * to occur on entries where the key object is no longer referenced. Since\n\t * WeakMap requires the key to be an object, this is only possible when the\n\t * dependant is object-like. The root cache is created as a hierarchy where\n\t * each top-level key is the first entry in a dependants set, the value a\n\t * WeakMap where each key is the next dependant, and so on. This continues\n\t * so long as the dependants are object-like. If no dependants are object-\n\t * like, then the cache is shared across all invocations.\n\t *\n\t * @see isObjectLike\n\t *\n\t * @param {Array} dependants Selector dependants.\n\t *\n\t * @return {Object} Cache object.\n\t */\n\tfunction getWeakMapCache( dependants ) {\n\t\tvar caches = rootCache,\n\t\t\tisUniqueByDependants = true,\n\t\t\ti, dependant, map, cache;\n\n\t\tfor ( i = 0; i < dependants.length; i++ ) {\n\t\t\tdependant = dependants[ i ];\n\n\t\t\t// Can only compose WeakMap from object-like key.\n\t\t\tif ( ! isObjectLike( dependant ) ) {\n\t\t\t\tisUniqueByDependants = false;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Does current segment of cache already have a WeakMap?\n\t\t\tif ( caches.has( dependant ) ) {\n\t\t\t\t// Traverse into nested WeakMap.\n\t\t\t\tcaches = caches.get( dependant );\n\t\t\t} else {\n\t\t\t\t// Create, set, and traverse into a new one.\n\t\t\t\tmap = new WeakMap();\n\t\t\t\tcaches.set( dependant, map );\n\t\t\t\tcaches = map;\n\t\t\t}\n\t\t}\n\n\t\t// We use an arbitrary (but consistent) object as key for the last item\n\t\t// in the WeakMap to serve as our running cache.\n\t\tif ( ! caches.has( LEAF_KEY ) ) {\n\t\t\tcache = createCache();\n\t\t\tcache.isUniqueByDependants = isUniqueByDependants;\n\t\t\tcaches.set( LEAF_KEY, cache );\n\t\t}\n\n\t\treturn caches.get( LEAF_KEY );\n\t}\n\n\t// Assign cache handler by availability of WeakMap\n\tgetCache = hasWeakMap ? getWeakMapCache : getRootCache;\n\n\t/**\n\t * Resets root memoization cache.\n\t */\n\tfunction clear() {\n\t\trootCache = hasWeakMap ? new WeakMap() : createCache();\n\t}\n\n\t// eslint-disable-next-line jsdoc/check-param-names\n\t/**\n\t * The augmented selector call, considering first whether dependants have\n\t * changed before passing it to underlying memoize function.\n\t *\n\t * @param {Object} source    Source object for derivation.\n\t * @param {...*}   extraArgs Additional arguments to pass to selector.\n\t *\n\t * @return {*} Selector result.\n\t */\n\tfunction callSelector( /* source, ...extraArgs */ ) {\n\t\tvar len = arguments.length,\n\t\t\tcache, node, i, args, dependants;\n\n\t\t// Create copy of arguments (avoid leaking deoptimization).\n\t\targs = new Array( len );\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tdependants = getDependants.apply( null, args );\n\t\tcache = getCache( dependants );\n\n\t\t// If not guaranteed uniqueness by dependants (primitive type or lack\n\t\t// of WeakMap support), shallow compare against last dependants and, if\n\t\t// references have changed, destroy cache to recalculate result.\n\t\tif ( ! cache.isUniqueByDependants ) {\n\t\t\tif ( cache.lastDependants && ! isShallowEqual( dependants, cache.lastDependants, 0 ) ) {\n\t\t\t\tcache.clear();\n\t\t\t}\n\n\t\t\tcache.lastDependants = dependants;\n\t\t}\n\n\t\tnode = cache.head;\n\t\twhile ( node ) {\n\t\t\t// Check whether node arguments match arguments\n\t\t\tif ( ! isShallowEqual( node.args, args, 1 ) ) {\n\t\t\t\tnode = node.next;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// At this point we can assume we've found a match\n\n\t\t\t// Surface matched node to head if not already\n\t\t\tif ( node !== cache.head ) {\n\t\t\t\t// Adjust siblings to point to each other.\n\t\t\t\tnode.prev.next = node.next;\n\t\t\t\tif ( node.next ) {\n\t\t\t\t\tnode.next.prev = node.prev;\n\t\t\t\t}\n\n\t\t\t\tnode.next = cache.head;\n\t\t\t\tnode.prev = null;\n\t\t\t\tcache.head.prev = node;\n\t\t\t\tcache.head = node;\n\t\t\t}\n\n\t\t\t// Return immediately\n\t\t\treturn node.val;\n\t\t}\n\n\t\t// No cached value found. Continue to insertion phase:\n\n\t\tnode = {\n\t\t\t// Generate the result from original function\n\t\t\tval: selector.apply( null, args ),\n\t\t};\n\n\t\t// Avoid including the source object in the cache.\n\t\targs[ 0 ] = null;\n\t\tnode.args = args;\n\n\t\t// Don't need to check whether node is already head, since it would\n\t\t// have been returned above already if it was\n\n\t\t// Shift existing head down list\n\t\tif ( cache.head ) {\n\t\t\tcache.head.prev = node;\n\t\t\tnode.next = cache.head;\n\t\t}\n\n\t\tcache.head = node;\n\n\t\treturn node.val;\n\t}\n\n\tcallSelector.getDependants = getDependants;\n\tcallSelector.clear = clear;\n\tclear();\n\n\treturn callSelector;\n}\n","// TinyColor v1.4.1\n// https://github.com/bgrins/TinyColor\n// Brian Grinstead, MIT License\n\n(function(Math) {\n\nvar trimLeft = /^\\s+/,\n    trimRight = /\\s+$/,\n    tinyCounter = 0,\n    mathRound = Math.round,\n    mathMin = Math.min,\n    mathMax = Math.max,\n    mathRandom = Math.random;\n\nfunction tinycolor (color, opts) {\n\n    color = (color) ? color : '';\n    opts = opts || { };\n\n    // If input is already a tinycolor, return itself\n    if (color instanceof tinycolor) {\n       return color;\n    }\n    // If we are called as a function, call using new instead\n    if (!(this instanceof tinycolor)) {\n        return new tinycolor(color, opts);\n    }\n\n    var rgb = inputToRGB(color);\n    this._originalInput = color,\n    this._r = rgb.r,\n    this._g = rgb.g,\n    this._b = rgb.b,\n    this._a = rgb.a,\n    this._roundA = mathRound(100*this._a) / 100,\n    this._format = opts.format || rgb.format;\n    this._gradientType = opts.gradientType;\n\n    // Don't let the range of [0,255] come back in [0,1].\n    // Potentially lose a little bit of precision here, but will fix issues where\n    // .5 gets interpreted as half of the total, instead of half of 1\n    // If it was supposed to be 128, this was already taken care of by `inputToRgb`\n    if (this._r < 1) { this._r = mathRound(this._r); }\n    if (this._g < 1) { this._g = mathRound(this._g); }\n    if (this._b < 1) { this._b = mathRound(this._b); }\n\n    this._ok = rgb.ok;\n    this._tc_id = tinyCounter++;\n}\n\ntinycolor.prototype = {\n    isDark: function() {\n        return this.getBrightness() < 128;\n    },\n    isLight: function() {\n        return !this.isDark();\n    },\n    isValid: function() {\n        return this._ok;\n    },\n    getOriginalInput: function() {\n      return this._originalInput;\n    },\n    getFormat: function() {\n        return this._format;\n    },\n    getAlpha: function() {\n        return this._a;\n    },\n    getBrightness: function() {\n        //http://www.w3.org/TR/AERT#color-contrast\n        var rgb = this.toRgb();\n        return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\n    },\n    getLuminance: function() {\n        //http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n        var rgb = this.toRgb();\n        var RsRGB, GsRGB, BsRGB, R, G, B;\n        RsRGB = rgb.r/255;\n        GsRGB = rgb.g/255;\n        BsRGB = rgb.b/255;\n\n        if (RsRGB <= 0.03928) {R = RsRGB / 12.92;} else {R = Math.pow(((RsRGB + 0.055) / 1.055), 2.4);}\n        if (GsRGB <= 0.03928) {G = GsRGB / 12.92;} else {G = Math.pow(((GsRGB + 0.055) / 1.055), 2.4);}\n        if (BsRGB <= 0.03928) {B = BsRGB / 12.92;} else {B = Math.pow(((BsRGB + 0.055) / 1.055), 2.4);}\n        return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\n    },\n    setAlpha: function(value) {\n        this._a = boundAlpha(value);\n        this._roundA = mathRound(100*this._a) / 100;\n        return this;\n    },\n    toHsv: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        return { h: hsv.h * 360, s: hsv.s, v: hsv.v, a: this._a };\n    },\n    toHsvString: function() {\n        var hsv = rgbToHsv(this._r, this._g, this._b);\n        var h = mathRound(hsv.h * 360), s = mathRound(hsv.s * 100), v = mathRound(hsv.v * 100);\n        return (this._a == 1) ?\n          \"hsv(\"  + h + \", \" + s + \"%, \" + v + \"%)\" :\n          \"hsva(\" + h + \", \" + s + \"%, \" + v + \"%, \"+ this._roundA + \")\";\n    },\n    toHsl: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        return { h: hsl.h * 360, s: hsl.s, l: hsl.l, a: this._a };\n    },\n    toHslString: function() {\n        var hsl = rgbToHsl(this._r, this._g, this._b);\n        var h = mathRound(hsl.h * 360), s = mathRound(hsl.s * 100), l = mathRound(hsl.l * 100);\n        return (this._a == 1) ?\n          \"hsl(\"  + h + \", \" + s + \"%, \" + l + \"%)\" :\n          \"hsla(\" + h + \", \" + s + \"%, \" + l + \"%, \"+ this._roundA + \")\";\n    },\n    toHex: function(allow3Char) {\n        return rgbToHex(this._r, this._g, this._b, allow3Char);\n    },\n    toHexString: function(allow3Char) {\n        return '#' + this.toHex(allow3Char);\n    },\n    toHex8: function(allow4Char) {\n        return rgbaToHex(this._r, this._g, this._b, this._a, allow4Char);\n    },\n    toHex8String: function(allow4Char) {\n        return '#' + this.toHex8(allow4Char);\n    },\n    toRgb: function() {\n        return { r: mathRound(this._r), g: mathRound(this._g), b: mathRound(this._b), a: this._a };\n    },\n    toRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \")\" :\n          \"rgba(\" + mathRound(this._r) + \", \" + mathRound(this._g) + \", \" + mathRound(this._b) + \", \" + this._roundA + \")\";\n    },\n    toPercentageRgb: function() {\n        return { r: mathRound(bound01(this._r, 255) * 100) + \"%\", g: mathRound(bound01(this._g, 255) * 100) + \"%\", b: mathRound(bound01(this._b, 255) * 100) + \"%\", a: this._a };\n    },\n    toPercentageRgbString: function() {\n        return (this._a == 1) ?\n          \"rgb(\"  + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%)\" :\n          \"rgba(\" + mathRound(bound01(this._r, 255) * 100) + \"%, \" + mathRound(bound01(this._g, 255) * 100) + \"%, \" + mathRound(bound01(this._b, 255) * 100) + \"%, \" + this._roundA + \")\";\n    },\n    toName: function() {\n        if (this._a === 0) {\n            return \"transparent\";\n        }\n\n        if (this._a < 1) {\n            return false;\n        }\n\n        return hexNames[rgbToHex(this._r, this._g, this._b, true)] || false;\n    },\n    toFilter: function(secondColor) {\n        var hex8String = '#' + rgbaToArgbHex(this._r, this._g, this._b, this._a);\n        var secondHex8String = hex8String;\n        var gradientType = this._gradientType ? \"GradientType = 1, \" : \"\";\n\n        if (secondColor) {\n            var s = tinycolor(secondColor);\n            secondHex8String = '#' + rgbaToArgbHex(s._r, s._g, s._b, s._a);\n        }\n\n        return \"progid:DXImageTransform.Microsoft.gradient(\"+gradientType+\"startColorstr=\"+hex8String+\",endColorstr=\"+secondHex8String+\")\";\n    },\n    toString: function(format) {\n        var formatSet = !!format;\n        format = format || this._format;\n\n        var formattedString = false;\n        var hasAlpha = this._a < 1 && this._a >= 0;\n        var needsAlphaFormat = !formatSet && hasAlpha && (format === \"hex\" || format === \"hex6\" || format === \"hex3\" || format === \"hex4\" || format === \"hex8\" || format === \"name\");\n\n        if (needsAlphaFormat) {\n            // Special case for \"transparent\", all other non-alpha formats\n            // will return rgba when there is transparency.\n            if (format === \"name\" && this._a === 0) {\n                return this.toName();\n            }\n            return this.toRgbString();\n        }\n        if (format === \"rgb\") {\n            formattedString = this.toRgbString();\n        }\n        if (format === \"prgb\") {\n            formattedString = this.toPercentageRgbString();\n        }\n        if (format === \"hex\" || format === \"hex6\") {\n            formattedString = this.toHexString();\n        }\n        if (format === \"hex3\") {\n            formattedString = this.toHexString(true);\n        }\n        if (format === \"hex4\") {\n            formattedString = this.toHex8String(true);\n        }\n        if (format === \"hex8\") {\n            formattedString = this.toHex8String();\n        }\n        if (format === \"name\") {\n            formattedString = this.toName();\n        }\n        if (format === \"hsl\") {\n            formattedString = this.toHslString();\n        }\n        if (format === \"hsv\") {\n            formattedString = this.toHsvString();\n        }\n\n        return formattedString || this.toHexString();\n    },\n    clone: function() {\n        return tinycolor(this.toString());\n    },\n\n    _applyModification: function(fn, args) {\n        var color = fn.apply(null, [this].concat([].slice.call(args)));\n        this._r = color._r;\n        this._g = color._g;\n        this._b = color._b;\n        this.setAlpha(color._a);\n        return this;\n    },\n    lighten: function() {\n        return this._applyModification(lighten, arguments);\n    },\n    brighten: function() {\n        return this._applyModification(brighten, arguments);\n    },\n    darken: function() {\n        return this._applyModification(darken, arguments);\n    },\n    desaturate: function() {\n        return this._applyModification(desaturate, arguments);\n    },\n    saturate: function() {\n        return this._applyModification(saturate, arguments);\n    },\n    greyscale: function() {\n        return this._applyModification(greyscale, arguments);\n    },\n    spin: function() {\n        return this._applyModification(spin, arguments);\n    },\n\n    _applyCombination: function(fn, args) {\n        return fn.apply(null, [this].concat([].slice.call(args)));\n    },\n    analogous: function() {\n        return this._applyCombination(analogous, arguments);\n    },\n    complement: function() {\n        return this._applyCombination(complement, arguments);\n    },\n    monochromatic: function() {\n        return this._applyCombination(monochromatic, arguments);\n    },\n    splitcomplement: function() {\n        return this._applyCombination(splitcomplement, arguments);\n    },\n    triad: function() {\n        return this._applyCombination(triad, arguments);\n    },\n    tetrad: function() {\n        return this._applyCombination(tetrad, arguments);\n    }\n};\n\n// If input is an object, force 1 into \"1.0\" to handle ratios properly\n// String input requires \"1.0\" as input, so 1 will be treated as 1\ntinycolor.fromRatio = function(color, opts) {\n    if (typeof color == \"object\") {\n        var newColor = {};\n        for (var i in color) {\n            if (color.hasOwnProperty(i)) {\n                if (i === \"a\") {\n                    newColor[i] = color[i];\n                }\n                else {\n                    newColor[i] = convertToPercentage(color[i]);\n                }\n            }\n        }\n        color = newColor;\n    }\n\n    return tinycolor(color, opts);\n};\n\n// Given a string or object, convert that input to RGB\n// Possible string inputs:\n//\n//     \"red\"\n//     \"#f00\" or \"f00\"\n//     \"#ff0000\" or \"ff0000\"\n//     \"#ff000000\" or \"ff000000\"\n//     \"rgb 255 0 0\" or \"rgb (255, 0, 0)\"\n//     \"rgb 1.0 0 0\" or \"rgb (1, 0, 0)\"\n//     \"rgba (255, 0, 0, 1)\" or \"rgba 255, 0, 0, 1\"\n//     \"rgba (1.0, 0, 0, 1)\" or \"rgba 1.0, 0, 0, 1\"\n//     \"hsl(0, 100%, 50%)\" or \"hsl 0 100% 50%\"\n//     \"hsla(0, 100%, 50%, 1)\" or \"hsla 0 100% 50%, 1\"\n//     \"hsv(0, 100%, 100%)\" or \"hsv 0 100% 100%\"\n//\nfunction inputToRGB(color) {\n\n    var rgb = { r: 0, g: 0, b: 0 };\n    var a = 1;\n    var s = null;\n    var v = null;\n    var l = null;\n    var ok = false;\n    var format = false;\n\n    if (typeof color == \"string\") {\n        color = stringInputToObject(color);\n    }\n\n    if (typeof color == \"object\") {\n        if (isValidCSSUnit(color.r) && isValidCSSUnit(color.g) && isValidCSSUnit(color.b)) {\n            rgb = rgbToRgb(color.r, color.g, color.b);\n            ok = true;\n            format = String(color.r).substr(-1) === \"%\" ? \"prgb\" : \"rgb\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.v)) {\n            s = convertToPercentage(color.s);\n            v = convertToPercentage(color.v);\n            rgb = hsvToRgb(color.h, s, v);\n            ok = true;\n            format = \"hsv\";\n        }\n        else if (isValidCSSUnit(color.h) && isValidCSSUnit(color.s) && isValidCSSUnit(color.l)) {\n            s = convertToPercentage(color.s);\n            l = convertToPercentage(color.l);\n            rgb = hslToRgb(color.h, s, l);\n            ok = true;\n            format = \"hsl\";\n        }\n\n        if (color.hasOwnProperty(\"a\")) {\n            a = color.a;\n        }\n    }\n\n    a = boundAlpha(a);\n\n    return {\n        ok: ok,\n        format: color.format || format,\n        r: mathMin(255, mathMax(rgb.r, 0)),\n        g: mathMin(255, mathMax(rgb.g, 0)),\n        b: mathMin(255, mathMax(rgb.b, 0)),\n        a: a\n    };\n}\n\n\n// Conversion Functions\n// --------------------\n\n// `rgbToHsl`, `rgbToHsv`, `hslToRgb`, `hsvToRgb` modified from:\n// <http://mjijackson.com/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript>\n\n// `rgbToRgb`\n// Handle bounds / percentage checking to conform to CSS color spec\n// <http://www.w3.org/TR/css3-color/>\n// *Assumes:* r, g, b in [0, 255] or [0, 1]\n// *Returns:* { r, g, b } in [0, 255]\nfunction rgbToRgb(r, g, b){\n    return {\n        r: bound01(r, 255) * 255,\n        g: bound01(g, 255) * 255,\n        b: bound01(b, 255) * 255\n    };\n}\n\n// `rgbToHsl`\n// Converts an RGB color value to HSL.\n// *Assumes:* r, g, and b are contained in [0, 255] or [0, 1]\n// *Returns:* { h, s, l } in [0,1]\nfunction rgbToHsl(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, l = (max + min) / 2;\n\n    if(max == min) {\n        h = s = 0; // achromatic\n    }\n    else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    return { h: h, s: s, l: l };\n}\n\n// `hslToRgb`\n// Converts an HSL color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and l are contained [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n\n    h = bound01(h, 360);\n    s = bound01(s, 100);\n    l = bound01(l, 100);\n\n    function hue2rgb(p, q, t) {\n        if(t < 0) t += 1;\n        if(t > 1) t -= 1;\n        if(t < 1/6) return p + (q - p) * 6 * t;\n        if(t < 1/2) return q;\n        if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n        return p;\n    }\n\n    if(s === 0) {\n        r = g = b = l; // achromatic\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHsv`\n// Converts an RGB color value to HSV\n// *Assumes:* r, g, and b are contained in the set [0, 255] or [0, 1]\n// *Returns:* { h, s, v } in [0,1]\nfunction rgbToHsv(r, g, b) {\n\n    r = bound01(r, 255);\n    g = bound01(g, 255);\n    b = bound01(b, 255);\n\n    var max = mathMax(r, g, b), min = mathMin(r, g, b);\n    var h, s, v = max;\n\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if(max == min) {\n        h = 0; // achromatic\n    }\n    else {\n        switch(max) {\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n            case g: h = (b - r) / d + 2; break;\n            case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n    }\n    return { h: h, s: s, v: v };\n}\n\n// `hsvToRgb`\n// Converts an HSV color value to RGB.\n// *Assumes:* h is contained in [0, 1] or [0, 360] and s and v are contained in [0, 1] or [0, 100]\n// *Returns:* { r, g, b } in the set [0, 255]\n function hsvToRgb(h, s, v) {\n\n    h = bound01(h, 360) * 6;\n    s = bound01(s, 100);\n    v = bound01(v, 100);\n\n    var i = Math.floor(h),\n        f = h - i,\n        p = v * (1 - s),\n        q = v * (1 - f * s),\n        t = v * (1 - (1 - f) * s),\n        mod = i % 6,\n        r = [v, q, p, p, t, v][mod],\n        g = [t, v, v, q, p, p][mod],\n        b = [p, p, t, v, v, q][mod];\n\n    return { r: r * 255, g: g * 255, b: b * 255 };\n}\n\n// `rgbToHex`\n// Converts an RGB color to hex\n// Assumes r, g, and b are contained in the set [0, 255]\n// Returns a 3 or 6 character hex\nfunction rgbToHex(r, g, b, allow3Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    // Return a 3 character hex if possible\n    if (allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToHex`\n// Converts an RGBA color plus alpha transparency to hex\n// Assumes r, g, b are contained in the set [0, 255] and\n// a in [0, 1]. Returns a 4 or 8 character rgba hex\nfunction rgbaToHex(r, g, b, a, allow4Char) {\n\n    var hex = [\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16)),\n        pad2(convertDecimalToHex(a))\n    ];\n\n    // Return a 4 character hex if possible\n    if (allow4Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) && hex[3].charAt(0) == hex[3].charAt(1)) {\n        return hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) + hex[3].charAt(0);\n    }\n\n    return hex.join(\"\");\n}\n\n// `rgbaToArgbHex`\n// Converts an RGBA color to an ARGB Hex8 string\n// Rarely used, but required for \"toFilter()\"\nfunction rgbaToArgbHex(r, g, b, a) {\n\n    var hex = [\n        pad2(convertDecimalToHex(a)),\n        pad2(mathRound(r).toString(16)),\n        pad2(mathRound(g).toString(16)),\n        pad2(mathRound(b).toString(16))\n    ];\n\n    return hex.join(\"\");\n}\n\n// `equals`\n// Can be called with any tinycolor input\ntinycolor.equals = function (color1, color2) {\n    if (!color1 || !color2) { return false; }\n    return tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString();\n};\n\ntinycolor.random = function() {\n    return tinycolor.fromRatio({\n        r: mathRandom(),\n        g: mathRandom(),\n        b: mathRandom()\n    });\n};\n\n\n// Modification Functions\n// ----------------------\n// Thanks to less.js for some of the basics here\n// <https://github.com/cloudhead/less.js/blob/master/lib/less/functions.js>\n\nfunction desaturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s -= amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction saturate(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.s += amount / 100;\n    hsl.s = clamp01(hsl.s);\n    return tinycolor(hsl);\n}\n\nfunction greyscale(color) {\n    return tinycolor(color).desaturate(100);\n}\n\nfunction lighten (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l += amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\nfunction brighten(color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var rgb = tinycolor(color).toRgb();\n    rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * - (amount / 100))));\n    rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * - (amount / 100))));\n    rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * - (amount / 100))));\n    return tinycolor(rgb);\n}\n\nfunction darken (color, amount) {\n    amount = (amount === 0) ? 0 : (amount || 10);\n    var hsl = tinycolor(color).toHsl();\n    hsl.l -= amount / 100;\n    hsl.l = clamp01(hsl.l);\n    return tinycolor(hsl);\n}\n\n// Spin takes a positive or negative amount within [-360, 360] indicating the change of hue.\n// Values outside of this range will be wrapped into this range.\nfunction spin(color, amount) {\n    var hsl = tinycolor(color).toHsl();\n    var hue = (hsl.h + amount) % 360;\n    hsl.h = hue < 0 ? 360 + hue : hue;\n    return tinycolor(hsl);\n}\n\n// Combination Functions\n// ---------------------\n// Thanks to jQuery xColor for some of the ideas behind these\n// <https://github.com/infusion/jQuery-xcolor/blob/master/jquery.xcolor.js>\n\nfunction complement(color) {\n    var hsl = tinycolor(color).toHsl();\n    hsl.h = (hsl.h + 180) % 360;\n    return tinycolor(hsl);\n}\n\nfunction triad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 120) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 240) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction tetrad(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 90) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 180) % 360, s: hsl.s, l: hsl.l }),\n        tinycolor({ h: (h + 270) % 360, s: hsl.s, l: hsl.l })\n    ];\n}\n\nfunction splitcomplement(color) {\n    var hsl = tinycolor(color).toHsl();\n    var h = hsl.h;\n    return [\n        tinycolor(color),\n        tinycolor({ h: (h + 72) % 360, s: hsl.s, l: hsl.l}),\n        tinycolor({ h: (h + 216) % 360, s: hsl.s, l: hsl.l})\n    ];\n}\n\nfunction analogous(color, results, slices) {\n    results = results || 6;\n    slices = slices || 30;\n\n    var hsl = tinycolor(color).toHsl();\n    var part = 360 / slices;\n    var ret = [tinycolor(color)];\n\n    for (hsl.h = ((hsl.h - (part * results >> 1)) + 720) % 360; --results; ) {\n        hsl.h = (hsl.h + part) % 360;\n        ret.push(tinycolor(hsl));\n    }\n    return ret;\n}\n\nfunction monochromatic(color, results) {\n    results = results || 6;\n    var hsv = tinycolor(color).toHsv();\n    var h = hsv.h, s = hsv.s, v = hsv.v;\n    var ret = [];\n    var modification = 1 / results;\n\n    while (results--) {\n        ret.push(tinycolor({ h: h, s: s, v: v}));\n        v = (v + modification) % 1;\n    }\n\n    return ret;\n}\n\n// Utility Functions\n// ---------------------\n\ntinycolor.mix = function(color1, color2, amount) {\n    amount = (amount === 0) ? 0 : (amount || 50);\n\n    var rgb1 = tinycolor(color1).toRgb();\n    var rgb2 = tinycolor(color2).toRgb();\n\n    var p = amount / 100;\n\n    var rgba = {\n        r: ((rgb2.r - rgb1.r) * p) + rgb1.r,\n        g: ((rgb2.g - rgb1.g) * p) + rgb1.g,\n        b: ((rgb2.b - rgb1.b) * p) + rgb1.b,\n        a: ((rgb2.a - rgb1.a) * p) + rgb1.a\n    };\n\n    return tinycolor(rgba);\n};\n\n\n// Readability Functions\n// ---------------------\n// <http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef (WCAG Version 2)\n\n// `contrast`\n// Analyze the 2 colors and returns the color contrast defined by (WCAG Version 2)\ntinycolor.readability = function(color1, color2) {\n    var c1 = tinycolor(color1);\n    var c2 = tinycolor(color2);\n    return (Math.max(c1.getLuminance(),c2.getLuminance())+0.05) / (Math.min(c1.getLuminance(),c2.getLuminance())+0.05);\n};\n\n// `isReadable`\n// Ensure that foreground and background color combinations meet WCAG2 guidelines.\n// The third argument is an optional Object.\n//      the 'level' property states 'AA' or 'AAA' - if missing or invalid, it defaults to 'AA';\n//      the 'size' property states 'large' or 'small' - if missing or invalid, it defaults to 'small'.\n// If the entire object is absent, isReadable defaults to {level:\"AA\",size:\"small\"}.\n\n// *Example*\n//    tinycolor.isReadable(\"#000\", \"#111\") => false\n//    tinycolor.isReadable(\"#000\", \"#111\",{level:\"AA\",size:\"large\"}) => false\ntinycolor.isReadable = function(color1, color2, wcag2) {\n    var readability = tinycolor.readability(color1, color2);\n    var wcag2Parms, out;\n\n    out = false;\n\n    wcag2Parms = validateWCAG2Parms(wcag2);\n    switch (wcag2Parms.level + wcag2Parms.size) {\n        case \"AAsmall\":\n        case \"AAAlarge\":\n            out = readability >= 4.5;\n            break;\n        case \"AAlarge\":\n            out = readability >= 3;\n            break;\n        case \"AAAsmall\":\n            out = readability >= 7;\n            break;\n    }\n    return out;\n\n};\n\n// `mostReadable`\n// Given a base color and a list of possible foreground or background\n// colors for that base, returns the most readable color.\n// Optionally returns Black or White if the most readable color is unreadable.\n// *Example*\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:false}).toHexString(); // \"#112255\"\n//    tinycolor.mostReadable(tinycolor.mostReadable(\"#123\", [\"#124\", \"#125\"],{includeFallbackColors:true}).toHexString();  // \"#ffffff\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"large\"}).toHexString(); // \"#faf3f3\"\n//    tinycolor.mostReadable(\"#a8015a\", [\"#faf3f3\"],{includeFallbackColors:true,level:\"AAA\",size:\"small\"}).toHexString(); // \"#ffffff\"\ntinycolor.mostReadable = function(baseColor, colorList, args) {\n    var bestColor = null;\n    var bestScore = 0;\n    var readability;\n    var includeFallbackColors, level, size ;\n    args = args || {};\n    includeFallbackColors = args.includeFallbackColors ;\n    level = args.level;\n    size = args.size;\n\n    for (var i= 0; i < colorList.length ; i++) {\n        readability = tinycolor.readability(baseColor, colorList[i]);\n        if (readability > bestScore) {\n            bestScore = readability;\n            bestColor = tinycolor(colorList[i]);\n        }\n    }\n\n    if (tinycolor.isReadable(baseColor, bestColor, {\"level\":level,\"size\":size}) || !includeFallbackColors) {\n        return bestColor;\n    }\n    else {\n        args.includeFallbackColors=false;\n        return tinycolor.mostReadable(baseColor,[\"#fff\", \"#000\"],args);\n    }\n};\n\n\n// Big List of Colors\n// ------------------\n// <http://www.w3.org/TR/css3-color/#svg-color>\nvar names = tinycolor.names = {\n    aliceblue: \"f0f8ff\",\n    antiquewhite: \"faebd7\",\n    aqua: \"0ff\",\n    aquamarine: \"7fffd4\",\n    azure: \"f0ffff\",\n    beige: \"f5f5dc\",\n    bisque: \"ffe4c4\",\n    black: \"000\",\n    blanchedalmond: \"ffebcd\",\n    blue: \"00f\",\n    blueviolet: \"8a2be2\",\n    brown: \"a52a2a\",\n    burlywood: \"deb887\",\n    burntsienna: \"ea7e5d\",\n    cadetblue: \"5f9ea0\",\n    chartreuse: \"7fff00\",\n    chocolate: \"d2691e\",\n    coral: \"ff7f50\",\n    cornflowerblue: \"6495ed\",\n    cornsilk: \"fff8dc\",\n    crimson: \"dc143c\",\n    cyan: \"0ff\",\n    darkblue: \"00008b\",\n    darkcyan: \"008b8b\",\n    darkgoldenrod: \"b8860b\",\n    darkgray: \"a9a9a9\",\n    darkgreen: \"006400\",\n    darkgrey: \"a9a9a9\",\n    darkkhaki: \"bdb76b\",\n    darkmagenta: \"8b008b\",\n    darkolivegreen: \"556b2f\",\n    darkorange: \"ff8c00\",\n    darkorchid: \"9932cc\",\n    darkred: \"8b0000\",\n    darksalmon: \"e9967a\",\n    darkseagreen: \"8fbc8f\",\n    darkslateblue: \"483d8b\",\n    darkslategray: \"2f4f4f\",\n    darkslategrey: \"2f4f4f\",\n    darkturquoise: \"00ced1\",\n    darkviolet: \"9400d3\",\n    deeppink: \"ff1493\",\n    deepskyblue: \"00bfff\",\n    dimgray: \"696969\",\n    dimgrey: \"696969\",\n    dodgerblue: \"1e90ff\",\n    firebrick: \"b22222\",\n    floralwhite: \"fffaf0\",\n    forestgreen: \"228b22\",\n    fuchsia: \"f0f\",\n    gainsboro: \"dcdcdc\",\n    ghostwhite: \"f8f8ff\",\n    gold: \"ffd700\",\n    goldenrod: \"daa520\",\n    gray: \"808080\",\n    green: \"008000\",\n    greenyellow: \"adff2f\",\n    grey: \"808080\",\n    honeydew: \"f0fff0\",\n    hotpink: \"ff69b4\",\n    indianred: \"cd5c5c\",\n    indigo: \"4b0082\",\n    ivory: \"fffff0\",\n    khaki: \"f0e68c\",\n    lavender: \"e6e6fa\",\n    lavenderblush: \"fff0f5\",\n    lawngreen: \"7cfc00\",\n    lemonchiffon: \"fffacd\",\n    lightblue: \"add8e6\",\n    lightcoral: \"f08080\",\n    lightcyan: \"e0ffff\",\n    lightgoldenrodyellow: \"fafad2\",\n    lightgray: \"d3d3d3\",\n    lightgreen: \"90ee90\",\n    lightgrey: \"d3d3d3\",\n    lightpink: \"ffb6c1\",\n    lightsalmon: \"ffa07a\",\n    lightseagreen: \"20b2aa\",\n    lightskyblue: \"87cefa\",\n    lightslategray: \"789\",\n    lightslategrey: \"789\",\n    lightsteelblue: \"b0c4de\",\n    lightyellow: \"ffffe0\",\n    lime: \"0f0\",\n    limegreen: \"32cd32\",\n    linen: \"faf0e6\",\n    magenta: \"f0f\",\n    maroon: \"800000\",\n    mediumaquamarine: \"66cdaa\",\n    mediumblue: \"0000cd\",\n    mediumorchid: \"ba55d3\",\n    mediumpurple: \"9370db\",\n    mediumseagreen: \"3cb371\",\n    mediumslateblue: \"7b68ee\",\n    mediumspringgreen: \"00fa9a\",\n    mediumturquoise: \"48d1cc\",\n    mediumvioletred: \"c71585\",\n    midnightblue: \"191970\",\n    mintcream: \"f5fffa\",\n    mistyrose: \"ffe4e1\",\n    moccasin: \"ffe4b5\",\n    navajowhite: \"ffdead\",\n    navy: \"000080\",\n    oldlace: \"fdf5e6\",\n    olive: \"808000\",\n    olivedrab: \"6b8e23\",\n    orange: \"ffa500\",\n    orangered: \"ff4500\",\n    orchid: \"da70d6\",\n    palegoldenrod: \"eee8aa\",\n    palegreen: \"98fb98\",\n    paleturquoise: \"afeeee\",\n    palevioletred: \"db7093\",\n    papayawhip: \"ffefd5\",\n    peachpuff: \"ffdab9\",\n    peru: \"cd853f\",\n    pink: \"ffc0cb\",\n    plum: \"dda0dd\",\n    powderblue: \"b0e0e6\",\n    purple: \"800080\",\n    rebeccapurple: \"663399\",\n    red: \"f00\",\n    rosybrown: \"bc8f8f\",\n    royalblue: \"4169e1\",\n    saddlebrown: \"8b4513\",\n    salmon: \"fa8072\",\n    sandybrown: \"f4a460\",\n    seagreen: \"2e8b57\",\n    seashell: \"fff5ee\",\n    sienna: \"a0522d\",\n    silver: \"c0c0c0\",\n    skyblue: \"87ceeb\",\n    slateblue: \"6a5acd\",\n    slategray: \"708090\",\n    slategrey: \"708090\",\n    snow: \"fffafa\",\n    springgreen: \"00ff7f\",\n    steelblue: \"4682b4\",\n    tan: \"d2b48c\",\n    teal: \"008080\",\n    thistle: \"d8bfd8\",\n    tomato: \"ff6347\",\n    turquoise: \"40e0d0\",\n    violet: \"ee82ee\",\n    wheat: \"f5deb3\",\n    white: \"fff\",\n    whitesmoke: \"f5f5f5\",\n    yellow: \"ff0\",\n    yellowgreen: \"9acd32\"\n};\n\n// Make it easy to access colors via `hexNames[hex]`\nvar hexNames = tinycolor.hexNames = flip(names);\n\n\n// Utilities\n// ---------\n\n// `{ 'name1': 'val1' }` becomes `{ 'val1': 'name1' }`\nfunction flip(o) {\n    var flipped = { };\n    for (var i in o) {\n        if (o.hasOwnProperty(i)) {\n            flipped[o[i]] = i;\n        }\n    }\n    return flipped;\n}\n\n// Return a valid alpha value [0,1] with all invalid values being set to 1\nfunction boundAlpha(a) {\n    a = parseFloat(a);\n\n    if (isNaN(a) || a < 0 || a > 1) {\n        a = 1;\n    }\n\n    return a;\n}\n\n// Take input from [0, n] and return it as [0, 1]\nfunction bound01(n, max) {\n    if (isOnePointZero(n)) { n = \"100%\"; }\n\n    var processPercent = isPercentage(n);\n    n = mathMin(max, mathMax(0, parseFloat(n)));\n\n    // Automatically convert percentage into number\n    if (processPercent) {\n        n = parseInt(n * max, 10) / 100;\n    }\n\n    // Handle floating point rounding errors\n    if ((Math.abs(n - max) < 0.000001)) {\n        return 1;\n    }\n\n    // Convert into [0, 1] range if it isn't already\n    return (n % max) / parseFloat(max);\n}\n\n// Force a number between 0 and 1\nfunction clamp01(val) {\n    return mathMin(1, mathMax(0, val));\n}\n\n// Parse a base-16 hex value into a base-10 integer\nfunction parseIntFromHex(val) {\n    return parseInt(val, 16);\n}\n\n// Need to handle 1.0 as 100%, since once it is a number, there is no difference between it and 1\n// <http://stackoverflow.com/questions/7422072/javascript-how-to-detect-number-as-a-decimal-including-1-0>\nfunction isOnePointZero(n) {\n    return typeof n == \"string\" && n.indexOf('.') != -1 && parseFloat(n) === 1;\n}\n\n// Check to see if string passed in is a percentage\nfunction isPercentage(n) {\n    return typeof n === \"string\" && n.indexOf('%') != -1;\n}\n\n// Force a hex value to have 2 characters\nfunction pad2(c) {\n    return c.length == 1 ? '0' + c : '' + c;\n}\n\n// Replace a decimal with it's percentage value\nfunction convertToPercentage(n) {\n    if (n <= 1) {\n        n = (n * 100) + \"%\";\n    }\n\n    return n;\n}\n\n// Converts a decimal to a hex value\nfunction convertDecimalToHex(d) {\n    return Math.round(parseFloat(d) * 255).toString(16);\n}\n// Converts a hex value to a decimal\nfunction convertHexToDecimal(h) {\n    return (parseIntFromHex(h) / 255);\n}\n\nvar matchers = (function() {\n\n    // <http://www.w3.org/TR/css3-values/#integers>\n    var CSS_INTEGER = \"[-\\\\+]?\\\\d+%?\";\n\n    // <http://www.w3.org/TR/css3-values/#number-value>\n    var CSS_NUMBER = \"[-\\\\+]?\\\\d*\\\\.\\\\d+%?\";\n\n    // Allow positive/negative integer/number.  Don't capture the either/or, just the entire outcome.\n    var CSS_UNIT = \"(?:\" + CSS_NUMBER + \")|(?:\" + CSS_INTEGER + \")\";\n\n    // Actual matching.\n    // Parentheses and commas are optional, but not required.\n    // Whitespace can take the place of commas or opening paren\n    var PERMISSIVE_MATCH3 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n    var PERMISSIVE_MATCH4 = \"[\\\\s|\\\\(]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")[,|\\\\s]+(\" + CSS_UNIT + \")\\\\s*\\\\)?\";\n\n    return {\n        CSS_UNIT: new RegExp(CSS_UNIT),\n        rgb: new RegExp(\"rgb\" + PERMISSIVE_MATCH3),\n        rgba: new RegExp(\"rgba\" + PERMISSIVE_MATCH4),\n        hsl: new RegExp(\"hsl\" + PERMISSIVE_MATCH3),\n        hsla: new RegExp(\"hsla\" + PERMISSIVE_MATCH4),\n        hsv: new RegExp(\"hsv\" + PERMISSIVE_MATCH3),\n        hsva: new RegExp(\"hsva\" + PERMISSIVE_MATCH4),\n        hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,\n        hex4: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,\n        hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/\n    };\n})();\n\n// `isValidCSSUnit`\n// Take in a single string / number and check to see if it looks like a CSS unit\n// (see `matchers` above for definition).\nfunction isValidCSSUnit(color) {\n    return !!matchers.CSS_UNIT.exec(color);\n}\n\n// `stringInputToObject`\n// Permissive string parsing.  Take in a number of formats, and output an object\n// based on detected format.  Returns `{ r, g, b }` or `{ h, s, l }` or `{ h, s, v}`\nfunction stringInputToObject(color) {\n\n    color = color.replace(trimLeft,'').replace(trimRight, '').toLowerCase();\n    var named = false;\n    if (names[color]) {\n        color = names[color];\n        named = true;\n    }\n    else if (color == 'transparent') {\n        return { r: 0, g: 0, b: 0, a: 0, format: \"name\" };\n    }\n\n    // Try to match string input using regular expressions.\n    // Keep most of the number bounding out of this function - don't worry about [0,1] or [0,100] or [0,360]\n    // Just return an object and let the conversion functions handle that.\n    // This way the result will be the same whether the tinycolor is initialized with string or object.\n    var match;\n    if ((match = matchers.rgb.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3] };\n    }\n    if ((match = matchers.rgba.exec(color))) {\n        return { r: match[1], g: match[2], b: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsl.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3] };\n    }\n    if ((match = matchers.hsla.exec(color))) {\n        return { h: match[1], s: match[2], l: match[3], a: match[4] };\n    }\n    if ((match = matchers.hsv.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3] };\n    }\n    if ((match = matchers.hsva.exec(color))) {\n        return { h: match[1], s: match[2], v: match[3], a: match[4] };\n    }\n    if ((match = matchers.hex8.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            a: convertHexToDecimal(match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex6.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1]),\n            g: parseIntFromHex(match[2]),\n            b: parseIntFromHex(match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n    if ((match = matchers.hex4.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            a: convertHexToDecimal(match[4] + '' + match[4]),\n            format: named ? \"name\" : \"hex8\"\n        };\n    }\n    if ((match = matchers.hex3.exec(color))) {\n        return {\n            r: parseIntFromHex(match[1] + '' + match[1]),\n            g: parseIntFromHex(match[2] + '' + match[2]),\n            b: parseIntFromHex(match[3] + '' + match[3]),\n            format: named ? \"name\" : \"hex\"\n        };\n    }\n\n    return false;\n}\n\nfunction validateWCAG2Parms(parms) {\n    // return valid WCAG2 parms for isReadable.\n    // If input parms are invalid, return {\"level\":\"AA\", \"size\":\"small\"}\n    var level, size;\n    parms = parms || {\"level\":\"AA\", \"size\":\"small\"};\n    level = (parms.level || \"AA\").toUpperCase();\n    size = (parms.size || \"small\").toLowerCase();\n    if (level !== \"AA\" && level !== \"AAA\") {\n        level = \"AA\";\n    }\n    if (size !== \"small\" && size !== \"large\") {\n        size = \"small\";\n    }\n    return {\"level\":level, \"size\":size};\n}\n\n// Node: Export function\nif (typeof module !== \"undefined\" && module.exports) {\n    module.exports = tinycolor;\n}\n// AMD/requirejs: Define the module\nelse if (typeof define === 'function' && define.amd) {\n    define(function () {return tinycolor;});\n}\n// Browser: Expose to window\nelse {\n    window.tinycolor = tinycolor;\n}\n\n})(Math);\n","var traverse = module.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) keepGoing = false;\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) keepGoing = false;\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) keepGoing = false;\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false },\n            block : function () { keepGoing = false }\n        };\n        \n        if (!alive) return state;\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node)\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        \n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (!keepGoing) return state;\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) res.push(key)\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","(function() { module.exports = this[\"wp\"][\"a11y\"]; }());","(function() { module.exports = this[\"wp\"][\"apiFetch\"]; }());","(function() { module.exports = this[\"wp\"][\"autop\"]; }());","(function() { module.exports = this[\"wp\"][\"blob\"]; }());","(function() { module.exports = this[\"wp\"][\"blocks\"]; }());","(function() { module.exports = this[\"wp\"][\"components\"]; }());","(function() { module.exports = this[\"wp\"][\"compose\"]; }());","(function() { module.exports = this[\"wp\"][\"coreData\"]; }());","(function() { module.exports = this[\"wp\"][\"data\"]; }());","(function() { module.exports = this[\"wp\"][\"date\"]; }());","(function() { module.exports = this[\"wp\"][\"deprecated\"]; }());","(function() { module.exports = this[\"wp\"][\"dom\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"hooks\"]; }());","(function() { module.exports = this[\"wp\"][\"htmlEntities\"]; }());","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());","(function() { module.exports = this[\"wp\"][\"isShallowEqual\"]; }());","(function() { module.exports = this[\"wp\"][\"keycodes\"]; }());","(function() { module.exports = this[\"wp\"][\"nux\"]; }());","(function() { module.exports = this[\"wp\"][\"richText\"]; }());","(function() { module.exports = this[\"wp\"][\"tokenList\"]; }());","(function() { module.exports = this[\"wp\"][\"url\"]; }());","(function() { module.exports = this[\"wp\"][\"viewport\"]; }());","(function() { module.exports = this[\"wp\"][\"wordcount\"]; }());","(function() { module.exports = this[\"jQuery\"]; }());","(function() { module.exports = this[\"lodash\"]; }());","(function() { module.exports = this[\"React\"]; }());","(function() { module.exports = this[\"tinymce\"]; }());"],"sourceRoot":""}
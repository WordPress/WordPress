"use strict";var wp;(wp||={}).coreData=(()=>{var Ul=Object.create;var vr=Object.defineProperty;var Dl=Object.getOwnPropertyDescriptor;var kl=Object.getOwnPropertyNames;var Ol=Object.getPrototypeOf,Ml=Object.prototype.hasOwnProperty;var L=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),st=(t,e)=>{for(var r in e)vr(t,r,{get:e[r],enumerable:!0})},Io=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kl(e))!Ml.call(t,s)&&s!==r&&vr(t,s,{get:()=>e[s],enumerable:!(n=Dl(e,s))||n.enumerable});return t};var E=(t,e,r)=>(r=t!=null?Ul(Ol(t)):{},Io(e||!t||!t.__esModule?vr(r,"default",{value:t,enumerable:!0}):r,t)),Nl=t=>Io(vr({},"__esModule",{value:!0}),t);var ne=L((Wp,Ao)=>{Ao.exports=window.wp.data});var Sr=L((qp,Uo)=>{"use strict";Uo.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e instanceof Map&&r instanceof Map){if(e.size!==r.size)return!1;for(s of e.entries())if(!r.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],r.get(s[0])))return!1;return!0}if(e instanceof Set&&r instanceof Set){if(e.size!==r.size)return!1;for(s of e.entries())if(!r.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(r)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(e[s]!==r[s])return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var i=o[s];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var Un=L((Qp,Do)=>{Do.exports=window.wp.compose});var Oo=L((Jp,ko)=>{ko.exports=window.wp.undoManager});var jo=L((Tg,Bo)=>{"use strict";function Ye(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ye=function(e){return typeof e}:Ye=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(t)}function Gl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yl(t,e,r){return e&&Po(t.prototype,e),r&&Po(t,r),t}function Vo(t,e){var r=t._map,n=t._arrayTreeMap,s=t._objectTreeMap;if(r.has(e))return r.get(e);for(var o=Object.keys(e).sort(),i=Array.isArray(e)?n:s,c=0;c<o.length;c++){var a=o[c];if(i=i.get(a),i===void 0)return;var u=e[a];if(i=i.get(u),i===void 0)return}var l=i.get("_ekm_value");if(l)return r.delete(l[0]),l[0]=e,i.set("_ekm_value",l),r.set(e,l),l}var $l=(function(){function t(e){if(Gl(this,t),this.clear(),e instanceof t){var r=[];e.forEach(function(s,o){r.push([o,s])}),e=r}if(e!=null)for(var n=0;n<e.length;n++)this.set(e[n][0],e[n][1])}return Yl(t,[{key:"set",value:function(r,n){if(r===null||Ye(r)!=="object")return this._map.set(r,n),this;for(var s=Object.keys(r).sort(),o=[r,n],i=Array.isArray(r)?this._arrayTreeMap:this._objectTreeMap,c=0;c<s.length;c++){var a=s[c];i.has(a)||i.set(a,new t),i=i.get(a);var u=r[a];i.has(u)||i.set(u,new t),i=i.get(u)}var l=i.get("_ekm_value");return l&&this._map.delete(l[0]),i.set("_ekm_value",o),this._map.set(r,o),this}},{key:"get",value:function(r){if(r===null||Ye(r)!=="object")return this._map.get(r);var n=Vo(this,r);if(n)return n[1]}},{key:"has",value:function(r){return r===null||Ye(r)!=="object"?this._map.has(r):Vo(this,r)!==void 0}},{key:"delete",value:function(r){return this.has(r)?(this.set(r,void 0),!0):!1}},{key:"forEach",value:function(r){var n=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;this._map.forEach(function(o,i){i!==null&&Ye(i)==="object"&&(o=o[1]),r.call(s,o,i,n)})}},{key:"clear",value:function(){this._map=new Map,this._arrayTreeMap=new Map,this._objectTreeMap=new Map}},{key:"size",get:function(){return this._map.size}}]),t})();Bo.exports=$l});var Ie=L((Cg,Fo)=>{Fo.exports=window.wp.url});var be=L((qg,Jo)=>{Jo.exports=window.wp.apiFetch});var jn=L((Qg,Xo)=>{Xo.exports=window.wp.blocks});var Fn=L((Jg,Zo)=>{Zo.exports=window.wp.i18n});var Fc=L((Bm,jc)=>{jc.exports=window.wp.hooks});var Hc=L((ty,zc)=>{zc.exports=window.wp.blockEditor});var Jc=L((py,Qc)=>{Qc.exports=window.wp.richText});var rt=L((Ay,ia)=>{ia.exports=window.wp.deprecated});var aa=L((Uy,ca)=>{ca.exports=window.wp.privateApis});var fo=L((sE,Ca)=>{Ca.exports=window.wp.htmlEntities});var Te=L((IE,za)=>{za.exports=window.wp.element});var qa=L((UE,Wa)=>{Wa.exports=window.ReactJSXRuntime});var ul=L((WE,ll)=>{ll.exports=window.wp.warning});var zp={};st(zp,{EntityProvider:()=>Ja,__experimentalFetchLinkSuggestions:()=>Aa,__experimentalFetchUrlData:()=>Da,__experimentalUseEntityRecord:()=>sl,__experimentalUseEntityRecords:()=>cl,__experimentalUseResourcePermissions:()=>gl,fetchBlockPatterns:()=>po,privateApis:()=>Tl,store:()=>B,useEntityBlockEditor:()=>bl,useEntityId:()=>Ut,useEntityProp:()=>Sl,useEntityRecord:()=>Eo,useEntityRecords:()=>xn,useResourcePermissions:()=>pl});var An=E(ne(),1);var qs=E(Sr(),1),na=E(Un(),1),ur=E(ne(),1),sa=E(Oo(),1);var Mo=E(Sr(),1);function Dn(t,e){if(!t)return e;let r=!1,n={};for(let s in e)(0,Mo.default)(t[s],e[s])?n[s]=t[s]:(r=!0,n[s]=e[s]);if(!r)return t;for(let s in t)n.hasOwnProperty(s)||(n[s]=t[s]);return n}function Ll(t){return typeof t=="string"?t.split(","):Array.isArray(t)?t:null}var H=Ll;var Pl=t=>e=>(r,n)=>r===void 0||t(n)?e(r,n):r,Dt=Pl;var Vl=t=>(...e)=>async({resolveSelect:r})=>{await r[t](...e)},je=Vl;var Bl=t=>e=>(r={},n)=>{let s=n[t];if(s===void 0)return r;let o=e(r[s],n);return o===r[s]?r:{...r,[s]:o}},Rr=Bl;var jl=t=>e=>(r,n)=>e(r,t(n)),kt=jl;function Fl(t){let e=new WeakMap;return r=>{let n;return e.has(r)?n=e.get(r):(n=t(r),r!==null&&typeof r=="object"&&e.set(r,n)),n}}var kn=Fl;function On(t,e){return(t.rawAttributes||[]).includes(e)}function Ce(t,e,r){if(!t||typeof t!="object")return t;let n=Array.isArray(e)?e:e.split(".");return n.reduce((s,o,i)=>(s[o]===void 0&&(Number.isInteger(n[i+1])?s[o]=[]:s[o]={}),i===n.length-1&&(s[o]=r),s[o]),t),t}function Mn(t,e,r){if(!t||typeof t!="object"||typeof e!="string"&&!Array.isArray(e))return t;let n=Array.isArray(e)?e:e.split("."),s=t;return n.forEach(o=>{s=s?.[o]}),s!==void 0?s:r}function Nn(t){return/^\s*\d+\s*$/.test(t)}var Fe=["create","read","update","delete"];function Ot(t){let e={};if(!t)return e;let r={create:"POST",read:"GET",update:"PUT",delete:"DELETE"};for(let[n,s]of Object.entries(r))e[n]=t.includes(s);return e}function Ge(t,e,r){return(typeof e=="object"?[t,e.kind,e.name,e.id]:[t,e,r]).filter(Boolean).join("/")}var Mt=Symbol("RECEIVE_INTERMEDIATE_RESULTS");function Ln(t,e,r){return{type:"RECEIVE_ITEMS",items:Array.isArray(t)?t:[t],persistedEdits:e,meta:r}}function No(t,e,r,n=!1){return{type:"REMOVE_ITEMS",itemIds:Array.isArray(r)?r:[r],kind:t,name:e,invalidateCache:n}}function Lo(t,e={},r,n){return{...Ln(t,r,n),query:e}}var $o=E(jo(),1),Ko=E(ne(),1);var Go=E(Ie(),1);function Kl(t){let e={stableKey:"",page:1,perPage:10,fields:null,include:null,context:"default"},r=Object.keys(t).sort();for(let n=0;n<r.length;n++){let s=r[n],o=t[s];switch(s){case"page":e[s]=Number(o);break;case"per_page":e.perPage=Number(o);break;case"context":e.context=o;break;default:s==="_fields"&&(e.fields=H(o)??[],o=e.fields.join()),s==="include"&&(typeof o=="number"&&(o=o.toString()),e.include=(H(o)??[]).map(Number),o=e.include.join()),e.stableKey+=(e.stableKey?"&":"")+(0,Go.addQueryArgs)("",{[s]:o}).slice(1)}}return e}var Ae=kn(Kl);var Yo=new WeakMap;function zl(t,e){let{stableKey:r,page:n,perPage:s,include:o,fields:i,context:c}=Ae(e),a;if(t.queries?.[c]?.[r]&&(a=t.queries[c][r].itemIds),!a)return null;let u=s===-1?0:(n-1)*s,l=s===-1?a.length:Math.min(u+s,a.length),d=[];for(let f=u;f<l;f++){let h=a[f];if(Array.isArray(o)&&!o.includes(h)||h===void 0)continue;if(!t.items[c]?.hasOwnProperty(h))return null;let p=t.items[c][h],g;if(Array.isArray(i)){g={};for(let m=0;m<i.length;m++){let y=i[m].split("."),w=p;y.forEach(v=>{w=w?.[v]}),Ce(g,y,w)}}else{if(!t.itemIsComplete[c]?.[h])return null;g=p}d.push(g)}return d}var Pn=(0,Ko.createSelector)((t,e={})=>{let r=Yo.get(t);if(r){let s=r.get(e);if(s!==void 0)return s}else r=new $o.default,Yo.set(t,r);let n=zl(t,e);return r.set(e,n),n});function Vn(t,e={}){let{stableKey:r,context:n}=Ae(e);return t.queries?.[n]?.[r]?.meta?.totalItems??null}function zo(t,e={}){let{stableKey:r,context:n}=Ae(e);return t.queries?.[n]?.[r]?.meta?.totalPages??null}var Zc=E(ne(),1),ea=E(Un(),1);var Ue=function(){return Ue=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ue.apply(this,arguments)};function Ho(t){return t.toLowerCase()}var Hl=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Wl=/[^A-Z0-9]+/gi;function xr(t,e){e===void 0&&(e={});for(var r=e.splitRegexp,n=r===void 0?Hl:r,s=e.stripRegexp,o=s===void 0?Wl:s,i=e.transform,c=i===void 0?Ho:i,a=e.delimiter,u=a===void 0?" ":a,l=Wo(Wo(t,n,"$1\0$2"),o,"\0"),d=0,f=l.length;l.charAt(d)==="\0";)d++;for(;l.charAt(f-1)==="\0";)f--;return l.slice(d,f).split("\0").map(c).join(u)}function Wo(t,e,r){return e instanceof RegExp?t.replace(e,r):e.reduce(function(n,s){return n.replace(s,r)},t)}function Bn(t,e){var r=t.charAt(0),n=t.substr(1).toLowerCase();return e>0&&r>="0"&&r<="9"?"_"+r+n:""+r.toUpperCase()+n}function Nt(t,e){return e===void 0&&(e={}),xr(t,Ue({delimiter:"",transform:Bn},e))}function ql(t,e){return e===0?t.toLowerCase():Bn(t,e)}function Tr(t,e){return e===void 0&&(e={}),Nt(t,Ue({transform:ql},e))}function qo(t){return t.charAt(0).toUpperCase()+t.substr(1)}function Ql(t){return qo(t.toLowerCase())}function Qo(t,e){return e===void 0&&(e={}),xr(t,Ue({delimiter:" ",transform:Ql},e))}var fn=E(be(),1),hn=E(jn(),1),U=E(Fn(),1);var P=()=>new Map,Cr=t=>{let e=P();return t.forEach((r,n)=>{e.set(n,r)}),e},te=(t,e,r)=>{let n=t.get(e);return n===void 0&&t.set(e,n=r()),n},ei=(t,e)=>{let r=[];for(let[n,s]of t)r.push(e(s,n));return r},ti=(t,e)=>{for(let[r,n]of t)if(e(n,r))return!0;return!1};var ue=()=>new Set;var Ir=t=>t[t.length-1];var ri=(t,e)=>{for(let r=0;r<e.length;r++)t.push(e[r])},de=Array.from;var ni=(t,e)=>{for(let r=0;r<t.length;r++)if(e(t[r],r,t))return!0;return!1};var $e=Array.isArray;var Lt=class{constructor(){this._observers=P()}on(e,r){return te(this._observers,e,ue).add(r),r}once(e,r){let n=(...s)=>{this.off(e,n),r(...s)};this.on(e,n)}off(e,r){let n=this._observers.get(e);n!==void 0&&(n.delete(r),n.size===0&&this._observers.delete(e))}emit(e,r){return de((this._observers.get(e)||P()).values()).forEach(n=>n(...r))}destroy(){this._observers=P()}},Ur=class{constructor(){this._observers=P()}on(e,r){te(this._observers,e,ue).add(r)}once(e,r){let n=(...s)=>{this.off(e,n),r(...s)};this.on(e,n)}off(e,r){let n=this._observers.get(e);n!==void 0&&(n.delete(r),n.size===0&&this._observers.delete(e))}emit(e,r){return de((this._observers.get(e)||P()).values()).forEach(n=>n(...r))}destroy(){this._observers=P()}};var se=Math.floor;var it=Math.abs;var Dr=(t,e)=>t<e?t:e,ve=(t,e)=>t>e?t:e,Zg=Number.isNaN;var kr=t=>t!==0?t<0:1/t<0;var Yn=Number.MAX_SAFE_INTEGER,em=Number.MIN_SAFE_INTEGER,tm=1<<31;var si=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&se(t)===t),rm=Number.isNaN,nm=Number.parseInt;var $n=String.fromCharCode,sm=String.fromCodePoint,om=$n(65535),Jl=t=>t.toLowerCase(),Xl=/^\s*/g,Zl=t=>t.replace(Xl,""),eu=/([A-Z])/g,Kn=(t,e)=>Zl(t.replace(eu,r=>`${e}${Jl(r)}`));var tu=t=>{let e=unescape(encodeURIComponent(t)),r=e.length,n=new Uint8Array(r);for(let s=0;s<r;s++)n[s]=e.codePointAt(s);return n},at=typeof TextEncoder<"u"?new TextEncoder:null,ru=t=>at.encode(t),ii=at?ru:tu;var ct=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});ct&&ct.decode(new Uint8Array).length===1&&(ct=null);var Ke=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},Vt=()=>new Ke;var nu=t=>{let e=t.cpos;for(let r=0;r<t.bufs.length;r++)e+=t.bufs[r].length;return e};var ie=t=>{let e=new Uint8Array(nu(t)),r=0;for(let n=0;n<t.bufs.length;n++){let s=t.bufs[n];e.set(s,r),r+=s.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),r),e},su=(t,e)=>{let r=t.cbuf.length;r-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(ve(r,e)*2),t.cpos=0)},V=(t,e)=>{let r=t.cbuf.length;t.cpos===r&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(r*2),t.cpos=0),t.cbuf[t.cpos++]=e};var Lr=V;var C=(t,e)=>{for(;e>127;)V(t,128|127&e),e=se(e/128);V(t,127&e)},Pr=(t,e)=>{let r=kr(e);for(r&&(e=-e),V(t,(e>63?128:0)|(r?64:0)|63&e),e=se(e/64);e>0;)V(t,(e>127?128:0)|127&e),e=se(e/128)},zn=new Uint8Array(3e4),ou=zn.length/3,iu=(t,e)=>{if(e.length<ou){let r=at.encodeInto(e,zn).written||0;C(t,r);for(let n=0;n<r;n++)V(t,zn[n])}else q(t,ii(e))},cu=(t,e)=>{let r=unescape(encodeURIComponent(e)),n=r.length;C(t,n);for(let s=0;s<n;s++)V(t,r.codePointAt(s))},ze=at&&at.encodeInto?iu:cu;var Bt=(t,e)=>{let r=t.cbuf.length,n=t.cpos,s=Dr(r-n,e.length),o=e.length-s;t.cbuf.set(e.subarray(0,s),n),t.cpos+=s,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(ve(r*2,o)),t.cbuf.set(e.subarray(s)),t.cpos=o)},q=(t,e)=>{C(t,e.byteLength),Bt(t,e)},Hn=(t,e)=>{su(t,e);let r=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,r},au=(t,e)=>Hn(t,4).setFloat32(0,e,!1),lu=(t,e)=>Hn(t,8).setFloat64(0,e,!1),uu=(t,e)=>Hn(t,8).setBigInt64(0,e,!1);var ai=new DataView(new ArrayBuffer(4)),du=t=>(ai.setFloat32(0,t),ai.getFloat32(0)===t),ut=(t,e)=>{switch(typeof e){case"string":V(t,119),ze(t,e);break;case"number":si(e)&&it(e)<=2147483647?(V(t,125),Pr(t,e)):du(e)?(V(t,124),au(t,e)):(V(t,123),lu(t,e));break;case"bigint":V(t,122),uu(t,e);break;case"object":if(e===null)V(t,126);else if($e(e)){V(t,117),C(t,e.length);for(let r=0;r<e.length;r++)ut(t,e[r])}else if(e instanceof Uint8Array)V(t,116),q(t,e);else{V(t,118);let r=Object.keys(e);C(t,r.length);for(let n=0;n<r.length;n++){let s=r[n];ze(t,s),ut(t,e[s])}}break;case"boolean":V(t,e?120:121);break;default:V(t,127)}},Pt=class extends Ke{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&C(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}};var li=t=>{t.count>0&&(Pr(t.encoder,t.count===1?t.s:-t.s),t.count>1&&C(t.encoder,t.count-2))},He=class{constructor(){this.encoder=new Ke,this.s=0,this.count=0}write(e){this.s===e?this.count++:(li(this),this.count=1,this.s=e)}toUint8Array(){return li(this),ie(this.encoder)}};var ui=t=>{if(t.count>0){let e=t.diff*2+(t.count===1?0:1);Pr(t.encoder,e),t.count>1&&C(t.encoder,t.count-2)}},dt=class{constructor(){this.encoder=new Ke,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(ui(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return ui(this),ie(this.encoder)}},Nr=class{constructor(){this.sarr=[],this.s="",this.lensE=new He}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new Ke;return this.sarr.push(this.s),this.s="",ze(e,this.sarr.join("")),Bt(e,this.lensE.toUint8Array()),ie(e)}};var fe=t=>new Error(t),ce=()=>{throw fe("Method unimplemented")},ae=()=>{throw fe("Unexpected case")};var fi=fe("Unexpected end of array"),hi=fe("Integer out of Range"),ft=class{constructor(e){this.arr=e,this.pos=0}},Je=t=>new ft(t),pi=t=>t.pos!==t.arr.length;var hu=(t,e)=>{let r=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,r},Q=t=>hu(t,S(t));var We=t=>t.arr[t.pos++];var S=t=>{let e=0,r=1,n=t.arr.length;for(;t.pos<n;){let s=t.arr[t.pos++];if(e=e+(s&127)*r,r*=128,s<128)return e;if(e>Yn)throw hi}throw fi},Br=t=>{let e=t.arr[t.pos++],r=e&63,n=64,s=(e&64)>0?-1:1;if((e&128)===0)return s*r;let o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],r=r+(e&127)*n,n*=128,e<128)return s*r;if(r>Yn)throw hi}throw fi};var pu=t=>{let e=S(t);if(e===0)return"";{let r=String.fromCodePoint(We(t));if(--e<100)for(;e--;)r+=String.fromCodePoint(We(t));else for(;e>0;){let n=e<1e4?e:1e4,s=t.arr.subarray(t.pos,t.pos+n);t.pos+=n,r+=String.fromCodePoint.apply(null,s),e-=n}return decodeURIComponent(escape(r))}},gu=t=>ct.decode(Q(t)),qe=ct?gu:pu;var Wn=(t,e)=>{let r=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,r},mu=t=>Wn(t,4).getFloat32(0,!1),yu=t=>Wn(t,8).getFloat64(0,!1),Eu=t=>Wn(t,8).getBigInt64(0,!1);var wu=[t=>{},t=>null,Br,mu,yu,Eu,t=>!1,t=>!0,qe,t=>{let e=S(t),r={};for(let n=0;n<e;n++){let s=qe(t);r[s]=ht(t)}return r},t=>{let e=S(t),r=[];for(let n=0;n<e;n++)r.push(ht(t));return r},Q],ht=t=>wu[127-We(t)](t),jt=class extends ft{constructor(e,r){super(e),this.reader=r,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),pi(this)?this.count=S(this)+1:this.count=-1),this.count--,this.s}};var Qe=class extends ft{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Br(this);let e=kr(this.s);this.count=1,e&&(this.s=-this.s,this.count=S(this)+2)}return this.count--,this.s}};var pt=class extends ft{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let e=Br(this),r=e&1;this.diff=se(e/2),this.count=1,r&&(this.count=S(this)+2)}return this.s+=this.diff,this.count--,this.s}},Vr=class{constructor(e){this.decoder=new Qe(e),this.str=qe(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),r=this.str.slice(this.spos,e);return this.spos=e,r}};var am=crypto.subtle,gi=crypto.getRandomValues.bind(crypto);var qn=()=>gi(new Uint32Array(1))[0];var bu="10000000-1000-4000-8000"+-1e11,mi=()=>bu.replace(/[018]/g,t=>(t^qn()&15>>t/4).toString(16));var jr=Date.now;var Qn=t=>new Promise(t);var dm=Promise.all.bind(Promise);var Jn=t=>t===void 0?null:t;var Xn=class{constructor(){this.map=new Map}setItem(e,r){this.map.set(e,r)}getItem(e){return this.map.get(e)}},Ei=new Xn,xu=!0;try{typeof localStorage<"u"&&localStorage&&(Ei=localStorage,xu=!1)}catch{}var wi=Ei;var bi=Object.assign,Cu=Object.keys,vi=(t,e)=>{for(let r in t)e(t[r],r)};var _i=t=>Cu(t).length;var Si=t=>{for(let e in t)return!1;return!0},Iu=(t,e)=>{for(let r in t)if(!e(t[r],r))return!1;return!0},Au=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Ri=(t,e)=>t===e||_i(t)===_i(e)&&Iu(t,(r,n)=>(r!==void 0||Au(e,n))&&e[n]===r),Uu=Object.freeze,Zn=t=>{for(let e in t){let r=t[e];(typeof r=="object"||typeof r=="function")&&Zn(t[e])}return Uu(t)};var Ft=(t,e,r=0)=>{try{for(;r<t.length;r++)t[r](...e)}finally{r<t.length&&Ft(t,e,r+1)}};var xi=t=>t;var Ti=(t,e)=>e.includes(t);var gt=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Fr=typeof window<"u"&&typeof document<"u"&&!gt,fm=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,he,ku=[],Ou=()=>{if(he===void 0)if(gt){he=P();let t=process.argv,e=null;for(let r=0;r<t.length;r++){let n=t[r];n[0]==="-"?(e!==null&&he.set(e,""),e=n):e!==null?(he.set(e,n),e=null):ku.push(n)}e!==null&&he.set(e,"")}else typeof location=="object"?(he=P(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){let[e,r]=t.split("=");he.set(`--${Kn(e,"-")}`,r),he.set(`-${Kn(e,"-")}`,r)}})):he=P();return he},es=t=>Ou().has(t);var Gt=t=>gt?Jn(process.env[t.toUpperCase().replaceAll("-","_")]):Jn(wi.getItem(t));var Ii=t=>es("--"+t)||Gt(t)!==null,hm=Ii("production"),Mu=gt&&Ti(process.env.FORCE_COLOR,["true","1","2"]),Ai=Mu||!es("--no-colors")&&!Ii("no-color")&&(!gt||process.stdout.isTTY)&&(!gt||es("--color")||Gt("COLORTERM")!==null||(Gt("TERM")||"").includes("color"));var Ui=t=>new Uint8Array(t),Nu=(t,e,r)=>new Uint8Array(t,e,r);var Lu=t=>{let e="";for(let r=0;r<t.byteLength;r++)e+=$n(t[r]);return btoa(e)},Pu=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Vu=t=>{let e=atob(t),r=Ui(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},Bu=t=>{let e=Buffer.from(t,"base64");return Nu(e.buffer,e.byteOffset,e.byteLength)},Di=Fr?Lu:Pu,ki=Fr?Vu:Bu;var Oi=t=>{let e=Ui(t.byteLength);return e.set(t),e};var rs=class{constructor(e,r){this.left=e,this.right=r}},pe=(t,e)=>new rs(t,e);var Xe=typeof document<"u"?document:{};var pm=typeof DOMParser<"u"?new DOMParser:null;var Ni=t=>ei(t,(e,r)=>`${r}:${e};`).join("");var gm=Xe.ELEMENT_NODE,mm=Xe.TEXT_NODE,ym=Xe.CDATA_SECTION_NODE,Em=Xe.COMMENT_NODE,wm=Xe.DOCUMENT_NODE,_m=Xe.DOCUMENT_TYPE_NODE,bm=Xe.DOCUMENT_FRAGMENT_NODE;var ge=Symbol;var Yt=ge(),$t=ge(),ns=ge(),ss=ge(),os=ge(),Kt=ge(),is=ge(),mt=ge(),cs=ge(),Li=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());let e=[],r=[],n=0;for(;n<t.length;n++){let s=t[n];if(s===void 0)break;if(s.constructor===String||s.constructor===Number)e.push(s);else if(s.constructor===Object)break}for(n>0&&r.push(e.join(""));n<t.length;n++){let s=t[n];s instanceof Symbol||r.push(s)}return r};var vm=jr();var $u={[Yt]:pe("font-weight","bold"),[$t]:pe("font-weight","normal"),[ns]:pe("color","blue"),[os]:pe("color","green"),[ss]:pe("color","grey"),[Kt]:pe("color","red"),[is]:pe("color","purple"),[mt]:pe("color","orange"),[cs]:pe("color","black")},Ku=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());let e=[],r=[],n=P(),s=[],o=0;for(;o<t.length;o++){let i=t[o],c=$u[i];if(c!==void 0)n.set(c.left,c.right);else{if(i===void 0)break;if(i.constructor===String||i.constructor===Number){let a=Ni(n);o>0||a.length>0?(e.push("%c"+i),r.push(a)):e.push(i)}else break}}for(o>0&&(s=r,s.unshift(e.join("")));o<t.length;o++){let i=t[o];i instanceof Symbol||s.push(i)}return s},Pi=Ai?Ku:Li,Vi=(...t)=>{console.log(...Pi(t)),Bi.forEach(e=>e.print(t))},as=(...t)=>{console.warn(...Pi(t)),t.unshift(mt),Bi.forEach(e=>e.print(t))};var Bi=ue();var ji=t=>({[Symbol.iterator](){return this},next:t}),Fi=(t,e)=>ji(()=>{let r;do r=t.next();while(!r.done&&!e(r.value));return r}),Gr=(t,e)=>ji(()=>{let{done:r,value:n}=t.next();return{done:r,value:r?void 0:e(n)}});var Ht=class{constructor(e,r){this.clock=e,this.len=r}},Ne=class{constructor(){this.clients=new Map}},Et=(t,e,r)=>e.clients.forEach((n,s)=>{let o=t.doc.store.clients.get(s);if(o!=null){let i=o[o.length-1],c=i.id.clock+i.length;for(let a=0,u=n[a];a<n.length&&u.clock<c;u=n[++a])lc(t,o,u.clock,u.len,r)}}),Qu=(t,e)=>{let r=0,n=t.length-1;for(;r<=n;){let s=se((r+n)/2),o=t[s],i=o.clock;if(i<=e){if(e<i+o.len)return s;r=s+1}else n=s-1}return null},ir=(t,e)=>{let r=t.clients.get(e.client);return r!==void 0&&Qu(r,e.clock)!==null},Us=t=>{t.clients.forEach(e=>{e.sort((s,o)=>s.clock-o.clock);let r,n;for(r=1,n=1;r<e.length;r++){let s=e[n-1],o=e[r];s.clock+s.len>=o.clock?s.len=ve(s.len,o.clock+o.len-s.clock):(n<r&&(e[n]=o),n++)}e.length=n})},us=t=>{let e=new Ne;for(let r=0;r<t.length;r++)t[r].clients.forEach((n,s)=>{if(!e.clients.has(s)){let o=n.slice();for(let i=r+1;i<t.length;i++)ri(o,t[i].clients.get(s)||[]);e.clients.set(s,o)}});return Us(e),e},Wt=(t,e,r,n)=>{te(t.clients,e,()=>[]).push(new Ht(r,n))},sc=()=>new Ne,Ju=t=>{let e=sc();return t.clients.forEach((r,n)=>{let s=[];for(let o=0;o<r.length;o++){let i=r[o];if(i.deleted){let c=i.id.clock,a=i.length;if(o+1<r.length)for(let u=r[o+1];o+1<r.length&&u.deleted;u=r[++o+1])a+=u.length;s.push(new Ht(c,a))}}s.length>0&&e.clients.set(n,s)}),e},Rt=(t,e)=>{C(t.restEncoder,e.clients.size),de(e.clients.entries()).sort((r,n)=>n[0]-r[0]).forEach(([r,n])=>{t.resetDsCurVal(),C(t.restEncoder,r);let s=n.length;C(t.restEncoder,s);for(let o=0;o<s;o++){let i=n[o];t.writeDsClock(i.clock),t.writeDsLen(i.len)}})},Ds=t=>{let e=new Ne,r=S(t.restDecoder);for(let n=0;n<r;n++){t.resetDsCurVal();let s=S(t.restDecoder),o=S(t.restDecoder);if(o>0){let i=te(e.clients,s,()=>[]);for(let c=0;c<o;c++)i.push(new Ht(t.readDsClock(),t.readDsLen()))}}return e},$i=(t,e,r)=>{let n=new Ne,s=S(t.restDecoder);for(let o=0;o<s;o++){t.resetDsCurVal();let i=S(t.restDecoder),c=S(t.restDecoder),a=r.clients.get(i)||[],u=M(r,i);for(let l=0;l<c;l++){let d=t.readDsClock(),f=d+t.readDsLen();if(d<u){u<f&&Wt(n,i,u,f-u);let h=me(a,d),p=a[h];for(!p.deleted&&p.id.clock<d&&(a.splice(h+1,0,nn(e,p,d-p.id.clock)),h++);h<a.length&&(p=a[h++],p.id.clock<f);)p.deleted||(f<p.id.clock+p.length&&a.splice(h,0,nn(e,p,f-p.id.clock)),p.delete(e))}else Wt(n,i,d,f-d)}}if(n.clients.size>0){let o=new Se;return C(o.restEncoder,0),Rt(o,n),o.toUint8Array()}return null};var oc=qn,Le=class t extends Lt{constructor({guid:e=mi(),collectionid:r=null,gc:n=!0,gcFilter:s=()=>!0,meta:o=null,autoLoad:i=!1,shouldLoad:c=!0}={}){super(),this.gc=n,this.gcFilter=s,this.clientID=oc(),this.guid=e,this.collectionid=r,this.share=new Map,this.store=new Jr,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=c,this.autoLoad=i,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Qn(u=>{this.on("load",()=>{this.isLoaded=!0,u(this)})});let a=()=>Qn(u=>{let l=d=>{(d===void 0||d===!0)&&(this.off("sync",l),u())};this.on("sync",l)});this.on("sync",u=>{u===!1&&this.isSynced&&(this.whenSynced=a()),this.isSynced=u===void 0||u===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=a()}load(){let e=this._item;e!==null&&!this.shouldLoad&&I(e.parent.doc,r=>{r.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(de(this.subdocs).map(e=>e.guid))}transact(e,r=null){return I(this,e,r)}get(e,r=O){let n=te(this.share,e,()=>{let o=new r;return o._integrate(this,null),o}),s=n.constructor;if(r!==O&&s!==r)if(s===O){let o=new r;o._map=n._map,n._map.forEach(i=>{for(;i!==null;i=i.left)i.parent=o}),o._start=n._start;for(let i=o._start;i!==null;i=i.right)i.parent=o;return o._length=n._length,this.share.set(e,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return n}getArray(e=""){return this.get(e,tn)}getText(e=""){return this.get(e,tr)}getMap(e=""){return this.get(e,Zt)}getXmlElement(e=""){return this.get(e,rr)}getXmlFragment(e=""){return this.get(e,vt)}toJSON(){let e={};return this.share.forEach((r,n)=>{e[n]=r.toJSON()}),e}destroy(){this.isDestroyed=!0,de(this.subdocs).forEach(r=>r.destroy());let e=this._item;if(e!==null){this._item=null;let r=e.content;r.doc=new t({guid:this.guid,...r.opts,shouldLoad:!1}),r.doc._item=e,I(e.parent.doc,n=>{let s=r.doc;e.deleted||n.subdocsAdded.add(s),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}},qr=class{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return S(this.restDecoder)}readDsLen(){return S(this.restDecoder)}},ds=class extends qr{readLeftID(){return R(S(this.restDecoder),S(this.restDecoder))}readRightID(){return R(S(this.restDecoder),S(this.restDecoder))}readClient(){return S(this.restDecoder)}readInfo(){return We(this.restDecoder)}readString(){return qe(this.restDecoder)}readParentInfo(){return S(this.restDecoder)===1}readTypeRef(){return S(this.restDecoder)}readLen(){return S(this.restDecoder)}readAny(){return ht(this.restDecoder)}readBuf(){return Oi(Q(this.restDecoder))}readJSON(){return JSON.parse(qe(this.restDecoder))}readKey(){return qe(this.restDecoder)}},fs=class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=S(this.restDecoder),this.dsCurrVal}readDsLen(){let e=S(this.restDecoder)+1;return this.dsCurrVal+=e,e}},Pe=class extends fs{constructor(e){super(e),this.keys=[],S(e),this.keyClockDecoder=new pt(Q(e)),this.clientDecoder=new Qe(Q(e)),this.leftClockDecoder=new pt(Q(e)),this.rightClockDecoder=new pt(Q(e)),this.infoDecoder=new jt(Q(e),We),this.stringDecoder=new Vr(Q(e)),this.parentInfoDecoder=new jt(Q(e),We),this.typeRefDecoder=new Qe(Q(e)),this.lenDecoder=new Qe(Q(e))}readLeftID(){return new Me(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Me(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return ht(this.restDecoder)}readBuf(){return Q(this.restDecoder)}readJSON(){return ht(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let r=this.stringDecoder.read();return this.keys.push(r),r}}},hs=class{constructor(){this.restEncoder=Vt()}toUint8Array(){return ie(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){C(this.restEncoder,e)}writeDsLen(e){C(this.restEncoder,e)}},wt=class extends hs{writeLeftID(e){C(this.restEncoder,e.client),C(this.restEncoder,e.clock)}writeRightID(e){C(this.restEncoder,e.client),C(this.restEncoder,e.clock)}writeClient(e){C(this.restEncoder,e)}writeInfo(e){Lr(this.restEncoder,e)}writeString(e){ze(this.restEncoder,e)}writeParentInfo(e){C(this.restEncoder,e?1:0)}writeTypeRef(e){C(this.restEncoder,e)}writeLen(e){C(this.restEncoder,e)}writeAny(e){ut(this.restEncoder,e)}writeBuf(e){q(this.restEncoder,e)}writeJSON(e){ze(this.restEncoder,JSON.stringify(e))}writeKey(e){ze(this.restEncoder,e)}},ps=class{constructor(){this.restEncoder=Vt(),this.dsCurrVal=0}toUint8Array(){return ie(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let r=e-this.dsCurrVal;this.dsCurrVal=e,C(this.restEncoder,r)}writeDsLen(e){e===0&&ae(),C(this.restEncoder,e-1),this.dsCurrVal+=e}},Se=class extends ps{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new dt,this.clientEncoder=new He,this.leftClockEncoder=new dt,this.rightClockEncoder=new dt,this.infoEncoder=new Pt(Lr),this.stringEncoder=new Nr,this.parentInfoEncoder=new Pt(Lr),this.typeRefEncoder=new He,this.lenEncoder=new He}toUint8Array(){let e=Vt();return C(e,0),q(e,this.keyClockEncoder.toUint8Array()),q(e,this.clientEncoder.toUint8Array()),q(e,this.leftClockEncoder.toUint8Array()),q(e,this.rightClockEncoder.toUint8Array()),q(e,ie(this.infoEncoder)),q(e,this.stringEncoder.toUint8Array()),q(e,ie(this.parentInfoEncoder)),q(e,this.typeRefEncoder.toUint8Array()),q(e,this.lenEncoder.toUint8Array()),Bt(e,ie(this.restEncoder)),ie(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){ut(this.restEncoder,e)}writeBuf(e){q(this.restEncoder,e)}writeJSON(e){ut(this.restEncoder,e)}writeKey(e){let r=this.keyMap.get(e);r===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(r)}},Xu=(t,e,r,n)=>{n=ve(n,e[0].id.clock);let s=me(e,n);C(t.restEncoder,e.length-s),t.writeClient(r),C(t.restEncoder,n);let o=e[s];o.write(t,n-o.id.clock);for(let i=s+1;i<e.length;i++)e[i].write(t,0)},ks=(t,e,r)=>{let n=new Map;r.forEach((s,o)=>{M(e,o)>s&&n.set(o,s)}),Os(e).forEach((s,o)=>{r.has(o)||n.set(o,0)}),C(t.restEncoder,n.size),de(n.entries()).sort((s,o)=>o[0]-s[0]).forEach(([s,o])=>{Xu(t,e.clients.get(s),s,o)})},Zu=(t,e)=>{let r=P(),n=S(t.restDecoder);for(let s=0;s<n;s++){let o=S(t.restDecoder),i=new Array(o),c=t.readClient(),a=S(t.restDecoder);r.set(c,{i:0,refs:i});for(let u=0;u<o;u++){let l=t.readInfo();switch(31&l){case 0:{let d=t.readLen();i[u]=new X(R(c,a),d),a+=d;break}case 10:{let d=S(t.restDecoder);i[u]=new Z(R(c,a),d),a+=d;break}default:{let d=(l&192)===0,f=new A(R(c,a),null,(l&128)===128?t.readLeftID():null,null,(l&64)===64?t.readRightID():null,d?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,d&&(l&32)===32?t.readString():null,Ac(t,l));i[u]=f,a+=f.length}}}}return r},ed=(t,e,r)=>{let n=[],s=de(r.keys()).sort((h,p)=>h-p);if(s.length===0)return null;let o=()=>{if(s.length===0)return null;let h=r.get(s[s.length-1]);for(;h.refs.length===h.i;)if(s.pop(),s.length>0)h=r.get(s[s.length-1]);else return null;return h},i=o();if(i===null)return null;let c=new Jr,a=new Map,u=(h,p)=>{let g=a.get(h);(g==null||g>p)&&a.set(h,p)},l=i.refs[i.i++],d=new Map,f=()=>{for(let h of n){let p=h.id.client,g=r.get(p);g?(g.i--,c.clients.set(p,g.refs.slice(g.i)),r.delete(p),g.i=0,g.refs=[]):c.clients.set(p,[h]),s=s.filter(m=>m!==p)}n.length=0};for(;;){if(l.constructor!==Z){let p=te(d,l.id.client,()=>M(e,l.id.client))-l.id.clock;if(p<0)n.push(l),u(l.id.client,l.id.clock-1),f();else{let g=l.getMissing(t,e);if(g!==null){n.push(l);let m=r.get(g)||{refs:[],i:0};if(m.refs.length===m.i)u(g,M(e,g)),f();else{l=m.refs[m.i++];continue}}else(p===0||p<l.length)&&(l.integrate(t,p),d.set(l.id.client,l.id.clock+l.length))}}if(n.length>0)l=n.pop();else if(i!==null&&i.i<i.refs.length)l=i.refs[i.i++];else{if(i=o(),i===null)break;l=i.refs[i.i++]}}if(c.clients.size>0){let h=new Se;return ks(h,c,new Map),C(h.restEncoder,0),{missing:a,update:h.toUint8Array()}}return null},td=(t,e)=>ks(t,e.doc.store,e.beforeState),rd=(t,e,r,n=new Pe(t))=>I(e,s=>{s.local=!1;let o=!1,i=s.doc,c=i.store,a=Zu(n,i),u=ed(s,c,a),l=c.pendingStructs;if(l){for(let[f,h]of l.missing)if(h<M(c,f)){o=!0;break}if(u){for(let[f,h]of u.missing){let p=l.missing.get(f);(p==null||p>h)&&l.missing.set(f,h)}l.update=Xr([l.update,u.update])}}else c.pendingStructs=u;let d=$i(n,s,c);if(c.pendingDs){let f=new Pe(Je(c.pendingDs));S(f.restDecoder);let h=$i(f,s,c);d&&h?c.pendingDs=Xr([d,h]):c.pendingDs=d||h}else c.pendingDs=d;if(o){let f=c.pendingStructs.update;c.pendingStructs=null,cr(s.doc,f)}},r,!1);var cr=(t,e,r,n=Pe)=>{let s=Je(e);rd(s,t,r,new n(s))};var nd=(t,e,r=new Map)=>{ks(t,e.store,r),Rt(t,Ju(e.store))},sn=(t,e=new Uint8Array([0]),r=new Se)=>{let n=ic(e);nd(r,t,n);let s=[r.toUint8Array()];if(t.store.pendingDs&&s.push(t.store.pendingDs),t.store.pendingStructs&&s.push(pd(t.store.pendingStructs.update,e)),s.length>1){if(r.constructor===wt)return fd(s.map((o,i)=>i===0?o:md(o)));if(r.constructor===Se)return Xr(s)}return s[0]};var sd=t=>{let e=new Map,r=S(t.restDecoder);for(let n=0;n<r;n++){let s=S(t.restDecoder),o=S(t.restDecoder);e.set(s,o)}return e},ic=t=>sd(new qr(Je(t)));var gs=class{constructor(){this.l=[]}},Ki=()=>new gs,zi=(t,e)=>t.l.push(e),Hi=(t,e)=>{let r=t.l,n=r.length;t.l=r.filter(s=>e!==s),n===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},cc=(t,e,r)=>Ft(t.l,[e,r]),Me=class{constructor(e,r){this.client=e,this.clock=r}},Yr=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,R=(t,e)=>new Me(t,e);var od=t=>{for(let[e,r]of t.doc.share.entries())if(r===t)return e;throw ae()},Qr=(t,e)=>{for(;e!==null;){if(e.parent===t)return!0;e=e.parent._item}return!1};var ms=class{constructor(e,r){this.ds=e,this.sv=r}};var id=(t,e)=>new ms(t,e),km=id(sc(),new Map);var yt=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!ir(e.ds,t.id),ys=(t,e)=>{let r=te(t.meta,ys,ue),n=t.doc.store;r.has(e)||(e.sv.forEach((s,o)=>{s<M(n,o)&&J(t,R(o,s))}),Et(t,e.ds,s=>{}),r.add(e))};var Jr=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},Os=t=>{let e=new Map;return t.clients.forEach((r,n)=>{let s=r[r.length-1];e.set(n,s.id.clock+s.length)}),e},M=(t,e)=>{let r=t.clients.get(e);if(r===void 0)return 0;let n=r[r.length-1];return n.id.clock+n.length},ac=(t,e)=>{let r=t.clients.get(e.id.client);if(r===void 0)r=[],t.clients.set(e.id.client,r);else{let n=r[r.length-1];if(n.id.clock+n.length!==e.id.clock)throw ae()}r.push(e)},me=(t,e)=>{let r=0,n=t.length-1,s=t[n],o=s.id.clock;if(o===e)return n;let i=se(e/(o+s.length-1)*n);for(;r<=n;){if(s=t[i],o=s.id.clock,o<=e){if(e<o+s.length)return i;r=i+1}else n=i-1;i=se((r+n)/2)}throw ae()},cd=(t,e)=>{let r=t.clients.get(e.client);return r[me(r,e.clock)]},zr=cd,Es=(t,e,r)=>{let n=me(e,r),s=e[n];return s.id.clock<r&&s instanceof A?(e.splice(n+1,0,nn(t,s,r-s.id.clock)),n+1):n},J=(t,e)=>{let r=t.doc.store.clients.get(e.client);return r[Es(t,r,e.clock)]},Wi=(t,e,r)=>{let n=e.clients.get(r.client),s=me(n,r.clock),o=n[s];return r.clock!==o.id.clock+o.length-1&&o.constructor!==X&&n.splice(s+1,0,nn(t,o,r.clock-o.id.clock+1)),o},ad=(t,e,r)=>{let n=t.clients.get(e.id.client);n[me(n,e.id.clock)]=r},lc=(t,e,r,n,s)=>{if(n===0)return;let o=r+n,i=Es(t,e,r),c;do c=e[i++],o<c.id.clock+c.length&&Es(t,e,o),s(c);while(i<e.length&&e[i].id.clock<o)},ws=class{constructor(e,r,n){this.doc=e,this.deleteSet=new Ne,this.beforeState=Os(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=r,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},qi=(t,e)=>e.deleteSet.clients.size===0&&!ti(e.afterState,(r,n)=>e.beforeState.get(n)!==r)?!1:(Us(e.deleteSet),td(t,e),Rt(t,e.deleteSet),!0),Qi=(t,e,r)=>{let n=e._item;(n===null||n.id.clock<(t.beforeState.get(n.id.client)||0)&&!n.deleted)&&te(t.changed,e,ue).add(r)},Hr=(t,e)=>{let r=t[e],n=t[e-1],s=e;for(;s>0;r=n,n=t[--s-1]){if(n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)){r instanceof A&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n);continue}break}let o=e-s;return o&&t.splice(e+1-o,o),o},ld=(t,e,r)=>{for(let[n,s]of t.clients.entries()){let o=e.clients.get(n);for(let i=s.length-1;i>=0;i--){let c=s[i],a=c.clock+c.len;for(let u=me(o,c.clock),l=o[u];u<o.length&&l.id.clock<a;l=o[++u]){let d=o[u];if(c.clock+c.len<=d.id.clock)break;d instanceof A&&d.deleted&&!d.keep&&r(d)&&d.gc(e,!1)}}}},ud=(t,e)=>{t.clients.forEach((r,n)=>{let s=e.clients.get(n);for(let o=r.length-1;o>=0;o--){let i=r[o],c=Dr(s.length-1,1+me(s,i.clock+i.len-1));for(let a=c,u=s[a];a>0&&u.id.clock>=i.clock;u=s[a])a-=1+Hr(s,a)}})};var uc=(t,e)=>{if(e<t.length){let r=t[e],n=r.doc,s=n.store,o=r.deleteSet,i=r._mergeStructs;try{Us(o),r.afterState=Os(r.doc.store),n.emit("beforeObserverCalls",[r,n]);let c=[];r.changed.forEach((a,u)=>c.push(()=>{(u._item===null||!u._item.deleted)&&u._callObserver(r,a)})),c.push(()=>{r.changedParentTypes.forEach((a,u)=>{u._dEH.l.length>0&&(u._item===null||!u._item.deleted)&&(a=a.filter(l=>l.target._item===null||!l.target._item.deleted),a.forEach(l=>{l.currentTarget=u,l._path=null}),a.sort((l,d)=>l.path.length-d.path.length),c.push(()=>{cc(u._dEH,a,r)}))}),c.push(()=>n.emit("afterTransaction",[r,n])),c.push(()=>{r._needFormattingCleanup&&Cd(r)})}),Ft(c,[])}finally{n.gc&&ld(o,s,n.gcFilter),ud(o,s),r.afterState.forEach((l,d)=>{let f=r.beforeState.get(d)||0;if(f!==l){let h=s.clients.get(d),p=ve(me(h,f),1);for(let g=h.length-1;g>=p;)g-=1+Hr(h,g)}});for(let l=i.length-1;l>=0;l--){let{client:d,clock:f}=i[l].id,h=s.clients.get(d),p=me(h,f);p+1<h.length&&Hr(h,p+1)>1||p>0&&Hr(h,p)}if(!r.local&&r.afterState.get(n.clientID)!==r.beforeState.get(n.clientID)&&(Vi(mt,Yt,"[yjs] ",$t,Kt,"Changed the client-id because another client seems to be using it."),n.clientID=oc()),n.emit("afterTransactionCleanup",[r,n]),n._observers.has("update")){let l=new wt;qi(l,r)&&n.emit("update",[l.toUint8Array(),r.origin,n,r])}if(n._observers.has("updateV2")){let l=new Se;qi(l,r)&&n.emit("updateV2",[l.toUint8Array(),r.origin,n,r])}let{subdocsAdded:c,subdocsLoaded:a,subdocsRemoved:u}=r;(c.size>0||u.size>0||a.size>0)&&(c.forEach(l=>{l.clientID=n.clientID,l.collectionid==null&&(l.collectionid=n.collectionid),n.subdocs.add(l)}),u.forEach(l=>n.subdocs.delete(l)),n.emit("subdocs",[{loaded:a,added:c,removed:u},n,r]),u.forEach(l=>l.destroy())),t.length<=e+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,t])):uc(t,e+1)}}},I=(t,e,r=null,n=!0)=>{let s=t._transactionCleanups,o=!1,i=null;t._transaction===null&&(o=!0,t._transaction=new ws(t,r,n),s.push(t._transaction),s.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{i=e(t._transaction)}finally{if(o){let c=t._transaction===s[0];t._transaction=null,c&&uc(s,0)}}return i},_s=class{constructor(e,r){this.insertions=r,this.deletions=e,this.meta=new Map}},Ji=(t,e,r)=>{Et(t,r.deletions,n=>{n instanceof A&&e.scope.some(s=>s===t.doc||Qr(s,n))&&Vs(n,!1)})},Xi=(t,e,r)=>{let n=null,s=t.doc,o=t.scope;I(s,c=>{for(;e.length>0&&t.currStackItem===null;){let a=s.store,u=e.pop(),l=new Set,d=[],f=!1;Et(c,u.insertions,h=>{if(h instanceof A){if(h.redone!==null){let{item:p,diff:g}=Xd(a,h.id);g>0&&(p=J(c,R(p.id.client,p.id.clock+g))),h=p}!h.deleted&&o.some(p=>p===c.doc||Qr(p,h))&&d.push(h)}}),Et(c,u.deletions,h=>{h instanceof A&&o.some(p=>p===c.doc||Qr(p,h))&&!ir(u.insertions,h.id)&&l.add(h)}),l.forEach(h=>{f=Ic(c,h,l,u.insertions,t.ignoreRemoteMapChanges,t)!==null||f});for(let h=d.length-1;h>=0;h--){let p=d[h];t.deleteFilter(p)&&(p.delete(c),f=!0)}t.currStackItem=f?u:null}c.changed.forEach((a,u)=>{a.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),n=c},t);let i=t.currStackItem;if(i!=null){let c=n.changedParentTypes;t.emit("stack-item-popped",[{stackItem:i,type:r,changedParentTypes:c,origin:t},t]),t.currStackItem=null}return i},_t=class extends Lt{constructor(e,{captureTimeout:r=500,captureTransaction:n=a=>!0,deleteFilter:s=()=>!0,trackedOrigins:o=new Set([null]),ignoreRemoteMapChanges:i=!1,doc:c=$e(e)?e[0].doc:e instanceof Le?e:e.doc}={}){super(),this.scope=[],this.doc=c,this.addToScope(e),this.deleteFilter=s,o.add(this),this.trackedOrigins=o,this.captureTransaction=n,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=i,this.captureTimeout=r,this.afterTransactionHandler=a=>{if(!this.captureTransaction(a)||!this.scope.some(m=>a.changedParentTypes.has(m)||m===this.doc)||!this.trackedOrigins.has(a.origin)&&(!a.origin||!this.trackedOrigins.has(a.origin.constructor)))return;let u=this.undoing,l=this.redoing,d=u?this.redoStack:this.undoStack;u?this.stopCapturing():l||this.clear(!1,!0);let f=new Ne;a.afterState.forEach((m,y)=>{let w=a.beforeState.get(y)||0,v=m-w;v>0&&Wt(f,y,w,v)});let h=jr(),p=!1;if(this.lastChange>0&&h-this.lastChange<this.captureTimeout&&d.length>0&&!u&&!l){let m=d[d.length-1];m.deletions=us([m.deletions,a.deleteSet]),m.insertions=us([m.insertions,f])}else d.push(new _s(a.deleteSet,f)),p=!0;!u&&!l&&(this.lastChange=h),Et(a,a.deleteSet,m=>{m instanceof A&&this.scope.some(y=>y===a.doc||Qr(y,m))&&Vs(m,!0)});let g=[{stackItem:d[d.length-1],origin:a.origin,type:u?"redo":"undo",changedParentTypes:a.changedParentTypes},this];p?this.emit("stack-item-added",g):this.emit("stack-item-updated",g)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(e){let r=new Set(this.scope);e=$e(e)?e:[e],e.forEach(n=>{r.has(n)||(r.add(n),(n instanceof O?n.doc!==this.doc:n!==this.doc)&&as("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(e){this.trackedOrigins.add(e)}removeTrackedOrigin(e){this.trackedOrigins.delete(e)}clear(e=!0,r=!0){(e&&this.canUndo()||r&&this.canRedo())&&this.doc.transact(n=>{e&&(this.undoStack.forEach(s=>Ji(n,this,s)),this.undoStack=[]),r&&(this.redoStack.forEach(s=>Ji(n,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:e,redoStackCleared:r}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let e;try{e=Xi(this,this.undoStack,"undo")}finally{this.undoing=!1}return e}redo(){this.redoing=!0;let e;try{e=Xi(this,this.redoStack,"redo")}finally{this.redoing=!1}return e}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}};function*dd(t){let e=S(t.restDecoder);for(let r=0;r<e;r++){let n=S(t.restDecoder),s=t.readClient(),o=S(t.restDecoder);for(let i=0;i<n;i++){let c=t.readInfo();if(c===10){let a=S(t.restDecoder);yield new Z(R(s,o),a),o+=a}else if((31&c)!==0){let a=(c&192)===0,u=new A(R(s,o),null,(c&128)===128?t.readLeftID():null,null,(c&64)===64?t.readRightID():null,a?t.readParentInfo()?t.readString():t.readLeftID():null,a&&(c&32)===32?t.readString():null,Ac(t,c));yield u,o+=u.length}else{let a=t.readLen();yield new X(R(s,o),a),o+=a}}}}var qt=class{constructor(e,r){this.gen=dd(e),this.curr=null,this.done=!1,this.filterSkips=r,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Z);return this.curr}};var Qt=class{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}},fd=t=>Xr(t,ds,wt);var hd=(t,e)=>{if(t.constructor===X){let{client:r,clock:n}=t.id;return new X(R(r,n+e),t.length-e)}else if(t.constructor===Z){let{client:r,clock:n}=t.id;return new Z(R(r,n+e),t.length-e)}else{let r=t,{client:n,clock:s}=r.id;return new A(R(n,s+e),null,R(n,s+e-1),null,r.rightOrigin,r.parent,r.parentSub,r.content.splice(e))}},Xr=(t,e=Pe,r=Se)=>{if(t.length===1)return t[0];let n=t.map(l=>new e(Je(l))),s=n.map(l=>new qt(l,!0)),o=null,i=new r,c=new Qt(i);for(;s=s.filter(f=>f.curr!==null),s.sort((f,h)=>{if(f.curr.id.client===h.curr.id.client){let p=f.curr.id.clock-h.curr.id.clock;return p===0?f.curr.constructor===h.curr.constructor?0:f.curr.constructor===Z?1:-1:p}else return h.curr.id.client-f.curr.id.client}),s.length!==0;){let l=s[0],d=l.curr.id.client;if(o!==null){let f=l.curr,h=!1;for(;f!==null&&f.id.clock+f.length<=o.struct.id.clock+o.struct.length&&f.id.client>=o.struct.id.client;)f=l.next(),h=!0;if(f===null||f.id.client!==d||h&&f.id.clock>o.struct.id.clock+o.struct.length)continue;if(d!==o.struct.id.client)ke(c,o.struct,o.offset),o={struct:f,offset:0},l.next();else if(o.struct.id.clock+o.struct.length<f.id.clock)if(o.struct.constructor===Z)o.struct.length=f.id.clock+f.length-o.struct.id.clock;else{ke(c,o.struct,o.offset);let p=f.id.clock-o.struct.id.clock-o.struct.length;o={struct:new Z(R(d,o.struct.id.clock+o.struct.length),p),offset:0}}else{let p=o.struct.id.clock+o.struct.length-f.id.clock;p>0&&(o.struct.constructor===Z?o.struct.length-=p:f=hd(f,p)),o.struct.mergeWith(f)||(ke(c,o.struct,o.offset),o={struct:f,offset:0},l.next())}}else o={struct:l.curr,offset:0},l.next();for(let f=l.curr;f!==null&&f.id.client===d&&f.id.clock===o.struct.id.clock+o.struct.length&&f.constructor!==Z;f=l.next())ke(c,o.struct,o.offset),o={struct:f,offset:0}}o!==null&&(ke(c,o.struct,o.offset),o=null),Ms(c);let a=n.map(l=>Ds(l)),u=us(a);return Rt(i,u),i.toUint8Array()},pd=(t,e,r=Pe,n=Se)=>{let s=ic(e),o=new n,i=new Qt(o),c=new r(Je(t)),a=new qt(c,!1);for(;a.curr;){let l=a.curr,d=l.id.client,f=s.get(d)||0;if(a.curr.constructor===Z){a.next();continue}if(l.id.clock+l.length>f)for(ke(i,l,ve(f-l.id.clock,0)),a.next();a.curr&&a.curr.id.client===d;)ke(i,a.curr,0),a.next();else for(;a.curr&&a.curr.id.client===d&&a.curr.id.clock+a.curr.length<=f;)a.next()}Ms(i);let u=Ds(c);return Rt(o,u),o.toUint8Array()};var dc=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:ie(t.encoder.restEncoder)}),t.encoder.restEncoder=Vt(),t.written=0)},ke=(t,e,r)=>{t.written>0&&t.currClient!==e.id.client&&dc(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),C(t.encoder.restEncoder,e.id.clock+r)),e.write(t.encoder,r),t.written++},Ms=t=>{dc(t);let e=t.encoder.restEncoder;C(e,t.clientStructs.length);for(let r=0;r<t.clientStructs.length;r++){let n=t.clientStructs[r];C(e,n.written),Bt(e,n.restEncoder)}},gd=(t,e,r,n)=>{let s=new r(Je(t)),o=new qt(s,!1),i=new n,c=new Qt(i);for(let u=o.curr;u!==null;u=o.next())ke(c,e(u),0);Ms(c);let a=Ds(s);return Rt(i,a),i.toUint8Array()};var md=t=>gd(t,xi,Pe,wt),Zi="You must not compute changes after the event-handler fired.",bt=class{constructor(e,r){this.target=e,this.currentTarget=e,this.transaction=r,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=yd(this.currentTarget,this.target))}deletes(e){return ir(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw fe(Zi);let e=new Map,r=this.target;this.transaction.changed.get(r).forEach(s=>{if(s!==null){let o=r._map.get(s),i,c;if(this.adds(o)){let a=o.left;for(;a!==null&&this.adds(a);)a=a.left;if(this.deletes(o))if(a!==null&&this.deletes(a))i="delete",c=Ir(a.content.getContent());else return;else a!==null&&this.deletes(a)?(i="update",c=Ir(a.content.getContent())):(i="add",c=void 0)}else if(this.deletes(o))i="delete",c=Ir(o.content.getContent());else return;e.set(s,{action:i,oldValue:c})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw fe(Zi);let r=this.target,n=ue(),s=ue(),o=[];if(e={added:n,deleted:s,delta:o,keys:this.keys},this.transaction.changed.get(r).has(null)){let c=null,a=()=>{c&&o.push(c)};for(let u=r._start;u!==null;u=u.right)u.deleted?this.deletes(u)&&!this.adds(u)&&((c===null||c.delete===void 0)&&(a(),c={delete:0}),c.delete+=u.length,s.add(u)):this.adds(u)?((c===null||c.insert===void 0)&&(a(),c={insert:[]}),c.insert=c.insert.concat(u.content.getContent()),n.add(u)):((c===null||c.retain===void 0)&&(a(),c={retain:0}),c.retain+=u.length);c!==null&&c.retain===void 0&&a()}this._changes=e}return e}},yd=(t,e)=>{let r=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)r.unshift(e._item.parentSub);else{let n=0,s=e._item.parent._start;for(;s!==e._item&&s!==null;)!s.deleted&&s.countable&&(n+=s.length),s=s.right;r.unshift(n)}e=e._item.parent}return r},K=()=>{as("Invalid access: Add Yjs type to a document before reading data.")},fc=80,Ns=0,bs=class{constructor(e,r){e.marker=!0,this.p=e,this.index=r,this.timestamp=Ns++}},Ed=t=>{t.timestamp=Ns++},hc=(t,e,r)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=r,t.timestamp=Ns++},wd=(t,e,r)=>{if(t.length>=fc){let n=t.reduce((s,o)=>s.timestamp<o.timestamp?s:o);return hc(n,e,r),n}else{let n=new bs(e,r);return t.push(n),n}},on=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;let r=t._searchMarker.length===0?null:t._searchMarker.reduce((o,i)=>it(e-o.index)<it(e-i.index)?o:i),n=t._start,s=0;for(r!==null&&(n=r.p,s=r.index,Ed(r));n.right!==null&&s<e;){if(!n.deleted&&n.countable){if(e<s+n.length)break;s+=n.length}n=n.right}for(;n.left!==null&&s>e;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(s-=n.length);return r!==null&&it(r.index-s)<n.parent.length/fc?(hc(r,n,s),r):wd(t._searchMarker,n,s)},Jt=(t,e,r)=>{for(let n=t.length-1;n>=0;n--){let s=t[n];if(r>0){let o=s.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(s.index-=o.length);if(o===null||o.marker===!0){t.splice(n,1);continue}s.p=o,o.marker=!0}(e<s.index||r>0&&e===s.index)&&(s.index=ve(e,s.index+r))}};var cn=(t,e,r)=>{let n=t,s=e.changedParentTypes;for(;te(s,t,()=>[]).push(r),t._item!==null;)t=t._item.parent;cc(n._eH,r,e)},O=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Ki(),this._dEH=Ki(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,r){this.doc=e,this._item=r}_copy(){throw ce()}clone(){throw ce()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,r){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){zi(this._eH,e)}observeDeep(e){zi(this._dEH,e)}unobserve(e){Hi(this._eH,e)}unobserveDeep(e){Hi(this._dEH,e)}toJSON(){}},pc=(t,e,r)=>{t.doc??K(),e<0&&(e=t._length+e),r<0&&(r=t._length+r);let n=r-e,s=[],o=t._start;for(;o!==null&&n>0;){if(o.countable&&!o.deleted){let i=o.content.getContent();if(i.length<=e)e-=i.length;else{for(let c=e;c<i.length&&n>0;c++)s.push(i[c]),n--;e=0}}o=o.right}return s},gc=t=>{t.doc??K();let e=[],r=t._start;for(;r!==null;){if(r.countable&&!r.deleted){let n=r.content.getContent();for(let s=0;s<n.length;s++)e.push(n[s])}r=r.right}return e};var Xt=(t,e)=>{let r=0,n=t._start;for(t.doc??K();n!==null;){if(n.countable&&!n.deleted){let s=n.content.getContent();for(let o=0;o<s.length;o++)e(s[o],r++,t)}n=n.right}},mc=(t,e)=>{let r=[];return Xt(t,(n,s)=>{r.push(e(n,s,t))}),r},_d=t=>{let e=t._start,r=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(r===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};r=e.content.getContent(),n=0,e=e.right}let s=r[n++];return r.length<=n&&(r=null),{done:!1,value:s}}}},yc=(t,e)=>{t.doc??K();let r=on(t,e),n=t._start;for(r!==null&&(n=r.p,e-=r.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(e<n.length)return n.content.getContent()[e];e-=n.length}},Zr=(t,e,r,n)=>{let s=r,o=t.doc,i=o.clientID,c=o.store,a=r===null?e._start:r.right,u=[],l=()=>{u.length>0&&(s=new A(R(i,M(c,i)),s,s&&s.lastId,a,a&&a.id,e,null,new St(u)),s.integrate(t,0),u=[])};n.forEach(d=>{if(d===null)u.push(d);else switch(d.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(d);break;default:switch(l(),d.constructor){case Uint8Array:case ArrayBuffer:s=new A(R(i,M(c,i)),s,s&&s.lastId,a,a&&a.id,e,null,new sr(new Uint8Array(d))),s.integrate(t,0);break;case Le:s=new A(R(i,M(c,i)),s,s&&s.lastId,a,a&&a.id,e,null,new or(d)),s.integrate(t,0);break;default:if(d instanceof O)s=new A(R(i,M(c,i)),s,s&&s.lastId,a,a&&a.id,e,null,new xe(d)),s.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),l()},Ec=()=>fe("Length exceeded!"),wc=(t,e,r,n)=>{if(r>e._length)throw Ec();if(r===0)return e._searchMarker&&Jt(e._searchMarker,r,n.length),Zr(t,e,null,n);let s=r,o=on(e,r),i=e._start;for(o!==null&&(i=o.p,r-=o.index,r===0&&(i=i.prev,r+=i&&i.countable&&!i.deleted?i.length:0));i!==null;i=i.right)if(!i.deleted&&i.countable){if(r<=i.length){r<i.length&&J(t,R(i.id.client,i.id.clock+r));break}r-=i.length}return e._searchMarker&&Jt(e._searchMarker,s,n.length),Zr(t,e,i,n)},bd=(t,e,r)=>{let s=(e._searchMarker||[]).reduce((o,i)=>i.index>o.index?i:o,{index:0,p:e._start}).p;if(s)for(;s.right;)s=s.right;return Zr(t,e,s,r)},_c=(t,e,r,n)=>{if(n===0)return;let s=r,o=n,i=on(e,r),c=e._start;for(i!==null&&(c=i.p,r-=i.index);c!==null&&r>0;c=c.right)!c.deleted&&c.countable&&(r<c.length&&J(t,R(c.id.client,c.id.clock+r)),r-=c.length);for(;n>0&&c!==null;)c.deleted||(n<c.length&&J(t,R(c.id.client,c.id.clock+n)),c.delete(t),n-=c.length),c=c.right;if(n>0)throw Ec();e._searchMarker&&Jt(e._searchMarker,s,-o+n)},en=(t,e,r)=>{let n=e._map.get(r);n!==void 0&&n.delete(t)},Ls=(t,e,r,n)=>{let s=e._map.get(r)||null,o=t.doc,i=o.clientID,c;if(n==null)c=new St([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:c=new St([n]);break;case Uint8Array:c=new sr(n);break;case Le:c=new or(n);break;default:if(n instanceof O)c=new xe(n);else throw new Error("Unexpected content type")}new A(R(i,M(o.store,i)),s,s&&s.lastId,null,null,e,r,c).integrate(t,0)},Ps=(t,e)=>{t.doc??K();let r=t._map.get(e);return r!==void 0&&!r.deleted?r.content.getContent()[r.length-1]:void 0},bc=t=>{let e={};return t.doc??K(),t._map.forEach((r,n)=>{r.deleted||(e[n]=r.content.getContent()[r.length-1])}),e},vc=(t,e)=>{t.doc??K();let r=t._map.get(e);return r!==void 0&&!r.deleted};var vd=(t,e)=>{let r={};return t._map.forEach((n,s)=>{let o=n;for(;o!==null&&(!e.sv.has(o.id.client)||o.id.clock>=(e.sv.get(o.id.client)||0));)o=o.left;o!==null&&yt(o,e)&&(r[s]=o.content.getContent()[o.length-1])}),r},$r=t=>(t.doc??K(),Fi(t._map.entries(),e=>!e[1].deleted)),vs=class extends bt{},tn=class t extends O{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let r=new t;return r.push(e),r}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(r=>r instanceof O?r.clone():r)),e}get length(){return this.doc??K(),this._length}_callObserver(e,r){super._callObserver(e,r),cn(this,e,new vs(this,e))}insert(e,r){this.doc!==null?I(this.doc,n=>{wc(n,this,e,r)}):this._prelimContent.splice(e,0,...r)}push(e){this.doc!==null?I(this.doc,r=>{bd(r,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,r=1){this.doc!==null?I(this.doc,n=>{_c(n,this,e,r)}):this._prelimContent.splice(e,r)}get(e){return yc(this,e)}toArray(){return gc(this)}slice(e=0,r=this.length){return pc(this,e,r)}toJSON(){return this.map(e=>e instanceof O?e.toJSON():e)}map(e){return mc(this,e)}forEach(e){Xt(this,e)}[Symbol.iterator](){return _d(this)}_write(e){e.writeTypeRef($d)}},Sd=t=>new tn,Ss=class extends bt{constructor(e,r,n){super(e,r),this.keysChanged=n}},Zt=class t extends O{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,r){super._integrate(e,r),this._prelimContent.forEach((n,s)=>{this.set(s,n)}),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return this.forEach((r,n)=>{e.set(n,r instanceof O?r.clone():r)}),e}_callObserver(e,r){cn(this,e,new Ss(this,e,r))}toJSON(){this.doc??K();let e={};return this._map.forEach((r,n)=>{if(!r.deleted){let s=r.content.getContent()[r.length-1];e[n]=s instanceof O?s.toJSON():s}}),e}get size(){return[...$r(this)].length}keys(){return Gr($r(this),e=>e[0])}values(){return Gr($r(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return Gr($r(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??K(),this._map.forEach((r,n)=>{r.deleted||e(r.content.getContent()[r.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?I(this.doc,r=>{en(r,this,e)}):this._prelimContent.delete(e)}set(e,r){return this.doc!==null?I(this.doc,n=>{Ls(n,this,e,r)}):this._prelimContent.set(e,r),r}get(e){return Ps(this,e)}has(e){return vc(this,e)}clear(){this.doc!==null?I(this.doc,e=>{this.forEach(function(r,n,s){en(e,s,n)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(Kd)}},Rd=t=>new Zt,Oe=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&Ri(t,e),er=class{constructor(e,r,n,s){this.left=e,this.right=r,this.index=n,this.currentAttributes=s}forward(){this.right===null&&ae(),this.right.content.constructor===N?this.right.deleted||xt(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}},ec=(t,e,r)=>{for(;e.right!==null&&r>0;)e.right.content.constructor===N?e.right.deleted||xt(e.currentAttributes,e.right.content):e.right.deleted||(r<e.right.length&&J(t,R(e.right.id.client,e.right.id.clock+r)),e.index+=e.right.length,r-=e.right.length),e.left=e.right,e.right=e.right.right;return e},Kr=(t,e,r,n)=>{let s=new Map,o=n?on(e,r):null;if(o){let i=new er(o.p.left,o.p,o.index,s);return ec(t,i,r-o.index)}else{let i=new er(null,e._start,0,s);return ec(t,i,r)}},Sc=(t,e,r,n)=>{for(;r.right!==null&&(r.right.deleted===!0||r.right.content.constructor===N&&Oe(n.get(r.right.content.key),r.right.content.value));)r.right.deleted||n.delete(r.right.content.key),r.forward();let s=t.doc,o=s.clientID;n.forEach((i,c)=>{let a=r.left,u=r.right,l=new A(R(o,M(s.store,o)),a,a&&a.lastId,u,u&&u.id,e,null,new N(c,i));l.integrate(t,0),r.right=l,r.forward()})},xt=(t,e)=>{let{key:r,value:n}=e;n===null?t.delete(r):t.set(r,n)},Rc=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===N&&Oe(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},xc=(t,e,r,n)=>{let s=t.doc,o=s.clientID,i=new Map;for(let c in n){let a=n[c],u=r.currentAttributes.get(c)??null;if(!Oe(u,a)){i.set(c,u);let{left:l,right:d}=r;r.right=new A(R(o,M(s.store,o)),l,l&&l.lastId,d,d&&d.id,e,null,new N(c,a)),r.right.integrate(t,0),r.forward()}}return i},ls=(t,e,r,n,s)=>{r.currentAttributes.forEach((f,h)=>{s[h]===void 0&&(s[h]=null)});let o=t.doc,i=o.clientID;Rc(r,s);let c=xc(t,e,r,s),a=n.constructor===String?new Re(n):n instanceof O?new xe(n):new Ze(n),{left:u,right:l,index:d}=r;e._searchMarker&&Jt(e._searchMarker,r.index,a.getLength()),l=new A(R(i,M(o.store,i)),u,u&&u.lastId,l,l&&l.id,e,null,a),l.integrate(t,0),r.right=l,r.index=d,r.forward(),Sc(t,e,r,c)},tc=(t,e,r,n,s)=>{let o=t.doc,i=o.clientID;Rc(r,s);let c=xc(t,e,r,s);e:for(;r.right!==null&&(n>0||c.size>0&&(r.right.deleted||r.right.content.constructor===N));){if(!r.right.deleted)switch(r.right.content.constructor){case N:{let{key:a,value:u}=r.right.content,l=s[a];if(l!==void 0){if(Oe(l,u))c.delete(a);else{if(n===0)break e;c.set(a,u)}r.right.delete(t)}else r.currentAttributes.set(a,u);break}default:n<r.right.length&&J(t,R(r.right.id.client,r.right.id.clock+n)),n-=r.right.length;break}r.forward()}if(n>0){let a="";for(;n>0;n--)a+=`
`;r.right=new A(R(i,M(o.store,i)),r.left,r.left&&r.left.lastId,r.right,r.right&&r.right.id,e,null,new Re(a)),r.right.integrate(t,0),r.forward()}Sc(t,e,r,c)},Tc=(t,e,r,n,s)=>{let o=e,i=P();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===N){let u=o.content;i.set(u.key,u)}o=o.right}let c=0,a=!1;for(;e!==o;){if(r===e&&(a=!0),!e.deleted){let u=e.content;if(u.constructor===N){let{key:l,value:d}=u,f=n.get(l)??null;(i.get(l)!==u||f===d)&&(e.delete(t),c++,!a&&(s.get(l)??null)===d&&f!==d&&(f===null?s.delete(l):s.set(l,f))),!a&&!e.deleted&&xt(s,u)}}e=e.right}return c},xd=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;let r=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===N){let n=e.content.key;r.has(n)?e.delete(t):r.add(n)}e=e.left}},Td=t=>{let e=0;return I(t.doc,r=>{let n=t._start,s=t._start,o=P(),i=Cr(o);for(;s;)s.deleted===!1&&(s.content.constructor===N?xt(i,s.content):(e+=Tc(r,n,s,o,i),o=Cr(i),n=s)),s=s.right}),e},Cd=t=>{let e=new Set,r=t.doc;for(let[n,s]of t.afterState.entries()){let o=t.beforeState.get(n)||0;s!==o&&lc(t,r.store.clients.get(n),o,s,i=>{!i.deleted&&i.content.constructor===N&&i.constructor!==X&&e.add(i.parent)})}I(r,n=>{Et(t,t.deleteSet,s=>{if(s instanceof X||!s.parent._hasFormatting||e.has(s.parent))return;let o=s.parent;s.content.constructor===N?e.add(o):xd(n,s)});for(let s of e)Td(s)})},rc=(t,e,r)=>{let n=r,s=Cr(e.currentAttributes),o=e.right;for(;r>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case xe:case Ze:case Re:r<e.right.length&&J(t,R(e.right.id.client,e.right.id.clock+r)),r-=e.right.length,e.right.delete(t);break}e.forward()}o&&Tc(t,o,e.right,s,e.currentAttributes);let i=(e.left||e.right).parent;return i._searchMarker&&Jt(i._searchMarker,e.index,-n+r),e},Rs=class extends bt{constructor(e,r,n){super(e,r),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){let e=this.target.doc,r=[];I(e,n=>{let s=new Map,o=new Map,i=this.target._start,c=null,a={},u="",l=0,d=0,f=()=>{if(c!==null){let h=null;switch(c){case"delete":d>0&&(h={delete:d}),d=0;break;case"insert":(typeof u=="object"||u.length>0)&&(h={insert:u},s.size>0&&(h.attributes={},s.forEach((p,g)=>{p!==null&&(h.attributes[g]=p)}))),u="";break;case"retain":l>0&&(h={retain:l},Si(a)||(h.attributes=bi({},a))),l=0;break}h&&r.push(h),c=null}};for(;i!==null;){switch(i.content.constructor){case xe:case Ze:this.adds(i)?this.deletes(i)||(f(),c="insert",u=i.content.getContent()[0],f()):this.deletes(i)?(c!=="delete"&&(f(),c="delete"),d+=1):i.deleted||(c!=="retain"&&(f(),c="retain"),l+=1);break;case Re:this.adds(i)?this.deletes(i)||(c!=="insert"&&(f(),c="insert"),u+=i.content.str):this.deletes(i)?(c!=="delete"&&(f(),c="delete"),d+=i.length):i.deleted||(c!=="retain"&&(f(),c="retain"),l+=i.length);break;case N:{let{key:h,value:p}=i.content;if(this.adds(i)){if(!this.deletes(i)){let g=s.get(h)??null;Oe(g,p)?p!==null&&i.delete(n):(c==="retain"&&f(),Oe(p,o.get(h)??null)?delete a[h]:a[h]=p)}}else if(this.deletes(i)){o.set(h,p);let g=s.get(h)??null;Oe(g,p)||(c==="retain"&&f(),a[h]=g)}else if(!i.deleted){o.set(h,p);let g=a[h];g!==void 0&&(Oe(g,p)?g!==null&&i.delete(n):(c==="retain"&&f(),p===null?delete a[h]:a[h]=p))}i.deleted||(c==="insert"&&f(),xt(s,i.content));break}}i=i.right}for(f();r.length>0;){let h=r[r.length-1];if(h.retain!==void 0&&h.attributes===void 0)r.pop();else break}}),this._delta=r}return this._delta}},tr=class t extends O{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??K(),this._length}_integrate(e,r){super._integrate(e,r);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}_callObserver(e,r){super._callObserver(e,r);let n=new Rs(this,e,r);cn(this,e,n),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??K();let e="",r=this._start;for(;r!==null;)!r.deleted&&r.countable&&r.content.constructor===Re&&(e+=r.content.str),r=r.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:r=!0}={}){this.doc!==null?I(this.doc,n=>{let s=new er(null,this._start,0,new Map);for(let o=0;o<e.length;o++){let i=e[o];if(i.insert!==void 0){let c=!r&&typeof i.insert=="string"&&o===e.length-1&&s.right===null&&i.insert.slice(-1)===`
`?i.insert.slice(0,-1):i.insert;(typeof c!="string"||c.length>0)&&ls(n,this,s,c,i.attributes||{})}else i.retain!==void 0?tc(n,this,s,i.retain,i.attributes||{}):i.delete!==void 0&&rc(n,s,i.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,r,n){this.doc??K();let s=[],o=new Map,i=this.doc,c="",a=this._start;function u(){if(c.length>0){let d={},f=!1;o.forEach((p,g)=>{f=!0,d[g]=p});let h={insert:c};f&&(h.attributes=d),s.push(h),c=""}}let l=()=>{for(;a!==null;){if(yt(a,e)||r!==void 0&&yt(a,r))switch(a.content.constructor){case Re:{let d=o.get("ychange");e!==void 0&&!yt(a,e)?(d===void 0||d.user!==a.id.client||d.type!=="removed")&&(u(),o.set("ychange",n?n("removed",a.id):{type:"removed"})):r!==void 0&&!yt(a,r)?(d===void 0||d.user!==a.id.client||d.type!=="added")&&(u(),o.set("ychange",n?n("added",a.id):{type:"added"})):d!==void 0&&(u(),o.delete("ychange")),c+=a.content.str;break}case xe:case Ze:{u();let d={insert:a.content.getContent()[0]};if(o.size>0){let f={};d.attributes=f,o.forEach((h,p)=>{f[p]=h})}s.push(d);break}case N:yt(a,e)&&(u(),xt(o,a.content));break}a=a.right}u()};return e||r?I(i,d=>{e&&ys(d,e),r&&ys(d,r),l()},"cleanup"):l(),s}insert(e,r,n){if(r.length<=0)return;let s=this.doc;s!==null?I(s,o=>{let i=Kr(o,this,e,!n);n||(n={},i.currentAttributes.forEach((c,a)=>{n[a]=c})),ls(o,this,i,r,n)}):this._pending.push(()=>this.insert(e,r,n))}insertEmbed(e,r,n){let s=this.doc;s!==null?I(s,o=>{let i=Kr(o,this,e,!n);ls(o,this,i,r,n||{})}):this._pending.push(()=>this.insertEmbed(e,r,n||{}))}delete(e,r){if(r===0)return;let n=this.doc;n!==null?I(n,s=>{rc(s,Kr(s,this,e,!0),r)}):this._pending.push(()=>this.delete(e,r))}format(e,r,n){if(r===0)return;let s=this.doc;s!==null?I(s,o=>{let i=Kr(o,this,e,!1);i.right!==null&&tc(o,this,i,r,n)}):this._pending.push(()=>this.format(e,r,n))}removeAttribute(e){this.doc!==null?I(this.doc,r=>{en(r,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,r){this.doc!==null?I(this.doc,n=>{Ls(n,this,e,r)}):this._pending.push(()=>this.setAttribute(e,r))}getAttribute(e){return Ps(this,e)}getAttributes(){return bc(this)}_write(e){e.writeTypeRef(zd)}},Id=t=>new tr,zt=class{constructor(e,r=()=>!0){this._filter=r,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??K()}[Symbol.iterator](){return this}next(){let e=this._currentNode,r=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(r)))do if(r=e.content.type,!e.deleted&&(r.constructor===rr||r.constructor===vt)&&r._start!==null)e=r._start;else for(;e!==null;){let n=e.next;if(n!==null){e=n;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}},vt=class t extends O{constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,r){super._integrate(e,r),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(r=>r instanceof O?r.clone():r)),e}get length(){return this.doc??K(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new zt(this,e)}querySelector(e){e=e.toUpperCase();let n=new zt(this,s=>s.nodeName&&s.nodeName.toUpperCase()===e).next();return n.done?null:n.value}querySelectorAll(e){return e=e.toUpperCase(),de(new zt(this,r=>r.nodeName&&r.nodeName.toUpperCase()===e))}_callObserver(e,r){cn(this,e,new xs(this,r,e))}toString(){return mc(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,r={},n){let s=e.createDocumentFragment();return n!==void 0&&n._createAssociation(s,this),Xt(this,o=>{s.insertBefore(o.toDOM(e,r,n),null)}),s}insert(e,r){this.doc!==null?I(this.doc,n=>{wc(n,this,e,r)}):this._prelimContent.splice(e,0,...r)}insertAfter(e,r){if(this.doc!==null)I(this.doc,n=>{let s=e&&e instanceof O?e._item:e;Zr(n,this,s,r)});else{let n=this._prelimContent,s=e===null?0:n.findIndex(o=>o===e)+1;if(s===0&&e!==null)throw fe("Reference item not found");n.splice(s,0,...r)}}delete(e,r=1){this.doc!==null?I(this.doc,n=>{_c(n,this,e,r)}):this._prelimContent.splice(e,r)}toArray(){return gc(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return yc(this,e)}slice(e=0,r=this.length){return pc(this,e,r)}forEach(e){Xt(this,e)}_write(e){e.writeTypeRef(Wd)}},Ad=t=>new vt,rr=class t extends vt{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,r){super._integrate(e,r),this._prelimAttrs.forEach((n,s)=>{this.setAttribute(s,n)}),this._prelimAttrs=null}_copy(){return new t(this.nodeName)}clone(){let e=new t(this.nodeName),r=this.getAttributes();return vi(r,(n,s)=>{e.setAttribute(s,n)}),e.insert(0,this.toArray().map(n=>n instanceof O?n.clone():n)),e}toString(){let e=this.getAttributes(),r=[],n=[];for(let c in e)n.push(c);n.sort();let s=n.length;for(let c=0;c<s;c++){let a=n[c];r.push(a+'="'+e[a]+'"')}let o=this.nodeName.toLocaleLowerCase(),i=r.length>0?" "+r.join(" "):"";return`<${o}${i}>${super.toString()}</${o}>`}removeAttribute(e){this.doc!==null?I(this.doc,r=>{en(r,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,r){this.doc!==null?I(this.doc,n=>{Ls(n,this,e,r)}):this._prelimAttrs.set(e,r)}getAttribute(e){return Ps(this,e)}hasAttribute(e){return vc(this,e)}getAttributes(e){return e?vd(this,e):bc(this)}toDOM(e=document,r={},n){let s=e.createElement(this.nodeName),o=this.getAttributes();for(let i in o){let c=o[i];typeof c=="string"&&s.setAttribute(i,c)}return Xt(this,i=>{s.appendChild(i.toDOM(e,r,n))}),n!==void 0&&n._createAssociation(s,this),s}_write(e){e.writeTypeRef(Hd),e.writeKey(this.nodeName)}},Ud=t=>new rr(t.readKey()),xs=class extends bt{constructor(e,r,n){super(e,n),this.childListChanged=!1,this.attributesChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}},Ts=class t extends Zt{constructor(e){super(),this.hookName=e}_copy(){return new t(this.hookName)}clone(){let e=new t(this.hookName);return this.forEach((r,n)=>{e.set(n,r)}),e}toDOM(e=document,r={},n){let s=r[this.hookName],o;return s!==void 0?o=s.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(o,this),o}_write(e){e.writeTypeRef(qd),e.writeKey(this.hookName)}},Dd=t=>new Ts(t.readKey()),Cs=class t extends tr{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}toDOM(e=document,r,n){let s=e.createTextNode(this.toString());return n!==void 0&&n._createAssociation(s,this),s}toString(){return this.toDelta().map(e=>{let r=[];for(let s in e.attributes){let o=[];for(let i in e.attributes[s])o.push({key:i,value:e.attributes[s][i]});o.sort((i,c)=>i.key<c.key?-1:1),r.push({nodeName:s,attrs:o})}r.sort((s,o)=>s.nodeName<o.nodeName?-1:1);let n="";for(let s=0;s<r.length;s++){let o=r[s];n+=`<${o.nodeName}`;for(let i=0;i<o.attrs.length;i++){let c=o.attrs[i];n+=` ${c.key}="${c.value}"`}n+=">"}n+=e.insert;for(let s=r.length-1;s>=0;s--)n+=`</${r[s].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Qd)}},kd=t=>new Cs,nr=class{constructor(e,r){this.id=e,this.length=r}get deleted(){throw ce()}mergeWith(e){return!1}write(e,r,n){throw ce()}integrate(e,r){throw ce()}},Od=0,X=class extends nr{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){r>0&&(this.id.clock+=r,this.length-=r),ac(e.doc.store,this)}write(e,r){e.writeInfo(Od),e.writeLen(this.length-r)}getMissing(e,r){return null}},sr=class t{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new t(this.content)}splice(e){throw ce()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeBuf(this.content)}getRef(){return 3}},Md=t=>new sr(t.readBuf()),rn=class t{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.len)}splice(e){let r=new t(this.len-e);return this.len=e,r}mergeWith(e){return this.len+=e.len,!0}integrate(e,r){Wt(e.deleteSet,r.id.client,r.id.clock,this.len),r.markDeleted()}delete(e){}gc(e){}write(e,r){e.writeLen(this.len-r)}getRef(){return 1}},Nd=t=>new rn(t.readLen()),Cc=(t,e)=>new Le({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1}),or=class t{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let r={};this.opts=r,e.gc||(r.gc=!1),e.autoLoad&&(r.autoLoad=!0),e.meta!==null&&(r.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new t(Cc(this.doc.guid,this.opts))}splice(e){throw ce()}mergeWith(e){return!1}integrate(e,r){this.doc._item=r,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,r){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}},Ld=t=>new or(Cc(t.readString(),t.readAny())),Ze=class t{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new t(this.embed)}splice(e){throw ce()}mergeWith(e){return!1}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeJSON(this.embed)}getRef(){return 5}},Pd=t=>new Ze(t.readJSON()),N=class t{constructor(e,r){this.key=e,this.value=r}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.key,this.value)}splice(e){throw ce()}mergeWith(e){return!1}integrate(e,r){let n=r.parent;n._searchMarker=null,n._hasFormatting=!0}delete(e){}gc(e){}write(e,r){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}},Vd=t=>new N(t.readKey(),t.readJSON()),Is=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let r=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){let n=this.arr.length;e.writeLen(n-r);for(let s=r;s<n;s++){let o=this.arr[s];e.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}},Bd=t=>{let e=t.readLen(),r=[];for(let n=0;n<e;n++){let s=t.readString();s==="undefined"?r.push(void 0):r.push(JSON.parse(s))}return new Is(r)},jd=Gt("node_env")==="development",St=class t{constructor(e){this.arr=e,jd&&Zn(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let r=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),r}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){let n=this.arr.length;e.writeLen(n-r);for(let s=r;s<n;s++){let o=this.arr[s];e.writeAny(o)}}getRef(){return 8}},Fd=t=>{let e=t.readLen(),r=[];for(let n=0;n<e;n++)r.push(t.readAny());return new St(r)},Re=class t{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new t(this.str)}splice(e){let r=new t(this.str.slice(e));this.str=this.str.slice(0,e);let n=this.str.charCodeAt(e-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",r.str="\uFFFD"+r.str.slice(1)),r}mergeWith(e){return this.str+=e.str,!0}integrate(e,r){}delete(e){}gc(e){}write(e,r){e.writeString(r===0?this.str:this.str.slice(r))}getRef(){return 4}},Gd=t=>new Re(t.readString()),Yd=[Sd,Rd,Id,Ud,Ad,Dd,kd],$d=0,Kd=1,zd=2,Hd=3,Wd=4,qd=5,Qd=6,xe=class t{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new t(this.type._copy())}splice(e){throw ce()}mergeWith(e){return!1}integrate(e,r){this.type._integrate(e.doc,r)}delete(e){let r=this.type._start;for(;r!==null;)r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e),r=r.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e)}),e.changed.delete(this.type)}gc(e){let r=this.type._start;for(;r!==null;)r.gc(e,!0),r=r.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(e,!0),n=n.left}),this.type._map=new Map}write(e,r){this.type._write(e)}getRef(){return 7}},Jd=t=>new xe(Yd[t.readTypeRef()](t)),Xd=(t,e)=>{let r=e,n=0,s;do n>0&&(r=R(r.client,r.clock+n)),s=zr(t,r),n=r.clock-s.id.clock,r=s.redone;while(r!==null&&s instanceof A);return{item:s,diff:n}},Vs=(t,e)=>{for(;t!==null&&t.keep!==e;)t.keep=e,t=t.parent._item},nn=(t,e,r)=>{let{client:n,clock:s}=e.id,o=new A(R(n,s+r),e,R(n,s+r-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(r));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),e.redone!==null&&(o.redone=R(e.redone.client,e.redone.clock+r)),e.right=o,o.right!==null&&(o.right.left=o),t._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),e.length=r,o},nc=(t,e)=>ni(t,r=>ir(r.deletions,e)),Ic=(t,e,r,n,s,o)=>{let i=t.doc,c=i.store,a=i.clientID,u=e.redone;if(u!==null)return J(t,u);let l=e.parent._item,d=null,f;if(l!==null&&l.deleted===!0){if(l.redone===null&&(!r.has(l)||Ic(t,l,r,n,s,o)===null))return null;for(;l.redone!==null;)l=J(t,l.redone)}let h=l===null?e.parent:l.content.type;if(e.parentSub===null){for(d=e.left,f=e;d!==null;){let y=d;for(;y!==null&&y.parent._item!==l;)y=y.redone===null?null:J(t,y.redone);if(y!==null&&y.parent._item===l){d=y;break}d=d.left}for(;f!==null;){let y=f;for(;y!==null&&y.parent._item!==l;)y=y.redone===null?null:J(t,y.redone);if(y!==null&&y.parent._item===l){f=y;break}f=f.right}}else if(f=null,e.right&&!s){for(d=e;d!==null&&d.right!==null&&(d.right.redone||ir(n,d.right.id)||nc(o.undoStack,d.right.id)||nc(o.redoStack,d.right.id));)for(d=d.right;d.redone;)d=J(t,d.redone);if(d&&d.right!==null)return null}else d=h._map.get(e.parentSub)||null;let p=M(c,a),g=R(a,p),m=new A(g,d,d&&d.lastId,f,f&&f.id,h,e.parentSub,e.content.copy());return e.redone=g,Vs(m,!0),m.integrate(t,0),m},A=class t extends nr{constructor(e,r,n,s,o,i,c,a){super(e,a.getLength()),this.origin=n,this.left=r,this.right=s,this.rightOrigin=o,this.parent=i,this.parentSub=c,this.redone=null,this.content=a,this.info=this.content.isCountable()?2:0}set marker(e){(this.info&8)>0!==e&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,r){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=M(r,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=M(r,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Me&&this.id.client!==this.parent.client&&this.parent.clock>=M(r,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Wi(e,r,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=J(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===X||this.right&&this.right.constructor===X)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===t?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Me){let n=zr(r,this.parent);n.constructor===X?this.parent=null:this.parent=n.content.type}return null}integrate(e,r){if(r>0&&(this.id.clock+=r,this.left=Wi(e,e.doc.store,R(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(r),this.length-=r),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,s;if(n!==null)s=n.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;let o=new Set,i=new Set;for(;s!==null&&s!==this.right;){if(i.add(s),o.add(s),Yr(this.origin,s.origin)){if(s.id.client<this.id.client)n=s,o.clear();else if(Yr(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&i.has(zr(e.doc.store,s.origin)))o.has(zr(e.doc.store,s.origin))||(n=s,o.clear());else break;s=s.right}this.left=n}if(this.left!==null){let n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),ac(e.doc.store,this),this.content.integrate(e,this),Qi(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new X(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:R(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&Yr(e.origin,this.lastId)&&this.right===e&&Yr(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let r=this.parent._searchMarker;return r&&r.forEach(n=>{n.p===e&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let r=this.parent;this.countable&&this.parentSub===null&&(r._length-=this.length),this.markDeleted(),Wt(e.deleteSet,this.id.client,this.id.clock,this.length),Qi(e,r,this.parentSub),this.content.delete(e)}}gc(e,r){if(!this.deleted)throw ae();this.content.gc(e),r?ad(e,this,new X(this.id,this.length)):this.content=new rn(this.length)}write(e,r){let n=r>0?R(this.id.client,this.id.clock+r-1):this.origin,s=this.rightOrigin,o=this.parentSub,i=this.content.getRef()&31|(n===null?0:128)|(s===null?0:64)|(o===null?0:32);if(e.writeInfo(i),n!==null&&e.writeLeftID(n),s!==null&&e.writeRightID(s),n===null&&s===null){let c=this.parent;if(c._item!==void 0){let a=c._item;if(a===null){let u=od(c);e.writeParentInfo(!0),e.writeString(u)}else e.writeParentInfo(!1),e.writeLeftID(a.id)}else c.constructor===String?(e.writeParentInfo(!0),e.writeString(c)):c.constructor===Me?(e.writeParentInfo(!1),e.writeLeftID(c)):ae();o!==null&&e.writeString(o)}this.content.write(e,r)}},Ac=(t,e)=>Zd[e&31](t),Zd=[()=>{ae()},Nd,Bd,Md,Gd,Pd,Vd,Jd,Fd,Ld,()=>{ae()}],ef=10,Z=class extends nr{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,r){ae()}write(e,r){e.writeInfo(ef),C(e.restEncoder,this.length-r)}getMissing(e,r){return null}},Uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Dc="__ $YJS$ __";Uc[Dc]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Uc[Dc]=!0;var kc=1,js="fromPersistence",Fs="document",ar="documentMeta",et="savedAt",Oc="savedBy",Mc="state",Nc="version",Gs="gutenberg",lr="syncManager",an="_crdt_document";function ln(t={}){let e=new Map(Object.entries(t)),r=new Le({meta:e});return r.getMap(Mc).set(Nc,kc),r}function Ys(t){let e=t.getMap(ar);e.set(et,Date.now()),e.set(Oc,t.clientID)}function Lc(t){return JSON.stringify({document:Di(sn(t))})}function Pc(t){try{let{document:e}=JSON.parse(t),r={[js]:!0},n=ln(r),s=ki(e);return cr(n,s),n.clientID=Math.floor(Math.random()*1e9),n}catch{return null}}function Vc(t){let e=t.meta?.[an];return e?Pc(e):null}function Bc(t){return{[an]:Lc(t)}}var Gc=E(Fc(),1);var Tt=null;function tf(t){return typeof t=="function"}function $s(){if(Tt)return Tt;let t=(0,Gc.applyFilters)("sync.providers",[]);return Array.isArray(t)?(Tt=t.filter(tf),Tt):(Tt=[],Tt)}var Yc=(t,e)=>{let r=e==="undo"?t.undoStack:t.redoStack;for(;r.length>0;){let n=r.pop(),s=e==="undo"?n.undoStack:n.redoStack,o=s.pop(),i=!1;if(e==="undo"?(n.undoStack=[o],i=n.undo()!==null,n.undoStack=s):(n.redoStack=[o],i=n.redo()!==null,n.redoStack=s),i)return o}return null},$c=class extends Ur{constructor(t=[],e={}){super(),this.docs=new Map,this.trackedOrigins=e.trackedOrigins||new Set([null]),e.trackedOrigins=this.trackedOrigins,this._defaultOpts=e,this.undoStack=[],this.redoStack=[],this.addToScope(t)}addToScope(t){t=$e(t)?t:[t],t.forEach(e=>{let r=e.doc,n=te(this.docs,r,()=>{let s=new _t([e],this._defaultOpts);return s.on("stack-cleared",({undoStackCleared:o,redoStackCleared:i})=>{this.clear(o,i)}),r.on("destroy",()=>{this.docs.delete(r),this.undoStack=this.undoStack.filter(o=>o.doc!==r),this.redoStack=this.redoStack.filter(o=>o.doc!==r)}),s.on("stack-item-added",o=>{(o.type==="undo"?this.undoStack:this.redoStack).push(s),this.emit("stack-item-added",[{...o,ydoc:r},this])}),s.on("stack-item-updated",o=>{this.emit("stack-item-updated",[{...o,ydoc:r},this])}),s.on("stack-item-popped",o=>{this.emit("stack-item-popped",[{...o,ydoc:r},this])}),s});n.scope.every(s=>s!==e)&&n.scope.push(e)})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}undo(){return Yc(this,"undo")}redo(){return Yc(this,"redo")}clear(t=!0,e=!0){(t&&this.canUndo()||e&&this.canRedo())&&(this.docs.forEach(r=>{t&&(this.undoStack=[]),e&&(this.redoStack=[]),r.clear(t,e)}),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:e}]))}stopCapturing(){this.docs.forEach(t=>{t.stopCapturing()})}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.docs.forEach(t=>t.destroy()),super.destroy()}};function Kc(){let t=new $c([],{captureTimeout:500,trackedOrigins:new Set([Gs])});return{addRecord(e,r=!1){},addToScope(e,r){if(e.doc===null)return;let n=e.doc;t.addToScope(e);let{addUndoMeta:s,restoreUndoMeta:o}=r;t.on("stack-item-added",i=>{s(n,i.stackItem.meta)}),t.on("stack-item-popped",i=>{o(n,i.stackItem.meta)})},undo(){if(t.canUndo())return t.undo(),[]},redo(){if(t.canRedo())return t.redo(),[]},hasUndo(){return t.canUndo()},hasRedo(){return t.canRedo()},stopCapturing(){t.stopCapturing()}}}function Ks(){let t=new Map,e=new Map,r;async function n(f,h,p,g,m){let y=$s();if(y.length===0)return;let w=i(h,p);if(e.has(w))return;let v=ln({objectType:h}),_=v.getMap(Fs),b=v.getMap(ar),j=Date.now(),ee=()=>{Il.forEach(nt=>nt.destroy()),_.unobserveDeep(G),b.unobserve(z),v.destroy(),e.delete(w)},F=f.createAwareness?.(v,p),G=(nt,br)=>{br.local&&!(br.origin instanceof _t)||l(h,p)},z=(nt,br)=>{br.local||nt.keysChanged.forEach(Al=>{if(Al===et){let Co=b.get(et);typeof Co=="number"&&Co>j&&m.refetchRecord().catch(()=>{})}})};r||(r=Kc());let{addUndoMeta:W,restoreUndoMeta:_r}=m;r.addToScope(_,{addUndoMeta:W,restoreUndoMeta:_r});let Cl={awareness:F,handlers:m,objectId:p,objectType:h,syncConfig:f,unload:ee,ydoc:v};e.set(w,Cl);let Il=await Promise.all(y.map(nt=>nt({objectType:h,objectId:p,ydoc:v,awareness:F})));_.observeDeep(G),b.observe(z),a(h,p,g)}async function s(f,h,p){let g=$s();if(g.length===0||t.has(h))return;let m=ln({collection:!0,objectType:h}),y=m.getMap(ar),w=Date.now(),v=()=>{ee.forEach(F=>F.destroy()),y.unobserve(_),m.destroy(),t.delete(h)},_=(F,G)=>{G.local||F.keysChanged.forEach(z=>{if(z===et){let W=y.get(et);typeof W=="number"&&W>w&&p.refetchRecords().catch(()=>{})}})},b=f.createAwareness?.(m);b?.setUp();let j={awareness:b,handlers:p,syncConfig:f,unload:v,ydoc:m};t.set(h,j);let ee=await Promise.all(g.map(F=>F({awareness:b,objectType:h,objectId:null,ydoc:m})));y.observe(_)}function o(f,h){e.get(i(f,h))?.unload(),u(f,null,{},origin,{isSave:!0})}function i(f,h){return`${f}_${h}`}function c(f,h){let p=i(f,h),g=e.get(p);if(!(!g||!g.awareness))return g.awareness}function a(f,h,p){let g=i(f,h),m=e.get(g);if(!m)return;let{handlers:y,syncConfig:{applyChangesToCRDTDoc:w,getChangesFromCRDTDoc:v,supports:_},ydoc:b}=m;if(!_?.crdtPersistence){b.transact(()=>{w(b,p)},lr);return}let j=Vc(p);if(!j){b.transact(()=>{w(b,p),y.saveRecord()},lr);return}let ee=sn(j);cr(b,ee);let F=v(j,p),G=Object.keys(F);if(j.destroy(),G.length===0)return;let z=G.reduce((W,_r)=>Object.assign(W,{[_r]:p[_r]}),{});b.transact(()=>{w(b,z),y.saveRecord()},lr)}function u(f,h,p,g,m={}){let{isSave:y=!1,isNewUndoLevel:w=!1}=m,v=i(f,h),_=e.get(v),b=t.get(f);if(_){let{syncConfig:j,ydoc:ee}=_;w&&r&&r.stopCapturing?.(),ee.transact(()=>{j.applyChangesToCRDTDoc(ee,p),y&&Ys(ee)},g)}b&&y&&b.ydoc.transact(()=>{Ys(b.ydoc)},g)}async function l(f,h){let p=i(f,h),g=e.get(p);if(!g)return;let{handlers:m,syncConfig:y,ydoc:w}=g,v=y.getChangesFromCRDTDoc(w,await m.getEditedRecord());Object.keys(v).length!==0&&m.editRecord(v)}function d(f,h){let p=i(f,h),g=e.get(p);return g?.syncConfig.supports?.crdtPersistence?Bc(g.ydoc):{}}return{createMeta:d,getAwareness:c,load:n,loadCollection:s,get undoManager(){return r},unload:o,update:u}}var x="core";var un;function Wc(){return un||(un=Ks(),un)}var dn,rf=new Uint8Array(16);function zs(){if(!dn&&(dn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dn(rf)}var Y=[];for(let t=0;t<256;++t)Y.push((t+256).toString(16).slice(1));function qc(t,e=0){return Y[t[e+0]]+Y[t[e+1]]+Y[t[e+2]]+Y[t[e+3]]+"-"+Y[t[e+4]]+Y[t[e+5]]+"-"+Y[t[e+6]]+Y[t[e+7]]+"-"+Y[t[e+8]]+Y[t[e+9]]+"-"+Y[t[e+10]]+Y[t[e+11]]+Y[t[e+12]]+Y[t[e+13]]+Y[t[e+14]]+Y[t[e+15]]}var nf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Hs={randomUUID:nf};function sf(t,e,r){if(Hs.randomUUID&&!e&&!t)return Hs.randomUUID();t=t||{};let n=t.random||(t.rng||zs)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return qc(n)}var Ws=sf;var D="id",of=["title","excerpt","content"],cf={blocks:{read:t=>(0,hn.parse)(t.content?.raw??""),write:t=>({content:(0,hn.__unstableSerializeAndClean)(t.blocks)})}},pn=[{label:(0,U.__)("Base"),kind:"root",key:!1,name:"__unstableBase",baseURL:"/",baseURLParams:{_fields:["description","gmt_offset","home","name","site_icon","site_icon_url","site_logo","timezone_string","url","page_for_posts","page_on_front","show_on_front"].join(",")},plural:"__unstableBases"},{label:(0,U.__)("Post Type"),name:"postType",kind:"root",key:"slug",baseURL:"/wp/v2/types",baseURLParams:{context:"edit"},plural:"postTypes"},{name:"media",kind:"root",baseURL:"/wp/v2/media",baseURLParams:{context:"edit"},plural:"mediaItems",label:(0,U.__)("Media"),rawAttributes:["caption","title","description"],supportsPagination:!0},{name:"taxonomy",kind:"root",key:"slug",baseURL:"/wp/v2/taxonomies",baseURLParams:{context:"edit"},plural:"taxonomies",label:(0,U.__)("Taxonomy")},{name:"sidebar",kind:"root",baseURL:"/wp/v2/sidebars",baseURLParams:{context:"edit"},plural:"sidebars",transientEdits:{blocks:!0},label:(0,U.__)("Widget areas")},{name:"widget",kind:"root",baseURL:"/wp/v2/widgets",baseURLParams:{context:"edit"},plural:"widgets",transientEdits:{blocks:!0},label:(0,U.__)("Widgets")},{name:"widgetType",kind:"root",baseURL:"/wp/v2/widget-types",baseURLParams:{context:"edit"},plural:"widgetTypes",label:(0,U.__)("Widget types")},{label:(0,U.__)("User"),name:"user",kind:"root",baseURL:"/wp/v2/users",getTitle:t=>t?.name||t?.slug,baseURLParams:{context:"edit"},plural:"users",supportsPagination:!0},{name:"comment",kind:"root",baseURL:"/wp/v2/comments",baseURLParams:{context:"edit"},plural:"comments",label:(0,U.__)("Comment"),supportsPagination:!0},{name:"menu",kind:"root",baseURL:"/wp/v2/menus",baseURLParams:{context:"edit"},plural:"menus",label:(0,U.__)("Menu"),supportsPagination:!0},{name:"menuItem",kind:"root",baseURL:"/wp/v2/menu-items",baseURLParams:{context:"edit"},plural:"menuItems",label:(0,U.__)("Menu Item"),rawAttributes:["title"],supportsPagination:!0},{name:"menuLocation",kind:"root",baseURL:"/wp/v2/menu-locations",baseURLParams:{context:"edit"},plural:"menuLocations",label:(0,U.__)("Menu Location"),key:"name"},{label:(0,U.__)("Global Styles"),name:"globalStyles",kind:"root",baseURL:"/wp/v2/global-styles",baseURLParams:{context:"edit"},plural:"globalStylesVariations",getTitle:()=>(0,U.__)("Custom Styles"),getRevisionsUrl:(t,e)=>`/wp/v2/global-styles/${t}/revisions${e?"/"+e:""}`,supportsPagination:!0},{label:(0,U.__)("Themes"),name:"theme",kind:"root",baseURL:"/wp/v2/themes",baseURLParams:{context:"edit"},plural:"themes",key:"stylesheet"},{label:(0,U.__)("Plugins"),name:"plugin",kind:"root",baseURL:"/wp/v2/plugins",baseURLParams:{context:"edit"},plural:"plugins",key:"plugin"},{label:(0,U.__)("Status"),name:"status",kind:"root",baseURL:"/wp/v2/statuses",baseURLParams:{context:"edit"},plural:"statuses",key:"slug"},{label:(0,U.__)("Registered Templates"),name:"registeredTemplate",kind:"root",baseURL:"/wp/v2/registered-templates",key:"id"},{label:(0,U.__)("Font Collections"),name:"fontCollection",kind:"root",baseURL:"/wp/v2/font-collections",baseURLParams:{context:"view"},plural:"fontCollections",key:"slug"}].map(t=>{let e=new Set(["comment"]);return t}),Xc={root:{media:{since:"6.9",alternative:{kind:"postType",name:"attachment"}}}},gn=[{kind:"postType",loadEntities:lf},{kind:"taxonomy",loadEntities:uf},{kind:"root",name:"site",plural:"sites",loadEntities:df}],af=(t,e,r,n)=>{let s={};return!n&&t?.status==="auto-draft"&&(!e.status&&!s.status&&(s.status="draft"),(!e.title||e.title==="Auto Draft")&&!s.title&&(!t?.title||t?.title==="Auto Draft")&&(s.title="")),s};async function lf(){let t=await(0,fn.default)({path:"/wp/v2/types?context=view"});return Object.entries(t??{}).map(([e,r])=>{let n=["wp_template","wp_template_part"].includes(e),s=r?.rest_namespace??"wp/v2";return{kind:"postType",baseURL:`/${s}/${r.rest_base}`,baseURLParams:{context:"edit"},name:e,label:r.name,transientEdits:{...cf,selection:!0},mergedEdits:{meta:!0},rawAttributes:of,getTitle:i=>i?.title?.rendered||i?.title||(n?Qo(i.slug??""):String(i.id)),__unstablePrePersist:(i,c)=>af(i,c,e,n),__unstable_rest_base:r.rest_base,supportsPagination:!0,getRevisionsUrl:(i,c)=>`/${s}/${r.rest_base}/${i}/revisions${c?"/"+c:""}`,revisionKey:n&&!window?.__experimentalTemplateActivate?"wp_id":D}})}async function uf(){let t=await(0,fn.default)({path:"/wp/v2/taxonomies?context=view"});return Object.entries(t??{}).map(([e,r])=>({kind:"taxonomy",baseURL:`/${r?.rest_namespace??"wp/v2"}/${r.rest_base}`,baseURLParams:{context:"edit"},name:e,label:r.name,getTitle:o=>o?.name,supportsPagination:!0}))}async function df(){let t={label:(0,U.__)("Site"),name:"site",kind:"root",key:!1,baseURL:"/wp/v2/settings",meta:{}},e=await(0,fn.default)({path:t.baseURL,method:"OPTIONS"}),r={};return Object.entries(e?.schema?.properties??{}).forEach(([n,s])=>{typeof s=="object"&&s.title&&(r[n]=s.title)}),[{...t,meta:{labels:r}}]}var tt=(t,e,r="get")=>{let n=t==="root"?"":Nt(t),s=Nt(e);return`${r}${n}${s}`};function ta(t){let{query:e}=t;return e?Ae(e).context:"default"}function ff(t,e,r,n){if(r===1&&n===-1)return e;let o=(r-1)*n,i=Math.max(t?.length??0,o+e.length),c=new Array(i);for(let a=0;a<i;a++){let u=a>=o&&a<o+n;c[a]=u?e[a-o]:t?.[a]}return c}function ra(t,e){return Object.fromEntries(Object.entries(t).filter(([r])=>!e.some(n=>Number.isInteger(n)?n===+r:n===r)))}function hf(t={},e){switch(e.type){case"RECEIVE_ITEMS":{let r=ta(e),n=e.key||D;return{...t,[r]:{...t[r],...e.items.reduce((s,o)=>{let i=o?.[n];return s[i]=Dn(t?.[r]?.[i],o),s},{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,ra(n,e.itemIds)]))}return t}function pf(t={},e){switch(e.type){case"RECEIVE_ITEMS":{let r=ta(e),{query:n,key:s=D}=e,o=n?Ae(n):{},i=!n||!Array.isArray(o.fields);return{...t,[r]:{...t[r],...e.items.reduce((c,a)=>{let u=a?.[s];return c[u]=t?.[r]?.[u]||i,c},{})}}}case"REMOVE_ITEMS":return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,ra(n,e.itemIds)]))}return t}var gf=(0,ea.compose)([Dt(t=>"query"in t),kt(t=>t.query?{...t,...Ae(t.query)}:t),Rr("context"),Rr("stableKey")])((t={},e)=>{let{type:r,page:n,perPage:s,key:o=D}=e;return r!=="RECEIVE_ITEMS"?t:{itemIds:ff(t?.itemIds||[],e.items.map(i=>i?.[o]).filter(Boolean),n,s),meta:e.meta}}),mf=(t={},e)=>{switch(e.type){case"RECEIVE_ITEMS":return gf(t,e);case"REMOVE_ITEMS":let r=e.itemIds.reduce((n,s)=>(n[s]=!0,n),{});return Object.fromEntries(Object.entries(t).map(([n,s])=>[n,Object.fromEntries(Object.entries(s).map(([o,i])=>[o,{...i,itemIds:i.itemIds.filter(c=>!r[c])}]))]));default:return t}},mn=(0,Zc.combineReducers)({items:hf,itemIsComplete:pf,queries:mf});function yf(t={byId:{},queries:{}},e){return e.type==="RECEIVE_USER_QUERY"?{byId:{...t.byId,...e.users.reduce((r,n)=>({...r,[n.id]:n}),{})},queries:{...t.queries,[e.queryID]:e.users.map(r=>r.id)}}:t}function Ef(t={},e){return e.type==="RECEIVE_CURRENT_USER"?e.currentUser:t}function wf(t=void 0,e){return e.type==="RECEIVE_CURRENT_THEME"?e.currentTheme.stylesheet:t}function _f(t=void 0,e){return e.type==="RECEIVE_CURRENT_GLOBAL_STYLES_ID"?e.id:t}function bf(t={},e){return e.type==="RECEIVE_THEME_GLOBAL_STYLES"?{...t,[e.stylesheet]:e.globalStyles}:t}function vf(t={},e){return e.type==="RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS"?{...t,[e.stylesheet]:e.variations}:t}var Sf=t=>(e,r)=>{if(r.type==="UNDO"||r.type==="REDO"){let{record:n}=r,s=e;return n.forEach(({id:{kind:o,name:i,recordId:c},changes:a})=>{s=t(s,{type:"EDIT_ENTITY_RECORD",kind:o,name:i,recordId:c,edits:Object.entries(a).reduce((u,[l,d])=>(u[l]=r.type==="UNDO"?d.from:d.to,u),{})})}),s}return t(e,r)};function Rf(t){return(0,na.compose)([Sf,Dt(e=>e.name&&e.kind&&e.name===t.name&&e.kind===t.kind),kt(e=>({key:t.key||D,...e}))])((0,ur.combineReducers)({queriedData:mn,edits:(e={},r)=>{switch(r.type){case"RECEIVE_ITEMS":if((r?.query?.context??"default")!=="default")return e;let s={...e};for(let i of r.items){let c=i?.[r.key],a=s[c];if(!a)continue;let u=Object.keys(a).reduce((l,d)=>(!(0,qs.default)(a[d],i[d]?.raw??i[d])&&(!r.persistedEdits||!(0,qs.default)(a[d],r.persistedEdits[d]))&&(l[d]=a[d]),l),{});Object.keys(u).length?s[c]=u:delete s[c]}return s;case"EDIT_ENTITY_RECORD":let o={...e[r.recordId],...r.edits};return Object.keys(o).forEach(i=>{o[i]===void 0&&delete o[i]}),{...e,[r.recordId]:o}}return e},saving:(e={},r)=>{switch(r.type){case"SAVE_ENTITY_RECORD_START":case"SAVE_ENTITY_RECORD_FINISH":return{...e,[r.recordId]:{pending:r.type==="SAVE_ENTITY_RECORD_START",error:r.error,isAutosave:r.isAutosave}}}return e},deleting:(e={},r)=>{switch(r.type){case"DELETE_ENTITY_RECORD_START":case"DELETE_ENTITY_RECORD_FINISH":return{...e,[r.recordId]:{pending:r.type==="DELETE_ENTITY_RECORD_START",error:r.error}}}return e},revisions:(e={},r)=>{if(r.type==="RECEIVE_ITEM_REVISIONS"){let n=r.recordKey;delete r.recordKey;let s=mn(e[n],{...r,type:"RECEIVE_ITEMS"});return{...e,[n]:s}}return r.type==="REMOVE_ITEMS"?Object.fromEntries(Object.entries(e).filter(([n])=>!r.itemIds.some(s=>Number.isInteger(s)?s===+n:s===n))):e}}))}function xf(t=pn,e){return e.type==="ADD_ENTITIES"?[...t,...e.entities]:t}var Tf=(t={},e)=>{let r=xf(t.config,e),n=t.reducer;if(!n||r!==t.config){let o=r.reduce((i,c)=>{let{kind:a}=c;return i[a]||(i[a]=[]),i[a].push(c),i},{});n=(0,ur.combineReducers)(Object.fromEntries(Object.entries(o).map(([i,c])=>{let a=(0,ur.combineReducers)(Object.fromEntries(c.map(u=>[u.name,Rf(u)])));return[i,a]})))}let s=n(t.records,e);return s===t.records&&r===t.config&&n===t.reducer?t:{reducer:n,records:s,config:r}};function Cf(t=(0,sa.createUndoManager)()){return t}function If(t={},e){switch(e.type){case"EDIT_ENTITY_RECORD":case"UNDO":case"REDO":return{}}return t}function Af(t={},e){if(e.type==="RECEIVE_EMBED_PREVIEW"){let{url:r,preview:n}=e;return{...t,[r]:n}}return t}function Uf(t={},e){switch(e.type){case"RECEIVE_USER_PERMISSION":return{...t,[e.key]:e.isAllowed};case"RECEIVE_USER_PERMISSIONS":return{...t,...e.permissions}}return t}function Df(t={},e){if(e.type==="RECEIVE_AUTOSAVES"){let{postId:r,autosaves:n}=e;return{...t,[r]:n}}return t}function kf(t=[],e){return e.type==="RECEIVE_BLOCK_PATTERNS"?e.patterns:t}function Of(t=[],e){return e.type==="RECEIVE_BLOCK_PATTERN_CATEGORIES"?e.categories:t}function Mf(t=[],e){return e.type==="RECEIVE_USER_PATTERN_CATEGORIES"?e.patternCategories:t}function Nf(t=null,e){return e.type==="RECEIVE_NAVIGATION_FALLBACK_ID"?e.fallbackId:t}function Lf(t={},e){return e.type==="RECEIVE_THEME_GLOBAL_STYLE_REVISIONS"?{...t,[e.currentId]:e.revisions}:t}function Pf(t={},e){return e.type==="RECEIVE_DEFAULT_TEMPLATE"?{...t,[JSON.stringify(e.query)]:e.templateId}:t}function Vf(t={},e){return e.type==="RECEIVE_REGISTERED_POST_META"?{...t,[e.postType]:e.registeredPostMeta}:t}function Bf(t=null,e){return e.type==="RECEIVE_EDITOR_SETTINGS"?e.settings:t}function jf(t=null,e){return e.type==="RECEIVE_EDITOR_ASSETS"?e.assets:t}var oa=(0,ur.combineReducers)({users:yf,currentTheme:wf,currentGlobalStylesId:_f,currentUser:Ef,themeGlobalStyleVariations:vf,themeBaseGlobalStyles:bf,themeGlobalStyleRevisions:Lf,entities:Tf,editsReference:If,undoManager:Cf,embedPreviews:Af,userPermissions:Uf,autosaves:Df,blockPatterns:kf,blockPatternCategories:Of,userPatternCategories:Mf,navigationFallbackId:Nf,defaultTemplates:Pf,registeredPostMeta:Vf,editorSettings:Bf,editorAssets:jf});var ro={};st(ro,{__experimentalGetCurrentGlobalStylesId:()=>_a,__experimentalGetCurrentThemeBaseGlobalStyles:()=>xh,__experimentalGetCurrentThemeGlobalStylesVariations:()=>Th,__experimentalGetDirtyEntityRecords:()=>ch,__experimentalGetEntitiesBeingSaved:()=>ah,__experimentalGetEntityRecordNoResolver:()=>nh,canUser:()=>ba,canUserEditEntityRecord:()=>_h,getAuthors:()=>Xf,getAutosave:()=>vh,getAutosaves:()=>bh,getBlockPatternCategories:()=>Ih,getBlockPatterns:()=>Ch,getCurrentTheme:()=>wn,getCurrentThemeGlobalStylesRevisions:()=>Uh,getCurrentUser:()=>Zf,getDefaultTemplateId:()=>Xs,getEditedEntityRecord:()=>eo,getEmbedPreview:()=>Eh,getEntitiesByKind:()=>eh,getEntitiesConfig:()=>ma,getEntity:()=>th,getEntityConfig:()=>Ct,getEntityRecord:()=>le,getEntityRecordEdits:()=>Zs,getEntityRecordNonTransientEdits:()=>Ea,getEntityRecords:()=>En,getEntityRecordsTotalItems:()=>oh,getEntityRecordsTotalPages:()=>ih,getLastEntityDeleteError:()=>fh,getLastEntitySaveError:()=>dh,getRawEntityRecord:()=>ya,getRedoEdit:()=>ph,getReferenceByDistinctEdits:()=>Rh,getRevision:()=>kh,getRevisions:()=>Dh,getThemeSupports:()=>yh,getUndoEdit:()=>hh,getUserPatternCategories:()=>Ah,getUserQueryResults:()=>ga,hasEditsForEntityRecord:()=>wa,hasEntityRecord:()=>rh,hasEntityRecords:()=>sh,hasFetchedAutosaves:()=>Sh,hasRedo:()=>mh,hasUndo:()=>gh,isAutosavingEntityRecord:()=>lh,isDeletingEntityRecord:()=>uh,isPreviewEmbedFallback:()=>wh,isRequestingEmbedPreview:()=>Jf,isSavingEntityRecord:()=>to});var re=E(ne(),1),pa=E(Ie(),1),Ve=E(rt(),1);var Js={};st(Js,{getBlockPatternsForPostType:()=>Gf,getEditorAssets:()=>qf,getEditorSettings:()=>Wf,getEntityRecordPermissions:()=>Yf,getEntityRecordsPermissions:()=>fa,getHomePage:()=>Kf,getNavigationFallbackId:()=>Ff,getPostsPageId:()=>zf,getRegisteredPostMeta:()=>$f,getTemplateId:()=>Hf,getUndoManager:()=>yn});var Ee=E(ne(),1);var la=E(aa(),1),{lock:ua,unlock:ye}=(0,la.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of WordPress.","@wordpress/core-data");var da=E(rt(),1);var Qs=!1;function T(t,e,r,{alternativeFunctionName:n,isShorthandSelector:s=!1}={}){let o=Xc[t]?.[e];if(o){if(!Qs){let{alternative:i}=o,c=s?`'${r}'`:`The '${t}', '${e}' entity (used via '${r}')`,a=`the '${i.kind}', '${i.name}' entity`;n&&(a+=` via the '${n}' function`),(0,da.default)(c,{...o,alternative:a})}Qs=!0,setTimeout(()=>{Qs=!1},0)}}function yn(t){return t.undoManager}function Ff(t){return t.navigationFallbackId}var Gf=(0,Ee.createRegistrySelector)(t=>(0,Ee.createSelector)((e,r)=>t(x).getBlockPatterns().filter(({postTypes:n})=>!n||Array.isArray(n)&&n.includes(r)),()=>[t(x).getBlockPatterns()])),fa=(0,Ee.createRegistrySelector)(t=>(0,Ee.createSelector)((e,r,n,s)=>(Array.isArray(s)?s:[s]).map(i=>({delete:t(x).canUser("delete",{kind:r,name:n,id:i}),update:t(x).canUser("update",{kind:r,name:n,id:i})})),e=>[e.userPermissions]));function Yf(t,e,r,n){return T(e,r,"getEntityRecordPermissions"),fa(t,e,r,n)[0]}function $f(t,e){return t.registeredPostMeta?.[e]??{}}function ha(t){return!t||!["number","string"].includes(typeof t)||Number(t)===0?null:t.toString()}var Kf=(0,Ee.createRegistrySelector)(t=>(0,Ee.createSelector)(()=>{let e=t(x).getEntityRecord("root","__unstableBase");if(!e)return null;let r=e?.show_on_front==="page"?ha(e.page_on_front):null;if(r)return{postType:"page",postId:r};let n=t(x).getDefaultTemplateId({slug:"front-page"});return n?{postType:"wp_template",postId:n}:null},e=>[le(e,"root","site"),le(e,"root","__unstableBase"),Xs(e,{slug:"front-page"})])),zf=(0,Ee.createRegistrySelector)(t=>()=>{let e=t(x).getEntityRecord("root","__unstableBase");return e?.show_on_front==="page"?ha(e.page_for_posts):null}),Hf=(0,Ee.createRegistrySelector)(t=>(e,r,n)=>{let s=ye(t(x)).getHomePage();if(!s)return;if(r==="page"&&r===s?.postType&&n.toString()===s?.postId){let u=t(x).getEntityRecords("postType","wp_template",{per_page:-1});if(!u)return;let l=u.find(({slug:d})=>d==="front-page")?.id;if(l)return l}let o=t(x).getEditedEntityRecord("postType",r,n);if(!o)return;let i=ye(t(x)).getPostsPageId();if(r==="page"&&i===n.toString())return t(x).getDefaultTemplateId({slug:"home"});let c=o.template;if(c){let u=t(x).getEntityRecords("postType","wp_template",{per_page:-1})?.find(({slug:l})=>l===c);if(u)return u.id}let a;return o.slug?a=r==="page"?`${r}-${o.slug}`:`single-${r}-${o.slug}`:a=r==="page"?"page":`single-${r}`,t(x).getDefaultTemplateId({slug:a})});function Wf(t){return t.editorSettings}function qf(t){return t.editorAssets}var Qf={},Jf=(0,re.createRegistrySelector)(t=>(e,r)=>t(x).isResolving("getEmbedPreview",[r]));function Xf(t,e){(0,Ve.default)("select( 'core' ).getAuthors()",{since:"5.9",alternative:"select( 'core' ).getUsers({ who: 'authors' })"});let r=(0,pa.addQueryArgs)("/wp/v2/users/?who=authors&per_page=100",e);return ga(t,r)}function Zf(t){return t.currentUser}var ga=(0,re.createSelector)((t,e)=>(t.users.queries[e]??[]).map(n=>t.users.byId[n]),(t,e)=>[t.users.queries[e],t.users.byId]);function eh(t,e){return(0,Ve.default)("wp.data.select( 'core' ).getEntitiesByKind()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntitiesConfig()"}),ma(t,e)}var ma=(0,re.createSelector)((t,e)=>t.entities.config.filter(r=>r.kind===e),(t,e)=>t.entities.config);function th(t,e,r){return(0,Ve.default)("wp.data.select( 'core' ).getEntity()",{since:"6.0",alternative:"wp.data.select( 'core' ).getEntityConfig()"}),Ct(t,e,r)}function Ct(t,e,r){return T(e,r,"getEntityConfig"),t.entities.config?.find(n=>n.kind===e&&n.name===r)}var le=(0,re.createSelector)(((t,e,r,n,s)=>{T(e,r,"getEntityRecord");let o=t.entities.records?.[e]?.[r]?.queriedData;if(!o)return;let i=s?.context??"default";if(!s||!s._fields)return o.itemIsComplete[i]?.[n]?o.items[i][n]:void 0;let c=o.items[i]?.[n];if(!c)return c;let a={},u=H(s._fields)??[];for(let l=0;l<u.length;l++){let d=u[l].split("."),f=c;d.forEach(h=>{f=f?.[h]}),Ce(a,d,f)}return a}),(t,e,r,n,s)=>{let o=s?.context??"default",i=t.entities.records?.[e]?.[r]?.queriedData;return[i?.items[o]?.[n],i?.itemIsComplete[o]?.[n]]});le.__unstableNormalizeArgs=t=>{let e=[...t],r=e?.[2];return e[2]=Nn(r)?Number(r):r,e};function rh(t,e,r,n,s){let o=t.entities.records?.[e]?.[r]?.queriedData;if(!o)return!1;let i=s?.context??"default";if(!s||!s._fields)return!!o.itemIsComplete[i]?.[n];let c=o.items[i]?.[n];if(!c)return!1;let a=H(s._fields)??[];for(let u=0;u<a.length;u++){let l=a[u].split("."),d=c;for(let f=0;f<l.length;f++){let h=l[f];if(!d||!Object.hasOwn(d,h))return!1;d=d[h]}}return!0}function nh(t,e,r,n){return le(t,e,r,n)}var ya=(0,re.createSelector)((t,e,r,n)=>{T(e,r,"getRawEntityRecord");let s=le(t,e,r,n);return s&&Object.keys(s).reduce((o,i)=>(On(Ct(t,e,r),i)?o[i]=s[i]?.raw!==void 0?s[i]?.raw:s[i]:o[i]=s[i],o),{})},(t,e,r,n,s)=>{let o=s?.context??"default";return[t.entities.config,t.entities.records?.[e]?.[r]?.queriedData?.items[o]?.[n],t.entities.records?.[e]?.[r]?.queriedData?.itemIsComplete[o]?.[n]]});function sh(t,e,r,n){return T(e,r,"hasEntityRecords"),Array.isArray(En(t,e,r,n))}var En=((t,e,r,n)=>{T(e,r,"getEntityRecords");let s=t.entities.records?.[e]?.[r]?.queriedData;return s?Pn(s,n):null}),oh=(t,e,r,n)=>{T(e,r,"getEntityRecordsTotalItems");let s=t.entities.records?.[e]?.[r]?.queriedData;return s?Vn(s,n):null},ih=(t,e,r,n)=>{T(e,r,"getEntityRecordsTotalPages");let s=t.entities.records?.[e]?.[r]?.queriedData;if(!s)return null;if(n?.per_page===-1)return 1;let o=Vn(s,n);return o&&(n?.per_page?Math.ceil(o/n.per_page):zo(s,n))},ch=(0,re.createSelector)(t=>{let{entities:{records:e}}=t,r=[];return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(s=>{let o=Object.keys(e[n][s].edits).filter(i=>le(t,n,s,i)&&wa(t,n,s,i));if(o.length){let i=Ct(t,n,s);o.forEach(c=>{let a=eo(t,n,s,c);r.push({key:a?a[i.key||D]:void 0,title:i?.getTitle?.(a)||"",name:s,kind:n})})}})}),r},t=>[t.entities.records]),ah=(0,re.createSelector)(t=>{let{entities:{records:e}}=t,r=[];return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(s=>{let o=Object.keys(e[n][s].saving).filter(i=>to(t,n,s,i));if(o.length){let i=Ct(t,n,s);o.forEach(c=>{let a=eo(t,n,s,c);r.push({key:a?a[i.key||D]:void 0,title:i?.getTitle?.(a)||"",name:s,kind:n})})}})}),r},t=>[t.entities.records]);function Zs(t,e,r,n){return T(e,r,"getEntityRecordEdits"),t.entities.records?.[e]?.[r]?.edits?.[n]}var Ea=(0,re.createSelector)((t,e,r,n)=>{T(e,r,"getEntityRecordNonTransientEdits");let{transientEdits:s}=Ct(t,e,r)||{},o=Zs(t,e,r,n)||{};return s?Object.keys(o).reduce((i,c)=>(s[c]||(i[c]=o[c]),i),{}):o},(t,e,r,n)=>[t.entities.config,t.entities.records?.[e]?.[r]?.edits?.[n]]);function wa(t,e,r,n){return T(e,r,"hasEditsForEntityRecord"),to(t,e,r,n)||Object.keys(Ea(t,e,r,n)).length>0}var eo=(0,re.createSelector)((t,e,r,n)=>{T(e,r,"getEditedEntityRecord");let s=ya(t,e,r,n),o=Zs(t,e,r,n);return!s&&!o?!1:{...s,...o}},(t,e,r,n,s)=>{let o=s?.context??"default";return[t.entities.config,t.entities.records?.[e]?.[r]?.queriedData.items[o]?.[n],t.entities.records?.[e]?.[r]?.queriedData.itemIsComplete[o]?.[n],t.entities.records?.[e]?.[r]?.edits?.[n]]});function lh(t,e,r,n){T(e,r,"isAutosavingEntityRecord");let{pending:s,isAutosave:o}=t.entities.records?.[e]?.[r]?.saving?.[n]??{};return!!(s&&o)}function to(t,e,r,n){return T(e,r,"isSavingEntityRecord"),t.entities.records?.[e]?.[r]?.saving?.[n]?.pending??!1}function uh(t,e,r,n){return T(e,r,"isDeletingEntityRecord"),t.entities.records?.[e]?.[r]?.deleting?.[n]?.pending??!1}function dh(t,e,r,n){return T(e,r,"getLastEntitySaveError"),t.entities.records?.[e]?.[r]?.saving?.[n]?.error}function fh(t,e,r,n){return T(e,r,"getLastEntityDeleteError"),t.entities.records?.[e]?.[r]?.deleting?.[n]?.error}function hh(t){(0,Ve.default)("select( 'core' ).getUndoEdit()",{since:"6.3"})}function ph(t){(0,Ve.default)("select( 'core' ).getRedoEdit()",{since:"6.3"})}function gh(t){return yn(t).hasUndo()}function mh(t){return yn(t).hasRedo()}function wn(t){return t.currentTheme?le(t,"root","theme",t.currentTheme):null}function _a(t){return t.currentGlobalStylesId}function yh(t){return wn(t)?.theme_supports??Qf}function Eh(t,e){return t.embedPreviews[e]}function wh(t,e){let r=t.embedPreviews[e],n='<a href="'+e+'">'+e+"</a>";return r?r.html===n:!1}function ba(t,e,r,n){let s=typeof r=="object";if(s&&(!r.kind||!r.name))return!1;s&&T(r.kind,r.name,"canUser");let o=Ge(e,r,n);return t.userPermissions[o]}function _h(t,e,r,n){return(0,Ve.default)("wp.data.select( 'core' ).canUserEditEntityRecord()",{since:"6.7",alternative:"wp.data.select( 'core' ).canUser( 'update', { kind, name, id } )"}),ba(t,"update",{kind:e,name:r,id:n})}function bh(t,e,r){return t.autosaves[r]}function vh(t,e,r,n){return n===void 0?void 0:t.autosaves[r]?.find(o=>o.author===n)}var Sh=(0,re.createRegistrySelector)(t=>(e,r,n)=>t(x).hasFinishedResolution("getAutosaves",[r,n]));function Rh(t){return t.editsReference}function xh(t){let e=wn(t);return e?t.themeBaseGlobalStyles[e.stylesheet]:null}function Th(t){let e=wn(t);return e?t.themeGlobalStyleVariations[e.stylesheet]:null}function Ch(t){return t.blockPatterns}function Ih(t){return t.blockPatternCategories}function Ah(t){return t.userPatternCategories}function Uh(t){(0,Ve.default)("select( 'core' ).getCurrentThemeGlobalStylesRevisions()",{since:"6.5.0",alternative:"select( 'core' ).getRevisions( 'root', 'globalStyles', ${ recordKey } )"});let e=_a(t);return e?t.themeGlobalStyleRevisions[e]:null}function Xs(t,e){return t.defaultTemplates[JSON.stringify(e)]}var Dh=(t,e,r,n,s)=>{T(e,r,"getRevisions");let o=t.entities.records?.[e]?.[r]?.revisions?.[n];return o?Pn(o,s):null},kh=(0,re.createSelector)((t,e,r,n,s,o)=>{T(e,r,"getRevision");let i=t.entities.records?.[e]?.[r]?.revisions?.[n];if(!i)return;let c=o?.context??"default";if(!o||!o._fields)return i.itemIsComplete[c]?.[s]?i.items[c][s]:void 0;let a=i.items[c]?.[s];if(!a)return a;let u={},l=H(o._fields)??[];for(let d=0;d<l.length;d++){let f=l[d].split("."),h=a;f.forEach(p=>{h=h?.[p]}),Ce(u,f,h)}return u},(t,e,r,n,s,o)=>{let i=o?.context??"default",c=t.entities.records?.[e]?.[r]?.revisions?.[n];return[c?.items?.[i]?.[s],c?.itemIsComplete?.[i]?.[s]]});var lo={};st(lo,{__experimentalBatch:()=>Qh,__experimentalReceiveCurrentGlobalStylesId:()=>jh,__experimentalReceiveThemeBaseGlobalStyles:()=>Fh,__experimentalReceiveThemeGlobalStyleVariations:()=>Gh,__experimentalSaveSpecifiedEntityEdits:()=>Xh,__unstableCreateUndoLevel:()=>qh,addEntities:()=>Ph,deleteEntityRecord:()=>co,editEntityRecord:()=>zh,receiveAutosaves:()=>tp,receiveCurrentTheme:()=>Bh,receiveCurrentUser:()=>Lh,receiveDefaultTemplateId:()=>np,receiveEmbedPreview:()=>Kh,receiveEntityRecords:()=>Vh,receiveNavigationFallbackId:()=>rp,receiveRevisions:()=>sp,receiveThemeGlobalStyleRevisions:()=>$h,receiveThemeSupports:()=>Yh,receiveUploadPermissions:()=>Zh,receiveUserPermission:()=>xa,receiveUserPermissions:()=>ep,receiveUserQuery:()=>Nh,redo:()=>Wh,saveEditedEntityRecord:()=>Jh,saveEntityRecord:()=>ao,undo:()=>Hh});var Sa=E(Sr(),1);var io=E(be(),1),Ra=E(Ie(),1),_n=E(rt(),1);var so=E(be(),1),no=null;function Oh(t,e){let r=[...t],n=[];for(;r.length;)n.push(r.splice(0,e));return n}async function va(t){no===null&&(no=(await(0,so.default)({path:"/batch/v1",method:"OPTIONS"})).endpoints[0].args.requests.maxItems);let e=[];for(let r of Oh(t,no)){let n=await(0,so.default)({path:"/batch/v1",method:"POST",data:{validation:"require-all-validate",requests:r.map(o=>({path:o.path,body:o.data,method:o.method,headers:o.headers}))}}),s;n.failed?s=n.responses.map(o=>({error:o?.body})):s=n.responses.map(o=>{let i={};return o.status>=200&&o.status<300?i.output=o.body:i.error=o.body,i}),e.push(...s)}return e}function oo(t=va){let e=0,r=[],n=new Mh;return{add(s){let o=++e;n.add(o);let i=c=>new Promise((a,u)=>{r.push({input:c,resolve:a,reject:u}),n.delete(o)});return typeof s=="function"?Promise.resolve(s(i)).finally(()=>{n.delete(o)}):i(s)},async run(){n.size&&await new Promise(i=>{let c=n.subscribe(()=>{n.size||(c(),i(void 0))})});let s;try{if(s=await t(r.map(({input:i})=>i)),s.length!==r.length)throw new Error("run: Array returned by processor must be same size as input array.")}catch(i){for(let{reject:c}of r)c(i);throw i}let o=!0;return s.forEach((i,c)=>{let a=r[c];i?.error?(a?.reject(i.error),o=!1):a?.resolve(i?.output??i)}),r=[],o}}}var Mh=class{constructor(...t){this.set=new Set(...t),this.subscribers=new Set}get size(){return this.set.size}add(t){return this.set.add(t),this.subscribers.forEach(e=>e()),this}delete(t){let e=this.set.delete(t);return this.subscribers.forEach(r=>r()),e}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}};function Nh(t,e){return{type:"RECEIVE_USER_QUERY",users:Array.isArray(e)?e:[e],queryID:t}}function Lh(t){return{type:"RECEIVE_CURRENT_USER",currentUser:t}}function Ph(t){return{type:"ADD_ENTITIES",entities:t}}function Vh(t,e,r,n=void 0,s=!1,o=void 0,i=void 0){t==="postType"&&(r=(Array.isArray(r)?r:[r]).map(a=>a.status==="auto-draft"?{...a,title:""}:a));let c;return n?c=Lo(r,n,o,i):c=Ln(r,o,i),{...c,kind:t,name:e,invalidateCache:s}}function Bh(t){return{type:"RECEIVE_CURRENT_THEME",currentTheme:t}}function jh(t){return{type:"RECEIVE_CURRENT_GLOBAL_STYLES_ID",id:t}}function Fh(t,e){return{type:"RECEIVE_THEME_GLOBAL_STYLES",stylesheet:t,globalStyles:e}}function Gh(t,e){return{type:"RECEIVE_THEME_GLOBAL_STYLE_VARIATIONS",stylesheet:t,variations:e}}function Yh(){return(0,_n.default)("wp.data.dispatch( 'core' ).receiveThemeSupports",{since:"5.9"}),{type:"DO_NOTHING"}}function $h(t,e){return(0,_n.default)("wp.data.dispatch( 'core' ).receiveThemeGlobalStyleRevisions()",{since:"6.5.0",alternative:"wp.data.dispatch( 'core' ).receiveRevisions"}),{type:"RECEIVE_THEME_GLOBAL_STYLE_REVISIONS",currentId:t,revisions:e}}function Kh(t,e){return{type:"RECEIVE_EMBED_PREVIEW",url:t,preview:e}}var co=(t,e,r,n,{__unstableFetch:s=io.default,throwOnError:o=!1}={})=>async({dispatch:i,resolveSelect:c})=>{T(t,e,"deleteEntityRecord");let u=(await c.getEntitiesConfig(t)).find(h=>h.kind===t&&h.name===e),l,d=!1;if(!u)return;let f=await i.__unstableAcquireStoreLock(x,["entities","records",t,e,r],{exclusive:!0});try{i({type:"DELETE_ENTITY_RECORD_START",kind:t,name:e,recordId:r});let h=!1,{baseURL:p}=u;t==="postType"&&e==="wp_template"&&(r&&typeof r=="string"&&!/^\d+$/.test(r)||!window?.__experimentalTemplateActivate)&&(p=p.slice(0,p.lastIndexOf("/"))+"/templates");try{let g=`${p}/${r}`;n&&(g=(0,Ra.addQueryArgs)(g,n)),d=await s({path:g,method:"DELETE"}),await i(No(t,e,r,!0))}catch(g){h=!0,l=g}if(i({type:"DELETE_ENTITY_RECORD_FINISH",kind:t,name:e,recordId:r,error:l}),h&&o)throw l;return d}finally{i.__unstableReleaseStoreLock(f)}},zh=(t,e,r,n,s={})=>({select:o,dispatch:i})=>{T(t,e,"editEntityRecord");let c=o.getEntityConfig(t,e);if(!c)throw new Error(`The entity being edited (${t}, ${e}) does not have a loaded config.`);let{mergedEdits:a={}}=c,u=o.getRawEntityRecord(t,e,r),l=o.getEditedEntityRecord(t,e,r),d=Object.keys(n).reduce((h,p)=>(h[p]=a[p]?{...l[p],...n[p]}:n[p],h),{}),f={kind:t,name:e,recordId:r,edits:Object.keys(n).reduce((h,p)=>{let g=u[p],m=d[p];return h[p]=(0,Sa.default)(g,m)?void 0:m,h},{})};s.undoIgnore||o.getUndoManager().addRecord([{id:{kind:t,name:e,recordId:r},changes:Object.keys(n).reduce((h,p)=>(h[p]={from:l[p],to:n[p]},h),{})}],s.isCached),i({type:"EDIT_ENTITY_RECORD",...f})},Hh=()=>({select:t,dispatch:e})=>{let r=t.getUndoManager().undo();r&&e({type:"UNDO",record:r})},Wh=()=>({select:t,dispatch:e})=>{let r=t.getUndoManager().redo();r&&e({type:"REDO",record:r})},qh=()=>({select:t})=>{t.getUndoManager().addRecord()},ao=(t,e,r,{isAutosave:n=!1,__unstableFetch:s=io.default,throwOnError:o=!1}={})=>async({select:i,resolveSelect:c,dispatch:a})=>{T(t,e,"saveEntityRecord");let l=(await c.getEntitiesConfig(t)).find(g=>g.kind===t&&g.name===e);if(!l)return;let d=l.key??D,f=r[d],h=!!d&&!f,p=await a.__unstableAcquireStoreLock(x,["entities","records",t,e,f||Ws()],{exclusive:!0});try{for(let[v,_]of Object.entries(r))if(typeof _=="function"){let b=_(i.getEditedEntityRecord(t,e,f));a.editEntityRecord(t,e,f,{[v]:b},{undoIgnore:!0}),r[v]=b}a({type:"SAVE_ENTITY_RECORD_START",kind:t,name:e,recordId:f,isAutosave:n});let g,m,y=!1,{baseURL:w}=l;t==="postType"&&e==="wp_template"&&(f&&typeof f=="string"&&!/^\d+$/.test(f)||!window?.__experimentalTemplateActivate)&&(w=w.slice(0,w.lastIndexOf("/"))+"/templates");try{let v=`${w}${f?"/"+f:""}`,_=h?{}:i.getRawEntityRecord(t,e,f);if(n){let b=i.getCurrentUser(),j=b?b.id:void 0,ee=await c.getAutosave(_.type,_.id,j),F={..._,...ee,...r};if(F=Object.keys(F).reduce((G,z)=>(["title","excerpt","content","meta"].includes(z)&&(G[z]=F[z]),G),{status:F.status==="auto-draft"?"draft":void 0}),g=await s({path:`${v}/autosaves`,method:"POST",data:F}),_.id===g.id){let G={..._,...F,...g};G=Object.keys(G).reduce((z,W)=>(["title","excerpt","content"].includes(W)?z[W]=G[W]:W==="status"?z[W]=_.status==="auto-draft"&&G.status==="draft"?G.status:_.status:z[W]=_[W],z),{}),a.receiveEntityRecords(t,e,G,void 0,!0)}else a.receiveAutosaves(_.id,g)}else{let b=r;l.__unstablePrePersist&&(b={...b,...l.__unstablePrePersist(_,b)}),g=await s({path:v,method:f?"PUT":"POST",data:b}),a.receiveEntityRecords(t,e,g,void 0,!0,b)}}catch(v){y=!0,m=v}if(a({type:"SAVE_ENTITY_RECORD_FINISH",kind:t,name:e,recordId:f,error:m,isAutosave:n}),y&&o)throw m;return g}finally{a.__unstableReleaseStoreLock(p)}},Qh=t=>async({dispatch:e})=>{let r=oo(),n={saveEntityRecord(i,c,a,u){return r.add(l=>e.saveEntityRecord(i,c,a,{...u,__unstableFetch:l}))},saveEditedEntityRecord(i,c,a,u){return r.add(l=>e.saveEditedEntityRecord(i,c,a,{...u,__unstableFetch:l}))},deleteEntityRecord(i,c,a,u,l){return r.add(d=>e.deleteEntityRecord(i,c,a,u,{...l,__unstableFetch:d}))}},s=t.map(i=>i(n)),[,...o]=await Promise.all([r.run(),...s]);return o},Jh=(t,e,r,n)=>async({select:s,dispatch:o,resolveSelect:i})=>{if(T(t,e,"saveEditedEntityRecord"),!s.hasEditsForEntityRecord(t,e,r))return;let a=(await i.getEntitiesConfig(t)).find(f=>f.kind===t&&f.name===e);if(!a)return;let u=a.key||D,l=s.getEntityRecordNonTransientEdits(t,e,r),d={[u]:r,...l};return await o.saveEntityRecord(t,e,d,n)},Xh=(t,e,r,n,s)=>async({select:o,dispatch:i,resolveSelect:c})=>{if(T(t,e,"__experimentalSaveSpecifiedEntityEdits"),!o.hasEditsForEntityRecord(t,e,r))return;let a=o.getEntityRecordNonTransientEdits(t,e,r),u={};for(let h of n)Ce(u,h,Mn(a,h));let f=(await c.getEntitiesConfig(t)).find(h=>h.kind===t&&h.name===e)?.key||D;return r&&(u[f]=r),await i.saveEntityRecord(t,e,u,s)};function Zh(t){return(0,_n.default)("wp.data.dispatch( 'core' ).receiveUploadPermissions",{since:"5.9",alternative:"receiveUserPermission"}),xa("create/media",t)}function xa(t,e){return{type:"RECEIVE_USER_PERMISSION",key:t,isAllowed:e}}function ep(t){return{type:"RECEIVE_USER_PERMISSIONS",permissions:t}}function tp(t,e){return{type:"RECEIVE_AUTOSAVES",postId:t,autosaves:Array.isArray(e)?e:[e]}}function rp(t){return{type:"RECEIVE_NAVIGATION_FALLBACK_ID",fallbackId:t}}function np(t,e){return{type:"RECEIVE_DEFAULT_TEMPLATE",query:t,templateId:e}}var sp=(t,e,r,n,s,o=!1,i)=>async({dispatch:c,resolveSelect:a})=>{T(t,e,"receiveRevisions");let l=(await a.getEntitiesConfig(t)).find(f=>f.kind===t&&f.name===e),d=l&&l?.revisionKey?l.revisionKey:D;c({type:"RECEIVE_ITEM_REVISIONS",key:d,items:Array.isArray(n)?n:[n],recordKey:r,meta:i,query:s,kind:t,name:e,invalidateCache:o})};var uo={};st(uo,{editMediaEntity:()=>ip,receiveEditorAssets:()=>ap,receiveEditorSettings:()=>cp,receiveRegisteredPostMeta:()=>op});var Ta=E(be(),1);function op(t,e){return{type:"RECEIVE_REGISTERED_POST_META",postType:t,registeredPostMeta:e}}var ip=(t,e={},{__unstableFetch:r=Ta.default,throwOnError:n=!1}={})=>async({dispatch:s,resolveSelect:o})=>{if(!t)return;let i="postType",c="attachment",u=(await o.getEntitiesConfig(i)).find(p=>p.kind===i&&p.name===c);if(!u)return;let l=await s.__unstableAcquireStoreLock(x,["entities","records",i,c,t],{exclusive:!0}),d,f,h=!1;try{s({type:"SAVE_ENTITY_RECORD_START",kind:i,name:c,recordId:t});try{let p=`${u.baseURL}/${t}/edit`,g=await r({path:p,method:"POST",data:{...e}});g&&(s.receiveEntityRecords(i,c,[g],void 0,!0,void 0,void 0),d=g)}catch(p){f=p,h=!0}if(s({type:"SAVE_ENTITY_RECORD_FINISH",kind:i,name:c,recordId:t,error:f}),h&&n)throw f;return d}finally{s.__unstableReleaseStoreLock(l)}};function cp(t){return{type:"RECEIVE_EDITOR_SETTINGS",settings:t}}function ap(t){return{type:"RECEIVE_EDITOR_ASSETS",assets:t}}var go={};st(go,{__experimentalGetCurrentGlobalStylesId:()=>Sp,__experimentalGetCurrentThemeBaseGlobalStyles:()=>Rp,__experimentalGetCurrentThemeGlobalStylesVariations:()=>xp,canUser:()=>Ma,canUserEditEntityRecord:()=>_p,getAuthors:()=>dp,getAutosave:()=>vp,getAutosaves:()=>bp,getBlockPatternCategories:()=>Cp,getBlockPatterns:()=>Tp,getCurrentTheme:()=>yp,getCurrentThemeGlobalStylesRevisions:()=>Na,getCurrentUser:()=>fp,getDefaultTemplateId:()=>La,getEditedEntityRecord:()=>pp,getEditorAssets:()=>Mp,getEditorSettings:()=>Op,getEmbedPreview:()=>wp,getEntitiesConfig:()=>kp,getEntityRecord:()=>bn,getEntityRecords:()=>gr,getEntityRecordsTotalItems:()=>gp,getEntityRecordsTotalPages:()=>mp,getNavigationFallbackId:()=>Ap,getRawEntityRecord:()=>hp,getRegisteredPostMeta:()=>Dp,getRevision:()=>Up,getRevisions:()=>Pa,getThemeSupports:()=>Ep,getUserPatternCategories:()=>Ip});var _e=E(Ie(),1),Oa=E(fo(),1),k=E(be(),1);var ka=E(be(),1);var dr=E(be(),1),fr=E(Ie(),1),hr=E(fo(),1),pr=E(Fn(),1);async function Aa(t,e={},r={}){let n=e.isInitialSuggestions&&e.initialSuggestionsSearchOptions?{...e,...e.initialSuggestionsSearchOptions}:e,{type:s,subtype:o,page:i,perPage:c=e.isInitialSuggestions?3:20}=n,{disablePostFormats:a=!1}=r,u=[];(!s||s==="post")&&u.push((0,dr.default)({path:(0,fr.addQueryArgs)("/wp/v2/search",{search:t,page:i,per_page:c,type:"post",subtype:o})}).then(f=>f.map(h=>({id:h.id,url:h.url,title:(0,hr.decodeEntities)(h.title||"")||(0,pr.__)("(no title)"),type:h.subtype||h.type,kind:"post-type"}))).catch(()=>[])),(!s||s==="term")&&u.push((0,dr.default)({path:(0,fr.addQueryArgs)("/wp/v2/search",{search:t,page:i,per_page:c,type:"term",subtype:o})}).then(f=>f.map(h=>({id:h.id,url:h.url,title:(0,hr.decodeEntities)(h.title||"")||(0,pr.__)("(no title)"),type:h.subtype||h.type,kind:"taxonomy"}))).catch(()=>[])),!a&&(!s||s==="post-format")&&u.push((0,dr.default)({path:(0,fr.addQueryArgs)("/wp/v2/search",{search:t,page:i,per_page:c,type:"post-format",subtype:o})}).then(f=>f.map(h=>({id:h.id,url:h.url,title:(0,hr.decodeEntities)(h.title||"")||(0,pr.__)("(no title)"),type:h.subtype||h.type,kind:"taxonomy"}))).catch(()=>[])),(!s||s==="attachment")&&u.push((0,dr.default)({path:(0,fr.addQueryArgs)("/wp/v2/media",{search:t,page:i,per_page:c})}).then(f=>f.map(h=>({id:h.id,url:h.source_url,title:(0,hr.decodeEntities)(h.title.rendered||"")||(0,pr.__)("(no title)"),type:h.type,kind:"media"}))).catch(()=>[]));let d=(await Promise.all(u)).flat();return d=d.filter(f=>!!f.id),d=lp(d,t),d=d.slice(0,c),d}function lp(t,e){let r=Ia(e),n={};for(let s of t)if(s.title){let o=Ia(s.title),i=o.filter(l=>r.some(d=>l===d)),c=o.filter(l=>r.some(d=>l!==d&&l.includes(d))),a=i.length/o.length*10,u=c.length/o.length;n[s.id]=a+u}else n[s.id]=0;return t.sort((s,o)=>n[o.id]-n[s.id])}function Ia(t){return t.toLowerCase().match(/[\p{L}\p{N}]+/gu)||[]}var Ua=E(be(),1),we=E(Ie(),1),ho=new Map,up=async(t,e={})=>{let r="/wp-block-editor/v1/url-details",n={url:(0,we.prependHTTP)(t)};if(!(0,we.isURL)(t))return Promise.reject(`${t} is not a valid URL.`);let s=(0,we.getProtocol)(t);return!s||!(0,we.isValidProtocol)(s)||!s.startsWith("http")||!/^https?:\/\/[^\/\s]/i.test(t)?Promise.reject(`${t} does not have a valid protocol. URLs must be "http" based`):ho.has(t)?ho.get(t):(0,Ua.default)({path:(0,we.addQueryArgs)(r,n),...e}).then(o=>(ho.set(t,o),o))},Da=up;async function po(){let t=await(0,ka.default)({path:"/wp/v2/block-patterns/patterns"});return t?t.map(e=>Object.fromEntries(Object.entries(e).map(([r,n])=>[Tr(r),n]))):[]}var dp=t=>async({dispatch:e})=>{let r=(0,_e.addQueryArgs)("/wp/v2/users/?who=authors&per_page=100",t),n=await(0,k.default)({path:r});e.receiveUserQuery(r,n)},fp=()=>async({dispatch:t})=>{let e=await(0,k.default)({path:"/wp/v2/users/me"});t.receiveCurrentUser(e)},bn=(t,e,r="",n)=>async({select:s,dispatch:o,registry:i,resolveSelect:c})=>{let u=(await c.getEntitiesConfig(t)).find(d=>d.name===e&&d.kind===t);if(!u)return;let l=await o.__unstableAcquireStoreLock(x,["entities","records",t,e,r],{exclusive:!1});try{if(n!==void 0&&n._fields&&(n={...n,_fields:[...new Set([...H(n._fields)||[],u.key||D])].join()}),n!==void 0&&n._fields&&s.hasEntityRecord(t,e,r,n))return;let{baseURL:d}=u;t==="postType"&&e==="wp_template"&&(r&&typeof r=="string"&&!/^\d+$/.test(r)||!window?.__experimentalTemplateActivate)&&(d=d.slice(0,d.lastIndexOf("/"))+"/templates");let f=(0,_e.addQueryArgs)(d+(r?"/"+r:""),{...u.baseURLParams,...n}),h=await(0,k.default)({path:f,parse:!1}),p=await h.json(),g=Ot(h.headers?.get("allow")),m=[],y={};for(let w of Fe)y[Ge(w,{kind:t,name:e,id:r})]=g[w],m.push([w,{kind:t,name:e,id:r}]);i.batch(()=>{o.receiveEntityRecords(t,e,p,n),o.receiveUserPermissions(y),o.finishResolutions("canUser",m)})}finally{o.__unstableReleaseStoreLock(l)}};bn.shouldInvalidate=(t,e,r)=>e==="root"&&r==="site"&&(t.type==="RECEIVE_ITEMS"&&t.persistedEdits&&t.persistedEdits.status!=="auto-draft"||t.type==="REMOVE_ITEMS")&&t.kind==="postType"&&t.name==="wp_template";var hp=je("getEntityRecord"),pp=je("getEntityRecord"),gr=(t,e,r={})=>async({dispatch:n,registry:s,resolveSelect:o})=>{let c=(await o.getEntitiesConfig(t)).find(f=>f.name===e&&f.kind===t);if(!c)return;let a=await n.__unstableAcquireStoreLock(x,["entities","records",t,e],{exclusive:!1}),u={...r},l=c.key||D;function d(f,h){let p=Object.fromEntries(Object.entries(h).filter(([g,m])=>["context","_fields"].includes(g)&&!!m));return f.filter(g=>g?.[l]).map(g=>[t,e,g[l],Object.keys(p).length>0?p:void 0])}try{r._fields&&(r={...r,_fields:[...new Set([...H(r._fields)||[],l])].join()});let{baseURL:f}=c,{combinedTemplates:h=!0}=r;t==="postType"&&e==="wp_template"&&h&&(f=f.slice(0,f.lastIndexOf("/"))+"/templates");let p=(0,_e.addQueryArgs)(f,{...c.baseURLParams,...r}),g=[],m;if(c.supportsPagination&&r.per_page!==-1){let y=await(0,k.default)({path:p,parse:!1});g=Object.values(await y.json()),m={totalItems:parseInt(y.headers.get("X-WP-Total")),totalPages:parseInt(y.headers.get("X-WP-TotalPages"))}}else if(r.per_page===-1&&r[Mt]===!0){let y=1,w;do{let v=await(0,k.default)({path:(0,_e.addQueryArgs)(p,{page:y,per_page:100}),parse:!1}),_=Object.values(await v.json());w=parseInt(v.headers.get("X-WP-TotalPages")),m||(m={totalItems:parseInt(v.headers.get("X-WP-Total")),totalPages:1}),g.push(..._),s.batch(()=>{n.receiveEntityRecords(t,e,g,r,!1,void 0,m),n.finishResolutions("getEntityRecord",d(_,u))}),y++}while(y<=w)}else g=Object.values(await(0,k.default)({path:p})),m={totalItems:g.length,totalPages:1};r._fields&&(g=g.map(y=>(r._fields.split(",").forEach(w=>{y.hasOwnProperty(w)||(y[w]=void 0)}),y))),s.batch(()=>{n.receiveEntityRecords(t,e,g,r,!1,void 0,m);let y=g.filter(_=>!!_?.[l]&&!!_?._links?.self?.[0]?.targetHints?.allow).map(_=>({id:_[l],permissions:Ot(_._links.self[0].targetHints.allow)})),w=[],v={};for(let _ of y)for(let b of Fe)w.push([b,{kind:t,name:e,id:_.id}]),v[Ge(b,{kind:t,name:e,id:_.id})]=_.permissions[b];y.length>0&&(n.receiveUserPermissions(v),n.finishResolutions("canUser",w)),n.finishResolutions("getEntityRecord",d(g,u)),n.__unstableReleaseStoreLock(a)})}catch{n.__unstableReleaseStoreLock(a)}};gr.shouldInvalidate=(t,e,r)=>(t.type==="RECEIVE_ITEMS"||t.type==="REMOVE_ITEMS")&&t.invalidateCache&&e===t.kind&&r===t.name;var gp=je("getEntityRecords"),mp=je("getEntityRecords"),yp=()=>async({dispatch:t,resolveSelect:e})=>{let r=await e.getEntityRecords("root","theme",{status:"active"});t.receiveCurrentTheme(r[0])},Ep=je("getCurrentTheme"),wp=t=>async({dispatch:e})=>{try{let r=await(0,k.default)({path:(0,_e.addQueryArgs)("/oembed/1.0/proxy",{url:t})});e.receiveEmbedPreview(t,r)}catch{e.receiveEmbedPreview(t,!1)}},Ma=(t,e,r)=>async({dispatch:n,registry:s,resolveSelect:o})=>{if(!Fe.includes(t))throw new Error(`'${t}' is not a valid action.`);let{hasStartedResolution:i}=s.select(x);for(let l of Fe){if(l===t)continue;if(i("canUser",[l,e,r]))return}let c=null;if(typeof e=="object"){if(!e.kind||!e.name)throw new Error("The entity resource object is not valid.");let d=(await o.getEntitiesConfig(e.kind)).find(f=>f.name===e.name&&f.kind===e.kind);if(!d)return;c=d.baseURL+(e.id?"/"+e.id:"")}else c=`/wp/v2/${e}`+(r?"/"+r:"");let a;try{a=await(0,k.default)({path:c,method:"OPTIONS",parse:!1})}catch{return}let u=Ot(a.headers?.get("allow"));s.batch(()=>{for(let l of Fe){let d=Ge(l,e,r);n.receiveUserPermission(d,u[l]),l!==t&&n.finishResolution("canUser",[l,e,r])}})},_p=(t,e,r)=>async({dispatch:n})=>{await n(Ma("update",{kind:t,name:e,id:r}))},bp=(t,e)=>async({dispatch:r,resolveSelect:n})=>{let{rest_base:s,rest_namespace:o="wp/v2",supports:i}=await n.getPostType(t);if(!i?.autosave)return;let c=await(0,k.default)({path:`/${o}/${s}/${e}/autosaves?context=edit`});c&&c.length&&r.receiveAutosaves(e,c)},vp=(t,e)=>async({resolveSelect:r})=>{await r.getAutosaves(t,e)},Sp=()=>async({dispatch:t,resolveSelect:e})=>{let n=(await e.getEntityRecords("root","theme",{status:"active"}))?.[0]?._links?.["wp:user-global-styles"]?.[0]?.href;if(!n)return;let s=n.match(/\/(\d+)(?:\?|$)/),o=s?Number(s[1]):null;o&&t.__experimentalReceiveCurrentGlobalStylesId(o)},Rp=()=>async({resolveSelect:t,dispatch:e})=>{let r=await t.getCurrentTheme(),n=await(0,k.default)({path:`/wp/v2/global-styles/themes/${r.stylesheet}?context=view`});e.__experimentalReceiveThemeBaseGlobalStyles(r.stylesheet,n)},xp=()=>async({resolveSelect:t,dispatch:e})=>{let r=await t.getCurrentTheme(),n=await(0,k.default)({path:`/wp/v2/global-styles/themes/${r.stylesheet}/variations?context=view`});e.__experimentalReceiveThemeGlobalStyleVariations(r.stylesheet,n)},Na=()=>async({resolveSelect:t,dispatch:e})=>{let r=await t.__experimentalGetCurrentGlobalStylesId(),s=(r?await t.getEntityRecord("root","globalStyles",r):void 0)?._links?.["version-history"]?.[0]?.href;if(s){let i=(await(0,k.default)({url:s}))?.map(c=>Object.fromEntries(Object.entries(c).map(([a,u])=>[Tr(a),u])));e.receiveThemeGlobalStyleRevisions(r,i)}};Na.shouldInvalidate=t=>t.type==="SAVE_ENTITY_RECORD_FINISH"&&t.kind==="root"&&!t.error&&t.name==="globalStyles";var Tp=()=>async({dispatch:t})=>{let e=await po();t({type:"RECEIVE_BLOCK_PATTERNS",patterns:e})},Cp=()=>async({dispatch:t})=>{let e=await(0,k.default)({path:"/wp/v2/block-patterns/categories"});t({type:"RECEIVE_BLOCK_PATTERN_CATEGORIES",categories:e})},Ip=()=>async({dispatch:t,resolveSelect:e})=>{let n=(await e.getEntityRecords("taxonomy","wp_pattern_category",{per_page:-1,_fields:"id,name,description,slug",context:"view"}))?.map(s=>({...s,label:(0,Oa.decodeEntities)(s.name),name:s.slug}))||[];t({type:"RECEIVE_USER_PATTERN_CATEGORIES",patternCategories:n})},Ap=()=>async({dispatch:t,select:e,registry:r})=>{let n=await(0,k.default)({path:(0,_e.addQueryArgs)("/wp-block-editor/v1/navigation-fallback",{_embed:!0})}),s=n?._embedded?.self;r.batch(()=>{if(t.receiveNavigationFallbackId(n?.id),!s)return;let i=!e.getEntityRecord("postType","wp_navigation",n.id);t.receiveEntityRecords("postType","wp_navigation",s,void 0,i),t.finishResolution("getEntityRecord",["postType","wp_navigation",n.id])})},La=t=>async({dispatch:e,registry:r,resolveSelect:n})=>{let s=await(0,k.default)({path:(0,_e.addQueryArgs)("/wp/v2/templates/lookup",t)});await n.getEntitiesConfig("postType");let o=window?.__experimentalTemplateActivate&&s?.wp_id||s?.id;o&&(s.id=o,r.batch(()=>{e.receiveDefaultTemplateId(t,o),e.receiveEntityRecords("postType",s.type,[s]),e.finishResolution("getEntityRecord",["postType",s.type,o])}))};La.shouldInvalidate=t=>t.type==="RECEIVE_ITEMS"&&t.kind==="root"&&t.name==="site";var Pa=(t,e,r,n={})=>async({dispatch:s,registry:o,resolveSelect:i})=>{let a=(await i.getEntitiesConfig(t)).find(p=>p.name===e&&p.kind===t);if(!a)return;n._fields&&(n={...n,_fields:[...new Set([...H(n._fields)||[],a.revisionKey||D])].join()});let u=(0,_e.addQueryArgs)(a.getRevisionsUrl(r),n),l,d,f={},h=a.supportsPagination&&n.per_page!==-1;try{d=await(0,k.default)({path:u,parse:!h})}catch{return}d&&(h?(l=Object.values(await d.json()),f.totalItems=parseInt(d.headers.get("X-WP-Total"))):l=Object.values(d),n._fields&&(l=l.map(p=>(n._fields.split(",").forEach(g=>{p.hasOwnProperty(g)||(p[g]=void 0)}),p))),o.batch(()=>{if(s.receiveRevisions(t,e,r,l,n,!1,f),!n?._fields&&!n.context){let p=a.key||D,g=l.filter(m=>m[p]).map(m=>[t,e,r,m[p]]);s.finishResolutions("getRevision",g)}}))};Pa.shouldInvalidate=(t,e,r,n)=>t.type==="SAVE_ENTITY_RECORD_FINISH"&&r===t.name&&e===t.kind&&!t.error&&n===t.recordId;var Up=(t,e,r,n,s)=>async({dispatch:o,resolveSelect:i})=>{let a=(await i.getEntitiesConfig(t)).find(d=>d.name===e&&d.kind===t);if(!a)return;s!==void 0&&s._fields&&(s={...s,_fields:[...new Set([...H(s._fields)||[],a.revisionKey||D])].join()});let u=(0,_e.addQueryArgs)(a.getRevisionsUrl(r,n),s),l;try{l=await(0,k.default)({path:u})}catch{return}l&&o.receiveRevisions(t,e,r,l,s)},Dp=t=>async({dispatch:e,resolveSelect:r})=>{let n;try{let{rest_namespace:s="wp/v2",rest_base:o}=await r.getPostType(t)||{};n=await(0,k.default)({path:`${s}/${o}/?context=edit`,method:"OPTIONS"})}catch{return}n&&e.receiveRegisteredPostMeta(t,n?.schema?.properties?.meta?.properties)},kp=t=>async({dispatch:e})=>{let r=gn.find(n=>n.kind===t);if(r)try{let n=await r.loadEntities();if(!n.length)return;e.addEntities(n)}catch{}},Op=()=>async({dispatch:t})=>{let e=await(0,k.default)({path:"/wp-block-editor/v1/settings"});t.receiveEditorSettings(e)},Mp=()=>async({dispatch:t})=>{let e=await(0,k.default)({path:"/wp-block-editor/v1/assets"});t.receiveEditorAssets(e)};function mo(t,e){let r={...t},n=r;for(let s of e)n.children={...n.children,[s]:{locks:[],children:{},...n.children[s]}},n=n.children[s];return r}function mr(t,e){let r=t;for(let n of e){let s=r.children[n];if(!s)return null;r=s}return r}function*Va(t,e){let r=t;yield r;for(let n of e){let s=r.children[n];if(!s)break;yield s,r=s}}function*Ba(t){let e=Object.values(t.children);for(;e.length;){let r=e.pop();yield r,e.push(...Object.values(r.children))}}function yo({exclusive:t},e){return!!(t&&e.length||!t&&e.filter(r=>r.exclusive).length)}var Np={requests:[],tree:{locks:[],children:{}}};function yr(t=Np,e){switch(e.type){case"ENQUEUE_LOCK_REQUEST":{let{request:r}=e;return{...t,requests:[r,...t.requests]}}case"GRANT_LOCK_REQUEST":{let{lock:r,request:n}=e,{store:s,path:o}=n,i=[s,...o],c=mo(t.tree,i),a=mr(c,i);return a.locks=[...a.locks,r],{...t,requests:t.requests.filter(u=>u!==n),tree:c}}case"RELEASE_LOCK":{let{lock:r}=e,n=[r.store,...r.path],s=mo(t.tree,n),o=mr(s,n);return o.locks=o.locks.filter(i=>i!==r),{...t,tree:s}}}return t}function ja(t){return t.requests}function Fa(t,e,r,{exclusive:n}){let s=[e,...r],o=t.tree;for(let c of Va(o,s))if(yo({exclusive:n},c.locks))return!1;let i=mr(o,s);if(!i)return!0;for(let c of Ba(i))if(yo({exclusive:n},c.locks))return!1;return!0}function Ga(){let t=yr(void 0,{type:"@@INIT"});function e(){for(let s of ja(t)){let{store:o,path:i,exclusive:c,notifyAcquired:a}=s;if(Fa(t,o,i,{exclusive:c})){let u={store:o,path:i,exclusive:c};t=yr(t,{type:"GRANT_LOCK_REQUEST",lock:u,request:s}),a(u)}}}function r(s,o,i){return new Promise(c=>{t=yr(t,{type:"ENQUEUE_LOCK_REQUEST",request:{store:s,path:o,exclusive:i,notifyAcquired:c}}),e()})}function n(s){t=yr(t,{type:"RELEASE_LOCK",lock:s}),e()}return{acquire:r,release:n}}function Ya(){let t=Ga();function e(n,s,{exclusive:o}){return()=>t.acquire(n,s,o)}function r(n){return()=>t.release(n)}return{__unstableAcquireStoreLock:e,__unstableReleaseStoreLock:r}}var $a,Ka;var vn=E(Te(),1);var Ha=E(Te(),1),It=(0,Ha.createContext)({});It.displayName="EntityContext";var Qa=E(qa(),1);function Ja({kind:t,type:e,id:r,children:n}){let s=(0,vn.useContext)(It),o=(0,vn.useMemo)(()=>({...s,[t]:{...s?.[t],[e]:r}}),[s,t,e,r]);return(0,Qa.jsx)(It.Provider,{value:o,children:n})}var Sn=E(ne(),1),rl=E(rt(),1),nl=E(Te(),1);var el=E(ne(),1);function Xa(t,e){var r=0,n,s;e=e||{};function o(){var i=n,c=arguments.length,a,u;e:for(;i;){if(i.args.length!==arguments.length){i=i.next;continue}for(u=0;u<c;u++)if(i.args[u]!==arguments[u]){i=i.next;continue e}return i!==n&&(i===s&&(s=i.prev),i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=n,i.prev=null,n.prev=i,n=i),i.val}for(a=new Array(c),u=0;u<c;u++)a[u]=arguments[u];return i={args:a,val:t.apply(null,a)},n?(n.prev=i,i.next=n):s=i,r===e.maxSize?(s=s.prev,s.next=null):r++,n=i,i.val}return o.clear=function(){n=null,s=null,r=0},o}var Za=Xa;var $=(t=>(t.Idle="IDLE",t.Resolving="RESOLVING",t.Error="ERROR",t.Success="SUCCESS",t))($||{});var Lp=["getIsResolving","hasStartedResolution","hasFinishedResolution","isResolving","getCachedResolvers"];function At(t,e){return(0,el.useSelect)((r,n)=>t(o=>Pp(r(o)),n),e)}var Pp=Za((t=>{let e={};for(let r in t)Lp.includes(r)||Object.defineProperty(e,r,{get:()=>(...n)=>{let s=t[r](...n),o=t.getResolutionState(r,n)?.status,i;switch(o){case"resolving":i=$.Resolving;break;case"finished":i=$.Success;break;case"error":i=$.Error;break;case void 0:i=$.Idle;break}return{data:s,status:i,isResolving:i===$.Resolving,hasStarted:i!==$.Idle,hasResolved:i===$.Success||i===$.Error}}});return e}));var tl={};function Eo(t,e,r,n={enabled:!0}){let{editEntityRecord:s,saveEditedEntityRecord:o}=(0,Sn.useDispatch)(B),i=(0,nl.useMemo)(()=>({edit:(f,h={})=>s(t,e,r,f,h),save:(f={})=>o(t,e,r,{throwOnError:!0,...f})}),[s,t,e,r,o]),{editedRecord:c,hasEdits:a,edits:u}=(0,Sn.useSelect)(f=>n.enabled?{editedRecord:f(B).getEditedEntityRecord(t,e,r),hasEdits:f(B).hasEditsForEntityRecord(t,e,r),edits:f(B).getEntityRecordNonTransientEdits(t,e,r)}:{editedRecord:tl,hasEdits:!1,edits:tl},[t,e,r,n.enabled]),{data:l,...d}=At(f=>n.enabled?f(B).getEntityRecord(t,e,r):{data:null},[t,e,r,n.enabled]);return{record:l,editedRecord:c,hasEdits:a,edits:u,...d,...i}}function sl(t,e,r,n){return(0,rl.default)("wp.data.__experimentalUseEntityRecord",{alternative:"wp.data.useEntityRecord",since:"6.1"}),Eo(t,e,r,n)}var ol=E(Ie(),1),il=E(rt(),1),Rn=E(ne(),1),wo=E(Te(),1);var Vp=[];function xn(t,e,r={},n={enabled:!0}){let s=(0,ol.addQueryArgs)("",r),{data:o,...i}=At(u=>n.enabled?u(B).getEntityRecords(t,e,r):{data:Vp},[t,e,s,n.enabled]),{totalItems:c,totalPages:a}=(0,Rn.useSelect)(u=>n.enabled?{totalItems:u(B).getEntityRecordsTotalItems(t,e,r),totalPages:u(B).getEntityRecordsTotalPages(t,e,r)}:{totalItems:null,totalPages:null},[t,e,s,n.enabled]);return{records:o,totalItems:c,totalPages:a,...i}}function cl(t,e,r,n){return(0,il.default)("wp.data.__experimentalUseEntityRecords",{alternative:"wp.data.useEntityRecords",since:"6.1"}),xn(t,e,r,n)}function al(t,e,r={},n={enabled:!0}){let s=(0,Rn.useSelect)(l=>l(B).getEntityConfig(t,e),[t,e]),{records:o,...i}=xn(t,e,{...r,...r._fields?{_fields:[...new Set([...H(r._fields)||[],"_links"])].join()}:{}},n),c=(0,wo.useMemo)(()=>o?.map(l=>l[s?.key??"id"])??[],[o,s?.key]),a=(0,Rn.useSelect)(l=>{let{getEntityRecordsPermissions:d}=ye(l(B));return d(t,e,c)},[c,t,e]);return{records:(0,wo.useMemo)(()=>o?.map((l,d)=>({...l,permissions:a[d]}))??[],[o,a]),...i}}var dl=E(rt(),1),fl=E(ul(),1);function hl(t,e){let r=typeof t=="object",n=r?JSON.stringify(t):t;return r&&typeof e<"u"&&(0,fl.default)("When 'resource' is an entity object, passing 'id' as a separate argument isn't supported."),At(s=>{let o=r?!!t.id:!!e,{canUser:i}=s(B),c=i("create",r?{kind:t.kind,name:t.name}:t);if(!o){let p=i("read",t),g=c.isResolving||p.isResolving,m=c.hasResolved&&p.hasResolved,y=$.Idle;return g?y=$.Resolving:m&&(y=$.Success),{status:y,isResolving:g,hasResolved:m,canCreate:c.hasResolved&&c.data,canRead:p.hasResolved&&p.data}}let a=i("read",t,e),u=i("update",t,e),l=i("delete",t,e),d=a.isResolving||c.isResolving||u.isResolving||l.isResolving,f=a.hasResolved&&c.hasResolved&&u.hasResolved&&l.hasResolved,h=$.Idle;return d?h=$.Resolving:f&&(h=$.Success),{status:h,isResolving:d,hasResolved:f,canRead:f&&a.data,canCreate:f&&c.data,canUpdate:f&&u.data,canDelete:f&&l.data}},[n,e])}var pl=hl;function gl(t,e){return(0,dl.default)("wp.data.__experimentalUseResourcePermissions",{alternative:"wp.data.useResourcePermissions",since:"6.1"}),hl(t,e)}var Er=E(Te(),1),wr=E(ne(),1),Tn=E(jn(),1);var ml=E(Te(),1);function Ut(t,e){return(0,ml.useContext)(It)?.[t]?.[e]}var Be=E(Jc(),1);var yl=E(Hc(),1);var _o,bo=new WeakMap;function El(t){if(_o||(_o=ye(yl.privateApis)),!bo.has(t)){let e=_o.getRichTextValues([t]);bo.set(t,e)}return bo.get(t)}var vo=new WeakMap;function Bp(t){if(!vo.has(t)){let e=[];for(let r of El(t))r&&r.replacements.forEach(({type:n,attributes:s})=>{n==="core/footnote"&&e.push(s["data-fn"])});vo.set(t,e)}return vo.get(t)}function wl(t){return t.flatMap(Bp)}var So={};function Ro(t,e){let r={blocks:t};if(!e||e.footnotes===void 0)return r;let n=wl(t),s=e.footnotes?JSON.parse(e.footnotes):[];if(s.map(l=>l.id).join("")===n.join(""))return r;let i=n.map(l=>s.find(d=>d.id===l)||So[l]||{id:l,content:""});function c(l){if(!l||Array.isArray(l)||typeof l!="object")return l;l={...l};for(let d in l){let f=l[d];if(Array.isArray(f)){l[d]=f.map(c);continue}if(typeof f!="string"&&!(f instanceof Be.RichTextData))continue;let h=typeof f=="string"?Be.RichTextData.fromHTMLString(f):new Be.RichTextData(f),p=!1;h.replacements.forEach(g=>{if(g.type==="core/footnote"){let m=g.attributes["data-fn"],y=n.indexOf(m),w=(0,Be.create)({html:g.innerHTML});w.text=String(y+1),w.formats=Array.from({length:w.text.length},()=>w.formats[0]),w.replacements=Array.from({length:w.text.length},()=>w.replacements[0]),g.innerHTML=(0,Be.toHTMLString)({value:w}),p=!0}}),p&&(l[d]=typeof f=="string"?h.toHTMLString():h)}return l}function a(l){return l.map(d=>({...d,attributes:c(d.attributes),innerBlocks:a(d.innerBlocks)}))}let u=a(t);return So={...So,...s.reduce((l,d)=>(n.includes(d.id)||(l[d.id]=d),l),{})},{meta:{...e,footnotes:JSON.stringify(i)},blocks:u}}var jp=[],_l=new WeakMap;function bl(t,e,{id:r}={}){let n=Ut(t,e),s=r??n,{getEntityRecord:o,getEntityRecordEdits:i}=(0,wr.useSelect)(x),{content:c,editedBlocks:a,meta:u}=(0,wr.useSelect)(g=>{if(!s)return{};let{getEditedEntityRecord:m}=g(x),y=m(t,e,s);return{editedBlocks:y.blocks,content:y.content,meta:y.meta}},[t,e,s]),{__unstableCreateUndoLevel:l,editEntityRecord:d}=(0,wr.useDispatch)(x),f=(0,Er.useMemo)(()=>{if(!s)return;if(a)return a;if(!c||typeof c!="string")return jp;let g=i(t,e,s),y=!g||!Object.keys(g).length?o(t,e,s):g,w=_l.get(y);return w||(w=(0,Tn.parse)(c),_l.set(y,w)),w},[t,e,s,a,c,o,i]),h=(0,Er.useCallback)((g,m)=>{if(f===g)return l(t,e,s);let{selection:w,...v}=m,_={selection:w,content:({blocks:b=[]})=>(0,Tn.__unstableSerializeAndClean)(b),...Ro(g,u)};d(t,e,s,_,{isCached:!1,...v})},[t,e,s,f,u,l,d]),p=(0,Er.useCallback)((g,m)=>{let{selection:y,...w}=m,v=Ro(g,u),_={selection:y,...v};d(t,e,s,_,{isCached:!0,...w})},[t,e,s,u,d]);return[f,p,h]}var vl=E(Te(),1),Cn=E(ne(),1);function Sl(t,e,r,n){let s=Ut(t,e),o=n??s,{value:i,fullValue:c}=(0,Cn.useSelect)(l=>{let{getEntityRecord:d,getEditedEntityRecord:f}=l(x),h=d(t,e,o),p=f(t,e,o);return h&&p?{value:p[r],fullValue:h[r]}:{}},[t,e,o,r]),{editEntityRecord:a}=(0,Cn.useDispatch)(x),u=(0,vl.useCallback)(l=>{a(t,e,o,{[r]:l})},[a,t,e,o,r]);return[i,u,c]}var In=E(Te(),1);var xo={activeUsers:[],getAbsolutePositionIndex:()=>null,getDebugData:()=>({doc:{},clients:{},userMap:{}}),isCurrentUserDisconnected:!1};function Rl(t,e){let r=e??t.getCurrentState();return{activeUsers:r,getAbsolutePositionIndex:n=>t.getAbsolutePositionIndex(n),getDebugData:()=>t.getDebugData(),isCurrentUserDisconnected:r.find(n=>n.isMe)?.isConnected===!1}}function Fp(t,e){let[r,n]=(0,In.useState)(xo);return(0,In.useEffect)(()=>{if(t===null||e===null){n(xo);return}let s=`postType/${e}`,o=t.toString(),i=Wc()?.getAwareness(s,o);if(!i){n(xo);return}return i.setUp(),n(Rl(i)),i?.onStateChange(a=>{n(Rl(i,a))})},[t,e]),r}function xl(t,e){return Fp(t,e).activeUsers}var Tl={};ua(Tl,{useEntityRecordsWithPermissions:al,RECEIVE_INTERMEDIATE_RESULTS:Mt,useActiveCollaborators:xl});var To=[...pn,...gn.filter(t=>!!t.name)],Gp=To.reduce((t,e)=>{let{kind:r,name:n,plural:s}=e,o=tt(r,n);if(t[o]=(i,c,a)=>(T(r,n,o,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecord"}),le(i,r,n,c,a)),s){let i=tt(r,s,"get");t[i]=(c,a)=>(T(r,n,i,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecords"}),En(c,r,n,a))}return t},{}),Yp=To.reduce((t,e)=>{let{kind:r,name:n,plural:s}=e,o=tt(r,n);if(t[o]=(i,c)=>(T(r,n,o,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecord"}),bn(r,n,i,c)),s){let i=tt(r,s,"get");t[i]=(...c)=>(T(r,s,i,{isShorthandSelector:!0,alternativeFunctionName:"getEntityRecords"}),gr(r,n,...c)),t[i].shouldInvalidate=c=>gr.shouldInvalidate(c,r,n)}return t},{}),$p=To.reduce((t,e)=>{let{kind:r,name:n}=e,s=tt(r,n,"save");t[s]=(i,c)=>(T(r,n,s,{isShorthandSelector:!0,alternativeFunctionName:"saveEntityRecord"}),ao(r,n,i,c));let o=tt(r,n,"delete");return t[o]=(i,c,a)=>(T(r,n,o,{isShorthandSelector:!0,alternativeFunctionName:"deleteEntityRecord"}),co(r,n,i,c,a)),t},{}),Kp=()=>({reducer:oa,actions:{...$a,...lo,...$p,...Ya()},selectors:{...Ka,...ro,...Gp},resolvers:{...go,...Yp}}),B=(0,An.createReduxStore)(x,Kp());ye(B).registerPrivateSelectors(Js);ye(B).registerPrivateActions(uo);(0,An.register)(B);return Nl(zp);})();